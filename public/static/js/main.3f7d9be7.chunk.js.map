{"version":3,"sources":["services/httpService.js","services/socketService.js","services/boardService.js","store/actions/boardActions.js","services/userService.js","store/actions/userActions.js","pages/Home.jsx","store/actions/systemActions.js","cmps/Boardbar.jsx","cmps/Activities.jsx","cmps/ActivitiesModal.jsx","cmps/Filter.jsx","cmps/BoardHeaderModal.jsx","cmps/BoardHeader.jsx","cmps/Notifications.jsx","cmps/Navbar.jsx","cmps/task-cmps/Members.jsx","cmps/task-cmps/Status.jsx","cmps/task-cmps/Date.jsx","cmps/task-cmps/Priority.jsx","services/cloudinaryService.js","cmps/task-cmps/Reply.jsx","cmps/task-cmps/Update.jsx","cmps/task-cmps/Updates.jsx","cmps/task-cmps/Tags.jsx","cmps/Task.jsx","cmps/Group.jsx","cmps/Popup.jsx","mobile-pages/MobileNav.jsx","cmps/Dashboard.jsx","pages/Board.jsx","store/actions/changesActions.js","pages/Boards.jsx","pages/Login.jsx","pages/Signup.jsx","pages/UserProfile.jsx","cmps/my-week-cmps/UpcomingTasks.jsx","pages/MyWeek.jsx","mobile-pages/MobActivitiesModal.jsx","routes.js","App.jsx","services/serviceWorker.js","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/reducers/systemReducer.js","store/store.js","index.js"],"names":["axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","response","status","socket","setup","io","terminate","on","eventName","cb","off","emit","boardService","loadBoards","addBoard","removeBoard","boardId","httpService","updateBoard","addGroup","board","loggedUser","group","_makeid","Date","now","groups","push","handleBoardChanges","fullName","err","removeGroup","groupId","filter","currGroup","isGroup","id","name","updateGroup","updatedGroup","desc","map","addTask","taskName","task","createdAt","members","priority","dueDate","updates","lastUpdated","isSelected","posts","tags","groupIdx","findIndex","tasks","removeTask","taskId","currTask","isTask","length","splice","updateTask","updatedTask","boards","boardCreator","_id","imgUrl","newBoard","changes","changedAt","byUser","activityLog","boardToSave","socketService","text","possible","i","charAt","Math","floor","random","dispatch","type","recieveUpdate","userService","loadUsers","getUserById","login","signup","guestLogin","markAsRead","updateUser","logout","notifyUsers","getCurrUser","JSON","parse","sessionStorage","getItem","users","notifications","forEach","notification","isRead","userId","user","userCred","_handleLogin","isAdmin","birthDay","company","phoneNumber","newUser","Promise","reject","username","password","content","updatedUser","clear","member","userToUpdate","find","unshift","setItem","stringify","_Home","state","isLoading","setState","props","history","this","video","React","createRef","className","src","alt","to","onClick","current","play","ref","autoPlay","muted","Component","mapDispatchToProps","Home","connect","boardReducer","userReducer","showSnackbar","msg","dispath","hideSnackbar","_Boardbar","selectedBoardId","isSnackbarOpen","isShown","searchVal","isModalShown","selectedBoardName","onAddBoard","notif","onBoardRemove","match","params","displayPopup","idx","onToggleShown","toggleBoardbar","onToggleModal","handleSearch","toLowerCase","includes","handleSearchChange","target","value","updatedBoard","isBoardbarShown","setTimeout","currBoardId","filteredBoards","window","innerWidth","style","color","location","pathname","transform","onChange","placeholder","paddingLeft","key","onMoveToBoard","ev","stopPropagation","Boardbar","withRouter","Activities","toggleIsShown","activities","getInitials","moveToProfile","activity","moment","format","_ActivitiesModal","isOrderReversed","isFilterOpen","filterBy","handleChange","toggleFilter","split","firstName","lastName","initials","toUpperCase","dates","reduce","acc","Object","keys","date","activitiesNotRead","getActivityDates","getActivityMembers","applyFilter","onToggleActivities","boardName","Fade","in","onSetFilter","onClearLog","ActivitiesModal","setFilter","Filter","filterKey","filterValue","formatted","getBoardDates","isFiltersOpen","memberId","taskPriority","taskStatus","BoardHeaderModal","isInnerModal","toggleInnerModal","closeInnerModal","onToggleFilters","isFiltering","isBoardShown","showBoard","toggleOptionsModal","showDashboard","_BoardHeader","isActivitiesOpen","isUsersOpen","elSetting","isOptionsOpen","handleChangeName","handleChangeDesc","focusText","document","execCommand","onEditBoard","handleMenuOpen","currentTarget","handleMenuClose","onToggleUsers","onRemoveMemberFromBoard","onAddUserToBoard","goToUserProfile","onCloseFilters","editableName","editableDescription","searchInput","prevProps","prevState","firstNameChar","lastNameChar","values","some","usersToAdd","activitiesRead","onFocus","innerRef","html","disabled","isAuth","onBlur","onKeyDown","blur","_getMemeberInitials","toggleModal","onAddGroup","focus","input","BoardHeader","Notifications","isModalOpen","onRemoveNotifications","removeNotifications","Fragment","fromNow","_Navbar","isNotificationShown","toggleNotifications","onMarkAsRead","onLogout","data-title","Navbar","Members","modalPosition","openModal","isUsersShown","onRemoveMemberFromTask","onAddUserToTask","Status","isStatusShown","selected","handleDateChange","dateFormat","Priority","isPriorityShown","cloudinaryService","uploadImg","img","UPLOAD_URL","formData","FormData","append","fetch","body","json","Reply","txt","isEditMode","isOptionsModal","toggleEditMode","replyTxt","updateReply","newReply","newReplies","update","replies","reply","updateNote","removeReply","replyId","Update","onReply","newUpdate","every","letter","makeid","userName","removeUpdate","updateId","sendNote","onToggleEditUpdate","editUpdate","newUpdates","borderTop","Updates","imageUploaded","files","preventDefault","newNotes","closeModal","onSubmit","htmlFor","class","hidden","Tags","tag","onAddTag","tagName","elTagInput","_getRandomColor","onEditTags","onRemoveTag","tagToRemove","onEditTag","elTag","Truncate","lines","ellipsis","width","isTagsShown","_Task","isUpdatesShown","isImageModalShown","reloadProps","handleNameChange","valueOf","onEditTask","property","translateY","clientY","innerHeight","translateX","clientX","top","left","removedMember","contentEditable","draggableId","index","provided","snapshot","isDragging","draggableProps","dragHandleProps","backgroundColor","onRemoveTask","onToggleImageModal","Task","_Group","ElGroupSettings","elGroupColors","handleColorsOpen","handleColorsToggle","onChangeGroupColor","onEditGroup","elInputAdd","taskCount","percent","toolTip","round","toFixed","convertToBar","Menu","role","anchorEl","keepMounted","open","Boolean","onClose","MenuItem","onRemoveGroup","droppableId","isDraggingOver","droppableProps","onToggleUpdates","onAddTask","action","Group","Popup","isSnackbarShown","systemReducer","snackbarShown","snackbarTxt","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","message","Button","_MobileNav","isMenuShown","toggleMenuModal","closeMenuModal","MobileNav","Dashboard","boardMembers","done","stuck","other","currMember","names","working","options","colors","chart","height","stacked","toolbar","show","zoom","enabled","responsive","plotOptions","bar","xaxis","categories","legend","position","offsetY","fill","opacity","series","_Board","isDashboardShown","checkIfBoardMember","filteredBoard","lodash","cloneDeep","filterTasks","_getCurrBoard","clearFilter","changedValue","originalValue","editGroup","prevTask","editTask","onDragEnd","result","destination","source","newGroups","Array","from","draggedGroup","groupStart","groupEnd","newTasks","newTask","newGroup","newIdx","startTasks","newStartGroup","endTasks","newTaskToPaste","newFinishGroup","startIdx","endIdx","handleBoardBarSearch","val","boardBarSearch","innerwidth","groupChanges","Board","_Boards","goToBoard","Boards","_Login","isErrLogin","errMsg","onLogin","resetForm","onGuestLogin","responseFacebook","email","picture","facebookId","userID","initialValues","validate","formValues","errors","autoComplete","component","appId","fields","cssClass","callback","href","Login","_Signup","isErrSignup","onSignup","confirm","test","Signup","_UserProfile","updateProfile","userCreatedBoards","numOfUserTasks","goBack","UserProfile","modal","_UpcomingTasks","isAfter","add","endOf","isBefore","header","groupName","moveToUserProfile","getDaysFromNow","UpcomingTasks","_MyWeek","toggleTodayTasks","isTodayTasksShown","toggleUpcomingTasks","isUpcomingTasksShown","maxDaysLeft","minDaysLeft","belongsToUser","startOf","todaysTasks","getUpcomingTasks","upcomingTasks","applySearch","MyWeek","_MobActivitiesModal","getBoardById","path","App","routes","route","exact","hostname","initialState","userProfile","mainReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.3f7d9be7.chunk.js","sourcesContent":["import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            // window.location.assign('/#/login');\r\n        }\r\n        throw err;\r\n    }\r\n}","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n    process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\nlet socket;\r\nexport default {\r\n    setup,\r\n    terminate,\r\n    on,\r\n    off,\r\n    emit\r\n};\r\nfunction setup() {\r\n    socket = io(BASE_URL);\r\n}\r\nfunction terminate() {\r\n    socket = null;\r\n}\r\nfunction on(eventName, cb) {\r\n    socket.on(eventName, cb);\r\n}\r\nfunction off(eventName, cb) {\r\n    socket.off(eventName, cb);\r\n}\r\nfunction emit(eventName, data) {\r\n    socket.emit(eventName, data);\r\n}","import httpService from './httpService'\r\nimport socketService from './socketService';\r\n\r\nexport const boardService = {\r\n    loadBoards,\r\n    addBoard,\r\n    removeBoard,\r\n    updateBoard,\r\n    addGroup,\r\n    removeGroup,\r\n    updateGroup,\r\n    addTask,\r\n    removeTask,\r\n    updateTask,\r\n    handleBoardChanges\r\n}\r\nasync function loadBoards() {\r\n    const boards = await httpService.get('board')\r\n    return boards\r\n}\r\nfunction removeBoard(boardId) {\r\n    return httpService.delete(`board/${boardId}`)\r\n}\r\nasync function addBoard(loggedUser) {\r\n    const board = {\r\n        boardCreator: {\r\n            \"_id\": loggedUser._id,\r\n            \"fullName\": loggedUser.fullName,\r\n            \"imgUrl\": loggedUser.imgUrl,\r\n        },\r\n        \"name\": \"Board\",\r\n        \"createdAt\": Date.now(),\r\n        \"desc\": 'Enter description here',\r\n        \"members\": [{\r\n            \"_id\": loggedUser._id,\r\n            \"fullName\": loggedUser.fullName,\r\n            \"imgUrl\": loggedUser.imgUrl,\r\n        }],\r\n        \"groups\": [{\r\n            \"id\": _makeid(),\r\n            \"name\": 'group 1',\r\n            \"createdAt\": Date.now(),\r\n            \"color\": '#1a1c20',\r\n            \"lastUpdated\": Date.now(),\r\n            \"isTagsShown\": false,\r\n            \"tags\": [],\r\n            \"tasks\": [{\r\n                \"id\": _makeid(),\r\n                \"name\": 'Click me!',\r\n                \"createdAt\": Date.now(),\r\n                \"members\": [],\r\n                \"status\": '',\r\n                \"priority\": '',\r\n                \"dueDate\": Date.now(),\r\n                \"updates\": [],\r\n                \"lastUpdated\": 'yesterday',\r\n                \"isSelected\": false,\r\n                \"posts\": [],\r\n                \"tags\": []\r\n            }, {\r\n                \"id\": _makeid(),\r\n                \"name\": 'Rename here!',\r\n                \"createdAt\": Date.now(),\r\n                \"members\": [],\r\n                \"status\": '',\r\n                \"priority\": '',\r\n                \"dueDate\": Date.now(),\r\n                \"updates\": [],\r\n                \"lastUpdated\": 'yesterday',\r\n                \"isSelected\": false,\r\n                \"posts\": [],\r\n                \"tags\": []\r\n            }]\r\n        }],\r\n        \"activityLog\": []\r\n    }\r\n    const newBoard = await httpService.post(`board`, board);\r\n    return newBoard;\r\n}\r\nfunction addGroup(board, loggedUser) {\r\n    const group = {\r\n        \"id\": _makeid(),\r\n        \"name\": 'week1',\r\n        \"createdAt\": 'date',\r\n        \"color\": '#70ADB5',\r\n        \"lastUpdated\": Date.now(),\r\n        \"isTagsShown\": false,\r\n        \"tags\": [],\r\n        \"tasks\": [{\r\n            \"id\": _makeid(),\r\n            \"name\": 'Click here!',\r\n            \"createdAt\": Date.now(),\r\n            \"members\": [],\r\n            \"status\": '',\r\n            \"priority\": '',\r\n            \"dueDate\": Date.now(),\r\n            \"updates\": [],\r\n            \"lastUpdated\": 'yesterday',\r\n            \"isSelected\": false,\r\n            \"posts\": [],\r\n            \"tags\": []\r\n        }]\r\n    }\r\n    try {\r\n        board.groups.push(group)\r\n        const desc = `${loggedUser.fullName} Added a new group.`\r\n        return handleBoardChanges(desc, loggedUser, board)\r\n    } catch (err) {\r\n        console.log('boardService: Couldn\\'t add group');\r\n        throw err;\r\n    }\r\n}\r\nfunction removeGroup(groupId, board, loggedUser) {\r\n    let group = null;\r\n    board.groups = board.groups.filter(currGroup => {\r\n        const isGroup = currGroup.id === groupId;\r\n        if (isGroup) group = currGroup;\r\n        return !isGroup;\r\n    })\r\n    const desc = `${loggedUser.fullName} Removed group: ${group.name}`\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\nfunction updateGroup(updatedGroup, board, desc, loggedUser) {\r\n    board.groups = board.groups.map(group => group.id === updatedGroup.id ? updatedGroup : group)\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\nfunction removeTask(taskId, board, group, loggedUser) {\r\n    let task = null\r\n    const groupIdx = board.groups.findIndex(currGroup => currGroup.id === group.id)\r\n    board.groups[groupIdx].tasks = board.groups[groupIdx].tasks.filter(currTask => {\r\n        const isTask = currTask.id === taskId\r\n        if (isTask) task = currTask;\r\n        return !isTask;\r\n    })\r\n    if (board.groups[groupIdx].tasks.length === 0) {\r\n        board.groups.splice(groupIdx, 1)\r\n    }\r\n    const desc = `${loggedUser.fullName} Removed task: ${task.name} from group ${group.name}`;\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\nfunction addTask(groupId, taskName, board, loggedUser) {\r\n    const task = {\r\n        id: _makeid(),\r\n        name: taskName,\r\n        createdAt: Date.now(),\r\n        members: [],\r\n        status: '',\r\n        priority: '',\r\n        dueDate: Date.now(),\r\n        updates: [],\r\n        lastUpdated: Date.now(),\r\n        isSelected: false,\r\n        posts: [],\r\n        tags: []\r\n    }\r\n    const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n    const desc = `${loggedUser.fullName} Added a new task: ${taskName} to group ${board.groups[groupIdx].name}`\r\n    board.groups[groupIdx].tasks.push(task)\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\nfunction updateTask(updatedTask, board, desc, loggedUser) {\r\n    board.groups = board.groups.map(group => {\r\n        group.tasks = group.tasks.map(task => task.id === updatedTask.id ? updatedTask : task)\r\n        return group;\r\n    })\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\nfunction handleBoardChanges(desc, loggedUser, board) {\r\n    if (!desc) return updateBoard(board)\r\n    const changes = {\r\n        id: _makeid(),\r\n        changedAt: Date.now(),\r\n        desc,\r\n        byUser: {\r\n            _id: loggedUser._id,\r\n            fullName: loggedUser.fullName,\r\n            imgUrl: loggedUser.imgUrl\r\n        },\r\n    }\r\n    const updatedBoard = { ...board, activityLog: [changes, ...board.activityLog,] }\r\n    return updateBoard(updatedBoard)\r\n}\r\nfunction updateBoard(boardToSave) {\r\n    socketService.emit('updateBoard', boardToSave);\r\n    httpService.put(`board/${boardToSave._id}`, boardToSave)\r\n    return boardToSave\r\n}\r\nfunction _makeid(length = 7) {\r\n    var text = \"\";\r\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n    return text;\r\n}","import { boardService } from '../../services/boardService'\r\n//------------------BOARD CRUD-----------------\r\nexport function loadBoards() {\r\n    return async dispatch => {\r\n        try {\r\n            const boards = await boardService.loadBoards();\r\n            dispatch({ type: 'SET_BOARDS', boards })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t load boards');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function updateBoard(boardToSave, desc, loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            const board = boardService.handleBoardChanges(desc, loggedUser, boardToSave);\r\n            dispatch({ type: 'SET_BOARD', board })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t update board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function recieveUpdate(boardToSave) {\r\n    return dispatch => {\r\n        try {\r\n            dispatch({ type: 'SET_BOARD', board: boardToSave })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t update board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function removeBoard(boardId) {\r\n    return async dispatch => {\r\n        try {\r\n            await boardService.removeBoard(boardId);\r\n            dispatch({ type: 'REMOVE_BOARD', boardId })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t remove board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function addBoard(loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            const board = await boardService.addBoard(loggedUser);\r\n            dispatch({ type: 'ADD_BOARD', board })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t add board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n//------------------GROUP CRUD-----------------\r\nexport function removeGroup(groupId, board, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.removeGroup(groupId, board, loggedUser)\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard });\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t remove group');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function addGroup(board, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.addGroup(board, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t add group');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function editGroup(group, board, desc, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.updateGroup(group, board, desc, loggedUser)\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t edit group');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n//-----------------TASKS CRUD------------------------\r\nexport function addTask(groupId, taskName, board, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.addTask(groupId, taskName, board, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t add task');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function removeTask(taskId, board, group, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.removeTask(taskId, board, group, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t add task');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function editTask(task, board, desc, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.updateTask(task, board, desc, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t edit task');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n//-----------------FILTER ACTIONS------------------------\r\nexport function setFilter(filter) {\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filter })\r\n    }\r\n}\r\nexport function clearFilter() {\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filter: {} })\r\n    }\r\n}\r\n//---------------------BOARD BAR--------------------\r\nexport function toggleBoardbar() {\r\n    return dispatch => {\r\n        dispatch({ type: 'TOGGLE_BOARDBAR' })\r\n    }\r\n}","import httpService from './httpService';\r\nimport socketService from './socketService'\r\n\r\nexport const userService = {\r\n    loadUsers,\r\n    getUserById,\r\n    login,\r\n    signup,\r\n    guestLogin,\r\n    markAsRead,\r\n    updateUser,\r\n    logout,\r\n    notifyUsers,\r\n    getCurrUser\r\n}\r\nasync function loadUsers() {\r\n    try {\r\n        const users = await httpService.get('user')\r\n        return users;\r\n    } catch (err) {\r\n        console.log('userService: Coulnd\\'t get users');\r\n        throw err;\r\n    }\r\n}\r\nasync function markAsRead(loggedUser) {\r\n    loggedUser.notifications.forEach(notification => {\r\n        notification.isRead = true\r\n    })\r\n    updateUser(loggedUser)\r\n    try {\r\n        return loggedUser\r\n    } catch (err) {\r\n        console.log('userService: Something went wrong');\r\n        throw err;\r\n    }\r\n}\r\nasync function getUserById(userId) {\r\n    try {\r\n        const user = await httpService.get(`user/${userId}`);\r\n        return user\r\n    } catch (err) {\r\n        console.log('userService: Coulnd\\'t get user');\r\n        throw err;\r\n    }\r\n}\r\nasync function login(userCred) {\r\n    try {\r\n        const user = await httpService.post('auth/login', userCred);\r\n        return _handleLogin(user)\r\n    } catch (err) {\r\n        console.log('userService: Wrong username or password');\r\n        throw err;\r\n    }\r\n}\r\nasync function signup(userCred) {\r\n    const user = {\r\n        isAdmin: false,\r\n        boards: [],\r\n        notifications: [],\r\n        birthDay: '2nd August 1997',\r\n        company: 'adidas',\r\n        phoneNumber: '0224132124',\r\n        ...userCred\r\n    }\r\n    try {\r\n        const newUser = await httpService.post('auth/signup', user)\r\n        return _handleLogin(newUser)\r\n    } catch (err) {\r\n        console.log('userService: Couldn\\'t sign up', err);\r\n        return Promise.reject(err.response.data);\r\n        // throw err;\r\n    }\r\n}\r\nasync function guestLogin() {\r\n    try {\r\n        const user = await login({ username: 'guest', password: '12345' });\r\n        user.notifications = [{\r\n            byUser: {\r\n                _id: '5f6c5f7e27ed4400175ce1ac',\r\n                imgUrl: 'http://res.cloudinary.com/dtg7n0zye/image/upload/v1600938007/ybmioy3x7smnwhptho3x.jpg',\r\n                fullName: 'Liam Zety'\r\n            },\r\n            content: 'Liam Zety Removed a you from the board Caljul20',\r\n            createdAt: Date.now() - 1000 * 60 * 2\r\n        },\r\n        {\r\n            byUser: {\r\n                _id: '5f6c5ef927ed4400175ce1a7',\r\n                imgUrl: 'http://res.cloudinary.com/dtg7n0zye/image/upload/v1600937821/pd8tx7oddwp2wghsp9qt.jpg',\r\n                fullName: 'Osher Kabeda'\r\n            },\r\n            content: 'board: Osher Kabeda Tasked you to task - Learn the ropes',\r\n            createdAt: Date.now() - 1000 * 60 * 3\r\n        },\r\n        {\r\n            byUser: {\r\n                _id: '5f6c5f0227ed4400175ce1aa',\r\n                imgUrl: 'http://res.cloudinary.com/dtg7n0zye/image/upload/v1600937750/ztfvuok0olgwarb9kabo.jpg',\r\n                fullName: 'Roei Arazi'\r\n            },\r\n            content: 'board: Roei Arazi Added you to the board - Caljul20',\r\n            createdAt: Date.now() - 1000 * 60 * 4\r\n        }\r\n        ]\r\n        return user\r\n    } catch (err) {\r\n        console.log('userService: Couldn\\'t login as guest');\r\n        throw err;\r\n    }\r\n}\r\nasync function updateUser(user) {\r\n    const updatedUser = await httpService.put(`auth/update/${user._id}`, user)\r\n    return updatedUser\r\n}\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\nfunction getCurrUser() {\r\n    const user = JSON.parse(sessionStorage.getItem('user'));\r\n    return user;\r\n}\r\nasync function notifyUsers(content, members, loggedUser) {\r\n    const users = await loadUsers();\r\n    if (members === 'add') members = [...users]\r\n    const notification = {\r\n        byUser: {\r\n            _id: loggedUser._id,\r\n            fullName: loggedUser.fullName,\r\n            imgUrl: loggedUser.imgUrl\r\n        },\r\n        content,\r\n        createdAt: Date.now()\r\n    }\r\n    members.forEach(member => {\r\n        if (member._id === loggedUser._id) return;\r\n        let userToUpdate = users.find(user => user._id === member._id);\r\n        if (!userToUpdate) {\r\n            console.log('can\\'t updated user:', userToUpdate);\r\n            return;\r\n        }\r\n        userToUpdate.notifications.unshift(notification);\r\n        userService.updateUser(userToUpdate);\r\n        socketService.emit('send-notif', { userId: member._id, notification });\r\n    })\r\n}\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}\r\n","import { userService } from \"../../services/userService\";\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            const users = await userService.loadUsers();\r\n            dispatch({ type: 'SET_USERS', users })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t load users');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function login(userCred) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.login(userCred);\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t login');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function signup(userCred) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.signup(userCred);\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t signup', err);\r\n            return Promise.reject(err);\r\n        }\r\n    }\r\n}\r\nexport function guestLogin() {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.guestLogin();\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t login as a guest');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function markAsRead(loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.markAsRead(loggedUser);\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t login as a guest');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function removeNotifications(loggedUser) {\r\n    const user = loggedUser\r\n    user.notifications = []\r\n\r\n    return async dispatch => {\r\n        try {\r\n            userService.updateUser(loggedUser)\r\n            dispatch({ type: 'UPDATE_PROFILE', user })\r\n        } catch (err) {\r\n            console.log('ERROR, couldnt remove notifications', err);\r\n        }\r\n    }\r\n\r\n}\r\nexport function updateUser(loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            userService.updateUser(loggedUser)\r\n            dispatch({ type: 'SET_USER', user: loggedUser })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t update user');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function logout() {\r\n    return dispatch => {\r\n        try {\r\n            userService.logout();\r\n            dispatch({ type: 'SET_USER', user: null })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t logout');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\n// Inside imports\r\nimport { loadBoards } from '../store/actions/boardActions'\r\nimport { guestLogin } from '../store/actions/userActions'\r\n\r\nclass _Home extends Component {\r\n    state = {\r\n        isLoading: false\r\n    }\r\n    componentDidMount() {\r\n        this.video = React.createRef();\r\n    }\r\n\r\n    guestLogin = async () => {\r\n        this.setState({ isLoading: true })\r\n\r\n        await this.props.guestLogin()\r\n        await this.props.loadBoards()\r\n\r\n        this.setState({ isLoading: false })\r\n\r\n        this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n\r\n    render() {\r\n        if (this.state.isLoading) return (\r\n            <div className=\"loader-container flex justify-center align-center\">\r\n                <img src=\"loading.gif\" alt=\"\" />\r\n            </div>\r\n        )\r\n        return (\r\n            <section className=\"home flex column\">\r\n                <main className=\"home-main flex align-center  \">\r\n                    <div className=\"home-login-sign-cta absolute\">\r\n                        <NavLink to=\"/login\">\r\n                            <button>Login</button>\r\n                        </NavLink>\r\n                        <NavLink to=\"/signup\">\r\n                            <button>Sign-up</button>\r\n                        </NavLink>\r\n                    </div>\r\n                    <div className=\"col-left flex align-center justify-center padding-x-30  column\">\r\n                        <h1>Join the future.</h1>\r\n                        <div className=\"inner-wrapper\">\r\n                            <p>The next step in multi-planning and productivity! <br />\r\n                                <span>Task-us </span> will help you keep track of hundreds of tasks. <br />\r\n                            An efficient way to manage your co-workers / employees. <br />\r\n                            Half the hassle and twice the fun.\r\n                        </p>\r\n                            <button onClick={this.guestLogin} className=\"guest-button \">Try As a Guest!</button>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div className=\"col-right flex align-center justify-center\">\r\n                        <video onClick={() => this.video.current.play()} ref={this.video} autoPlay muted src=\"taskus-home-video.mp4\"></video>\r\n                    </div>\r\n                </main>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    guestLogin\r\n}\r\nexport const Home = connect(mapStateToProps, mapDispatchToProps)(_Home);","export function loading() {\r\n  return dispatch => {\r\n    dispatch({ type: 'LOADING_START' })\r\n  }\r\n}\r\nexport function doneLoading() {\r\n  return dispatch => {\r\n    dispatch({ type: 'LOADING_DONE' })\r\n  }\r\n}\r\nexport function showSnackbar(msg) {\r\n  return dispath => {\r\n    dispath({ type: 'SHOW_SNACKBAR', msg })\r\n  }\r\n}\r\nexport function hideSnackbar() {\r\n  return dispatch => {\r\n    dispatch({ type: 'HIDE_SNACKBAR' })\r\n  }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { BsFillPlusCircleFill, } from 'react-icons/bs';\r\nimport { MdDelete } from 'react-icons/md'\r\nimport { AiOutlineRight } from 'react-icons/ai';\r\n// inside imports\r\nimport { updateUser } from '../store/actions/userActions.js';\r\nimport { showSnackbar, hideSnackbar } from '../store/actions/systemActions.js';\r\nimport socketService from '../services/socketService';\r\nimport { userService } from '../services/userService.js';\r\nimport {\r\n    removeBoard, addBoard, toggleBoardbar,\r\n    updateBoard, recieveUpdate, loadBoards\r\n} from '../store/actions/boardActions.js';\r\n\r\nclass _Boardbar extends Component {\r\n    state = {\r\n        selectedBoardId: '',\r\n        isSnackbarOpen: false,\r\n        isShown: '',\r\n        searchVal: '',\r\n        isModalShown: false,\r\n        selectedBoardName: ''\r\n    }\r\n    componentDidMount() {\r\n      \r\n        socketService.on('updatedBoard', updatedBoard => {\r\n            this.props.recieveUpdate(updatedBoard)\r\n        });\r\n        socketService.on('reloadBoards', () => {\r\n            this.props.loadBoards()\r\n        })\r\n        socketService.on('accept-notif', (notification) => {\r\n            this.props.updateUser({ ...this.props.loggedUser, notifications: [notification, ...this.props.loggedUser.notifications] })\r\n        })\r\n        socketService.emit('user', this.props.loggedUser._id)\r\n        this.setState({ isShown: this.props.isBoardbarShown })\r\n\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard')\r\n        socketService.off('reloadBoards')\r\n        socketService.off('accept-notif')\r\n    }\r\n    displayPopup(msg) {\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n    onMoveToBoard(id) {\r\n        this.props.history.push(`/board/${id}`)\r\n    }\r\n    onAddBoard = async () => {\r\n        const { loggedUser } = this.props;\r\n        await this.props.addBoard(this.props.loggedUser)\r\n        const notif = `${loggedUser.fullName} added a new board`\r\n        userService.notifyUsers(notif, 'add', loggedUser)\r\n        socketService.emit('add-delete-board')\r\n    }\r\n    onBoardRemove = async () => {\r\n        const { boards, match, history, removeBoard, loggedUser } = this.props;\r\n        const { selectedBoardId } = this.state;\r\n        const board = boards.find(board => board._id === selectedBoardId);\r\n        const notif = `${loggedUser.fullName} deleted ${board.name}`;\r\n        userService.notifyUsers(notif, board.members, loggedUser)\r\n        const { id } = match.params;\r\n        if (boards.length === 1) {\r\n            return;\r\n        }\r\n        await removeBoard(selectedBoardId);\r\n        socketService.emit('add-delete-board')\r\n        this.displayPopup('Removed board.');\r\n        if (id === selectedBoardId) {\r\n            const idx = boards.findIndex(board => board._id !== selectedBoardId)\r\n            history.push(`/board/${boards[idx]._id}`)\r\n        }\r\n    }\r\n    onToggleShown = () => {\r\n        this.props.toggleBoardbar()\r\n        this.setState({ isShown: !this.state.isShown })\r\n    }\r\n\r\n\r\n    onToggleModal = () => {\r\n        this.setState({ isModalShown: !this.state.isModalShown })\r\n    }\r\n\r\n    handleSearch = () => {\r\n        const filteredBoards =\r\n            this.props.boards.filter(board => board.name.toLowerCase().includes(this.state.searchVal.toLowerCase()))\r\n        return filteredBoards\r\n    }\r\n    handleSearchChange = ({target}) => {\r\n        this.setState({searchVal:target.value})\r\n    }\r\n    render() {\r\n        const currBoardId = this.props.match.params.id;\r\n        const { isShown, isModalShown, selectedBoardName } = this.state;\r\n        const { loggedUser } = this.props;\r\n        const filteredBoards = this.handleSearch()\r\n         if(window.innerWidth <= 1050) return <div></div>\r\n        return (\r\n            <section className={`boardbar fixed column ${isShown && 'board-bar-shown'}`}>\r\n                <div onClick={this.onToggleShown} className=\"board-bar-toggle-container\">\r\n                    <AiOutlineRight style={{ color: this.props.location.pathname.includes('/myweek') && '#151515', transform: isShown && 'rotate(180deg)' }}\r\n                        className=\"board-bar-toggle\" />\r\n                </div>\r\n                {isShown && <div className=\"boardbar-header\">\r\n                    <h1>Boards</h1>\r\n                    <BsFillPlusCircleFill onClick={this.onAddBoard} />\r\n                </div>}\r\n                {isShown && <input onChange={this.handleSearchChange} type=\"text\" placeholder=\"Search a Board\" />}\r\n                <ul>\r\n                    {isShown && filteredBoards.map((board, idx) => {\r\n                        return <li\r\n                            style={{ paddingLeft: (loggedUser._id === board.boardCreator._id || loggedUser.isAdmin) ? '' : '25px' }}\r\n                            className={`flex align-center cursor-pointer ${board._id === currBoardId && 'curr-board'}`}\r\n                            key={idx}\r\n                            onClick={() => this.onMoveToBoard(board._id)} >\r\n                            {\r\n                                (loggedUser._id === board.boardCreator._id || loggedUser.isAdmin) &&\r\n                                <MdDelete onClick={ev => {\r\n                                    ev.stopPropagation()\r\n                                    this.setState({ selectedBoardId: board._id, selectedBoardName: board.name });\r\n                                    this.onToggleModal()\r\n                                }\r\n                                } />\r\n                            }\r\n                            <h5 style={{ color: (loggedUser._id === board.boardCreator._id || loggedUser.isAdmin) ? \"#0085ff\" : \"#333333\" }}>\r\n                                {board.name}\r\n                            </h5>\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n                {isModalShown && <div className=\"modal-screen-wrapper\" onClick={this.onToggleModal}>\r\n                    <div className=\"confirm-board-delete flex column space-between\">\r\n                        <h1>Are you sure you want to delete {selectedBoardName}?</h1>\r\n                        <p>You can't take this back</p>\r\n                        <section className=\"flex\">\r\n                            <button className=\"cancel-button\" onClick={this.onToggleModal}>Cancel</button>\r\n                            <button className=\"delete-button\" onClick={this.onBoardRemove}>Delete</button>\r\n                        </section>\r\n                    </div>\r\n                </div>}\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        isBoardbarShown: state.boardReducer.isBoardbarShown,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    removeBoard,\r\n    addBoard,\r\n    showSnackbar,\r\n    hideSnackbar,\r\n    toggleBoardbar,\r\n    recieveUpdate,\r\n    loadBoards,\r\n    updateUser\r\n}\r\nexport const Boardbar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Boardbar));","import React, { Component, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport { IoIosArrowDropdown } from 'react-icons/io'\r\n\r\nexport class Activities extends Component {\r\n\r\n    state = {\r\n        isShown: true,\r\n    }\r\n    toggleIsShown = () => {\r\n        this.setState({ isShown: !this.state.isShown })\r\n\r\n    }\r\n\r\n    render() {\r\n        const { type, activities, getInitials, moveToProfile } = this.props\r\n        return (\r\n            <div className={\r\n                `${type === 'activitiesRead'\r\n                    ? 'activity-list'\r\n                    : 'activity-list-not-read'}\r\n                     column flex  padding-y-15`}>\r\n\r\n                <h1 className=\"flex space-between\">\r\n                    <Fragment>\r\n                        {type === 'activitiesRead' ? 'Activities Read' : 'New Activities'}  {activities.length}\r\n                        <IoIosArrowDropdown\r\n                            onClick={this.toggleIsShown}\r\n                            className={this.state.isShown ? \" toggle-btn rotate0\" : \" toggle-btn rotate90\"} />\r\n\r\n                    </Fragment>\r\n                </h1>\r\n\r\n                {activities.length === 0\r\n                    ? //no activities \r\n                    (type === 'activitiesRead'\r\n                        ? <h3 className=\"padding-x-15\">No read board activities!</h3>\r\n\r\n                        : <h3 className=\"padding-x-15\">No new board activities!</h3>\r\n\r\n                    )\r\n                    : this.state.isShown && // found activities\r\n                    activities.map((activity, idx) => {\r\n                        return (\r\n                            <div key={idx} className=\"activity flex align-center padding-y-15 \">\r\n                                <div className=\"user-img-container flex align-center\">\r\n                                    <div className=\"date-container\">\r\n                                        <p className=\"date-created\">\r\n                                            {moment(activity.createdAt).format(\"DD MMM\")}\r\n                                        </p>\r\n                                    </div>\r\n                                    {activity.byUser.imgUrl ? <img className=\"cursor-pointer\" onClick={() => moveToProfile(activity.byUser._id)} src={activity.byUser.imgUrl} alt=\"\" /> :\r\n                                        <div onClick={() => moveToProfile(activity.byUser._id)}\r\n                                         className=\"member-letter flex align-center justify-center\">\r\n\r\n                                        {getInitials(activity.byUser.fullName)}\r\n                                        \r\n                                        </div>}\r\n                                    <h2 onClick={() => moveToProfile(activity.byUser._id)}>{activity.byUser.fullName}</h2>\r\n                                </div>\r\n                                <div className=\"activity-desc-container flex align-center\">\r\n                                    <p>\r\n                                        {activity.desc}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                        )\r\n                    })\r\n                }\r\n\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n","import React, { Component, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport { AiOutlineClose } from 'react-icons/ai';\r\nimport { Fade } from '@material-ui/core';\r\nimport { VscListFilter } from 'react-icons/vsc';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Activities } from './Activities';\r\n\r\nclass _ActivitiesModal extends Component {\r\n    state = {\r\n        isOrderReversed: false,\r\n        isFilterOpen: false,\r\n        filterBy: {},\r\n        searchVal: '',\r\n    }\r\n    get activities() {\r\n        const { activityLog } = this.props;\r\n        const { _id } = this.props.loggedUser;\r\n        return [activityLog.filter(activity => activity[_id]), activityLog.filter(activity => !activity[_id])]\r\n    }\r\n    getInitials(fullName) {\r\n        const [firstName, lastName] = fullName.split(' ');\r\n        let initials = firstName.charAt(0).toUpperCase();\r\n        if (lastName) initials += lastName.charAt(0).toUpperCase();\r\n        return initials;\r\n    }\r\n    handleChange = ({ target }) => {\r\n        this.setState({ searchVal: target.value })\r\n    }\r\n    toggleFilter = () => {\r\n        this.setState({ isFilterOpen: !this.state.isFilterOpen });\r\n    }\r\n    onSetFilter(key, value) {\r\n        const filterBy = { ...this.state.filterBy }\r\n        if (filterBy[key] === value) value = '';\r\n        this.setState({ filterBy: { ...filterBy, [key]: value } })\r\n    }\r\n    moveToProfile = (userId) => {\r\n        this.props.history.push(`/user/${userId}`)\r\n    }\r\n    getActivityDates() {\r\n        const activities = this.props.activityLog;\r\n        const dates = activities.reduce((acc, activity) => {\r\n            const date = moment(activity.createdAt).format('DD MMM');\r\n            acc[date] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(dates);\r\n    }\r\n    getActivityMembers() {\r\n        const activities = this.props.activityLog;\r\n        const members = activities.reduce((acc, activity) => {\r\n            acc[activity.byUser.fullName] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(members)\r\n    }\r\n    applyFilter(activities) {\r\n        let res = [...activities];\r\n        const { filterBy, searchVal } = this.state;\r\n        if (filterBy.date) res = res.filter(activity => moment(activity.createdAt).format('DD MMM') === filterBy.date);\r\n        if (filterBy.member) res = res.filter(activity => activity.byUser.fullName === filterBy.member)\r\n        if (searchVal) res = res.filter(activity => {\r\n            return activity.desc.toLowerCase().includes(searchVal)\r\n                || activity.byUser.fullName.toLowerCase().includes(searchVal)\r\n        })\r\n        return res;\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.activityLog) return <h1>Loading...</h1>\r\n        const { isFilterOpen, filterBy, searchVal } = this.state;\r\n        let [activities, activitiesNotRead] = this.activities;\r\n        const dates = this.getActivityDates();\r\n        const members = this.getActivityMembers();\r\n        activities = this.applyFilter(activities)\r\n        activitiesNotRead = this.applyFilter(activitiesNotRead)\r\n        return (\r\n            <section className=\"activities flex column\">\r\n                <header className=\"padding-x-15 padding-y-15\">\r\n                    <AiOutlineClose onClick={this.props.onToggleActivities} />\r\n                    <h1><span>{this.props.boardName}</span> Log</h1>\r\n                    <div className='filters-container space-between flex align-center'>\r\n                        <input value={searchVal} onChange={this.handleChange} type=\"text\" placeholder=\"Search\" />\r\n                        <div className=\"filter-outer-container flex relative\">\r\n                            <button className=\"flex align-center\" onClick={this.toggleFilter}><VscListFilter /> Filter</button>\r\n                            {isFilterOpen &&\r\n                                <Fragment>\r\n                                    <div className=\"modal-screen-wrapper\" onClick={this.toggleFilter}></div>\r\n                                    <Fade in={true}>\r\n                                        <div className=\"filter-modal flex absolute\">\r\n                                            <section className=\"activity-member-filter\">\r\n                                                <h3 className=\"flex justify-center\">Member</h3>\r\n                                                <div className=\"filter-list flex justify-center align-center column\">\r\n                                                    {members.map((member, idx) => <button\r\n                                                        className={filterBy.member === member ? 'remove-filter-btn' : ''}\r\n                                                        key={idx}\r\n                                                        onClick={() => this.onSetFilter('member', member)}>{member}</button>)}\r\n                                                </div>\r\n                                            </section>\r\n                                            <section className=\"activity-date-filter\">\r\n                                                <h3 className=\"flex justify-center\">Date</h3>\r\n                                                <div className=\"filter-list flex justify-center align-center column\">\r\n                                                    {dates.map((date, idx) => <button\r\n                                                        className={filterBy.date === date ? 'remove-filter-btn' : ''}\r\n                                                        key={idx}\r\n                                                        onClick={() => this.onSetFilter('date', date)}>{date}</button>)}\r\n                                                </div>\r\n                                            </section>\r\n                                        </div>\r\n                                    </Fade>\r\n                                </Fragment>\r\n                            }\r\n                            <button onClick={this.props.onClearLog}>Clear Log</button>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n                <div className=\"all-activities-container\">\r\n                    {/* Activities which are not read */}\r\n                    <Activities getInitials={this.getInitials}\r\n                        activities={activitiesNotRead} moveToProfile={this.moveToProfile}\r\n                    />\r\n                    {/* Activities which are already read */}\r\n                    <Activities type={'activitiesRead'} getInitials={this.getInitials}\r\n                        activities={activities} moveToProfile={this.moveToProfile}\r\n                    />\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nexport const ActivitiesModal = withRouter(_ActivitiesModal)","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Fade } from '@material-ui/core';\r\nimport moment from 'moment';\r\n// inside imports\r\nimport { setFilter } from '../store/actions/boardActions';\r\n\r\nfunction _Filter(props) {\r\n    const { board, filterBy, setFilter } = props;\r\n    function onSetFilter(filterKey, filterValue) {\r\n        if (filterBy[filterKey] === filterValue) filterValue = '';\r\n        setFilter({ ...filterBy, [filterKey]: filterValue })\r\n    }\r\n    function getBoardDates() {\r\n        const dates = {};\r\n        board.groups.forEach(group => {\r\n            group.tasks.forEach(task => {\r\n                const date = moment(task.dueDate).format('DD.MM.YY');\r\n                dates[date] = task.dueDate;\r\n            })\r\n        })\r\n        const res = [];\r\n        for (let key in dates) {\r\n            res.push({ formatted: key, value: dates[key] })\r\n        }\r\n        return res;\r\n    }\r\n    if (!board) return <h1>Loading...</h1>\r\n    const { groups, members } = board;\r\n    const dates = getBoardDates();\r\n    return (\r\n        <Fade in={props.isFiltersOpen}>\r\n            <div className=\"filter-modal flex absolute\">\r\n                <section className=\"group-name-filter flex column align-center\">\r\n                    <h3>Groups</h3>\r\n                    <div className=\"filter-list\">\r\n                        {groups.map((group, idx) => <button\r\n                            className={filterBy.groupId === group.id ? 'remove-filter-btn' : ''}\r\n                            key={idx}\r\n                            onClick={() => onSetFilter('groupId', group.id)}>{group.name}</button>)}\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-member-filter flex column align-center\">\r\n                    <h3>Member</h3>\r\n                    <div className=\"filter-list\">\r\n                        {members.map((member, idx) => <button\r\n                            className={filterBy.memberId === member._id ? 'remove-filter-btn' : ''}\r\n                            key={idx}\r\n                            onClick={() => onSetFilter('memberId', member._id)}>{member.fullName}</button>)}\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-priority-filter flex column align-center\">\r\n                    <h3>Priority</h3>\r\n                    <div className=\"filter-list\">\r\n                        <button className={filterBy.taskPriority === 'low' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskPriority', 'low')}>Low</button>\r\n                        <button className={filterBy.taskPriority === 'medium' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskPriority', 'medium')}>Medium</button>\r\n                        <button className={filterBy.taskPriority === 'high' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskPriority', 'high')}>High</button>\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-status-filter flex column align-center\">\r\n                    <h3>Status</h3>\r\n                    <div className=\"filter-list\">\r\n                        <button className={filterBy.taskStatus === 'done' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskStatus', 'done')}>Done</button>\r\n                        <button className={filterBy.taskStatus === 'working on it' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskStatus', 'working on it')}>Working on it </button>\r\n                        <button className={filterBy.taskStatus === 'stuck' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskStatus', 'stuck')}>Stuck</button>\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-date-filter flex column align-center\">\r\n                    <h3>Due-Date</h3>\r\n                    <div className=\"filter-list\">\r\n                        {dates.map((date, idx) => <button\r\n                            className={filterBy.dueDate === date.value ? 'remove-filter-btn' : ''}\r\n                            key={idx}\r\n                            onClick={() => onSetFilter('dueDate', date.value)}>{date.formatted}</button>)}\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </Fade>\r\n    )\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.boardReducer.filterBy\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    setFilter\r\n}\r\nexport const Filter = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Filter));","import React, { Component, Fragment } from 'react'\r\nimport { GoSearch } from 'react-icons/go';\r\nimport { IoMdArrowDropdown } from 'react-icons/io';\r\nimport { VscListFilter } from 'react-icons/vsc';\r\nimport {Filter} from './Filter'\r\n\r\nexport  class BoardHeaderModal extends Component {\r\n\r\n    state = {\r\n        isInnerModal: false\r\n    }\r\n\r\ncomponentDidMount() {\r\n       \r\n    }\r\ntoggleInnerModal = () => {\r\n    this.setState({isInnerModal: !this.state.isInnerModal})\r\n}\r\ncloseInnerModal = () => {\r\n    this.setState({isInnerModal: false})\r\n}\r\n\r\n    render() {\r\n       const {isInnerModal} = this.state\r\n        return (\r\n            <section onClick={ev => ev.stopPropagation()} className=\"board-header-modal absolute\">\r\n               <div onClick={!this.props.isFiltersOpen ? this.props.onToggleFilters : () => { }}\r\n                                className=\"filters-outer-container relative flex align-center cursor-pointer\"  >\r\n\r\n                                {this.props.isFiltering && <div className=\"filter-active-indicator\"></div>}\r\n\r\n                                <VscListFilter className={this.props.isFiltering ? 'filter-active' : ''} />\r\n                                <h2 className={this.props.isFiltering ? 'filter-active' : ''}>Filter</h2>\r\n                                \r\n                                <Filter isFiltersOpen={this.props.isFiltersOpen} board={this.props.board} />\r\n                            </div>\r\n\r\n        \r\n                                <input  placeholder=\" Search Tasks\" type='text' onChange={this.props.handleSearch} />\r\n                              \r\n                           \r\n                        {/* MODAL */}\r\n                            <div  className=\"relative\">\r\n                                <button className=\"flex align-center\" onClick={this.toggleInnerModal}>\r\n                                    <h3 >{this.props.isBoardShown ? 'Board' : 'Dashboard'}</h3> <IoMdArrowDropdown />\r\n                                </button>\r\n                               {isInnerModal &&\r\n                               <div>\r\n                                <Fragment>\r\n                                    <div className={`options-modal absolute`}>\r\n                                        <p onClick={() => {\r\n                                            this.toggleInnerModal()\r\n                                                this.props.showBoard()\r\n                                            this.props.toggleOptionsModal()\r\n                                        }}>Board</p>\r\n                                        <p onClick={() => {\r\n                                            this.toggleInnerModal()\r\n                                                this.props.showDashboard()\r\n                                            this.props.toggleOptionsModal()\r\n                                        }}>Dashboard</p>\r\n                                    </div>\r\n                                    <div className=\"modal-screen-wrapper\" onClick={this.closeInnerModal}></div>\r\n                                </Fragment>\r\n                                </div>\r\n                            }\r\n                            </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n","import React, { Fragment } from 'react';\r\nimport ContentEditable from 'react-contenteditable';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { FiMinus,FiPlus } from 'react-icons/fi';\r\nimport { GoSearch } from 'react-icons/go'\r\nimport { VscListFilter } from 'react-icons/vsc'\r\nimport { IoMdArrowDropdown } from 'react-icons/io';\r\nimport { BsThreeDots } from 'react-icons/bs';\r\n\r\n// inside imports\r\nimport { ActivitiesModal } from './ActivitiesModal';\r\nimport { Filter } from './Filter';\r\nimport { BoardHeaderModal } from './BoardHeaderModal';\r\nimport socketService from '../services/socketService.js'\r\nimport { Fade } from '@material-ui/core';\r\n\r\nexport class _BoardHeader extends React.Component {\r\n    state = {\r\n        _id: '',\r\n        isActivitiesOpen: false,\r\n        isFiltersOpen: false,\r\n        isUsersOpen: false,\r\n        elSetting: null,\r\n        isOptionsOpen:false\r\n    }\r\n    componentDidMount() {\r\n        this.editableName = React.createRef();\r\n        this.editableDescription = React.createRef();\r\n        this.searchInput = React.createRef();\r\n        socketService.on('updatedBoard', () => {\r\n            this.setState({ board: this.props.board })\r\n        })\r\n        this.setState({ board: this.props.board, _id: this.props.board._id })\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.board._id !== this.props.board._id) {\r\n            this.setState({ board: this.props.board })\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard')\r\n    }\r\n    handleChangeName = (ev) => {\r\n        this.setState({ board: { ...this.state.board, name: ev.target.value } })\r\n    }\r\n\r\n    handleChangeDesc = (ev) => {\r\n        this.setState({ board: { ...this.state.board, desc: ev.target.value } })\r\n    }\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n    onToggleActivities = () => {\r\n        let board = this.props.board;\r\n        const { _id } = this.props.loggedUser;\r\n\r\n        if (this.state.isActivitiesOpen) {\r\n            board = {\r\n                ...board,\r\n                activityLog: board.activityLog.map(activity => {\r\n                    activity[_id] = true\r\n                    return activity\r\n                })\r\n            }\r\n        }\r\n        this.props.onEditBoard(board)\r\n        this.setState({ isActivitiesOpen: !this.state.isActivitiesOpen })\r\n    }\r\n    onToggleFilters = () => {\r\n        this.setState({ isFiltersOpen: !this.state.isFiltersOpen })\r\n    }\r\n    handleMenuOpen = (ev, boardId) => {\r\n        this.setState({ elSetting: ev.currentTarget })\r\n    }\r\n    handleMenuClose = () => {\r\n        this.setState({ elSetting: null })\r\n    }\r\n    onToggleUsers = () => {\r\n        this.setState({ isUsersOpen: !this.state.isUsersOpen })\r\n    }\r\n    onRemoveMemberFromBoard = (memberId) => {\r\n        const user = this.state.board.members.find(member => member._id === memberId)\r\n        const desc = `${this.props.loggedUser.fullName} removed ${user.fullName} from ${this.state.board.name}`\r\n        this.setState({ board: { ...this.state.board, members: this.state.board.members.filter(member => member._id !== memberId) } }, () => {\r\n            this.props.onEditBoard(this.state.board, desc)\r\n        })\r\n    }\r\n    onAddUserToBoard = (userId) => {\r\n        const newUser = this.props.users.find(user => user._id === userId)\r\n        const desc = `${this.props.loggedUser.fullName} invited ${newUser.fullName} to ${this.state.board.name}`\r\n\r\n        this.setState({ board: { ...this.state.board, members: [...this.state.board.members, newUser] } }, () => {\r\n            this.props.onEditBoard(this.state.board, desc)\r\n        })\r\n    }\r\n    goToUserProfile = (userId) => {\r\n        this.props.history.push(`/user/${userId}`)\r\n    }\r\n    onClearLog = () => {\r\n        const board = {\r\n            ...this.state.board,\r\n            activityLog: []\r\n        }\r\n        this.setState({ board }, () => {\r\n            this.props.onEditBoard(board)\r\n        })\r\n    }\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n\r\n    toggleOptionsModal = () => {\r\n        this.setState({ isOptionsOpen: !this.state.isOptionsOpen })\r\n    }\r\n    onCloseFilters = () => {\r\n        this.setState({isFiltersOpen: false})\r\n    }\r\n\r\n\r\n    render() {\r\n        if (!this.state._id) return <h1>Loading...</h1>\r\n        const { members, boardCreator } = this.state.board\r\n        const { users, loggedUser, filterBy, isBoardShown } = this.props;\r\n        const isFiltering = Object.values(filterBy).some(value => value)\r\n        const usersToAdd = users.filter(user => !members.some(member => member._id === user._id))\r\n        const activitiesNotRead = this.props.board.activityLog.filter(activity => !activity[loggedUser._id])\r\n        const activitiesRead = this.props.board.activityLog.filter(activity => activity[loggedUser._id])\r\n        return (\r\n            <section className=\"board-header flex column padding-x-30 \">\r\n                <div className=\"board-header-header flex space-between grow align-center\">\r\n                    <h1 className=\"flex align-center\">\r\n                        <ContentEditable\r\n                            onFocus={this.focusText}\r\n                            className=\"content-editable cursor-initial\"\r\n                            innerRef={this.editableName}\r\n                            html={this.state.board.name}\r\n                            disabled={!this.props.isAuth}\r\n                            onChange={this.handleChangeName}\r\n                            onBlur={() => {\r\n                                if (this.props.board.name === this.state.board.name) return\r\n                                const desc = `${loggedUser.fullName} Changed the board title from ${this.props.board.name} to ${this.state.board.name}`\r\n                                const board = {\r\n                                    ...this.props.board,\r\n                                    name: this.state.board.name\r\n                                }\r\n                                this.props.onEditBoard(board, desc)\r\n                            }}\r\n                            onKeyDown={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    ev.target.blur()\r\n                                }\r\n                            }}\r\n                        />\r\n                    </h1>\r\n                    <div className=\"board-header-right relative flex align-center\">\r\n                        <div className=\"board-users flex justify-center relative\" onClick={this.onToggleUsers}>\r\n                            {members.length === 0 && <div className=\"no-members-container relative\">\r\n                                <img src=\"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg\" alt=\"\" />\r\n                                <FiPlus className=\"no-members-icon-plus\" />\r\n                            </div>}\r\n                            {members.length !== 0 && members.map((member, idx) => {\r\n                                if (idx > 2) return <div key={member._id} className=\"board-number-of-members absolute\">\r\n                                    <span>{members.length > 9 ? '+9' : `+${members.length - 2}`}</span>\r\n                                </div>\r\n                                return <div key={idx} className=\"user-img-container\">\r\n                                    {\r\n                                        member.imgUrl ? <img src={member.imgUrl} alt=\"\" />\r\n                                            :\r\n                                            <div className=\"member-letter\">\r\n                                                {this._getMemeberInitials(member)[0]}\r\n                                                {this._getMemeberInitials(member)[1]}\r\n                                            </div>\r\n                                    }\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                        {this.state.isUsersOpen &&\r\n                            <div className=\"users-modal absolute\">\r\n                                <div className=\"board-users-box\">\r\n                                    <h3>Board Members</h3>\r\n                                    {members.map((member, idx) =>\r\n                                        <section key={idx} className=\"user-box flex space-between align-center\">\r\n                                            <div className=\"user-box-info flex align-center\" onClick={() => this.goToUserProfile(member._id)}>\r\n                                                {member.imgUrl\r\n                                                    ? <img src={member.imgUrl} alt=\"profile\" />\r\n                                                    : <div className=\"member-letter\">\r\n                                                        {this._getMemeberInitials(member)[0]}\r\n                                                        {this._getMemeberInitials(member)[1]}\r\n                                                    </div>}\r\n                                                <p className=\"member-name\">{member.fullName}</p>\r\n                                            </div>\r\n                                            {\r\n                                                (loggedUser.isAdmin || this.state.board.boardCreator._id === loggedUser._id) &&\r\n                                                <FiMinus onClick={() => this.onRemoveMemberFromBoard(member._id)} />\r\n                                            }\r\n                                        </section>\r\n                                    )}\r\n                                </div>\r\n                                <div className=\"site-users-box\">\r\n                                    <h3>Site Users</h3>\r\n                                    {usersToAdd.map(user => {\r\n                                        return <section key={user._id} className=\"user-box flex space-between align-center\">\r\n                                            <div className=\"user-box-info flex align-center\" onClick={() => this.goToUserProfile(user._id)}>\r\n                                                {\r\n                                                    user.imgUrl ? <img src={user.imgUrl} alt=\"profile\" />\r\n                                                        : <div className=\"member-letter\">\r\n                                                            {this._getMemeberInitials(user)[0]}\r\n                                                            {this._getMemeberInitials(user)[1]}\r\n                                                        </div>\r\n                                                }\r\n                                                <p className=\"member-name\">{user.fullName}</p>\r\n                                            </div>\r\n                                            {\r\n                                                (loggedUser.isAdmin || this.state.board.boardCreator._id === loggedUser._id) &&\r\n                                                <FiPlus onClick={() => this.onAddUserToBoard(user._id)} />\r\n                                            }\r\n                                        </section>\r\n                                    })}\r\n                                </div>\r\n                            </div>}\r\n                        <div onClick={this.onToggleActivities} className=\"activities-outer-container flex align-center  cursor-pointer\">\r\n                            <h2>\r\n                                Activities {\" \"}\r\n                                <span style={{ color: activitiesNotRead.length !== 0 ? '#0085ff' : '' }}>\r\n                                    {activitiesNotRead.length}\r\n                                </span> {\" \"} / {activitiesRead.length + activitiesNotRead.length}\r\n                            </h2>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"board-header-footer flex align-center space-between\">\r\n                    <div className=\"board-header-footer-left flex column space-between\">\r\n                        <h3>\r\n                            <ContentEditable\r\n                                onFocus={this.focusText}\r\n                                className=\"content-editable cursor-initial\"\r\n                                innerRef={this.editableDescription}\r\n                                html={this.state.board.desc} // innerHTML of the editable div\r\n                                disabled={!this.props.isAuth}        // use true to disable editing\r\n                                onChange={this.handleChangeDesc} // handle innerHTML change\r\n                                onBlur={() => {\r\n                                    if (this.state.board.desc === this.props.board.desc) return\r\n                                    const desc = `${loggedUser.fullName} Changed ${this.state.board.name} description to ${this.state.board.desc}`\r\n                                    const board = {\r\n                                        ...this.props.board,\r\n                                        desc: this.state.board.desc\r\n                                    }\r\n                                    this.props.onEditBoard(board, desc)\r\n                                }}\r\n                                onKeyDown={(ev) => {\r\n                                    if (ev.key === 'Enter') {\r\n                                        ev.target.blur()\r\n                                    }\r\n                                }}\r\n                            />\r\n                        </h3>\r\n                        <p className=\"created-by\">Created By:\r\n                            <NavLink to={`/user/${boardCreator._id}`}>\r\n                                {boardCreator.fullName}\r\n                            </NavLink>\r\n                        </p>\r\n                    </div>\r\n                    {window.innerWidth < 1050 ?\r\n                        <div className=\"relative\">\r\n                        <BsThreeDots onClick={this.toggleOptionsModal}/>\r\n                        {this.state.isOptionsOpen && \r\n                        <Fragment>\r\n                        <div className=\"modal-screen-wrapper flex justify-center align-center\" onClick={() => {\r\n                            this.onCloseFilters()\r\n                            this.toggleOptionsModal()\r\n                            this.props.toggleModal()\r\n                        }}>\r\n                         </div>\r\n                            <BoardHeaderModal\r\n                                isFiltersOpen={this.state.isFiltersOpen}\r\n                                toggleOptionsModal={this.toggleOptionsModal}\r\n                                onToggleFilters={this.onToggleFilters}\r\n                                isFiltering={isFiltering}\r\n                                showBoard={this.props.showBoard}\r\n                                showDashboard={this.props.showDashboard}\r\n                                handleSearch={this.props.handleSearch}\r\n                                board={this.props.board}\r\n                                toggleModal={this.props.toggleModal}\r\n                                isModalShown={this.props.isModalShown}\r\n                                isBoardShown={isBoardShown}\r\n                            />\r\n                       </Fragment>\r\n                    }\r\n                        </div>\r\n                     \r\n                        :\r\n                        <div className=\"header-options flex\">\r\n                            {isBoardShown && <button className=\"new-group-btn\" onClick={this.props.onAddGroup}>New Group</button>}\r\n                            <div className=\"relative\">\r\n                                {this.props.isModalShown && <div className=\"modal-screen-wrapper\" onClick={this.props.toggleModal}></div>}\r\n                                <button className=\"flex align-center\" onClick={this.props.toggleModal}>\r\n                                    <h3>{isBoardShown ? 'Board' : 'Dashboard'}</h3> <IoMdArrowDropdown />\r\n                                </button>\r\n                                <Fade in={this.props.isModalShown}>\r\n                                    <div className={`options-modal absolute ${!this.props.isModalShown && 'hidden'}`}>\r\n                                        <p onClick={this.props.showBoard}>Board</p>\r\n                                        <p onClick={this.props.showDashboard}>Dashboard</p>\r\n                                    </div>\r\n                                </Fade>\r\n                            </div>\r\n                            {isBoardShown && <div onClick={() => this.searchInput.focus()} className=\"search-outer-container flex align-center\">\r\n                                <input ref={(input) => { this.searchInput = input; }} placeholder=\" Search Tasks\" type='text' onChange={this.props.handleSearch} />\r\n                                <GoSearch />\r\n                            </div>}\r\n                            {isBoardShown && <div onClick={!this.state.isFiltersOpen ? this.onToggleFilters : () => { }}\r\n                                className=\"filters-outer-container relative flex align-center cursor-pointer\"  >\r\n                                {isFiltering && <div className=\"filter-active-indicator\"></div>}\r\n                                <VscListFilter className={isFiltering ? 'filter-active' : ''} />\r\n                                <h2 className={isFiltering ? 'filter-active' : ''}>Filter</h2>\r\n                                <Filter isFiltersOpen={this.state.isFiltersOpen} board={this.props.board} />\r\n                            </div>}\r\n                        </div>\r\n                    }\r\n        \r\n\r\n                    <div className={`${this.state.isActivitiesOpen && 'animate-side-modal'} side-modal`}>\r\n                        <ActivitiesModal loggedUser={loggedUser} onClearLog={this.onClearLog} onToggleActivities={this.onToggleActivities}\r\n                            boardName={this.state.board.name} activityLog={this.props.board.activityLog} />\r\n                    </div>\r\n                    {\r\n                        window.innerWidth > 1050 &&\r\n                         this.state.isFiltersOpen &&\r\n                          <div onClick={this.onToggleFilters} className='modal-screen-wrapper'></div>\r\n                    }\r\n\r\n                    {\r\n                        this.state.isActivitiesOpen && <div onClick={this.onToggleActivities} className='modal-screen-wrapper'></div>\r\n                    }\r\n                    {\r\n                        this.state.isUsersOpen && <div onClick={this.onToggleUsers} className='modal-screen-wrapper'></div>\r\n                    }\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nexport const BoardHeader = withRouter(_BoardHeader)","import React, { Component } from 'react'\r\nimport moment from 'moment'\r\nimport { Fade } from '@material-ui/core';\r\nimport { AiOutlineDelete } from 'react-icons/ai';\r\n\r\nexport class Notifications extends Component {\r\n    state = {\r\n        isModalOpen: null\r\n    }\r\n    componentDidMount() {\r\n        this.setState({ isModalOpen: true })\r\n    }\r\n    onRemoveNotifications = () => {\r\n        this.props.removeNotifications(this.props.loggedUser)\r\n        this.setState({ isModalOpen: true })\r\n    }\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n    render() {\r\n        const { loggedUser } = this.props;\r\n        return (\r\n            <Fade in={this.state.isModalOpen}>\r\n                <section className=\"notifications padding-x-15 padding-y-15\">\r\n                    <header className=\"flex space-between align-center\">\r\n                        {loggedUser.notifications.length !== 0\r\n                            ? (\r\n                                <React.Fragment>\r\n                                    <h1>Notifications</h1>\r\n                                    <AiOutlineDelete onClick={this.onRemoveNotifications} />\r\n                                </React.Fragment>\r\n                            )\r\n                            : (<h1>You have no notifications.</h1>)}\r\n                    </header>\r\n                    <div className=\"notifications-container\">\r\n                        {\r\n                            loggedUser.notifications && (\r\n                                loggedUser.notifications.map((notification, idx) => {\r\n                                    return (\r\n                                        <div key={idx} className=\"notification flex \">\r\n                                            <div onClick={() => this.props.goToUserProfile(notification.byUser._id)} className=\"user-img-container cursor-pointer\">\r\n                                                {\r\n                                                    notification.byUser.imgUrl ?\r\n                                                        <img src={notification.byUser.imgUrl} alt=\"profile\" />\r\n                                                        :\r\n                                                        <div className=\"member-letter\" >\r\n                                                            {this._getMemeberInitials(notification.byUser)[0]}\r\n                                                            {this._getMemeberInitials(notification.byUser)[1]}\r\n                                                        </div>\r\n                                                }\r\n                                            </div>\r\n                                            <div className=\"notification-msg flex column\">\r\n                                                <h2 className=\"cursor-pointer\" onClick={() => this.props.goToUserProfile(notification.byUser._id)}>\r\n                                                    {notification.byUser.fullName}\r\n                                                </h2>\r\n                                                <p>\r\n                                                    {notification.content}\r\n                                                </p>\r\n                                                <div>\r\n                                                    <p>{moment(notification.createdAt).fromNow()}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n                                })\r\n                            )\r\n                        }\r\n                    </div>\r\n                </section>\r\n            </Fade>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { VscBell } from 'react-icons/vsc'\r\nimport { BsCalendar, BsCardList } from 'react-icons/bs'\r\nimport { RiLogoutBoxLine } from 'react-icons/ri'\r\n// inside imports\r\nimport { Notifications } from './Notifications';\r\nimport { markAsRead, removeNotifications, logout } from '../store/actions/userActions'\r\n\r\nclass _Navbar extends Component {\r\n    state = {\r\n        isNotificationShown: false\r\n    }\r\n    toggleNotifications = () => {\r\n        this.onMarkAsRead()\r\n        this.setState({ isNotificationShown: !this.state.isNotificationShown })\r\n    }\r\n    onMarkAsRead = () => {\r\n        this.props.markAsRead(this.props.loggedUser)\r\n    }\r\n    onLogout = () => {\r\n        this.props.logout()\r\n        this.props.history.push('/login')\r\n    }\r\n    goToUserProfile = (id) => {\r\n        this.props.history.push(`/user/${id}`)\r\n    }\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n    render() {\r\n        const { isNotificationShown } = this.state\r\n        const { loggedUser, removeNotifications } = this.props\r\n        const firstName = loggedUser.fullName.split(' ')[0];\r\n        return (\r\n            <section className=\"navbar flex column space-between align-center padding-y-15\">\r\n                <ul className=\"navbar-links flex column space-around\">\r\n                    <NavLink to=\"/\">\r\n                        <img className=\"logo-navbar\" src=\"taskus-nav.png\" alt=\"\" />\r\n                    </NavLink>\r\n                    {isNotificationShown && <div className=\"modal-screen-wrapper\" onClick={this.toggleNotifications} />}\r\n                    <li className=\"icon-container cursor-pointer\" onClick={!this.state.isNotificationShown ? this.toggleNotifications : () => { }} >\r\n                        {\r\n                            loggedUser.notifications.filter(notification => !notification.isRead).length === 0\r\n                                ? ''\r\n                                : <div className=\"notifications-counter\">\r\n                                    <p >\r\n                                        {loggedUser.notifications.filter(notification => !notification.isRead).length > 10\r\n                                            ? '+9'\r\n                                            : loggedUser.notifications.filter(notification => !notification.isRead).length\r\n                                        }\r\n                                    </p>\r\n                                </div>\r\n                        }\r\n                        <VscBell />\r\n                        {\r\n                            isNotificationShown &&\r\n                            <Notifications goToUserProfile={this.goToUserProfile} removeNotifications={removeNotifications} loggedUser={loggedUser} />\r\n                        }\r\n                    </li>\r\n                    {window.innerWidth < 1050 && <li data-title=\"Boards List\" className=\"icon-container cursor-pointer\">\r\n                        <BsCardList  onClick={() => this.props.history.push('/boards')} />\r\n                        </li>}\r\n                </ul>\r\n                <div className=\"user-greeting\">Hello {firstName || loggedUser.fullName}</div>\r\n                <ul className=\"navbar-links flex column space-around\">\r\n                    <NavLink to={loggedUser ? \"/myweek\" : '/login'}>\r\n                        <li data-title=\"My Week\" className=\"icon-container\"><BsCalendar /></li>\r\n                    </NavLink>\r\n                    <NavLink to={loggedUser ? `/user/${loggedUser._id}` : '/login'}>\r\n                        <li className=\"icon-container cursor-pointer\"> {loggedUser.imgUrl ?\r\n\r\n                            <img className=\"small-profile-img\" src={loggedUser.imgUrl} alt=\"\" />\r\n                            :\r\n                            <div className=\"member-letter small-profile-img\">\r\n                                {this._getMemeberInitials(loggedUser)[0]}\r\n                                {this._getMemeberInitials(loggedUser)[1]}\r\n                            </div>}</li>\r\n                    </NavLink>\r\n                    <li data-title=\"Logout\" className=\"icon-container\" ><RiLogoutBoxLine onClick={this.onLogout} /></li>\r\n                </ul>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    markAsRead,\r\n    removeNotifications,\r\n    logout\r\n}\r\nexport const Navbar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Navbar));","import { Fade } from '@material-ui/core';\r\nimport React from 'react'\r\nimport { FiMinus } from 'react-icons/fi'\r\nimport { FiPlus } from 'react-icons/fi';\r\n\r\nexport function Members(props) {\r\n    function _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n\r\n    const usersToAdd = props.users.filter(user => !props.members.some(member => member._id === user._id))\r\n    const {modalPosition, isAuth} = props;\r\n    \r\n    return (\r\n        <div className=\"user-img-container relative flex justify-center align-center\"  onClick={(ev) => {\r\n            if(!isAuth) return\r\n            props.openModal('users', ev)\r\n        } }>\r\n            {props.members.length ? <div className=\"member-img-container flex relative \">\r\n                {props.members.map((member, idx) => {\r\n                    if (idx > 1) return <div key={member._id} className=\"task-number-of-members\">\r\n                        <span>{props.members.length > 9 ? '+9' : `+${props.members.length - 2}`}</span>\r\n                    </div>\r\n                    return member.imgUrl ?\r\n                        <img key={member._id} className=\"member-img\" src={member.imgUrl} alt=\"\" />\r\n                        :\r\n                        <div key={member._id} className=\"member-letter \">\r\n                            {_getMemeberInitials(member)[0]}\r\n                            {_getMemeberInitials(member)[1]}\r\n                        </div>\r\n                })\r\n                }\r\n                {props.members.length < 3 && <FiPlus className=\"no-members-icon-plus absolute\" />}\r\n\r\n            </div>\r\n                :\r\n                <div className=\"no-members-container\">\r\n                    <img src=\"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg\" alt=\"\" className=\"no-members-icon\" />\r\n                    <FiPlus className=\"no-members-icon-plus\" />\r\n                </div>}\r\n            <Fade in={props.isUsersShown} >\r\n                <div onClick={ (ev) =>\r\n                      ev.stopPropagation()\r\n                }  style={{...modalPosition}} className=\"users-modal modal-fade-in fixed\">\r\n                    <div className=\"task-users-box\"> \r\n                        <h3>Task Members</h3>\r\n                        {props.members.map((member, idx) =>\r\n                            <section key={idx} className=\"user-box flex space-between align-center\">\r\n                                <div className=\"user-box-info flex align-center\" onClick={() => props.goToUserProfile(member._id)}>\r\n                                    {member.imgUrl ? <img src={member.imgUrl} alt=\"profile\" /> : <div className=\"member-letter\">\r\n                                        {_getMemeberInitials(member)[0]}\r\n                                        {_getMemeberInitials(member)[1]}\r\n                                    </div>}\r\n                                    <p className=\"member-name\">{member.fullName}</p>\r\n                                </div>\r\n                                <FiMinus onClick={() => props.onRemoveMemberFromTask(member._id)} />\r\n                            </section>\r\n                        )}\r\n                    </div>\r\n                    <div className=\"board-users-box\">\r\n                        <h3>Board Members</h3>\r\n                        {usersToAdd.map((user, idx) => {\r\n                            return <section key={idx} className=\"user-box flex space-between align-center\">\r\n                                <div className=\"user-box-info flex  align-center\" onClick={() => props.goToUserProfile(user._id)}>\r\n                                    {user.imgUrl ? <img src={user.imgUrl} alt=\"profile\" /> :\r\n                                        <div className=\"member-letter\">\r\n                                            {_getMemeberInitials(user)[0]}\r\n                                            {_getMemeberInitials(user)[1]}\r\n                                        </div>}\r\n                                    <p className=\"member-name\">{user.fullName}</p>\r\n                                </div>\r\n                                <FiPlus onClick={() => props.onAddUserToTask(user._id)} />\r\n                            </section>\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </Fade>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport { Fade } from '@material-ui/core'\r\n\r\nexport function Status(props) {\r\n    const { modalPosition, isAuth } = props;\r\n    return (\r\n        <div className=\"label-container relative flex align-center \">\r\n\r\n            <div className={`label-box ${props.status.split(\" \")[0].toLowerCase()}`} onClick={(ev) => {\r\n                if (!isAuth) return\r\n                props.openModal('status', ev)\r\n            }}>\r\n                <div className=\"task-label-name flex align-center justify-center\">\r\n                    <p>{props.status === 'empty' ? ' ' : props.status}</p>\r\n                </div>\r\n                <Fade in={props.isStatusShown} >\r\n                    <div onClick={(ev) =>\r\n                        ev.stopPropagation()\r\n                    } style={modalPosition} className=\"label-list fixed flex column align-center modal-fade-in\">\r\n                        <section className=\"label-selector flex align-center justify-center stuck\" onClick={() => props.handleChange('Stuck', 'status')}>\r\n                            <p>Stuck</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center working\" onClick={() => props.handleChange('Working on it', 'status')}>\r\n                            <p>Working on it</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center done\" onClick={() => props.handleChange('Done', 'status')}>\r\n                            <p>Done</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center empty\" onClick={() => props.handleChange('', 'status')}>\r\n                            <p> </p>\r\n                        </section>\r\n                    </div>\r\n                </Fade>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Fade } from '@material-ui/core';\r\nimport React from 'react'\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nexport function Date(props) {\r\n    return (\r\n        <label className=\"date-picker\">\r\n                <DatePicker\r\n                    selected={props.dueDate}\r\n                    onChange={props.handleDateChange}\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                />\r\n        </label>\r\n    )\r\n}","import React from 'react'\r\nimport { Fade } from '@material-ui/core'\r\n\r\nexport function Priority(props) {\r\n    const { modalPosition, isAuth } = props;\r\n    return (\r\n        <div className=\"label-container relative flex align-center\">\r\n            <div className={`label-box ${props.priority.toLowerCase()}`} onClick={(ev) => {\r\n                if (!isAuth) return\r\n                props.openModal('priority', ev)\r\n            }}>\r\n                <div className=\"task-label-name flex align-center justify-center\">\r\n                    <p>{props.priority}</p>\r\n                </div>\r\n                <Fade in={props.isPriorityShown} >\r\n                    <div onClick={(ev) =>\r\n                        ev.stopPropagation()\r\n                    } style={modalPosition} className=\"label-list fixed flex column align-center modal-fade-in\">\r\n                        <section className=\"label-selector flex align-center justify-center low\" onClick={() => props.handleChange('Low', 'priority')}>\r\n                            <p>Low</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center medium\" onClick={() => props.handleChange('Medium', 'priority')}>\r\n                            <p>Medium</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center high\" onClick={() => props.handleChange('High', 'priority')}>\r\n                            <p>High</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center empty-priority\" onClick={() => props.handleChange('', 'priority')}>\r\n                            <p> </p>\r\n                        </section>\r\n                    </div>\r\n                </Fade>\r\n            </div>\r\n        </div>\r\n    )\r\n}","export const cloudinaryService = {\r\n    uploadImg\r\n}\r\nasync function uploadImg(img) {\r\n    const CLOUD_NAME = \"dtg7n0zye\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n    const formData = new FormData();\r\n    formData.append('file', img)\r\n    formData.append('upload_preset', 'Task-Us');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { AiOutlineSend } from 'react-icons/ai';\r\nimport { HiOutlineDotsHorizontal } from 'react-icons/hi';\r\n\r\nexport class Reply extends React.Component {\r\n    state = {\r\n        txt: '',\r\n        isEditMode: false,\r\n        isOptionsModal: false\r\n    }\r\n    handleChange = ({ target }) => {\r\n        this.setState({ [target.name]: target.value })\r\n    }\r\n    toggleEditMode = (replyTxt) => {\r\n        this.setState({ isEditMode: !this.state.isEditMode, txt: replyTxt })\r\n    }\r\n    updateReply = (newReply) => {\r\n        if (newReply.txt === this.state.txt) return this.setState({ isEditMode: false })\r\n        newReply.txt = this.state.txt\r\n        const newReplies = this.props.update.replies.map(reply => {\r\n            return reply.id === newReply.id ? newReply : reply\r\n        })\r\n        const update = { ...this.props.update, replies: newReplies }\r\n        this.props.updateNote(update)\r\n        this.setState({ isEditMode: false, txt: '' })\r\n    }\r\n    removeReply = (replyId) => {\r\n        const idx = this.props.update.replies.findIndex(reply => reply.id === replyId)\r\n        const newUpdate = { ...this.props.update }\r\n        const update = newUpdate.replies.splice(idx, 1)\r\n        this.props.updateNote(update)\r\n    }\r\n    toggleOptionsModal = () => {\r\n        this.setState({ isOptionsModal: !this.state.isOptionsModal })\r\n    }\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n    render() {\r\n        const { reply, idx } = this.props\r\n        return (\r\n            <div key={idx} className=\"reply-box flex column relative\">\r\n                <HiOutlineDotsHorizontal className=\"options-reply-btn cursor-pointer\" onClick={this.toggleOptionsModal} />\r\n                <div className=\"reply-content flex align-center\">\r\n                    {\r\n                        reply.member.imgUrl ? <img src={reply.member.imgUrl} alt=\"\" />\r\n                            : <div className=\"member-letter \">\r\n                                {this._getMemeberInitials(reply.member)[0]}\r\n                                {this._getMemeberInitials(reply.member)[1]}\r\n                            </div>\r\n                    }\r\n\r\n                    <p className=\"reply-name\">{reply.member.fullName}</p>\r\n                    {!this.state.isEditMode ?\r\n                        <p className=\"reply-text\">{reply.txt}</p>\r\n                        :\r\n                        <div className=\"edit-box flex\">\r\n                            <textarea name=\"txt\" onChange={this.handleChange} value={this.state.txt}></textarea>\r\n                            <AiOutlineSend className=\"update-reply-btn\" onClick={() => this.updateReply(reply)} />\r\n                        </div>\r\n                    }\r\n                </div>\r\n                {this.state.isOptionsModal &&\r\n                    <Fragment>\r\n                        <div onClick={() => {\r\n                            this.toggleOptionsModal()\r\n                        }} className=\"modal-screen-wrapper\"></div>\r\n                        <div className=\"update-options-modal\">\r\n                            <p className=\"remove-reply-btn  cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.removeReply(reply.id)\r\n                            }}>Delete Post</p>\r\n                            <p className=\"edit-reply-btn cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.toggleEditMode(reply.txt)\r\n                            }}>Edit Post</p>\r\n                        </div>\r\n                    </Fragment>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { AiOutlineSend } from 'react-icons/ai';\r\nimport { HiOutlineDotsHorizontal } from 'react-icons/hi';\r\n// inside imports\r\nimport { Reply } from './Reply';\r\n\r\nexport class Update extends React.Component {\r\n    state = {\r\n        txt: '',\r\n        isEditMode: false,\r\n        isOptionsModal: false\r\n    }\r\n    onReply = (newUpdate) => {\r\n        if (!this.state.txt || this.state.txt.split('').every(letter => letter === ' ')) return\r\n        const newReply = {\r\n            txt: this.state.txt,\r\n            createdAt: Date.now(),\r\n            id: this.props.makeid(),\r\n            member: {\r\n                fullName: this.props.loggedUser.fullName,\r\n                username: this.props.loggedUser.userName,\r\n                _id: this.props.loggedUser.userName,\r\n                imgUrl: this.props.loggedUser.imgUrl\r\n            }\r\n        }\r\n        const update = this.props.updates.find(update => update.id === newUpdate.id)\r\n        update.replies = [...update.replies, newReply]\r\n        this.props.updateNote(update)\r\n        this.setState({ txt: '' })\r\n    }\r\n    removeUpdate = (updateId) => {\r\n        const updates = this.props.updates.filter(update => update.id !== updateId)\r\n        this.props.sendNote(updates)\r\n    }\r\n    onToggleEditUpdate = () => {\r\n        this.setState({ isEditMode: !this.state.isEditMode })\r\n    }\r\n    editUpdate = (newUpdate) => {\r\n        if (newUpdate.txt === this.state.txt) return this.setState({ isEditMode: false })\r\n        newUpdate.txt = this.state.txt\r\n        const newUpdates = this.props.updates.map(update => {\r\n            return update.id === newUpdate.id ? newUpdate : update\r\n        })\r\n        this.props.sendNote(newUpdates)\r\n        this.setState({ isEditMode: false, txt: '' })\r\n    }\r\n    handleChange = ({ target }) => {\r\n        this.setState({ [target.name]: target.value })\r\n    }\r\n    toggleOptionsModal = () => {\r\n        this.setState({ isOptionsModal: !this.state.isOptionsModal })\r\n    }\r\n    getInitials(fullName) {\r\n        const [firstName, lastName] = fullName.split(' ');\r\n        let initials = firstName.charAt(0).toUpperCase();\r\n        if (lastName) initials += lastName.charAt(0).toUpperCase();\r\n        return initials;\r\n    }\r\n    render() {\r\n        const { update, idx } = this.props\r\n        return (\r\n            <div key={idx} className=\"update-box flex wrap column relative\">\r\n                <HiOutlineDotsHorizontal className=\"options-reply-btn cursor-pointer\" onClick={this.toggleOptionsModal} />\r\n                {this.state.isOptionsModal &&\r\n                    <Fragment>\r\n                        <div onClick={() => {\r\n                            this.toggleOptionsModal()\r\n                        }} className=\"modal-screen-wrapper\"></div>\r\n                        <div className=\"update-options-modal\">\r\n                            <p className=\"remove-reply-btn cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.removeUpdate(update.id)\r\n                            }}>Delete Post</p>\r\n                            <p className=\"edit-reply-btn cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.onToggleEditUpdate()\r\n                            }}>Edit Post</p>\r\n                        </div>\r\n                    </Fragment>\r\n                }\r\n                <div className=\"update-box-header flex align-center\">\r\n                {\r\n                    update.member.imgUrl ?  <img src={update.member.imgUrl} alt=\"\" />\r\n                 : \r\n                 <div className=\"member-letter flex align-center justify-center\"> \r\n                 {this.getInitials(update.member.fullName)[0]}\r\n                 {this.getInitials(update.member.fullName)[1]}\r\n                 </div>\r\n                 }\r\n                    <p className=\"member-name\">{update.member.fullName}</p>\r\n                </div>\r\n                {this.state.isEditMode ?\r\n                    <div className=\"update-box-edit flex column relative\">\r\n                        <textarea value={this.state.txt} name=\"txt\" onChange={this.handleChange}></textarea>\r\n                        <AiOutlineSend className=\"submit-edit-btn absolute\" onClick={() => this.editUpdate(update)} />\r\n                        {update.imgUrl && <img src={update.imgUrl} alt=\"\" />}\r\n                    </div>\r\n                    :\r\n                    <div className=\"update-box-main flex column\">\r\n                        {update.txt && <p className=\"update-text\">{update.txt}</p>}\r\n                        {update.imgUrl && <img src={update.imgUrl} alt=\"\" />}\r\n                    </div>\r\n                }\r\n                <div className=\"update-box-footer flex column\">\r\n                    {update.replies &&\r\n                        <div className=\"replies-box flex column\" style={{ borderTop: `${update.replies.length && '1px solid rgba(109, 109, 109, 0.35)'}` }}>\r\n                            {update.replies.map((reply, idx) =>\r\n                                <Reply key={idx} reply={reply} idx={idx} update={this.props.update}\r\n                                    updateNote={this.props.updateNote} />\r\n                            )}</div>\r\n                    }\r\n                    {!this.state.isEditMode &&\r\n                        <div className=\"reply-footer flex space-between align-center\">\r\n                            <textarea value={this.state.txt} name=\"txt\" onChange={this.handleChange}></textarea>\r\n                            <button className=\"reply-button\" onClick={() => this.onReply(update)}>Reply</button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { AiOutlineClose } from 'react-icons/ai'\r\nimport { BiImage } from 'react-icons/bi';\r\nimport { MdDone } from 'react-icons/md';\r\n// inside imports\r\nimport { cloudinaryService } from '../../services/cloudinaryService';\r\nimport { Update } from './Update';\r\n\r\nexport class Updates extends React.Component {\r\n    state = {\r\n        reply: {\r\n            txt: ''\r\n        },\r\n        update: {\r\n            id: '',\r\n            txt: '',\r\n            imgUrl: '',\r\n            replies: []\r\n        },\r\n        isLoading: false,\r\n        imageUploaded: false\r\n    }\r\n    componentDidMount() {\r\n        this.setState({ imageUploaded: false })\r\n    }\r\n    handleChange = (ev) => {\r\n        if (ev.target.name === 'file-img') {\r\n            this.setState({ update: { ...this.state.update, img: ev.target.files[0] } }, () => {\r\n                this.uploadImg()\r\n            })\r\n        } else if (ev.target.name === 'txt') {\r\n            this.setState({ update: { ...this.state.update, txt: ev.target.value } })\r\n        } else {\r\n            this.setState({ reply: { ...this.state.reply, txt: ev.target.value } })\r\n        }\r\n    }\r\n    uploadImg = async () => {\r\n        this.setState({ isLoading: true })\r\n        const res = await cloudinaryService.uploadImg(this.state.update.img, this.state)\r\n        this.setState({ update: { ...this.state.update, imgUrl: res.url }, isLoading: false, imageUploaded: true })\r\n    }\r\n    sendNote = (ev) => {\r\n        ev.preventDefault()\r\n        if ((!this.state.update.txt || this.state.update.txt.split('').every(letter => letter === ' ')) && !this.state.update.imgUrl) return\r\n        const newNote = {\r\n            id: makeid(),\r\n            createdAt: Date.now(),\r\n            txt: this.state.update.txt,\r\n            imgUrl: this.state.update.imgUrl,\r\n            replies: [],\r\n            member: {\r\n                fullName: this.props.loggedUser.fullName,\r\n                username: this.props.loggedUser.userName,\r\n                _id: this.props.loggedUser.userName,\r\n                imgUrl: this.props.loggedUser.imgUrl\r\n            }\r\n        }\r\n        const updates = [newNote, ...this.props.updates]\r\n        this.setState({ update: { txt: '', imgUrl: '' }, imageUploaded: false })\r\n        this.props.sendNote(updates)\r\n    }\r\n    updateNote = (newUpdate) => {\r\n        const newNotes = [...this.props.updates].map(update => update.id === newUpdate.id ? newUpdate : update)\r\n        this.props.sendNote(newNotes)\r\n    }\r\n    render() {\r\n        if (!this.props.updates) return <h1>Loading...</h1>;\r\n        const { updates } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"updates-header flex column\">\r\n                    <AiOutlineClose onClick={this.props.closeModal} />\r\n                    <h1>{this.props.task.name}</h1>\r\n                    <div className=\"updates-header-options flex column\">\r\n                        <form onSubmit={this.sendNote} className=\"notes-form flex align-center\">\r\n                            <textarea name=\"txt\" value={this.state.update.txt} onChange={this.handleChange} />\r\n                        </form>\r\n                        <div className=\"updates-btns flex align-center space-between\">\r\n                            <div className=\"image-uploader flex\">\r\n                                <label data-title=\"Upload Image\" htmlFor={this.props.task.id}>{this.state.isLoading ? <div class=\"loadingio-spinner-spinner-gvjl1rpqs7q\"><div class=\"ldio-subadnemdcd\">\r\n                                    <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>\r\n                                </div></div> : <BiImage />}\r\n                                </label>\r\n                                <input name=\"file-img\" type=\"file\" id={this.props.task.id} onChange={(this.handleChange)} hidden />\r\n                                {this.state.imageUploaded && <div className=\"image-uploaded flex align-center\"><MdDone /><p> Image Ready!</p></div>}\r\n                            </div>\r\n                            {this.state.isLoading ? <p>Image is uploading..</p> : <button onClick={this.sendNote}>Send</button>}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className={`updates-container  ${!updates.length ? \"flex justify-center align-center\" : \"\"} `}>\r\n                    {\r\n                        !updates.length ? <h1>There are no posts to show.</h1> :\r\n                            updates.map((update, idx) => <Update update={update} key={idx} idx={idx}\r\n                                updates={updates} loggedUser={this.props.loggedUser}\r\n                                sendNote={this.props.sendNote}\r\n                                updateNote={this.updateNote} makeid={makeid} />)\r\n                    }\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\nfunction makeid(length = 7) {\r\n    var text = \"\";\r\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return text;\r\n}","import React, { Component } from 'react'\r\nimport { BsBookmarkPlus } from 'react-icons/bs';\r\nimport { RiDeleteBack2Line } from 'react-icons/ri';\r\nimport Truncate from 'react-truncate'\r\nimport { Fade } from '@material-ui/core';\r\n\r\nexport class Tags extends Component {\r\n    state = {}\r\n    componentDidMount() {\r\n        this.elTagInput = React.createRef();\r\n        this.elTag = React.createRef();\r\n        this.setState({ tags: JSON.parse(JSON.stringify(this.props.task.tags)) })\r\n    }\r\n    handleChange = (ev, id) => {\r\n        const tags = this.state.tags.map(tag => {\r\n            if (tag.id === id) {\r\n                tag.txt = ev.target.value\r\n            }\r\n            return tag\r\n        })\r\n        this.setState({ tags });\r\n    }\r\n    onAddTag = () => {\r\n        const tags = [...this.state.tags]\r\n        const tagName = this.elTagInput.current.value ? this.elTagInput.current.value : 'New Tag'\r\n        tags.push({ id: this._makeid(), txt: tagName, color: _getRandomColor() })\r\n        this.setState({ tags });\r\n        this.props.onEditTags(tags, tagName, 'addTag')\r\n    }\r\n    onRemoveTag = (id) => {\r\n        const tagToRemove = this.state.tags.find(tag => tag.id === id)\r\n        const tags = this.state.tags.filter(tag => tag.id !== id)\r\n        this.setState({ tags });\r\n        this.props.onEditTags(tags, tagToRemove.txt, 'removeTag')\r\n    }\r\n    onEditTag = (idx, tagName, type) => {\r\n        if (this.props.task.tags[idx].txt === this.state.tags[idx].txt) return\r\n        this.props.onEditTags(this.state.tags, tagName, type)\r\n    }\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n    _makeid(length = 7) {\r\n        var text = \"\";\r\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n        for (var i = 0; i < length; i++) {\r\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        }\r\n        return text;\r\n    }\r\n    render() {\r\n        if (!this.state.tags || this.state.tags === 0) return <h1>no tags</h1>\r\n        const {modalPosition,isAuth} = this.props;\r\n        return (\r\n            <div onClick={(ev) => {\r\n                if (!isAuth) return\r\n                this.props.openModal('tags', ev)\r\n        \r\n            } } className=\"label-container tags relative\">\r\n                <div className=\"task-label-name flex justify-center align-center \">\r\n                    {this.state.tags.map((tag, idx) => {\r\n                        if (idx > 2) return []\r\n                        if (idx > 1) return (\r\n                            <div key={tag.id} className=\"task-number-of-tags\">\r\n                                <span>{this.state.tags.length > 9 ? '+9' : `+${this.state.tags.length - 2}`}</span>\r\n                            </div>)\r\n                        return (\r\n                            <p key={idx} style={{ color: tag.color }}>\r\n                                <Truncate lines={1} ellipsis={\"...\"} width={75}>\r\n                                    #{idx === this.state.tags.length - 1 ? tag.txt : (idx === 1 ? tag.txt : tag.txt + \",\")}\r\n                                </Truncate>\r\n                            </p>)\r\n                    })}\r\n                </div>\r\n                <Fade in={this.props.isTagsShown}>\r\n                    <div onClick={ (ev) =>\r\n                      ev.stopPropagation()\r\n                }  style={modalPosition} className=\"label-list tags-modal fixed flex column align-center \">\r\n                        <div className=\"tag-add-container  flex justify-center align-center\">\r\n                            <BsBookmarkPlus onClick={(ev) => {\r\n                                this.onAddTag()\r\n                                this.elTagInput.current.value = ''\r\n                            }} />\r\n                            <input onKeyDown={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    ev.target.blur()\r\n                                    this.onAddTag()\r\n                                    ev.target.value = ''\r\n                                }\r\n                            }} placeholder=\"New tag\" ref={this.elTagInput} type=\"text\" />\r\n                        </div>\r\n                        <section>\r\n                            {this.state.tags.map((tag, idx) => {\r\n                                return (\r\n                                    <div className=\"tag-container flex justify-center align-center\" key={idx}>\r\n                                        <RiDeleteBack2Line className=\"tag-remove-icon\" onClick={() => this.onRemoveTag(tag.id)} />\r\n                                        <input style={{ color: tag.color }} onBlur={(ev) => {\r\n                                            ev.target.blur()\r\n                                            this.onEditTag(idx)\r\n                                        }}\r\n                                            onKeyDown={(ev) => {\r\n                                                if (ev.key === 'Enter') {\r\n                                                    ev.target.blur()\r\n                                                }\r\n                                            }}\r\n                                            onChange={(ev) => this.handleChange(ev, tag.id)} value={tag.txt} type=\"text\" />\r\n                                    </div>\r\n                                )\r\n                            })}\r\n                        </section>\r\n                    </div>\r\n                </Fade>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nfunction _getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ContentEditable from 'react-contenteditable'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport { BsChatDots } from 'react-icons/bs'\r\nimport { MdDelete } from 'react-icons/md'\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport moment from 'moment';\r\n\r\n// Inside Imports\r\nimport socketService from '../services/socketService.js'\r\nimport { Members } from './task-cmps/Members';\r\nimport { Status } from './task-cmps/Status'\r\nimport { Date } from './task-cmps/Date';\r\nimport { Priority } from './task-cmps/Priority';\r\nimport { Updates } from './task-cmps/Updates';\r\nimport { Tags } from './task-cmps/Tags';\r\nimport {showSnackbar, hideSnackbar} from '../store/actions/systemActions.js';\r\n\r\nclass _Task extends Component {\r\n    state = {\r\n        id: '',\r\n        isStatusShown: false,\r\n        isPriorityShown: false,\r\n        isUsersShown: false,\r\n        isUpdatesShown: false,\r\n        isTagsShown: false,\r\n        imgUrl: '',\r\n        isImageModalShown: false\r\n    }\r\n    reloadProps = () => {\r\n        this.setState({ task: this.props.task })\r\n    }\r\n    componentDidMount() {\r\n        this.contentEditable = React.createRef();\r\n        socketService.on('updatedBoard', this.reloadProps)\r\n        this.setState({\r\n            ...this.state,\r\n            task: this.props.task,\r\n            isStatusShown: false,\r\n            isPriorityShown: false,\r\n            isUsersShown: false,\r\n            isUpdatesShown: false,\r\n            isTagsShown: false,\r\n            modalPosition: {\r\n                top: 0,\r\n                left: 0\r\n            }\r\n        })\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard', this.reloadProps)\r\n    }\r\n    displayPopup(msg) {\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n    handleNameChange = (ev) => {\r\n        this.setState({ task: { ...this.state.task, name: ev.target.value } });\r\n    }\r\n    handleDateChange = date => {\r\n        if(!this.props.isAuth) return\r\n        const prevDate = moment(this.state.task.dueDate).format('DD/MMM/YYYY')\r\n        const changedDate = moment(date).format('DD/MMM/YYYY')\r\n        if (prevDate === changedDate) return\r\n        this.setState({ task: { ...this.state.task, dueDate: moment(date).valueOf() } }, () => {\r\n            const desc = `${this.props.loggedUser.fullName} changed task ${this.state.task.name} date from ${moment(this.props.task.dueDate).format('DD/MMM/YYYY')} to ${moment(this.state.task.dueDate).format('DD/MMM/YYYY')} at group -${this.props.group.name}`\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n    handleChange = (data, property) => {\r\n        let desc = '';\r\n        this.setState({ task: { ...this.state.task, [property]: data } }, () => {\r\n            desc = `${this.props.loggedUser.fullName} changed task: ${this.state.task.name} ${property} from ${this.props.task[property]} to ${this.state.task[property]} at group - ${this.props.group.name}`\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n            if (!this.state.isUpdatesShown) this.closeModal()\r\n        })\r\n    }\r\n    sendNote = (newUpdates) => {\r\n        let desc = ''\r\n        this.setState({ task: { ...this.state.task, updates: [...newUpdates] } }, () => {\r\n            desc = `${this.props.loggedUser.fullName} sent an update at task: ${this.props.task.name} at group - ${this.props.group.name}`\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n    openModal = (data, ev) => {\r\n        const translateY = ev.clientY > window.innerHeight / 2 ? '-100%' : '0';\r\n        const translateX = ev.clientX > window.innerWidth / 2 ? '-100%' : '0';\r\n        const modalPosition = { top: ev.clientY, left: ev.clientX, transform: `translate(${translateX}, ${translateY})` };\r\n        this.setState({ modalPosition })\r\n        switch (data) {\r\n            case 'status':\r\n                this.setState({ isStatusShown: true })\r\n                break;\r\n            case 'users':\r\n                this.setState({ isUsersShown: true })\r\n                break;\r\n            case 'updates':\r\n                this.setState({ isUpdatesShown: true })\r\n                break;\r\n            case 'priority':\r\n                this.setState({ isPriorityShown: true })\r\n                break;\r\n            case 'tags':\r\n                this.setState({ isTagsShown: true })\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    closeModal = () => {\r\n        this.setState({ isImageModalShown: false, isStatusShown: false, isUsersShown: false, isPriorityShown: false, isUpdatesShown: false, isTagsShown: false })\r\n    }\r\n    onRemoveMemberFromTask = (memberId) => {\r\n        let desc = ''\r\n        const removedMember = this.state.task.members.find(member => member._id === memberId)\r\n        this.setState({ task: { ...this.state.task, members: this.state.task.members.filter(member => member._id !== memberId) } }, () => {\r\n            desc = `${this.props.loggedUser.fullName} removed ${removedMember.fullName} from ${this.state.task.name} at group - ${this.props.group.name}`\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n    onAddUserToTask = (userId) => {\r\n        let desc = ''\r\n        const newUser = this.props.users.find(user => user._id === userId)\r\n        this.setState({ task: { ...this.state.task, members: [...this.state.task.members, newUser] } }, () => {\r\n            desc = `${this.props.loggedUser.fullName} tasked ${newUser.fullName} to ${this.state.task.name} on group - ${this.props.group.name}`\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n    goToUserProfile = (userId) => {\r\n        this.props.history.push(`/user/${userId}`)\r\n        this.closeModal()\r\n    }\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n    onEditTags = (tags, tagName, type) => {\r\n        let desc = ''\r\n        this.setState({ ...this.state, task: { ...this.state.task, tags: JSON.parse(JSON.stringify(tags)) } }, () => {\r\n            if (type === 'addTag') {\r\n                desc = `${this.props.loggedUser.fullName} added tag named ${tagName} to ${this.state.task.name} on group - ${this.props.group.name}`\r\n            }\r\n            else if (type === 'removeTag') {\r\n                desc = `${this.props.loggedUser.fullName} removed tag named ${tagName} from ${this.state.task.name} on group - ${this.props.group.name}`\r\n            }\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n    render() {\r\n        if (!this.state.task) return <h1>Loading...</h1>\r\n        const {isAuth} = this.props;\r\n        const { name, members, status, priority, dueDate, updates, id } = this.state.task;\r\n        const { isUsersShown, isStatusShown, isPriorityShown, isUpdatesShown, isTagsShown, modalPosition } = this.state\r\n        return (\r\n            <React.Fragment>\r\n                {isUpdatesShown &&\r\n                    <div className={`${isUpdatesShown && 'animate-side-modal'} side-modal`}>\r\n                        <Updates task={this.state.task} updates={updates} members={members} priority={priority} status={status} dueDate={dueDate}\r\n                            loggedUser={this.props.loggedUser} users={this.props.users}\r\n                            sendNote={this.sendNote} handleChange={this.handleChange} handleDateChange={this.handleDateChange} onEditTags={this.onEditTags}\r\n                            onEditTask={this.props.onEditTask} closeModal={this.closeModal}\r\n                        />\r\n                    </div>}\r\n                {(isUsersShown || isStatusShown || isPriorityShown || isUpdatesShown || isTagsShown) && <div className=\"modal-screen-wrapper\" onClick={this.closeModal}></div>}\r\n                <Draggable draggableId={id} index={this.props.index}>\r\n                    {(provided, snapshot) => (\r\n                        <section key={id} className={`task flex space-between align-center ${snapshot.isDragging ? 'drag' : ''}`}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            ref={provided.innerRef} >\r\n                            <div className=\"task-left flex align-center\">\r\n                                <div className=\"task-color-remove\">\r\n                                    <div style={{ backgroundColor: this.props.group.color }} className=\"task-color\"></div>\r\n                                    <div className='icon-container'>\r\n                                        <MdDelete className=\"task-remove-icon\" onClick={() => {\r\n                                            if(!isAuth){\r\n                                                this.displayPopup('You are not a member of this board!')\r\n                                                return;\r\n                                            }\r\n                                             this.props.onRemoveTask(id, this.props.group) }} />\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"task-title-updates flex align-center space-between grow\">\r\n                                    <h2>\r\n                                        <ContentEditable\r\n                                            onFocus={this.focusText}\r\n                                            className=\"cursor-initial content-editable\"\r\n                                            innerRef={this.contentEditable}\r\n                                            html={name}\r\n                                            disabled={!isAuth}\r\n                                            onChange={this.handleNameChange}\r\n                                            onBlur={() => {\r\n                                                const desc = `${this.props.loggedUser.fullName} changed task name from ${this.state.task.name} to ${name} at group - ${this.props.group.name}`\r\n                                                if(this.state.task.name === this.props.task.name)\r\n                                                this.props.onEditTask(this.state.task, this.props.task, desc)\r\n                                            }}\r\n                                            onKeyDown={(ev) => {\r\n                                                if (ev.key === 'Enter') {\r\n                                                    ev.target.blur()\r\n                                                }\r\n                                            }} />\r\n                                    </h2>\r\n\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"task-right flex align-center\">\r\n                                <div onClick={(ev) => this.openModal('updates', ev)} className=\"notes-container relative grow\"><BsChatDots />\r\n                                    {(updates.length !== 0) && <div className=\"task-number-of-imgs flex justify-center align-center\"><span>{updates.length}</span></div>}\r\n                                </div>\r\n                                <Members members={members} users={this.props.users} isUsersShown={isUsersShown}\r\n                                    openModal={this.openModal} goToUserProfile={this.goToUserProfile} onAddUserToTask={this.onAddUserToTask}\r\n                                    onRemoveMemberFromTask={this.onRemoveMemberFromTask}\r\n                                    modalPosition={modalPosition} isAuth={isAuth} />\r\n                                <Status status={status} isStatusShown={isStatusShown}\r\n                                    handleChange={this.handleChange} openModal={this.openModal}\r\n                                    modalPosition={modalPosition} isAuth={isAuth} />\r\n                                <Date modalPosition={modalPosition} dueDate={dueDate} handleDateChange={this.handleDateChange} isAuth={isAuth} />\r\n                                <Priority priority={priority} isPriorityShown={isPriorityShown}\r\n                                    openModal={this.openModal} handleChange={this.handleChange}\r\n                                    modalPosition={modalPosition} isAuth={isAuth} />\r\n                                <Tags onEditTags={this.onEditTags}\r\n                                    task={this.state.task} isTagsShown={isTagsShown}\r\n                                    openModal={this.openModal} handleChange={this.handleChange}\r\n                                    modalPosition={modalPosition} isAuth={isAuth} />\r\n                            </div>\r\n                        </section>\r\n                    )}\r\n                </Draggable>\r\n                {this.state.isImageModalShown &&\r\n                    <div onClick={this.onToggleImageModal} className=\"updates-image-modal\">\r\n                        <img src={this.state.imgUrl} alt=\"\" />\r\n                    </div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    hideSnackbar,\r\n    showSnackbar\r\n}\r\nexport const Task = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Task));","import React, { Component } from 'react';\r\nimport { Task } from './Task';\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport { IoIosArrowDropdownCircle } from 'react-icons/io'\r\nimport { AiOutlineDelete, AiOutlineDrag } from 'react-icons/ai';\r\nimport ContentEditable from 'react-contenteditable';\r\nimport { CgColorPicker } from 'react-icons/cg';\r\n// Inside imports\r\nimport socketService from '../services/socketService.js';\r\nimport { showSnackbar, hideSnackbar } from '../store/actions/systemActions.js';\r\nimport { connect } from 'react-redux';\r\n\r\nexport class _Group extends Component {\r\n    state = {\r\n        id: '',\r\n        ElGroupSettings: null,\r\n        elGroupColors: false,\r\n    }\r\n    reloadProps = () => {\r\n        this.setState({ ...this.state, name: this.props.group.name })\r\n    }\r\n    componentDidMount() {\r\n        this.elInputAdd = React.createRef();\r\n        this.contentEditable = React.createRef();\r\n        socketService.on('updatedBoard', this.reloadProps)\r\n        this.setState({ ...this.state, name: this.props.group.name, id: this.props.group.id })\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard', this.reloadProps)\r\n    }\r\n    handleChange = (ev) => {\r\n        this.setState({ name: ev.target.value });\r\n    }\r\n    displayPopup(msg) {\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n    handleMenuOpen = (ev) => {\r\n        this.setState({ ElGroupSettings: ev.currentTarget })\r\n    }\r\n    handleMenuClose = () => {\r\n        this.setState({ ElGroupSettings: null, elGroupColors: false })\r\n    }\r\n    handleColorsOpen = (ev) => {\r\n\r\n        this.setState({ elGroupColors: ev.currentTarget })\r\n    }\r\n    handleColorsToggle = () => {\r\n        if (!this.props.isAuth) {\r\n            this.displayPopup('You are not a member of this board!')\r\n            return;\r\n        }\r\n        this.setState({ elGroupColors: !this.state.elGroupColors })\r\n    }\r\n    onChangeGroupColor = (color) => {\r\n        try {\r\n            this.props.onEditGroup(this.props.group.id, color, 'color')\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.setState({ ElGroupSettings: null, elGroupColors: false })\r\n    }\r\n    convertToBar(property) {\r\n        const { tasks } = this.props.group;\r\n        const taskCount = tasks.length;\r\n        const percent = taskCount / 100;\r\n        const data = tasks.reduce((acc, task) => {\r\n            const value = task[property];\r\n            if (value) acc[value] = acc[value] ? acc[value] + 1 : 1;\r\n            return acc;\r\n        }, {});\r\n        const res = [];\r\n        for (let key in data) {\r\n            data[key] /= percent;\r\n            const style = { width: data[key] ? `${data[key]}%` : '0' }\r\n            const toolTip = data[key] ? ` ${key} ${Math.round(taskCount * data[key] / 100)}/${taskCount} ${data[key].toFixed(1)}%` : ''\r\n            res.push(<div key={key} style={style}\r\n                data-title={toolTip}\r\n                className={`precent-bar ${key.toLowerCase()}`}>\r\n            </div>)\r\n        }\r\n        return res;\r\n    }\r\n    render() {\r\n        if (!this.state.id) return <h1>Loading...</h1>\r\n        const priority = this.convertToBar('priority')\r\n        const status = this.convertToBar('status')\r\n        const { name, ElGroupSettings, elGroupColors } = this.state;\r\n        const { group, index, isAuth } = this.props;\r\n        return (\r\n            <Draggable draggableId={group.id} index={index}>\r\n                {(provided, snapshot) =>\r\n                    <section key={group.id} className={`group ${window.innerWidth > 600 ? 'padding-y-45 padding-x-30' : 'padding-y-15'}`}\r\n                        {...provided.draggableProps}\r\n                        ref={provided.innerRef}>\r\n                    \r\n                        <div className=\"group-header-container flex space-between align-center\">\r\n                            <div className=\"group-header-left align-center flex relative\">\r\n                                <IoIosArrowDropdownCircle style={{ color: group.color }}\r\n                                    className=\"drop-down-menu-icon\" onClick={this.handleMenuOpen} />\r\n                                <Menu\r\n                                    role=\"menuContainer\"\r\n                                    anchorEl={ElGroupSettings}\r\n                                    keepMounted\r\n                                    open={Boolean(ElGroupSettings)}\r\n                                    onClose={this.handleMenuClose}>\r\n                                    <MenuItem onClick={() => {\r\n                                        if (!this.props.isAuth) {\r\n                                            this.displayPopup('You are not a member of this board!')\r\n                                            return;\r\n                                        } this.props.onRemoveGroup(group.id)\r\n                                    }}>\r\n                                        <AiOutlineDelete className=\"delete-group-icon\" /> Delete Group\r\n                                    </MenuItem>\r\n                                    <MenuItem onClick={this.handleColorsToggle}>\r\n                                        <CgColorPicker className=\"color-group-icon\" /> Change Color\r\n                                    </MenuItem>\r\n                                </Menu>\r\n                                {elGroupColors &&\r\n                                    <div className=\"color-picker absolute flex wrap justify-center align-center\">\r\n                                        <div onClick={() => this.onChangeGroupColor('#ffcbcb')} className=\"color-pick\" style={{ backgroundColor: '#ffcbcb' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#f0a500')} className=\"color-pick\" style={{ backgroundColor: '#f0a500' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#70adb5')} className=\"color-pick\" style={{ backgroundColor: '#70adb5' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#1a1c20')} className=\"color-pick\" style={{ backgroundColor: '#1a1c20' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#9d65c9')} className=\"color-pick\" style={{ backgroundColor: '#9d65c9' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#931a25')} className=\"color-pick\" style={{ backgroundColor: '#931a25' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#7ea04d')} className=\"color-pick\" style={{ backgroundColor: '#7ea04d' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#838383')} className=\"color-pick\" style={{ backgroundColor: '#838383' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#1d2d50')} className=\"color-pick\" style={{ backgroundColor: '#1d2d50' }}></div>\r\n                                    </div>\r\n                                }\r\n                                <div className=\"drag-icon\" {...provided.dragHandleProps}>\r\n                                    <AiOutlineDrag />\r\n                                </div>\r\n                                <h1 style={{ color: group.color }} className=\"group-title\">\r\n                                    <ContentEditable\r\n                                        onFocus={this.focusText}\r\n                                        className=\"content-editable cursor-initial\"\r\n                                        innerRef={this.contentEditable}\r\n                                        html={name} // innerHTML of the editable div\r\n                                        disabled={!isAuth}       // use true to disable editing\r\n                                        onChange={this.handleChange} // handle innerHTML change\r\n                                        onBlur={() => {\r\n                                            this.props.onEditGroup(group.id, this.state.name, 'name')\r\n                                        }}\r\n                                        onKeyDown={(ev) => {\r\n                                            if (ev.key === 'Enter') {\r\n                                                ev.target.blur()\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                </h1>\r\n                            </div>\r\n                            <div className=\"group-header-right flex\"  {...provided.dragHandleProps}>\r\n                                <h3 style={{ color: this.props.group.color }}>Members</h3>\r\n                                <h3 style={{ color: this.props.group.color }}>Status</h3>\r\n                                <h3 style={{ color: this.props.group.color }}>Due-Date</h3>\r\n                                <h3 style={{ color: this.props.group.color }}>Priority</h3>\r\n                                <h3 style={{ color: this.props.group.color }}>Tags</h3>\r\n                            </div>\r\n                        </div>\r\n                        <Droppable droppableId={group.id} type=\"task\">\r\n                            {(provided, snapshot) =>\r\n                                <div className={`task-list ${snapshot.isDraggingOver ? 'drag-over' : ''}`}\r\n                                    ref={provided.innerRef}\r\n                                    {...provided.droppableProps}>\r\n                                    {group.tasks.map((task, index) => {\r\n                                        return <Task onToggleUpdates={this.props.onToggleUpdates} isAuth={isAuth}\r\n                                            onEditTask={this.props.onEditTask} index={index}\r\n                                            onRemoveTask={this.props.onRemoveTask} key={task.id}\r\n                                            group={group} task={task} users={this.props.users} />\r\n                                    })}\r\n                                    {provided.placeholder}\r\n                                </div>\r\n                            }\r\n                        </Droppable>\r\n                        <div className=\"task task-add\">\r\n                            <div className=\"task-color\" style={{ backgroundColor: group.color }}></div>\r\n                            <form onSubmit={(ev) => {\r\n                                ev.preventDefault()\r\n                                this.props.onAddTask(group.id, this.elInputAdd.current.value)\r\n                                this.elInputAdd.current.value = ''\r\n                            }} action=\"\">\r\n                                <input ref={this.elInputAdd} className=\"padding-x-30\" placeholder=\"+ Add Task\" type=\"text\" />\r\n                            </form>\r\n                        </div>\r\n                        {window.innerWidth > 600 &&\r\n                            <section className=\"group-precent-container flex\">\r\n                                <div className=\"group-precent flex\">\r\n                                    {status}\r\n                                </div>\r\n                                <div className=\"group-precent flex\">\r\n                                    {priority}\r\n                                </div>\r\n                            </section>\r\n                        }\r\n                    </section>\r\n                }\r\n            </Draggable>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {}\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    showSnackbar,\r\n    hideSnackbar\r\n}\r\n\r\nexport const Group = connect(mapStateToProps, mapDispatchToProps)(_Group);","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Snackbar, Button } from '@material-ui/core';\r\n// inside imports\r\nimport { hideSnackbar } from '../store/actions/systemActions.js';\r\n\r\nfunction _Popup(props){\r\n    const {isSnackbarShown, snackbarShown} = props;\r\n    return <Snackbar\r\n    anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n    }}\r\n    open={isSnackbarShown}\r\n    autoHideDuration={3000}\r\n    message={snackbarShown}\r\n    action={<Button style={{color: '#f2f1dfb0'}} onClick={props.hideSnackbar}>Close</Button>}\r\n/>\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isSnackbarShown: state.systemReducer.isSnackbarShown,\r\n        snackbarShown: state.systemReducer.snackbarTxt\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    hideSnackbar\r\n}\r\nexport const Popup = connect(mapStateToProps, mapDispatchToProps)(_Popup)","import React from 'react'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { GiHamburgerMenu } from 'react-icons/gi'\r\nimport { CgProfile } from 'react-icons/cg';\r\nimport { BiLogOut } from 'react-icons/bi';\r\nimport { FaRegUser } from 'react-icons/fa';\r\nimport { BsCalendar, BsCardList } from 'react-icons/bs';\r\nimport { MdNotificationsActive } from 'react-icons/md';\r\nimport { AiOutlineHome } from 'react-icons/ai';\r\n\r\nimport socketService from '../services/socketService.js';\r\nimport {recieveUpdate, loadBoards} from '../store/actions/boardActions.js';\r\nimport {updateUser} from '../store/actions/userActions.js'\r\nimport { connect } from 'react-redux';\r\n\r\nexport class _MobileNav extends React.Component {\r\n    state = {\r\n        isMenuShown: false\r\n    }\r\n    componentDidMount() {\r\n        socketService.on('updatedBoard', updatedBoard => {\r\n            this.props.recieveUpdate(updatedBoard)\r\n        });\r\n        socketService.on('reloadBoards', () => {\r\n            this.props.loadBoards()\r\n        })\r\n        socketService.on('accept-notif', (notification) => {\r\n            this.props.updateUser({ ...this.props.loggedUser, notifications: [notification, ...this.props.loggedUser.notifications] })\r\n        })\r\n        socketService.emit('user', this.props.loggedUser._id)\r\n        this.setState({ isShown: this.props.isBoardbarShown })\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard')\r\n        socketService.off('reloadBoards')\r\n        socketService.off('accept-notif')\r\n    }\r\n    toggleMenuModal = () => {\r\n        this.setState({ isMenuShown: !this.state.isMenuShown })\r\n    }\r\n    closeMenuModal = () => {\r\n        this.setState({ isMenuShown: false })\r\n    }\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n    render() {\r\n        const { loggedUser, params, members, boardName } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                <nav className=\" flex align-center space-between\">\r\n                    <div className=\"mobile-nav-left flex\">\r\n                        <GiHamburgerMenu onClick={this.toggleMenuModal} />\r\n                        <h1>{boardName ? boardName : loggedUser.fullName}</h1>\r\n                    </div>\r\n                    {boardName &&\r\n                        <div className=\"board-users-container flex\">\r\n\r\n                            {members.length === 0 && <div className=\"user-img-container\"> <CgProfile /></div>}\r\n                            {members.length !== 0 && members.map((member, idx) => {\r\n                                return <div key={idx} className=\"user-img-container\">\r\n                                    {\r\n                                        member.imgUrl ? <img className=\"member-img\" src={member.imgUrl} alt=\"\" />\r\n                                            :\r\n                                            <div className=\"member-letter\">\r\n                                            {this._getMemeberInitials(member)[0]}\r\n                                            {this._getMemeberInitials(member)[1]}\r\n                                        </div>                                    }\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                    }\r\n                </nav>\r\n                <section className={`${this.state.isMenuShown && 'animate-menu-modal'} menu-modal flex column align-center`}>\r\n                    <NavLink to=\"/\">\r\n                        <AiOutlineHome />  <h3>Home</h3>\r\n                    </NavLink>\r\n                    <NavLink to=\"/boards\">\r\n                        <BsCardList /> <h3>Boards List</h3>\r\n                    </NavLink>\r\n                    {params && <NavLink to={`/mob-activities/${params.id}`}>\r\n                        <MdNotificationsActive /> <h3>Activities</h3>\r\n                    </NavLink>}\r\n                    <NavLink to=\"/myweek\">\r\n                        <BsCalendar /> <h3>My Week</h3>\r\n                    </NavLink>\r\n                    <NavLink to={`/user/${loggedUser._id}`}>\r\n                        <FaRegUser /> <h3>My Profile</h3>\r\n                    </NavLink>\r\n                    <NavLink to=\"/login\">\r\n                        <BiLogOut /> <h3>Logout</h3>\r\n                    </NavLink>\r\n                </section>\r\n                {this.state.isMenuShown && <div className=\"modal-screen-wrapper\" onClick={this.closeMenuModal}></div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state =>{\r\n    return {}\r\n}\r\n\r\nconst mapDispatchToProps={\r\n    loadBoards,\r\n    recieveUpdate,\r\n    updateUser\r\n}\r\n\r\n\r\nexport const MobileNav = connect(mapStateToProps, mapDispatchToProps)(_MobileNav)","import React from 'react';\r\nimport Chart from 'react-apexcharts';\r\n\r\nexport function Dashboard(props) {\r\n    const { board } = props;\r\n    const boardMembers = board.members.map(member => {\r\n        const user = { ...member };\r\n        user.done = 0;\r\n        user['working on it'] = 0;\r\n        user.stuck = 0;\r\n        user.other = 0;\r\n        return user;\r\n    })\r\n\r\n    boardMembers.forEach(member => {\r\n        board.groups.forEach(group => {\r\n            group.tasks.forEach(task => {\r\n                if (task.members.some(currMember => currMember._id === member._id)) {\r\n                    task.status ? member[task.status.toLowerCase()]++ : member.other++;\r\n                }\r\n            })\r\n        })\r\n    })\r\n\r\n    const names = [],\r\n        done = [],\r\n        working = [],\r\n        stuck = [],\r\n        other = [];\r\n\r\n    boardMembers.forEach(member => {\r\n        names.push(member.fullName);\r\n        done.push(member.done);\r\n        working.push(member['working on it']);\r\n        stuck.push(member.stuck);\r\n        other.push(member.other)\r\n    });\r\n\r\n    const options = {\r\n        colors: ['#00ca72', '#fdab3d', '#e44258', '#a8a8a8'],\r\n        chart: {\r\n            type: 'bar',\r\n            height: '100%',\r\n            width: '100%',\r\n            stacked: true,\r\n            toolbar: {\r\n                show: true\r\n            },\r\n            zoom: {\r\n                enabled: true\r\n            }\r\n        },\r\n        responsive: [],\r\n        plotOptions: {\r\n            bar: {\r\n                horizontal: false,\r\n            },\r\n        },\r\n        xaxis: {\r\n            categories: [\r\n            ],\r\n        },\r\n        legend: {\r\n            position: 'right',\r\n            offsetY: 40\r\n        },\r\n        fill: {\r\n            opacity: 1\r\n        }\r\n    };\r\n\r\n    options.xaxis = { categories: names };\r\n    const series = [\r\n        {\r\n            name: 'Done',\r\n            data: done\r\n        },\r\n        {\r\n            name: 'Working on it',\r\n            data: working\r\n        },\r\n        {\r\n            name: 'Stuck',\r\n            data: stuck\r\n        },\r\n        {\r\n            name: 'Other',\r\n            data: other\r\n        }\r\n    ]\r\n    return (\r\n        <Chart options={options} series={series} type=\"bar\" width={'90%'} height={'75%'} />\r\n    )\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\nimport { BsFillPlusCircleFill } from 'react-icons/bs';\r\nimport { showSnackbar, hideSnackbar } from '../store/actions/systemActions.js';\r\nimport lodash from 'lodash'\r\n// Inside imports\r\nimport { userService } from '../services/userService.js';\r\nimport { Boardbar } from '../cmps/Boardbar';\r\nimport { BoardHeader } from '../cmps/BoardHeader';\r\nimport { Navbar } from '../cmps/Navbar';\r\nimport { Group } from '../cmps/Group';\r\nimport { Popup } from '../cmps/Popup'\r\nimport { loadUsers } from '../store/actions/userActions'\r\nimport {\r\n    updateBoard, loadBoards,\r\n    addGroup, editGroup, removeGroup,\r\n    addTask, removeTask, editTask,\r\n    clearFilter\r\n}\r\n    from '../store/actions/boardActions'\r\nimport { groupChanges } from '../store/actions/changesActions'\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\nimport { Dashboard } from '../cmps/Dashboard.jsx';\r\n\r\nclass _Board extends Component {\r\n    state = {\r\n        boardId: '',\r\n        txt: '',\r\n        isBoardShown: true,\r\n        isDashboardShown: false,\r\n        isModalShown: false\r\n    }\r\n    async componentDidMount() {\r\n        if (!this.props.loggedUser) this.props.history.push(\"/\")\r\n        try {\r\n            if (!this.props.boards || !this.props.boards.length) {\r\n                await this.props.loadBoards();\r\n            }\r\n\r\n            if (!this.props.users || !this.props.users.length) {\r\n                await this.props.loadUsers();\r\n            }\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.setState({ boardId: this.props.match.params.id })\r\n    }\r\n    displayPopup(msg) {\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.match.params.id !== this.props.match.params.id) {\r\n            this.props.clearFilter();\r\n            this.setState({ boardId: this.props.match.params.id })\r\n        }\r\n    }\r\n    onEditBoard = async (newBoard, desc) => {\r\n        const { loggedUser } = this.props;\r\n\r\n        this.checkIfBoardMember()\r\n\r\n        this.props.updateBoard(newBoard, desc, loggedUser)\r\n        userService.notifyUsers(`${newBoard.name}: ${desc}`, newBoard.members, loggedUser)\r\n        if (desc) this.displayPopup('Updated board.')\r\n    }\r\n    applyFilter = (board, filterBy) => {\r\n        const filteredBoard = lodash.cloneDeep(board)\r\n        if (filterBy.groupId) {\r\n            filteredBoard.groups = filteredBoard.groups.filter(group => group.id === filterBy.groupId)\r\n        }\r\n        function filterTasks(cb) {\r\n            filteredBoard.groups = filteredBoard.groups.map(group => {\r\n                group.tasks = group.tasks.filter(cb)\r\n                return group;\r\n            })\r\n        }\r\n        if (filterBy.memberId) {\r\n            filterTasks(task => task.members.some(member => member._id === filterBy.memberId))\r\n        }\r\n        if (filterBy.taskPriority) {\r\n            filterTasks(task => task.priority.toLowerCase() === filterBy.taskPriority.toLowerCase())\r\n        }\r\n        if (filterBy.taskStatus) {\r\n            filterTasks(task => task.status.toLowerCase() === filterBy.taskStatus.toLowerCase())\r\n        }\r\n        if (filterBy.dueDate) {\r\n            filterTasks(task => task.dueDate === filterBy.dueDate)\r\n        }\r\n        if (this.state.txt) {\r\n            filterTasks(task => {\r\n                return (\r\n                    task.name.toLowerCase().includes(this.state.txt.toLowerCase())\r\n                    ||\r\n                    task.tags.some(tag => tag.txt.toLowerCase().includes(this.state.txt.toLowerCase()))\r\n                )\r\n            })\r\n        }\r\n        filteredBoard.groups = filteredBoard.groups.filter(group => group.tasks.length)\r\n        return filteredBoard\r\n    }\r\n    //------------------GROUP CRUD-----------------\r\n    onAddGroup = async () => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        try {\r\n            this.props.addGroup(board, this.props.loggedUser);\r\n            userService.notifyUsers(`${board.name}: ${loggedUser.fullName} added a group.`, board.members, loggedUser)\r\n            this.props.clearFilter();\r\n            this.displayPopup('Added group.')\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.props.history.push(`/board/${this.state.boardId}`)\r\n    }\r\n    onRemoveGroup = async (groupId) => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        const group = board.groups.find(group => group.id === groupId);\r\n        const notif = `${board.name}: ${loggedUser.fullName} removed group ${group.name}`;\r\n        try {\r\n            this.props.removeGroup(groupId, board, this.props.loggedUser)\r\n            userService.notifyUsers(notif, board.members, loggedUser);\r\n            this.displayPopup('Removed group.')\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n    onEditGroup = async (groupId, changedValue, key) => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        const group = board.groups.find(group => group.id === groupId)\r\n        if (group[key] === changedValue) return;\r\n        const originalValue = group[key];\r\n        group[key] = changedValue;\r\n        try {\r\n            const desc = `${group.name}: ${loggedUser.fullName} Changed ${key} from ${originalValue} to ${changedValue}`;\r\n            this.props.editGroup(group, board, desc, loggedUser)\r\n            userService.notifyUsers(desc, board.members, loggedUser);\r\n            this.displayPopup('Updated group.')\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n\r\n\r\n    //-----------------TASKS CRUD------------------------\r\n    onRemoveTask = async (taskId, group) => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        try {\r\n            const task = group.tasks.find(task => task.id === taskId);\r\n            const notif = `${loggedUser.fullName} Removed the task ${task.name} from ${group.name}`;\r\n            this.props.removeTask(taskId, board, group, loggedUser);\r\n            userService.notifyUsers(notif, board.members, loggedUser);\r\n            this.displayPopup('Removed task.');\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n    onAddTask = async (groupId, taskName) => {\r\n        if (!taskName) taskName = 'New task'\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        const group = board.groups.find(group => group.id === groupId)\r\n        const notif = ` ${board.name}: ${loggedUser.fullName} Added a task to ${group.name}`;\r\n        try {\r\n            this.props.addTask(groupId, taskName, board, loggedUser)\r\n            userService.notifyUsers(notif, board.members, loggedUser)\r\n            this.props.clearFilter()\r\n            this.displayPopup('Added task.')\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n    onEditTask = async (task, prevTask, desc) => {\r\n\r\n        if (!this.checkIfBoardMember()) return\r\n\r\n        const board = this._getCurrBoard()\r\n        const { loggedUser } = this.props;\r\n        this.props.editTask(task, board, desc, this.props.loggedUser)\r\n        userService.notifyUsers(`${board.name}: ${desc}`, board.members, loggedUser)\r\n        this.displayPopup('Updated task.')\r\n    }\r\n    //---------------------Draggable----------------------\r\n    onDragEnd = async result => {\r\n        const { destination, source, draggableId, type } = result\r\n        if (!destination) return;\r\n        if (destination.droppableId === source.droppableId\r\n            &&\r\n            destination.index === source.index) return;\r\n        const board = this._getCurrBoard()\r\n        if (type === 'group') {\r\n            const newGroups = Array.from(board.groups)\r\n            const draggedGroup = newGroups.find(group => group.id === draggableId)\r\n            newGroups.splice(source.index, 1)\r\n            newGroups.splice(destination.index, 0, draggedGroup)\r\n            board.groups = newGroups\r\n            try {\r\n                this.props.updateBoard(board)\r\n\r\n            } catch (err) {\r\n                console.log('Error', err);\r\n            }\r\n        } else {\r\n            const groupStart = board.groups.find(group => group.id === source.droppableId)\r\n            const groupEnd = board.groups.find(group => group.id === destination.droppableId)\r\n            if (groupStart.id === groupEnd.id) {\r\n                const newTasks = Array.from(groupStart.tasks)\r\n                const newTask = groupStart.tasks.find(task => task.id === draggableId)\r\n                newTasks.splice(source.index, 1)\r\n                newTasks.splice(destination.index, 0, newTask)\r\n                const newGroup = {\r\n                    ...groupStart,\r\n                    tasks: newTasks\r\n                }\r\n                const newIdx = board.groups.findIndex(group => group.id === newGroup.id)\r\n                board.groups.splice(newIdx, 1, newGroup)\r\n                try {\r\n                    this.props.updateBoard(board)\r\n                } catch (err) {\r\n                    console.log('Error', err);\r\n                }\r\n            } else {\r\n                const startTasks = Array.from(groupStart.tasks)\r\n                startTasks.splice(source.index, 1)\r\n                const newStartGroup = {\r\n                    ...groupStart,\r\n                    tasks: startTasks\r\n                }\r\n                const endTasks = Array.from(groupEnd.tasks)\r\n                const newTaskToPaste = groupStart.tasks.find(task => task.id === draggableId)\r\n                endTasks.splice(destination.index, 0, newTaskToPaste)\r\n                const newFinishGroup = {\r\n                    ...groupEnd,\r\n                    tasks: endTasks\r\n                }\r\n                const startIdx = board.groups.findIndex(group => group.id === newStartGroup.id)\r\n                const endIdx = board.groups.findIndex(group => group.id === newFinishGroup.id)\r\n                board.groups.splice(startIdx, 1, newStartGroup)\r\n                board.groups.splice(endIdx, 1, newFinishGroup)\r\n                try {\r\n                    const { loggedUser } = this.props;\r\n                    const desc = `${loggedUser.fullName} Moved ${newTaskToPaste.name} from ${newStartGroup.name} to ${newFinishGroup.name}`\r\n                    this.props.updateBoard(this._getCurrBoard(), desc, loggedUser)\r\n                    userService.notifyUsers(`${board.name}: ${desc}`, board.members, loggedUser)\r\n                } catch (err) {\r\n                    console.log('Error', err);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    handleSearch = (ev) => {\r\n        this.setState({ txt: ev.target.value })\r\n    }\r\n    handleBoardBarSearch = (val) => {\r\n        this.setState({ boardBarSearch: val })\r\n    }\r\n    _getCurrBoard = () => {\r\n        return this.props.boards.find(board => board._id === this.state.boardId)\r\n    }\r\n    showBoard = () => {\r\n        this.setState({ isBoardShown: true, isDashboardShown: false, isModalShown: false })\r\n    }\r\n    showDashboard = () => {\r\n        this.setState({ isDashboardShown: true, isBoardShown: false, isModalShown: false })\r\n    }\r\n    toggleModal = () => {\r\n        this.setState({ isModalShown: !this.state.isModalShown })\r\n    }\r\n    checkIfBoardMember = () => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        return loggedUser.isAdmin || board.members.some(member => member._id === loggedUser._id)\r\n    }\r\n    render() {\r\n        const board = this._getCurrBoard()\r\n        const { users, filterBy } = this.props;\r\n        if (!board) {\r\n            return (\r\n                <div className=\"loader-container flex justify-center align-center\">\r\n                    <img src=\"loading.gif\" alt=\"\" />\r\n                </div>\r\n            )\r\n        }\r\n        const isAuth = this.checkIfBoardMember();\r\n        const filteredBoard = this.applyFilter(board, filterBy);\r\n        return (\r\n            <section className={`board ${window.innerWidth > 600 ? 'flex' : 'flex column'}`}>\r\n                {window.innerWidth > 600 ?\r\n                    <React.Fragment>\r\n                        <Navbar />\r\n                        <Boardbar handleBoardBarSearch={this.handleBoardBarSearch} />\r\n                    </React.Fragment>\r\n                    :\r\n                    <MobileNav boardName={board.name} members={board.members} params={this.props.match.params} loggedUser={this.props.loggedUser} />\r\n                }\r\n                <div className=\"board-container\">\r\n                    {window.innerWidth > 600 && <BoardHeader isAuth={isAuth} filterBy={filterBy} loggedUser={this.props.loggedUser} board={board} onAddGroup={this.onAddGroup} onEditBoard={this.onEditBoard}\r\n                        handleSearch={this.handleSearch} users={users} showBoard={this.showBoard}\r\n                        showDashboard={this.showDashboard} toggleModal={this.toggleModal} isModalShown={this.state.isModalShown}\r\n                        isBoardShown={this.state.isBoardShown} />}\r\n                    {this.state.isBoardShown ?\r\n                        <div className={`groups-container ${window.innerwidth > 600 && 'padding-x-30'}`} style={{ height: `${window.innerWidth < 600 && 94 + 'vh'}` }}>\r\n                                {\r\n                                !isAuth &&\r\n                                <div className=\"fixed not-member-modal\">\r\n                                    <p>\r\n                                         You are not a member of this board.\r\n                                    </p>\r\n                                     <p>\r\n                                        Most actions will be restricted.\r\n                                    </p>\r\n                                </div>\r\n                                }\r\n                            \r\n                            <DragDropContext\r\n                                onDragEnd={this.onDragEnd}>\r\n                                <Droppable droppableId={board._id} type=\"group\">\r\n                                    {(provided, snapshot) =>\r\n                                        <div className={`group-list`}\r\n                                            ref={provided.innerRef}\r\n                                            {...provided.droppableProps} >\r\n                                            {filteredBoard.groups.map((group, index) => {\r\n                                                return <Group key={group.id} index={index} isAuth={isAuth}\r\n                                                    onEditTask={this.onEditTask} onAddTask={this.onAddTask} onRemoveTask={this.onRemoveTask}\r\n                                                    onRemoveGroup={this.onRemoveGroup} onEditGroup={this.onEditGroup}\r\n                                                    onChangeGroupColor={this.onChangeGroupColor} group={group} users={board.members} />\r\n                                            })}\r\n                                            {provided.placeholder}\r\n                                        </div>\r\n                                    }\r\n                                </Droppable>\r\n                            </DragDropContext>\r\n                            {window.innerWidth < 600 &&\r\n                                <BsFillPlusCircleFill className=\"group-add-btn\" onClick={this.onAddGroup} />\r\n                            }\r\n                        </div>\r\n                        :\r\n                        <Dashboard board={board} />\r\n                    }\r\n                </div>\r\n                <Popup />\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        users: state.userReducer.users,\r\n        loggedUser: state.userReducer.loggedUser,\r\n        filterBy: state.boardReducer.filterBy\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    addGroup,\r\n    removeGroup,\r\n    addTask,\r\n    removeTask,\r\n    editTask,\r\n    editGroup,\r\n    updateBoard,\r\n    showSnackbar,\r\n    hideSnackbar,\r\n    loadUsers,\r\n    clearFilter,\r\n    groupChanges\r\n}\r\nexport const Board = connect(mapStateToProps, mapDispatchToProps)(_Board);","import { boardService } from '../../services/boardService'\r\nimport socketService from '../../services/socketService.js'\r\nimport { userService } from '../../services/userService.js'\r\n\r\nexport function groupChanges(desc, loggedUser, board) {\r\n    return async dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.handleBoardChanges(desc, loggedUser, board)\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n            const users = await userService.loadUsers();\r\n            const notification = {\r\n                byUser: {\r\n                    fullName: loggedUser.fullName,\r\n                    imgUrl: loggedUser.imgUrl\r\n                },\r\n                content: `${board.name}: ${desc}`,\r\n                createdAt: Date.now()\r\n            }\r\n            board.members.forEach(member => {\r\n                if (member._id === loggedUser._id) return;\r\n                let userToUpdate = users.find(user => user._id === member._id);\r\n                userToUpdate.notifications.unshift(notification);\r\n                userService.updateUser(userToUpdate);\r\n                socketService.emit('send-notif', { memberId: member._id, notification });\r\n            })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t send activities/notif');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { BsFillPlusCircleFill, } from 'react-icons/bs';\r\n// inside imports\r\nimport { loadUsers } from '../store/actions/userActions';\r\nimport { addBoard, loadBoards, removeBoard } from '../store/actions/boardActions.js';\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\nimport { FaTrash } from 'react-icons/fa';\r\n\r\nclass _Boards extends Component {\r\n    async componentDidMount() {\r\n        try {\r\n            if (!this.props.boards || !this.props.boards.length) {\r\n                await this.props.loadBoards();\r\n                try {\r\n                    if (!this.props.users || !this.props.users.length) {\r\n                        await this.props.loadUsers();\r\n                    }\r\n                } catch (err) {\r\n                    console.log('Error', err)\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n    goToBoard = (boardId) => {\r\n        this.props.history.push(`/board/${boardId}`)\r\n    }\r\n    onAddBoard = () => {\r\n        this.props.addBoard(this.props.loggedUser)\r\n    }\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n    render() {\r\n        if (this.props.boards.length === 0) return <h1>Loading...</h1>\r\n        return (\r\n            <React.Fragment>\r\n                <MobileNav loggedUser={this.props.loggedUser} />\r\n                <div className=\"boards-list flex column align-center relative\">\r\n                    {this.props.boards.map(board =>\r\n                        <div key={board._id} className=\"board-details flex column relative\" onClick={() => this.goToBoard(board._id)}>\r\n                            <div className=\"board-details-header flex  space-between\">\r\n                                <FaTrash className=\"remove-board-icon\" onClick={() => this.props.removeBoard(board._id)} />\r\n                                <h2>{board.name}</h2>\r\n                                <div className=\"board-members-imgs flex\">\r\n                                    {board.members.map(member =>\r\n                                        member.imgUrl ?\r\n                                            <img className=\"member-img\" key={member._id} src={member.imgUrl} alt=\"\" />\r\n                                            :\r\n                                            <div key={member._id} className=\"member-letter member-img\">\r\n                                                {this._getMemeberInitials(member)[0]}\r\n                                                {this._getMemeberInitials(member)[1]}\r\n                                            </div>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"board-details-main flex column wrap\">\r\n                                {board.groups.map(group => <p style={{ color: group.color }} key={group.id}>{group.name}</p>)}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <BsFillPlusCircleFill className=\"add-group-icon\" onClick={this.onAddBoard} />\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        users: state.userReducer.users,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    addBoard,\r\n    loadUsers,\r\n    removeBoard\r\n}\r\nexport const Boards = connect(mapStateToProps, mapDispatchToProps)(_Boards);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { FaArrowLeft, FaFacebookF, FaUserCircle } from 'react-icons/fa';\r\nimport FacebookLogin from 'react-facebook-login'\r\n// Inside imports\r\nimport { login, guestLogin, signup } from '../store/actions/userActions.js'\r\nimport { loadBoards } from '../store/actions/boardActions'\r\n\r\nclass _Login extends Component {\r\n    state = {\r\n        isLoading: false,\r\n        isErrLogin: false,\r\n        errMsg: ''\r\n    }\r\n    onLogin = async (values, { resetForm }) => {\r\n        try {\r\n            resetForm();\r\n            await this.props.login(values);\r\n            this.setState({ isLoading: true })\r\n            await this.props.loadBoards()\r\n            this.setState({ isLoading: false })\r\n            if (this.props.loggedUser) this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n        }\r\n        catch (err) {\r\n            this.setState({ isErrLogin: true, errMsg: 'Wrong username or password' })\r\n            setTimeout(() => {\r\n                this.setState({ isErrLogin: false })\r\n            }, 2000);\r\n        }\r\n\r\n    }\r\n    onGuestLogin = async () => {\r\n        await this.props.guestLogin();\r\n        this.setState({ isLoading: true })\r\n        await this.props.loadBoards()\r\n        this.setState({ isLoading: false })\r\n        this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n    responseFacebook = async (response) => {\r\n        const user = {\r\n            username: response.name,\r\n            email: response.email,\r\n            imgUrl: response.picture.data.url,\r\n            facebookId: response.userID\r\n        }\r\n        await this.props.login(user)\r\n        this.setState({ isLoading: true })\r\n        await this.props.loadBoards()\r\n        this.setState({ isLoading: false })\r\n        if (this.props.loggedUser) this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n\r\n    render() {\r\n        const initialValues = { username: '', password: '' }\r\n        const { isErrLogin, errMsg } = this.state;\r\n        if (this.state.isLoading) return (\r\n            <div className=\"loader-container flex justify-center align-center\">\r\n                <img src=\"loading.gif\" alt=\"\" />\r\n            </div>\r\n        )\r\n        return <div className=\"sign-login\">\r\n            <Formik\r\n                initialValues={initialValues}\r\n                validate={formValues => {\r\n                    const errors = {};\r\n                    if (!formValues.username) errors.username = 'Required';\r\n                    if (!formValues.password) errors.password = 'Required';\r\n                    return errors;\r\n                }}\r\n                onSubmit={this.onLogin}>\r\n                <Form className=\"sign-login-form flex column align-center space-around\">\r\n                    <FaUserCircle />\r\n                    <section>\r\n                        <legend>Username *</legend>\r\n                        <Field className=\"sign-login-input\" type=\"text\" autoComplete=\"curren-username\" name=\"username\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"email\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Password *</legend>\r\n                        <Field className=\"sign-login-input\" type=\"password\" autoComplete=\"current-password\" name=\"password\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"password\" component=\"span\" />\r\n                    <div>\r\n\r\n                        <button type=\"submit flex\">Login</button>\r\n                        <div type=\"button\" className=\"facebook-btn-container\">\r\n                            <FaFacebookF />\r\n                            <FacebookLogin\r\n                                appId=\"632288707652598\"\r\n                                fields=\"name,email,picture\"\r\n                                cssClass=\"facebook-btn\"\r\n                                callback={this.responseFacebook} />\r\n                        </div>\r\n                    </div>\r\n                    <a href=\"/#/signup\">Don't have an account? sign up here.</a>\r\n                    <button className=\"guest-button\" onClick={this.onGuestLogin}>Or try as a guest!</button>\r\n                </Form>\r\n            </Formik>\r\n            <div data-title=\"Back to home\" className=\"go-back\">\r\n                <NavLink to=\"/\"><FaArrowLeft /></NavLink>\r\n            </div>\r\n            <div className={`sign-login-err-modal flex justify-center align-center ${isErrLogin && \"animate-sign-login-err-modal\"}`}>\r\n                <h2>{errMsg}</h2>\r\n            </div>\r\n        </div>\r\n\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser,\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    login,\r\n    guestLogin,\r\n    loadBoards,\r\n    signup\r\n}\r\nexport const Login = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Login));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { FaArrowLeft, FaUserCircle } from 'react-icons/fa';\r\n// Inside imports\r\nimport { signup, guestLogin } from '../store/actions/userActions.js'\r\nimport { loadBoards } from '../store/actions/boardActions'\r\n\r\nclass _Signup extends Component {\r\n    state = {\r\n        isLoading: false,\r\n        isErrSignup: false,\r\n        errMsg: ''\r\n    }\r\n\r\n    onSignup = async (values, { resetForm }) => {\r\n        resetForm();\r\n        const { username, password, email, fullName } = values;\r\n        try {\r\n            await this.props.signup({ username, password, email, fullName });\r\n            this.setState({ isLoading: true })\r\n            await this.props.loadBoards()\r\n            this.setState({ isLoading: false })\r\n            this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n        } catch (err) {\r\n            console.log('err', err);\r\n            this.setState({ isErrSignup: true, errMsg: err})\r\n            setTimeout(() => {\r\n                this.setState({ isErrSignup: false })\r\n            }, 2000);\r\n        }\r\n    }\r\n    onGuestLogin = async () => {\r\n        await this.props.guestLogin();\r\n        this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n    render() {\r\n        const initialValues = { username: '', password: '', confirm: '', email: '', fullName: '' }\r\n        const {isErrSignup, errMsg} = this.state;\r\n        if (this.state.isLoading) return (\r\n            <div className=\"loader-container flex justify-center align-center\">\r\n                <img src=\"loading.gif\" alt=\"\" />\r\n            </div>\r\n        )\r\n        return <div className=\"sign-login\">\r\n            <Formik\r\n                initialValues={initialValues}\r\n                validate={formValues => {\r\n                    const errors = {};\r\n                    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n                    if (!formValues.username) errors.username = 'Required';\r\n                    if (!formValues.fullName) errors.fullName = 'Required';\r\n                    if (!formValues.password) errors.password = 'Required';\r\n                    if (formValues.confirm !== formValues.password) errors.confirm = 'Doesn\\'t match password';\r\n                    if (!re.test(formValues.email.toLowerCase())) errors.email = 'Invalid email address'\r\n                    return errors;\r\n                }}\r\n                onSubmit={this.onSignup}>\r\n                <Form className=\"sign-login-form flex column align-center space-around\">\r\n                    <FaUserCircle />\r\n                    <section>\r\n                        <legend>Username *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"text\" name=\"username\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"username\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Full name *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"text\" name=\"fullName\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"fullName\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Email *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"text\" name=\"email\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"email\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Password *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"password\" name=\"password\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"password\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Confirm password *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"password\" name=\"confirm\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"confirm\" component=\"span\" />\r\n                    <button type=\"submit\">Signup</button>\r\n                    <a href=\"/#/login\">Already have an account? Login here!</a>\r\n                    <button className=\"guest-button\" onClick={this.onGuestLogin}>Or try as a guest!</button>\r\n                </Form>\r\n            </Formik>\r\n            <div data-title=\"Back to home\" className=\"go-back\">\r\n                <NavLink to=\"/\"><FaArrowLeft /></NavLink>\r\n            </div>\r\n            <div className={`sign-login-err-modal flex justify-center align-center ${isErrSignup && \"animate-sign-login-err-modal\"}`}>\r\n                <h2>{errMsg}</h2>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser,\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    guestLogin,\r\n    loadBoards\r\n}\r\nexport const Signup = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Signup));","import React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Fade } from '@material-ui/core';\r\n// Inside imports\r\nimport { Boardbar } from '../cmps/Boardbar';\r\nimport { Navbar } from '../cmps/Navbar';\r\nimport { userService } from '../services/userService.js';\r\nimport { updateUser } from '../store/actions/userActions';\r\nimport { cloudinaryService } from '../services/cloudinaryService';\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport { MdDelete } from 'react-icons/md';\r\nimport socketService from '../services/socketService';\r\nimport { removeBoard, loadBoards } from '../store/actions/boardActions.js';\r\nimport { showSnackbar, hideSnackbar } from '../store/actions/systemActions.js';\r\n\r\nclass _UserProfile extends Component {\r\n    state = {\r\n        isModalOpen: false,\r\n        user: {\r\n            _id: '',\r\n            email: '',\r\n            username: '',\r\n            fullName: '',\r\n            imgUrl: '',\r\n            selectedBoardId: '',\r\n            selectedBoardName: '',\r\n            isModalShown: false\r\n        }\r\n\r\n    }\r\n    async componentDidMount() {\r\n        this.props.loadBoards();\r\n        setTimeout(async () => {\r\n            const user = await userService.getUserById(this.props.match.params.id)\r\n            this.setState({ user: { ...user } })\r\n        }, 500);\r\n    }\r\n    async componentDidUpdate(prevProps) {\r\n        if (prevProps.match.params.id !== this.props.match.params.id) {\r\n            this.setState({ user: {} }, () => {\r\n                setTimeout(async () => {\r\n                    const user = await userService.getUserById(this.props.match.params.id)\r\n                    this.setState({ user: { ...user } })\r\n                }, 500)\r\n            });\r\n        }\r\n    }\r\n    toggleModal = () => {\r\n        this.setState({ isModalOpen: !this.state.isModalOpen })\r\n    }\r\n    handleChange = ({ target }) => {\r\n        this.setState({ user: { ...this.state.user, [target.name]: target.value } })\r\n    }\r\n    updateProfile = (ev) => {\r\n        ev.preventDefault()\r\n        this.props.updateUser(this.state.user)\r\n        this.toggleModal()\r\n    }\r\n    uploadImg = async (ev) => {\r\n        const res = await cloudinaryService.uploadImg(ev.target.files[0])\r\n        this.setState({ user: { ...this.state.user, imgUrl: res.url } })\r\n    }\r\n\r\n    onMoveToBoard(id) {\r\n        this.props.history.push(`/board/${id}`)\r\n    }\r\n\r\n    onToggleModal = () => {\r\n        this.setState({ isModalShown: !this.state.isModalShown })\r\n    }\r\n\r\n    displayPopup(msg) {\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n\r\n    onBoardRemove = async () => {\r\n        const { boards, match, history, removeBoard, loggedUser } = this.props;\r\n        const { selectedBoardId } = this.state;\r\n        const board = boards.find(board => board._id === selectedBoardId);\r\n        const notif = `${loggedUser.fullName} deleted ${board.name}`;\r\n        userService.notifyUsers(notif, board.members, loggedUser)\r\n        const { id } = match.params;\r\n        if (boards.length === 1) {\r\n            return;\r\n        }\r\n        await removeBoard(selectedBoardId);\r\n        socketService.emit('add-delete-board')\r\n        this.displayPopup('Removed board.');\r\n        if (id === selectedBoardId) {\r\n            const idx = boards.findIndex(board => board._id !== selectedBoardId)\r\n            history.push(`/board/${boards[idx]._id}`)\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let { email, fullName, imgUrl, _id } = this.state.user;\r\n        if (!_id) {\r\n            return (\r\n                <div className=\"loader-container flex justify-center align-center\">\r\n                    <img src='loading.gif' alt=\"\" />\r\n                </div>\r\n            )\r\n        }\r\n        const [firstName, lastName] = fullName.split(' ');\r\n        let initials = firstName.charAt(0).toUpperCase();\r\n        if (lastName) initials += lastName.charAt(0).toUpperCase()\r\n        const guestId = '5f71dbb63ba1780c44c9a6c9';\r\n        const { loggedUser } = this.props\r\n        const userCreatedBoards = this.props.boards.filter(board => board.boardCreator._id === this.state.user._id)\r\n        const { isModalShown, selectedBoardName } = this.state;\r\n\r\n        let numOfUserTasks = 0\r\n        this.props.boards.forEach(board => {\r\n            board.groups.forEach(group => {\r\n                group.tasks.forEach(task => {\r\n                    task.members.forEach(member => {\r\n                        if (member && member._id === this.state.user._id) {\r\n                            numOfUserTasks++\r\n                        }\r\n                    })\r\n                })\r\n            })\r\n        })\r\n        return (\r\n            <section className={`user-profile flex ${window.innerWidth < 600 && 'column'}`}>\r\n                {window.innerWidth > 600 ?\r\n                    <React.Fragment>\r\n                        <Navbar />\r\n                        <Boardbar />\r\n                    </React.Fragment>\r\n                    : <MobileNav loggedUser={this.props.loggedUser} />\r\n                }\r\n                <div className=\"user-container relative\">\r\n                    <header className=\"header-container padding-x-15 padding-y-15 flex justify-center  align-center\">\r\n                        {imgUrl ? <img className=\"user-profile-big\" src={imgUrl} alt=\"\" /> :\r\n                            <div className=\"user-profile-big initials flex align-center justify-center\">{initials}</div>}\r\n                    </header>\r\n                    <div className=\"user-details-container relative padding-x-30 padding-y-45 align-center justify-center flex  column\">\r\n                        <FaArrowLeft className=\"go-back-arrow absolute\" onClick={() => this.props.history.goBack()} />\r\n                        {(loggedUser._id === _id && loggedUser._id !== guestId) ? <h2 onClick={this.toggleModal}\r\n                            className=\"clickable-header\">Edit Profile</h2> : ''}\r\n                        <div className=\"user-details-inner-container flex justify-center\">\r\n                            <div className=\"col-left\">\r\n                                <h1>Details</h1>\r\n                                <h3>Email: {email}</h3>\r\n                                <h3>Full Name: {fullName}</h3>\r\n                            </div>\r\n                            <hr />\r\n                            <div className=\"col-mid\">\r\n                                <h1>Boards</h1>\r\n                                {\r\n                                    !userCreatedBoards.length\r\n                                        ? <h3>No boards created.</h3>\r\n                                        : <Fragment>\r\n                                            <h3> Boards created by {loggedUser._id === this.props.match.params.id ? 'you' : 'this user:'} </h3>\r\n                                            <div className=\"user-boards-container\">\r\n                                                {\r\n                                                    userCreatedBoards.map((board, idx) => {\r\n                                                        return <li className=\"flex\" key={idx}>\r\n                                                            {\r\n                                                                loggedUser._id === this.props.match.params.id &&\r\n                                                                <MdDelete onClick={ev => {\r\n                                                                    this.setState({ selectedBoardId: board._id, selectedBoardName: board.name });\r\n                                                                    this.onToggleModal()\r\n                                                                }\r\n                                                                } />\r\n                                                            }\r\n                                                            <p onClick={() => this.onMoveToBoard(board._id)}>{board.name}</p>\r\n                                                        </li>\r\n                                                    })\r\n                                                }\r\n\r\n                                            </div>\r\n                                        </Fragment>\r\n                                }\r\n\r\n                            </div>\r\n                            <hr />\r\n\r\n                            <div className=\"col-right\">\r\n                                <h1>Tasks</h1>\r\n                                <h3>Number of tasks assigned to {loggedUser._id === this.props.match.params.id ? 'you' : 'this user:'} : {numOfUserTasks}</h3>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <Fade in={this.state.isModalOpen}>\r\n                        <div className=\"modal-screen flex justify-center align-center\">\r\n                            <div className=\"modal-container absolute\">\r\n                                <div className=\"user-modal-header padding-x-15 padding-y-15 flex justify-center align-center\">\r\n                                    <label> {this.state.user.imgUrl ?\r\n                                        <img className=\"user-profile-big\" src={this.state.user.imgUrl} alt=\"profile-img\" />\r\n                                        :\r\n                                        <div className=\"user-profile-big initials flex align-center justify-center\">{initials}</div>}\r\n                                        <input type=\"file\" onChange={this.uploadImg} hidden />\r\n                                    </label>\r\n                                </div>\r\n                                <div className=\"user-modal-main\">\r\n                                    <form className=\"form-container flex justify-center column  align-center\" onSubmit={this.updateProfile}>\r\n                                        <input value={this.state.user.email} autoComplete=\"current-email\" onChange={this.handleChange} name=\"email\" placeholder=\"Email\" type=\"email\" />\r\n                                        <input value={this.state.user.username} autoComplete=\"current-username\" onChange={this.handleChange} name=\"username\" placeholder=\"Username\" type=\"text\" />\r\n                                        <input value={this.state.user.fullName} autoComplete=\"current-fullname\" onChange={this.handleChange} name=\"fullName\" placeholder=\"Full Name\" type=\"text\" />\r\n                                        <button onClick={this.updateProfile}>Save Changes</button>\r\n                                        <button type=\"button\" className=\"secondary-btn\" onClick={this.toggleModal}>Cancel</button>\r\n                                    </form>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </Fade>\r\n                </div>\r\n                {isModalShown && <div className=\"modal-screen-wrapper\" onClick={this.onToggleModal}>\r\n                    <div className=\"confirm-board-delete flex column space-between\">\r\n                        <h1>Are you sure you want to delete {selectedBoardName}?</h1>\r\n                        <p>You can't take this back</p>\r\n                        <section className=\"flex\">\r\n                            <button className=\"cancel-button\" onClick={this.onToggleModal}>Cancel</button>\r\n                            <button className=\"delete-button\" onClick={this.onBoardRemove}>Delete</button>\r\n                        </section>\r\n                    </div>\r\n                </div>}\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.systemReducer.modal,\r\n        loggedUser: state.userReducer.loggedUser,\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    updateUser,\r\n    removeBoard,\r\n    showSnackbar\r\n}\r\nexport const UserProfile = connect(mapStateToProps, mapDispatchToProps)(_UserProfile);","import React, { Component} from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport { IoIosArrowDropdown } from 'react-icons/io';\r\n\r\nclass _UpcomingTasks extends Component {\r\n    state = {\r\n        isShown: true\r\n    }\r\n    getDaysFromNow(date) {\r\n        if (moment(date).isAfter(moment().add(1, 'day').endOf('day'))) {\r\n            return moment(date).format('MMM DD')\r\n        }\r\n        return moment(date).isBefore(moment().endOf('day')) ? 'Today' : 'Tomorrow'\r\n    }\r\n    moveToUserProfile(userId) {\r\n        this.props.history.push(`/user/${userId}`)\r\n    }\r\n    toggleIsShown = () => {\r\n        this.setState({ isShown: !this.state.isShown })\r\n    }\r\n    render() {\r\n        const { tasks, header } = this.props;\r\n        return <div className=\"upcoming-tasks\">\r\n            <header className=\"flex space-between align-center\">\r\n                <h2 className=\"tasks-header\">{`${header}: (${tasks.length})`}</h2>\r\n                <IoIosArrowDropdown onClick={this.toggleIsShown}\r\n                    className={this.state.isShown ? \"toggle-btn rotate0\" : \"toggle-btn rotate90\"} />\r\n            </header>\r\n            <div className={`upcoming-tasks-container ${!this.state.isShown && 'not-shown'}`}>\r\n                {tasks.map(task => <div\r\n                    key={task.id}\r\n                    className=\"task-preview space-between align-center\">\r\n                    <div className=\"left-column\">\r\n                        <p className=\"task-preview-name\">{task.name}</p>\r\n                        <p className=\"task-location\">At: <span onClick={() => this.props.history.push(`/board/${task.boardId}`)}>{`${task.boardName} > ${task.groupName}`}</span></p>\r\n                    </div>\r\n                    <section className=\"right-column flex align-center space-between\">\r\n                        {/* <div className={`label-box flex align-center ${task.status.toLocaleLowerCase()}`}> <p>{task.status}</p></div> */}\r\n                        <div className=\"user-img-container flex justify-center align-center\">\r\n                            {task.members.length !== 0 && (task.members[0].imgUrl ? <img onClick={() => this.moveToUserProfile(task.members[0]._id)} alt=\"profile\" src={task.members[0].imgUrl} /> :\r\n                                <div onClick={() => this.moveToUserProfile(task.members[0]._id)} className=\"member-letter\">{task.members[0].fullName.charAt(0).toUpperCase()}</div>)}\r\n                        </div>\r\n                        <div className=\"deadline-container flex align-center\" onClick={() => this.props.history.push(`/board/${task.boardId}`)}>\r\n                            <h2 >{this.getDaysFromNow(task.dueDate)}</h2>\r\n                        </div>\r\n                    </section>\r\n                </div>)}\r\n\r\n            </div>\r\n\r\n\r\n\r\n        </div>\r\n    }\r\n\r\n}\r\nexport const UpcomingTasks = withRouter(_UpcomingTasks)","import React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport moment from 'moment';\r\n// Inside imports\r\nimport { Boardbar } from '../cmps/Boardbar';\r\nimport { loadBoards } from '../store/actions/boardActions'\r\nimport { Navbar } from '../cmps/Navbar';\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\nimport { UpcomingTasks } from '../cmps/my-week-cmps/UpcomingTasks';\r\n\r\nclass _MyWeek extends Component {\r\n    state = {\r\n        searchVal: '',\r\n\r\n    }\r\n    componentDidMount() {\r\n        if (!this.props.boards || !this.props.boards.length) {\r\n            this.props.loadBoards();\r\n        }\r\n    }\r\n    getUpcomingTasks(maxDaysLeft, minDaysLeft = 0) {\r\n        const tasks = [];\r\n        const { boards, loggedUser } = this.props;\r\n        boards.forEach(board => {\r\n            board.groups.forEach(group => {\r\n                tasks.push(...group.tasks.filter(task => {\r\n                    task.boardId = board._id;\r\n                    task.boardName = board.name;\r\n                    task.groupName = group.name;\r\n                    const belongsToUser = task.members.some(member => member._id === loggedUser._id)\r\n                    const isAfter = minDaysLeft ? moment(task.dueDate).isAfter(moment().add(minDaysLeft, 'days').endOf('day')) : true;\r\n                    return moment(task.dueDate).isBefore(moment().add(maxDaysLeft, 'days').startOf('day'))\r\n                        && isAfter && belongsToUser\r\n                }));\r\n            })\r\n        })\r\n        return tasks;\r\n    }\r\n    handleChange = ({ target }) => {\r\n        this.setState({ searchVal: target.value })\r\n    }\r\n    applySearch(tasks, searchVal) {\r\n        return tasks.filter(task => task.name.toLowerCase().includes(searchVal.toLowerCase()))\r\n    }\r\n    toggleTodayTasks = () => {\r\n        this.setState({ isTodayTasksShown: !this.state.isTodayTasksShown })\r\n\r\n    }\r\n    toggleUpcomingTasks = () => {\r\n        this.setState({ isUpcomingTasksShown: !this.state.isUpcomingTasksShown })\r\n    }\r\n    render() {\r\n        let todaysTasks = this.getUpcomingTasks(1);\r\n        let upcomingTasks = this.getUpcomingTasks(7, 1);\r\n        const { searchVal } = this.state;\r\n        const firstName = this.props.loggedUser.fullName.split(' ')[0]\r\n        const taskCount = todaysTasks.length + upcomingTasks.length;\r\n        if (searchVal) {\r\n            todaysTasks = this.applySearch(todaysTasks, searchVal)\r\n            upcomingTasks = this.applySearch(upcomingTasks, searchVal)\r\n        }\r\n        return (\r\n            <section className=\"my-week flex\">\r\n                {\r\n                    window.innerWidth > 600 ?\r\n                        <React.Fragment>\r\n                            <Navbar />\r\n                            <Boardbar />\r\n                        </React.Fragment>\r\n                        :\r\n                        <MobileNav loggedUser={this.props.loggedUser} />\r\n                }\r\n                <div className=\"my-week-container flex column space around\">\r\n                    <div className=\"my-week-header flex column space-around\">\r\n                        <div className=\"flex align-center space-around\">\r\n                            <img src=\"my-week-calendar.png\" alt=\"\" />\r\n                            <section className=\"greeting-container\">\r\n                                <h1>{`Hey ${firstName},`}\r\n                                    {taskCount ? `You have ${taskCount} assignments this week.` : 'You have no assignments this week'}</h1>\r\n                            </section>\r\n                        </div>\r\n                    </div>\r\n                    <input className=\"task-search\" onChange={this.handleChange} value={searchVal} type=\"text\" placeholder=\"search\" />\r\n                    {taskCount ?\r\n                        <Fragment>\r\n                            <UpcomingTasks header=\"Today\" tasks={todaysTasks} />\r\n                            <UpcomingTasks header=\"Upcoming\" tasks={upcomingTasks} />\r\n                        </Fragment> :\r\n                        <h1 className=\"no-tasks\">No tasks left for this week</h1>\r\n                    }\r\n                </div>\r\n            </section >\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadBoards\r\n}\r\nexport const MyWeek = connect(mapStateToProps, mapDispatchToProps)(_MyWeek);","import React, { Component, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport { Fade } from '@material-ui/core';\r\nimport { VscListFilter } from 'react-icons/vsc';\r\nimport { connect } from 'react-redux';\r\n// inside imports\r\nimport { loadBoards, updateBoard } from '../store/actions/boardActions'\r\nimport { FaArrowLeft } from 'react-icons/fa';\r\nimport { Activities } from '../cmps/Activities';\r\n\r\n\r\nexport class _MobActivitiesModal extends Component {\r\n    state = {\r\n        isOrderReversed: false,\r\n        isFilterOpen: false,\r\n        filterBy: {},\r\n        searchVal: '',\r\n    }\r\n    async componentDidMount() {\r\n        try {\r\n            if (!this.props.boards || !this.props.boards.length) {\r\n                await this.props.loadBoards();\r\n            }\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.getBoardById(this.props.match.params.id)\r\n    }\r\n    getBoardById = (id) => {\r\n        const board = this.props.boards.find(board => board._id === id)\r\n        this.setState({ ...this.state, board })\r\n    }\r\n    get activities() {\r\n        const { activityLog } = this.state.board;\r\n        return [\r\n            activityLog.filter(activity => activity[this.props.loggedUser._id]),\r\n            activityLog.filter(activity => !activity[this.props.loggedUser._id])\r\n        ]\r\n    }\r\n    handleChange = ({ target }) => {\r\n        this.setState({ searchVal: target.value })\r\n    }\r\n    toggleFilter = () => {\r\n        this.setState({ isFilterOpen: !this.state.isFilterOpen });\r\n    }\r\n    onSetFilter(key, value) {\r\n        const filterBy = { ...this.state.filterBy }\r\n        if (filterBy[key] === value) value = '';\r\n        this.setState({ filterBy: { ...filterBy, [key]: value } })\r\n    }\r\n    getActivityDates() {\r\n        const activities = this.state.board.activityLog;\r\n        const dates = activities.reduce((acc, activity) => {\r\n            const date = moment(activity.createdAt).format('DD MMM');\r\n            acc[date] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(dates);\r\n    }\r\n    getActivityMembers() {\r\n        const activities = this.state.board.activityLog;\r\n        const members = activities.reduce((acc, activity) => {\r\n            acc[activity.byUser.fullName] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(members)\r\n    }\r\n    applyFilter(activities) {\r\n        let res = [...activities];\r\n        const { filterBy, searchVal } = this.state;\r\n        if (filterBy.date) res = res.filter(activity => moment(activity.createdAt).format('DD MMM') === filterBy.date);\r\n        if (filterBy.member) res = res.filter(activity => activity.byUser.fullName === filterBy.member)\r\n        if (searchVal) res = res.filter(activity => {\r\n            return activity.desc.toLowerCase().includes(searchVal)\r\n                || activity.byUser.fullName.toLowerCase().includes(searchVal)\r\n        })\r\n        return res;\r\n    }\r\n\r\n    onClearLog = () => {\r\n        const board = {\r\n            ...this.state.board,\r\n            activityLog: []\r\n        }\r\n        this.setState({ board }, () => {\r\n            this.props.updateBoard(board)\r\n        })\r\n    }\r\n\r\n    getInitials(fullName) {\r\n        const [firstName, lastName] = fullName.split(' ');\r\n        let initials = firstName.charAt(0).toUpperCase();\r\n        if (lastName) initials += lastName.charAt(0).toUpperCase();\r\n        return initials;\r\n    }\r\n\r\n    moveToProfile = (userId) => {\r\n        this.props.history.push(`/user/${userId}`)\r\n    }\r\n    onToggleActivities = () => {\r\n\r\n        let board = this.state.board;\r\n        const { _id } = this.props.loggedUser;\r\n\r\n        board = {\r\n            ...board,\r\n            activityLog: board.activityLog.map(activity => {\r\n                activity[_id] = true\r\n                return activity\r\n            })\r\n        }\r\n        this.props.updateBoard(board, '', this.props.loggedUser)\r\n        this.setState({ isActivitiesOpen: !this.state.isActivitiesOpen })\r\n        this.props.history.push(`/board/${this.props.match.params.id}`)\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.board) return <h1>Loading...</h1>\r\n        const { isFilterOpen, filterBy, searchVal } = this.state;\r\n        let [activities, activitiesNotRead] = this.activities;\r\n        const dates = this.getActivityDates();\r\n        const members = this.getActivityMembers();\r\n        activities = this.applyFilter(activities)\r\n        activitiesNotRead = this.applyFilter(activitiesNotRead)\r\n\r\n        return (\r\n            <section className=\"activities flex column\">\r\n                <header className=\"padding-x-15 padding-y-15\">\r\n                    <FaArrowLeft onClick={this.onToggleActivities} className=\"go-back-arrow\" />\r\n                    <h1><span>{this.props.boardName}</span> Log</h1>\r\n                    <div className='filters-container space-between flex align-center'>\r\n                        <input value={searchVal} onChange={this.handleChange} type=\"text\" placeholder=\"Search\" />\r\n                        <div className=\"filter-outer-container flex relative\">\r\n                            <button className=\"flex align-center\" onClick={this.toggleFilter}><VscListFilter /> Filter</button>\r\n                            {isFilterOpen &&\r\n                                <Fragment>\r\n                                    <div className=\"modal-screen-wrapper\" onClick={this.toggleFilter}></div>\r\n                                    <Fade in={true}>\r\n                                        <div className=\"filter-modal flex absolute\">\r\n                                            <section className=\"activity-member-filter\">\r\n                                                <h3>Member</h3>\r\n                                                {members.map((member, idx) => <button\r\n                                                    className={filterBy.member === member ? 'remove-filter-btn' : ''}\r\n                                                    key={idx}\r\n                                                    onClick={() => this.onSetFilter('member', member)}>{member}</button>)}\r\n                                            </section>\r\n                                            <section className=\"activity-date-filter\">\r\n                                                <h3>Date</h3>\r\n                                                <div className=\"filter-list flex justify-center align-center column\">\r\n                                                    {dates.map((date, idx) => <button\r\n                                                        className={filterBy.date === date ? 'remove-filter-btn' : ''}\r\n                                                        key={idx}\r\n                                                        onClick={() => this.onSetFilter('date', date)}>{date}</button>)}\r\n                                                </div>\r\n                                            </section>\r\n                                        </div>\r\n                                    </Fade>\r\n                                </Fragment>\r\n                            }\r\n                            <button onClick={this.onClearLog}>Clear Log</button>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n                <div className=\"all-activities-container\">\r\n\r\n                    <Activities getInitials={this.getInitials}\r\n                        activities={activitiesNotRead} moveToProfile={this.moveToProfile} />\r\n\r\n                    <Activities type={'activitiesRead'} getInitials={this.getInitials}\r\n                        activities={activities} moveToProfile={this.moveToProfile} />\r\n\r\n                </div>\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    updateBoard,\r\n}\r\nexport const MobActivitiesModal = connect(mapStateToProps, mapDispatchToProps)(_MobActivitiesModal);","import { Home } from './pages/Home.jsx'\r\nimport { Board } from './pages/Board.jsx'\r\nimport { Boards } from './pages/Boards.jsx'\r\nimport { Login } from './pages/Login.jsx';\r\nimport { Signup } from './pages/Signup.jsx';\r\nimport { UserProfile } from './pages/UserProfile.jsx';\r\nimport { MyWeek } from './pages/MyWeek.jsx';\r\nimport { MobActivitiesModal } from './mobile-pages/MobActivitiesModal.jsx';\r\n\r\nexport default [\r\n    {\r\n        path: '/',\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/boards',\r\n        component: Boards\r\n    },\r\n    {\r\n        path: '/board/:id',\r\n        component: Board\r\n    },\r\n    {\r\n        path: '/login',\r\n        component: Login\r\n    },\r\n    {\r\n        path: '/signup',\r\n        component: Signup\r\n    },\r\n    {\r\n        path: '/user/:id',\r\n        component: UserProfile\r\n    },\r\n    {\r\n        path: '/myweek',\r\n        component: MyWeek\r\n    },\r\n    {\r\n        path: '/mob-activities/:id',\r\n        component: MobActivitiesModal\r\n    }\r\n]","import React from 'react';\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport routes from './routes.js'\r\nimport socketService from './services/socketService';\r\n\r\nexport function App() {\r\n  socketService.setup();\r\n  return (\r\n    <Router>\r\n      <main className=\"app\">\r\n        <Switch>\r\n          {routes.map(route => <Route key={route.path} exact component={route.component} path={route.path} />)}\r\n        </Switch>\r\n      </main>\r\n    </Router>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const initialState = {\r\n    boards: [],\r\n    filterBy: {},\r\n    isBoardbarShown: true\r\n}\r\nexport function boardReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_BOARDS':\r\n            return {\r\n                ...state,\r\n                boards: action.boards\r\n            }\r\n        case 'SET_BOARD':\r\n            return {\r\n                ...state,\r\n                boards: state.boards.map(board => board._id === action.board._id ? action.board : board)\r\n            }\r\n        case 'REMOVE_BOARD':\r\n            return {\r\n                ...state,\r\n                boards: state.boards.filter(board => board._id !== action.boardId)\r\n            }\r\n        case 'ADD_BOARD':\r\n            return {\r\n                ...state,\r\n                boards: [...state.boards, action.board]\r\n            }\r\n        case 'SET_FILTER':\r\n            return {\r\n                ...state,\r\n                filterBy: action.filter\r\n            }\r\n        case 'TOGGLE_BOARDBAR':\r\n            return {\r\n                ...state,\r\n                isBoardbarShown: !state.isBoardbarShown\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","import { userService } from '../../services/userService'\r\n\r\nconst initialState = {\r\n    users: [],\r\n    loggedUser: userService.getCurrUser(),\r\n    userProfile: null\r\n}\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        case 'SHOW_PROFILE':\r\n            return {\r\n                ...state,\r\n                userProfile: action.user\r\n            }\r\n        case 'SET_USER':\r\n            return {\r\n                ...state,\r\n                loggedUser: action.user\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n  isLoading: false,\r\n  isSnackbarShown: false,\r\n  snackbarTxt: ''\r\n}\r\nexport function systemReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true };\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false };\r\n    case 'SHOW_SNACKBAR':\r\n      return {\r\n        ...state,\r\n        isSnackbarShown: true,\r\n        snackbarTxt: action.msg\r\n      }\r\n    case 'HIDE_SNACKBAR':\r\n      return {\r\n        ...state,\r\n        isSnackbarShown: false,\r\n        snackbarTxt: ''\r\n      }\r\n    default: return state;\r\n  }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { boardReducer } from './reducers/boardReducer'\r\nimport { userReducer } from './reducers/userReducer'\r\nimport { systemReducer } from './reducers/systemReducer'\r\n\r\nconst mainReducer = combineReducers({\r\n    userReducer,\r\n    boardReducer,\r\n    systemReducer\r\n})\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nexport const store = createStore(mainReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { App } from './App';\r\nimport * as serviceWorker from './services/serviceWorker';\r\nimport { store } from './store/store';\r\nimport './assets/style/main.scss';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}
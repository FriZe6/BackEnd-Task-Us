(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{178:function(e,t,a){e.exports=a(300)},232:function(e,t){},299:function(e,t,a){},300:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(11),s=a.n(o),c=a(18),i=a(29),l=a(25),u=a(14),d=a(15),p=a(17),m=a(16),f=a(7),h=a.n(f),g=a(10),b=a(159),v=a.n(b).a.create({withCredentials:!0}),E=function(e,t){return O(e,"GET",t)},k=function(e,t){return O(e,"POST",t)},y=function(e,t){return O(e,"PUT",t)},w=function(e,t){return O(e,"DELETE",t)};function O(e){return N.apply(this,arguments)}function N(){return(N=Object(g.a)(h.a.mark((function e(t){var a,n,r,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,v({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S,C=a(160),x=a.n(C),j={setup:function(){console.log("established connection"),S=x()("/")},terminate:function(){S=null},on:function(e,t){S.on(e,t)},off:function(e,t){S.off(e,t)},emit:function(e,t){S.emit(e,t)}};var T={loadBoards:function(){return A.apply(this,arguments)},addBoard:function(){return R.apply(this,arguments)},removeBoard:function(e){return w("board/".concat(e))},updateBoard:U,addGroup:function(e){var t={id:_(),name:"week1",createdAt:"date",color:"#70ADB5",lastUpdated:198465168486,isTagsShown:!1,tags:[],columns:[{type:"date",name:"due date"}],tasks:[{id:_(),name:"sneeze",createdAt:1123124124241,members:[],status:"Working on it",priority:"Low",dueDate:214124124125,updates:[{txt:"dont forget about this",member:"Roei Arazi"},{txt:"https://res.cloudinary.com/dtg7n0zye/image/upload/v1600008729/i70mbqxvm0qh1yeznsnf.jpg",member:"Liam Zety"}],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:["uilorem2@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","ux"]}]};try{return e.groups.push(t),U(e),e}catch(a){throw console.log("boardService: Couldn't add group"),a}},removeGroup:function(e,t){return t.groups=t.groups.filter((function(t){return t.id!==e})),U(t),t},updateGroup:function(e,t){return t.groups=t.groups.map((function(t){return t.id===e.id?e:t})),U(t),t},addTask:function(e){return B.apply(this,arguments)},removeTask:function(e,t){return D.apply(this,arguments)},updateTask:function(e,t){return t.groups=t.groups.map((function(t){return t.tasks=t.tasks.map((function(t){return t.id===e.id?e:t})),t})),U(t),t}};function A(){return(A=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("board");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t&&j.emit("updateBoard",e),y("board/".concat(e._id),e),e}function R(){return(R=Object(g.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={boardCreator:{fullName:"Liam Zety",imgUrl:"https://via.placeholder.com/100"},name:"board",createdAt:198465168486,description:"Enter description here",members:[{fullName:"Liam Zety",imgUrl:"https://via.placeholder.com/100"}],groups:[{id:_(),name:"group 1",createdAt:"date",color:"#22f24",lastUpdated:198465168486,isTagsShown:!1,tags:[],columns:[{type:"date",name:"due date"}],tasks:[{id:_(),name:"sneeze",createdAt:1123124124241,members:[],status:"Stuck",priority:"Low",dueDate:1123124124241,updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[{txt:"uilorem2@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"},{txt:"ux"}]},{id:_(),name:"sneeze",createdAt:1123124124241,members:[],status:"Working on it",priority:"Low",dueDate:1123124124241,updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[{txt:"uilorem2@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"},{txt:"ux"}]}]}],activityLog:[{id:_(),createdAt:124124125124,byUser:{imgUrl:"www.imgur",fullName:"shucks mcgee"},description:'removed task "do the dishes"',task:{id:_(),name:"do the dishes"}},{createdAt:12412541251,byUser:{imgUrl:"www.imgur",fullName:"shucks mcgee"},description:"changed group name from project2 to project3",group:{id:_(),name:"project3"}},{createdAt:4514512352135,byUser:{imgUrl:"www.imgur",fullName:"shucks mcgee"},description:"added group project2",group:{id:_(),name:"project2"}}]},e.next=3,k("board",t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(g.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.groups=a.groups.map((function(e){return e.tasks=e.tasks.filter((function(e){return e.id!==t})),e})),U(a),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(g.a)(h.a.mark((function e(t){var a,n,r,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"Change Task Name",n=o.length>2?o[2]:void 0,r={id:_(),name:a,createdAt:1123124124241,members:[],status:"Done",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:Date.now(),isSelected:!1,posts:[],tags:["uilorem2@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@","ux"]},n.groups.map((function(e){return e.id===t&&e.tasks.push(r),e})),U(n),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function M(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.loadBoards();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("boardActions: Couldn't load boards"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function I(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,T.updateBoard(e),a({type:"SET_BOARD",board:e}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("boardActions: Couldn't update board"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}var L=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return this.props.boards&&0!==this.props.boards.length?r.a.createElement("section",{className:"home"},r.a.createElement("h1",null,"Home"),r.a.createElement(i.b,{to:"/board/".concat(this.props.boards[0]._id)},r.a.createElement("button",null,"Start Here!")),r.a.createElement(i.b,{to:"/login"},r.a.createElement("button",null,"Login")),r.a.createElement(i.b,{to:"/signup"},r.a.createElement("button",null,"Sign-up"))):r.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),G={loadBoards:M},P=Object(c.b)((function(e){return{boards:e.boardReducer.boards}}),G)(L),F=a(6),z=a(62),H=a(334),W=a(336),V=a(165),K=a(61),q=a(335),Z=a(330);function J(e){return function(t){t({type:"SHOW_SNACKBAR",msg:e})}}function Y(){return function(e){e({type:"HIDE_SNACKBAR"})}}var X=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,selectedBoardId:"",isSnackbarOpen:!1,isShown:"",searchVal:""},e.handleMenuOpen=function(t,a){e.setState({anchorEl:t.currentTarget,selectedBoardId:a})},e.handleMenuClose=function(){e.setState({anchorEl:null})},e.onBoardRemove=function(t){var a=e.props,n=a.boards,r=a.match,o=a.history,s=a.removeBoard,c=r.params.id;if(e.handleMenuClose(),1!==n.length){if(s(t),e.props.showSnackbar("Removed board."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),c===t){var i=n.findIndex((function(e){return e._id!==t}));o.push("/board/".concat(n[i]._id))}}else console.log("you need at least one board!")},e.onToggleShown=function(){e.props.toggleBoardbar(),e.setState({isShown:!e.state.isShown})},e.handleSearchChange=function(t){e.setState({searchVal:t.target.value})},e.handleSearch=function(){return e.props.boards.filter((function(t){return t.name.toLowerCase().includes(e.state.searchVal.toLowerCase())}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;j.on("updatedBoard",(function(t){e.props.recieveUpdate(t)})),this.setState({isShown:this.props.isBoardbarShown})}},{key:"onMoveToBoard",value:function(e){this.props.history.push("/board/".concat(e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.anchorEl,n=t.selectedBoardId,o=t.isShown,s=this.handleSearch();return r.a.createElement("section",{className:"boardbar fixed column ".concat(o&&"board-bar-shown")},o?r.a.createElement(q.a,{enterDelay:800,TransitionComponent:Z.a,title:"Toggle Board",arrow:!0},r.a.createElement("div",{className:"board-bar-toggle-container"},r.a.createElement(K.a,{style:{color:this.props.location.pathname.includes("/myweek")&&"#151515"},onClick:this.onToggleShown,className:"board-bar-toggle"}))):r.a.createElement(q.a,{enterDelay:800,TransitionComponent:Z.a,title:"Toggle Board",arrow:!0},r.a.createElement("div",{className:"board-bar-toggle-container"},r.a.createElement(K.b,{style:{color:this.props.location.pathname.includes("/myweek")&&"#151515"},onClick:this.onToggleShown,className:"board-bar-toggle"}))),o&&r.a.createElement("div",{className:"boardbar-header"},r.a.createElement("h1",null,"Boards"),r.a.createElement(K.e,{onClick:this.props.addBoard})),o&&r.a.createElement("input",{onChange:this.handleSearchChange,type:"text",placeholder:"Search Board"}),r.a.createElement("ul",null,o&&s.map((function(t,a){return r.a.createElement("li",{className:"flex align-center",key:a},r.a.createElement(V.a,{onClick:function(a){return e.handleMenuOpen(a,t._id)}}),r.a.createElement("h4",{onClick:function(){return e.onMoveToBoard(t._id)}},t.name))}))),r.a.createElement(H.a,{role:"menuContainer",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:this.handleMenuClose},r.a.createElement(W.a,{onClick:function(){return e.onBoardRemove(n)}},"Delete"),r.a.createElement(W.a,{onClick:this.handleMenuClose},"Edit")))}}]),a}(n.Component),Q={updateBoard:I,removeBoard:function(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.removeBoard(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.log("boardActions: Couldn't remove board"),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},addBoard:function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.addBoard();case 3:a=e.sent,t({type:"ADD_BOARD",board:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("boardActions: Couldn't add board"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},showSnackbar:J,hideSnackbar:Y,toggleBoardbar:function(){return function(e){e({type:"TOGGLE_BOARDBAR"})}},recieveUpdate:function(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,console.log("got board:",e),T.updateBoard(e,!1),a({type:"SET_BOARD",board:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.log("boardActions: Couldn't update board"),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()}},$=Object(c.b)((function(e){return{boards:e.boardReducer.boards,isBoardbarShown:e.boardReducer.isBoardbarShown}}),Q)(Object(l.f)(X)),ee=a(122),te=a(83),ae=a(63),ne=a.n(ae),re=a(32),oe=a.n(re),se=a(69),ce=a(36),ie=a(56),le=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOrderReversed:!1,filteredActivities:""},e.handleSearch=function(t){var a=t.target,n=e.props.activityLog.filter((function(e){return e.description.toLowerCase().includes(a.value.toLocaleLowerCase())||e.byUser.fullName.toLowerCase().includes(a.value.toLocaleLowerCase())}));e.setState({filteredActivities:n})},e.reverseOrder=function(){var t=e.state.filteredActivities.sort((function(t,a){var n=e.state.isOrderReversed?-1:1;return t.createdAt<a.createdAt?-n:t.createdAt>a.createdAt?n:0}));e.setState({isOrderReversed:!e.state.isOrderReversed}),e.setState({filteredActivities:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({filteredActivities:this.props.activityLog})}},{key:"render",value:function(){if(!this.state.filteredActivities)return r.a.createElement("h1",null,"Loading...");var e=this.state,t=e.isOrderReversed,a=e.filteredActivities;return r.a.createElement("section",{className:"activities flex column padding-y-15"},r.a.createElement("header",{className:"padding-x-15"},r.a.createElement(ie.a,{onClick:this.props.onToggleActivities}),r.a.createElement("h1",null,r.a.createElement("span",null,this.props.boardName)," Log"),r.a.createElement("div",{className:"filters-container space-between flex align-center"},r.a.createElement("input",{onChange:this.handleSearch,type:"text",placeholder:"Search"}),t?r.a.createElement("div",{"data-title":"test"},r.a.createElement(ce.d,{size:"1.5rem",onClick:this.reverseOrder})):r.a.createElement("div",{"data-title":"test"},r.a.createElement(ce.b,{size:"1.5rem",onClick:this.reverseOrder})))),r.a.createElement("div",{className:"activity-list column flex "},a.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity padding-x-15 space-between flex align-center"},r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("div",{className:"user-img-container flex align-center justify-center"},r.a.createElement("img",{src:e.byUser.imgUrl,alt:""})),r.a.createElement("h2",null,e.byUser.fullName),r.a.createElement("p",null,r.a.createElement(se.a,{lines:1,ellipsis:"...",width:550},e.description))),r.a.createElement("p",{className:"date-created"},oe()(e.createdAt).fromNow()))}))))}}]),a}(n.Component),ue=a(68),de=a(332);var pe={setFilter:function(e){return function(t){t({type:"SET_FILTER",filter:e})}}},me=Object(c.b)((function(e){return{filterBy:e.boardReducer.filterBy}}),pe)(Object(l.f)((function(e){var t=e.board,a=e.filterBy,n=e.setFilter;function o(e,t){a[e]===t&&(t=""),n(Object(F.a)(Object(F.a)({},a),{},Object(ue.a)({},e,t)))}if(!t)return r.a.createElement("h1",null,"Loading...");var s=t.groups,c=t.members,i=function(){var e={};t.groups.forEach((function(t){t.tasks.forEach((function(t){var a=oe()(t.dueDate).format("DD.MM.YY");e[a]=t.dueDate}))}));var a=[];for(var n in e)a.push({formatted:n,value:e[n]});return a}();return r.a.createElement(de.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"group-name-filter flex column align-center"},r.a.createElement("h3",null,"Groups"),r.a.createElement("div",{className:"filter-list"},s.map((function(e,t){return r.a.createElement("button",{className:a.groupId===e.id?"remove-filter-btn":"",key:t,onClick:function(){return o("groupId",e.id)}},e.name)})))),r.a.createElement("section",{className:"task-member-filter flex column align-center"},r.a.createElement("h3",null,"Member"),r.a.createElement("div",{className:"filter-list"},c.map((function(e,t){return r.a.createElement("button",{className:a.memberId===e._id?"remove-filter-btn":"",key:t,onClick:function(){return o("memberId",e._id)}},e.fullName)})))),r.a.createElement("section",{className:"task-priority-filter flex column align-center"},r.a.createElement("h3",null,"Priority"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"low"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","low")}},"Low"),r.a.createElement("button",{className:"medium"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","medium")}},"Medium"),r.a.createElement("button",{className:"high"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","high")}},"High"))),r.a.createElement("section",{className:"task-status-filter flex column align-center"},r.a.createElement("h3",null,"Status"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"done"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","done")}},"Done"),r.a.createElement("button",{className:"working on it"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","working on it")}},"Working on it "),r.a.createElement("button",{className:"stuck"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","stuck")}},"Stuck"))),r.a.createElement("section",{className:"task-date-filter flex column align-center"},r.a.createElement("h3",null,"Due-Date"),r.a.createElement("div",{className:"filter-list"},i.map((function(e,t){return r.a.createElement("button",{className:a.dueDate===e.value?"remove-filter-btn":"",key:t,onClick:function(){return o("dueDate",e.value)}},e.formatted)}))))))}))),fe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_id:"",isActivitiesOpen:!1,isFiltersOpen:!1,elSetting:null},e.handleChangeName=function(t){e.setState({name:t.target.value})},e.handleChangeDesc=function(t){e.setState({description:t.target.value})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onToggleActivities=function(){e.setState({isActivitiesOpen:!e.state.isActivitiesOpen})},e.onToggleFilters=function(){e.setState({isFiltersOpen:!e.state.isFiltersOpen})},e.handleMenuOpen=function(t,a){e.setState({elSetting:t.currentTarget})},e.handleMenuClose=function(){e.setState({elSetting:null})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.editableName=r.a.createRef(),this.editableDescription=r.a.createRef(),j.on("updatedBoard",(function(){e.setState(Object(F.a)({},e.props.board))})),this.setState(Object(F.a)({},this.props.board))}},{key:"componentDidUpdate",value:function(e,t){e.board._id!==this.props.board._id&&this.setState(Object(F.a)({},this.props.board))}},{key:"render",value:function(){var e=this;return this.state._id?r.a.createElement("section",{className:"board-header align-center padding-x-30 padding-y-45 "},r.a.createElement("div",{className:"col-left flex column"},r.a.createElement("h1",null,r.a.createElement(ne.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableName,html:this.state.name,disabled:!1,onChange:this.handleChangeName,onBlur:function(){e.props.onEditBoard(e.state.name,e.state.description)},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditBoard(e.state.name,e.state.description))}})),r.a.createElement("h5",null,r.a.createElement(ne.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableDescription,html:this.state.description,disabled:!1,onChange:this.handleChangeDesc,onBlur:function(){e.props.onEditBoard(e.state.name,e.state.description)},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditBoard(e.state.name,e.state.description))}}))),r.a.createElement("div",{className:"col-right flex align-center"},r.a.createElement("button",{onClick:this.props.onAddGroup},"New Group"),r.a.createElement("div",{className:"search-outer-container flex align-center"},r.a.createElement("input",{placeholder:"Search",type:"text",onChange:this.props.handleSearch}),r.a.createElement(ee.b,null)),r.a.createElement("div",{onClick:this.onToggleActivities,className:"activities-outer-container flex align-center  cursor-pointer"},r.a.createElement(ee.a,null),r.a.createElement("h2",null,"Activity Log")),r.a.createElement("div",{onClick:this.state.isFiltersOpen?function(){}:this.onToggleFilters,className:"filters-outer-container relative flex align-center cursor-pointer"},r.a.createElement(te.c,null),r.a.createElement("h2",null,"Filter"),this.state.isFiltersOpen&&r.a.createElement(me,{board:this.props.board}))),r.a.createElement("div",{className:"".concat(this.state.isActivitiesOpen&&"animate-side-modal"," side-modal")},r.a.createElement(le,{onToggleActivities:this.onToggleActivities,boardName:this.props.board.name,activityLog:this.props.board.activityLog})),this.state.isFiltersOpen&&r.a.createElement("div",{onClick:this.onToggleFilters,className:"modal-screen-wrapper"}),this.state.isActivitiesOpen&&r.a.createElement("div",{onClick:this.onToggleActivities,className:"modal-screen-wrapper"})):r.a.createElement("h1",null,"Loading...")}}]),a}(r.a.Component),he=Object(l.f)(fe),ge=a(70),be=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:null},e.onRemoveNotifications=function(){e.props.removeNotifications(e.props.loggedUser),e.setState({isModalOpen:!0})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({isModalOpen:!0})}},{key:"render",value:function(){var e=this.props.loggedUser;return r.a.createElement(de.a,{in:this.state.isModalOpen},r.a.createElement("section",{className:"notifications padding-x-15 padding-y-15"},r.a.createElement("header",{className:"flex space-between align-center"},0!==e.notifications.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Notifications"),",",r.a.createElement(ie.b,{onClick:this.onRemoveNotifications})):r.a.createElement("h1",null,"You have no notifications.")),r.a.createElement("div",{className:"notifications-container"},e.notifications&&e.notifications.map((function(e,t){return r.a.createElement("div",{key:t,className:"notification flex "},r.a.createElement("div",{className:"user-img-container"},r.a.createElement("img",{src:e.byUser.imgUrl,alt:"profile"})),r.a.createElement("div",{className:"notification-msg flex align-center column"},r.a.createElement("h2",null,r.a.createElement(se.a,{lines:1,ellipsis:"...",width:350},e.byUser.fullName)),r.a.createElement("p",null,r.a.createElement(se.a,{lines:1,ellipsis:"...",width:350},e.content)),r.a.createElement("div",null,r.a.createElement("p",null,oe()(e.createdAt).fromNow()))))})))))}}]),a}(n.Component),ve=[{username:"frize",fullName:"Roei Arazi",password:"3333",email:"frize@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},{username:"anstrio",fullName:"Osher Kabada",password:"2222",email:"anstrio@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224127124"},{username:"smoking",fullName:"Liam Zety",password:"1111",email:"smoking@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224112124"}],Ee={loadUsers:function(){return ke.apply(this,arguments)},getUserById:function(e){return we.apply(this,arguments)},login:function(e){return Oe.apply(this,arguments)},signup:function(e){return Ne.apply(this,arguments)},guestLogin:function(){return Se.apply(this,arguments)},markAsRead:function(e){return ye.apply(this,arguments)},updateUser:function(e){return Ce.apply(this,arguments)}};function ke(){return(ke=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E("user");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userService: Coulnd't get users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function ye(){return(ye=Object(g.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.notifications.forEach((function(e){e.isRead=!0})),e.prev=1,e.abrupt("return",t);case 5:throw e.prev=5,e.t0=e.catch(1),console.log("userService: Something went wrong"),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}function we(){return(we=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("got to user service",t),e.prev=1,e.next=4,E("user/".concat(t));case 4:return a=e.sent,console.log("got from service:",a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),console.log("userService: Coulnd't get user"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Oe(){return(Oe=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("auth/login",t);case 3:if(a=e.sent){e.next=6;break}throw"Wrong username or password";case 6:return e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(0),console.log("userService: Wrong username or password"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function Ne(){return(Ne=Object(g.a)(h.a.mark((function e(t){var a,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(F.a)({imgUrl:"https://via.placeholder.com/100",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},t),e.prev=1,e.next=4,k("auth/signup",a);case 4:return n=e.sent,e.abrupt("return",n);case 8:throw e.prev=8,e.t0=e.catch(1),console.log("userService: Couldn't sign up"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function Se(){return(Se=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:xe(),username:"guest",fullName:"guest mcgee",password:"none",imgUrl:"https://via.placeholder.com/100",isAdmin:!0,boards:[{id:"212",name:"board1"}],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},e.prev=1,ve.push(t),e.abrupt("return",t);case 6:throw e.prev=6,e.t0=e.catch(1),console.log("userService: Couldn't login as guest"),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function Ce(){return(Ce=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ve.findIndex((function(e){return e._id===t._id}));try{ve[a]=Object(F.a)({},t)}catch(n){console.log("ERROR, couldnt update user",n)}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function je(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.guestLogin();case 3:a=e.sent,t({type:"SET_USER",user:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't login as a guest"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}var Te=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isNotificationShown:!1},e.toggleNotifications=function(){e.onMarkAsRead(),e.setState({isNotificationShown:!e.state.isNotificationShown})},e.onMarkAsRead=function(){e.props.markAsRead(e.props.loggedUser)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.isNotificationShown,t=this.props,a=t.loggedUser,n=t.removeNotifications;return r.a.createElement("section",{className:"navbar flex column space-between align-center padding-y-15"},r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(i.b,{to:"/"},r.a.createElement(ce.a,null)),e&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleNotifications}),r.a.createElement("div",{className:"icon-container",onClick:this.state.isNotificationShown?function(){}:this.toggleNotifications},0===a.notifications.filter((function(e){return!e.isRead})).length?"":r.a.createElement("p",{className:"notifications-counter cursor-pointer"},a.notifications.filter((function(e){return!e.isRead})).length),e&&r.a.createElement(be,{removeNotifications:n,loggedUser:a}),a.notifications.some((function(e){return!e.isRead}))?r.a.createElement(te.b,null):r.a.createElement(te.a,null))),r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(i.b,{to:"/myweek"},r.a.createElement("div",{className:"icon-container"},r.a.createElement(K.c,null))),r.a.createElement(i.b,{to:a?"/user/".concat(a._id):"/login"},r.a.createElement("li",null,r.a.createElement(ge.b,null)))))}}]),a}(n.Component),Ae={markAsRead:function(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.markAsRead(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login as a guest"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeNotifications:function(e){var t=e;return t.notifications=[],function(){var e=Object(g.a)(h.a.mark((function e(a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{a({type:"UPDATE_PROFILE",user:t})}catch(n){console.log("ERROR, couldnt remove notifications",n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},Ue=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}),Ae)(Te),Re=a(53),De=a(169),Be=(a(238),a(123));function _e(e){var t=e.users.filter((function(t){return!e.members.some((function(e){return e._id===t._id}))}));return r.a.createElement("div",{className:"user-img-container relative flex justify-center align-center",onClick:function(){return e.openModal("users")}},e.members.length?e.members[0].imgUrl?r.a.createElement("img",{alt:"profile",src:e.members[0].imgUrl}):r.a.createElement("div",{className:"member-letter"},e.members[0].fullName.charAt(0).toUpperCase()):r.a.createElement("div",{className:"no-members-container"}," ",r.a.createElement(ge.b,{className:"no-members-icon"})," ",r.a.createElement(Be.a,{className:"no-members-icon-plus"})),0!==e.members.length&&r.a.createElement("div",{className:"task-number-of-imgs flex justify-center align-center"},r.a.createElement("span",null,e.members.length)),e.isUsersShown&&r.a.createElement("div",{className:"users-modal absolute"},r.a.createElement("div",{className:"task-users-box"},r.a.createElement("h3",null,"Task Members"),e.members.map((function(t){return r.a.createElement("section",{key:t._id,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(ie.d,{onClick:function(){return e.onRemoveMemberFromTask(t._id)}}))}))),r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),t.map((function(t){return r.a.createElement("section",{key:t._id,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex  align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(Be.a,{onClick:function(){return e.onAddUserToTask(t._id)}}))})))))}function Me(e){return r.a.createElement("div",{className:"label-container relative"},r.a.createElement("div",{className:"label-box ".concat(e.status.split(" ")[0].toLowerCase()),onClick:function(){return e.openModal("status")}},r.a.createElement("div",{className:"task-label-name"},r.a.createElement("p",null,e.status)),e.isStatusShown&&r.a.createElement("div",{className:"label-list absolute flex column align-center"},r.a.createElement("section",{className:"label-selector stuck",onClick:function(){return e.handleChange("Stuck")}},r.a.createElement("p",null,"Stuck")),r.a.createElement("section",{className:"label-selector working",onClick:function(){return e.handleChange("Working on it")}},r.a.createElement("p",null,"Working on it")),r.a.createElement("section",{className:"label-selector done",onClick:function(){return e.handleChange("Done")}},r.a.createElement("p",null,"Done")))))}var Ie=a(166),Le=a.n(Ie);function Ge(e){return r.a.createElement("label",null,r.a.createElement(Le.a,{selected:e.dueDate,onChange:e.handleDateChange,dateFormat:"dd/MM/yyyy"}))}function Pe(e){return r.a.createElement("div",{className:"label-container relative"},r.a.createElement("div",{className:"label-box ".concat(e.priority.toLowerCase()),onClick:function(){return e.openModal("priority")}},r.a.createElement("div",{className:"task-label-name"},r.a.createElement("p",null,e.priority)),e.isPriorityShown&&r.a.createElement("div",{className:"label-list absolute flex column align-center"},r.a.createElement("section",{className:"label-selector low",onClick:function(){return e.handleChange("Low")}},r.a.createElement("p",null,"Low")),r.a.createElement("section",{className:"label-selector medium",onClick:function(){return e.handleChange("Medium")}},r.a.createElement("p",null,"Medium")),r.a.createElement("section",{className:"label-selector high",onClick:function(){return e.handleChange("High")}},r.a.createElement("p",null,"High")))))}var Fe=a(95),ze={uploadImg:function(e,t){return He.apply(this,arguments)}};function He(){return(He=Object(g.a)(h.a.mark((function e(t,a){var n,r,o,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dtg7n0zye",n="https://api.cloudinary.com/v1_1/".concat("dtg7n0zye","/image/upload"),(r=new FormData).append("file",t.target.files[0]),r.append("upload_preset","Task-Us"),e.prev=5,e.next=8,fetch(n,{method:"POST",body:r});case 8:return o=e.sent,e.next=11,o.json();case 11:return s=e.sent,e.abrupt("return",s);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var We=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={update:{txt:""},updates:[]},e.handleChange=function(t){e.setState({update:Object(F.a)(Object(F.a)({},e.state.update),{},{txt:t.target.value})})},e.sendNote=function(t){if(t.preventDefault(),e.state.update.txt&&!e.state.update.txt.split("").every((function(e){return" "===e}))){var a=[{txt:e.state.update.txt,member:e.props.loggedUser.fullName}].concat(Object(Re.a)(e.props.updates));e.setState({updates:a,update:{txt:""}}),e.props.sendNote(a)}},e.uploadImg=function(){var t=Object(g.a)(h.a.mark((function t(a){var n,r,o;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze.uploadImg(a,e.state);case 2:n=t.sent,r={member:e.props.loggedUser.fullName,txt:n.url},o=[r].concat(Object(Re.a)(e.props.updates)),e.props.sendNote(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({updates:this.props.updates})}},{key:"render",value:function(){var e=this;if(!this.state.updates)return r.a.createElement("h1",null,"Loading...");var t=this.props,a=t.updates,n=t.onToggleImageModal,o=t.isImageModalShown;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"updates-header flex column align-center"},r.a.createElement("h1",null,"Updates"),r.a.createElement("div",{className:"updates-header-options flex align-center space-between"},r.a.createElement("form",{onSubmit:this.sendNote,className:"notes-form flex justify-center align-center"},r.a.createElement("input",{type:"text",placeholder:"Text Note",value:this.state.update.txt,onChange:this.handleChange}),r.a.createElement(Fe.b,{onClick:this.sendNote})),r.a.createElement("div",{className:"image-uploader"},r.a.createElement("label",{htmlFor:"task-imgs"},"Upload Image"),r.a.createElement("input",{type:"file",id:"task-imgs",onChange:function(t){e.uploadImg(t)},hidden:!0})))),r.a.createElement("div",{onClick:o?n:function(){},className:"updates-container  flex column"},a.map((function(e,t){return e.txt.includes("https://res")||e.txt.includes("http://res")?r.a.createElement("div",{key:t,className:"update-box flex wrap column"},r.a.createElement("p",{className:"member-name"},e.member),r.a.createElement("img",{className:"cursor-pointer",onClick:function(){n(e.txt)},src:e.txt})):r.a.createElement("div",{key:t,className:"update-box"},r.a.createElement("p",{className:"member-name",key:t},e.member),r.a.createElement("p",{className:"update-text"},e.txt))}))))}}]),a}(r.a.Component),Ve=(n.Component,function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1,imgUrl:"",isImageModalShown:!1},e.handleNameChange=function(t){e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{name:t.target.value})})},e.handleDateChange=function(t){e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{dueDate:oe()(t).valueOf()})},(function(){e.props.onEditTask(e.state.task)}))},e.handleChange=function(t,a){"Stuck"===t||"Working on it"===t||"Done"===t?e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{status:t})},(function(){e.props.onEditTask(e.state.task)})):e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{priority:t})},(function(){e.props.onEditTask(e.state.task)}))},e.sendNote=function(t){e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{updates:Object(Re.a)(t)})},(function(){e.props.onEditTask(e.state.task)}))},e.openModal=function(t){switch(t){case"status":e.setState({isStatusShown:!e.state.isStatusShown});break;case"users":e.setState({isUsersShown:!e.state.isUsersShown});break;case"updates":e.setState({isUpdatesShown:!e.state.isUpdatesShown});break;case"priority":e.setState({isPriorityShown:!e.state.isPriorityShown});break;case"tags":e.setState({isTagsShown:!e.state.isTagsShown})}},e.closeModal=function(){e.setState({isImageModalShown:!1,isStatusShown:!1,isUsersShown:!1,isPriorityShown:!1,isUpdatesShown:!1,isTagsShown:!1})},e.onRemoveMemberFromTask=function(t){e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{members:e.state.task.members.filter((function(e){return e._id!==t}))})},(function(){e.props.onEditTask(e.state.task)}))},e.onAddUserToTask=function(t){var a=e.props.users.find((function(e){return e._id===t}));e.setState({task:Object(F.a)(Object(F.a)({},e.state.task),{},{members:[].concat(Object(Re.a)(e.state.task.members),[a])})},(function(){e.props.onEditTask(e.state.task)}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t))},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onToggleImageModal=function(t){e.setState({imgUrl:t,isImageModalShown:!e.state.isImageModalShown})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.contentEditable=r.a.createRef(),j.on("updatedBoard",(function(){e.setState({task:e.props.task})})),this.setState(Object(F.a)(Object(F.a)({},this.state),{},{task:this.props.task,isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1}))}},{key:"render",value:function(){var e=this;if(!this.state.task)return r.a.createElement("h1",null,"Loading...");var t=this.state.task,a=t.name,n=t.members,o=t.status,s=t.priority,c=t.dueDate,i=t.updates,l=t.id,u=this.state,d=u.isUsersShown,p=u.isStatusShown,m=u.isPriorityShown,f=u.isUpdatesShown,h=u.isTagsShown;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(f&&"animate-side-modal"," side-modal")},r.a.createElement(We,{isImageModalShown:this.state.isImageModalShown,loggedUser:this.props.loggedUser,updates:i,onToggleImageModal:this.onToggleImageModal,uploadImg:this.uploadImg,sendNote:this.sendNote})),(d||p||m||f||h)&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.closeModal}),r.a.createElement(z.b,{draggableId:l,index:this.props.index},(function(t,u){return r.a.createElement("section",Object.assign({key:l,className:"task flex space-between align-center ".concat(u.isDragging?"drag":"")},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),r.a.createElement("div",{className:"task-left flex align-center"},r.a.createElement("div",{style:{backgroundColor:e.props.group.color},className:"task-color"}),r.a.createElement(q.a,{enterDelay:200,TransitionComponent:Z.a,title:"Delete Task",arrow:!0},r.a.createElement("div",{className:"icon-container"},r.a.createElement(De.a,{className:"task-remove-icon",onClick:function(){e.props.onRemoveTask(l)}}))),r.a.createElement("h2",null,r.a.createElement(ne.a,{onFocus:e.focusText,className:"cursor-initial content-editable",innerRef:e.contentEditable,html:a,disabled:!1,onChange:e.handleNameChange,onBlur:function(){e.props.onEditTask(e.state.task)},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditTask(e.state.task))}}))),r.a.createElement("div",{className:"task-right flex align-center"},r.a.createElement("div",null,r.a.createElement("div",{onClick:function(){return e.openModal("updates")},className:"notes-container relative"},r.a.createElement(K.d,null),0!==i.length&&r.a.createElement("div",{className:"task-number-of-imgs flex justify-center align-center"},r.a.createElement("span",null,i.length)))),r.a.createElement(_e,{members:n,users:e.props.users,isUsersShown:d,openModal:e.openModal,goToUserProfile:e.goToUserProfile,onAddUserToTask:e.onAddUserToTask,onRemoveMemberFromTask:e.onRemoveMemberFromTask}),r.a.createElement(Me,{status:o,isStatusShown:p,handleChange:e.handleChange,openModal:e.openModal}),r.a.createElement(Ge,{dueDate:c,handleDateChange:e.handleDateChange}),r.a.createElement(Pe,{priority:s,isPriorityShown:m,openModal:e.openModal,handleChange:e.handleChange})))})),this.state.isImageModalShown&&r.a.createElement("div",{onClick:this.onToggleImageModal,className:"updates-image-modal"},r.a.createElement("img",{src:this.state.imgUrl})))}}]),a}(n.Component)),Ke=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}))(Object(l.f)(Ve)),qe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",ElGroupSettings:null,elGroupColors:!1},e.handleChange=function(t){e.setState({name:t.target.value})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.handleMenuOpen=function(t){e.setState({ElGroupSettings:t.currentTarget})},e.handleMenuClose=function(){e.setState({ElGroupSettings:null,elGroupColors:!1})},e.handleColorsOpen=function(t){e.setState({elGroupColors:t.currentTarget})},e.handleColorsToggle=function(){e.setState({elGroupColors:!e.state.elGroupColors})},e.onChangeGroupColor=function(t){var a=Object(F.a)(Object(F.a)({},e.props.group),{},{color:t});try{e.props.onEditGroup(a,t,e.state.color)}catch(n){console.log("Error",n)}e.setState({ElGroupSettings:null,elGroupColors:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.elInputAdd=r.a.createRef(),this.contentEditable=r.a.createRef(),j.on("updatedBoard",(function(){e.setState(Object(F.a)(Object(F.a)({},e.state),e.props.group))})),this.setState(Object(F.a)(Object(F.a)({},this.state),this.props.group))}},{key:"render",value:function(){var e=this;if(!this.state.id)return r.a.createElement("h1",null,"Loading...");var t=this.state,a=t.name,n=t.ElGroupSettings,o=t.elGroupColors;return r.a.createElement(z.b,{draggableId:this.props.group.id,index:this.props.index},(function(t,s){return r.a.createElement("section",Object.assign({key:e.props.group.id,className:"group padding-y-45"},t.draggableProps,{ref:t.innerRef}),r.a.createElement("div",{className:"group-header-container flex space-between align-center"},r.a.createElement("div",{className:"group-header-left align-center flex relative"},r.a.createElement(Fe.a,{style:{color:e.props.group.color},className:"drop-down-menu-icon",onClick:e.handleMenuOpen}),r.a.createElement(H.a,{role:"menuContainer",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:e.handleMenuClose},r.a.createElement(W.a,{onClick:function(){e.props.onRemoveGroup(e.props.group.id)}},r.a.createElement(ie.b,{className:"delete-group-icon"})," Delete Group"),r.a.createElement(W.a,{onClick:e.handleColorsToggle},r.a.createElement(ge.a,{className:"color-group-icon"})," Change Color")),o&&r.a.createElement("div",{className:"color-picker absolute flex wrap justify-center align-center"},r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#ffcbcb")},className:"color-pick",style:{backgroundColor:"#ffcbcb"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#f0a500")},className:"color-pick",style:{backgroundColor:"#f0a500"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#70adb5")},className:"color-pick",style:{backgroundColor:"#70adb5"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1a1c20")},className:"color-pick",style:{backgroundColor:"#1a1c20"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#9d65c9")},className:"color-pick",style:{backgroundColor:"#9d65c9"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#931a25")},className:"color-pick",style:{backgroundColor:"#931a25"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#7ea04d")},className:"color-pick",style:{backgroundColor:"#7ea04d"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#838383")},className:"color-pick",style:{backgroundColor:"#838383"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1d2d50")},className:"color-pick",style:{backgroundColor:"#1d2d50"}})),r.a.createElement("div",Object.assign({className:"drag-icon"},t.dragHandleProps),r.a.createElement(ie.c,null)),r.a.createElement("h1",{style:{color:e.props.group.color},className:"group-title"},r.a.createElement(ne.a,{onFocus:e.focusText,className:"content-editable cursor-initial",innerRef:e.contentEditable,html:a,disabled:!1,onChange:e.handleChange,onBlur:function(){e.props.onEditGroup(e.state,e.state.name,a)},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditTask(e.state))}}))),r.a.createElement("div",{className:"group-header-right flex"},r.a.createElement("h3",null,"Updates"),r.a.createElement("h3",null,"Members"),r.a.createElement("h3",null,"Status"),r.a.createElement("h3",null,"Due-Date"),r.a.createElement("h3",null,"Priority"))),r.a.createElement(z.c,{droppableId:e.props.group.id,type:"task"},(function(t,a){return r.a.createElement("div",Object.assign({className:"task-list ".concat(a.isDraggingOver?"drag-over":""),ref:t.innerRef},t.droppableProps),e.props.group.tasks.map((function(t,a){return r.a.createElement(Ke,{onToggleUpdates:e.props.onToggleUpdates,onEditTask:e.props.onEditTask,index:a,onRemoveTask:e.props.onRemoveTask,key:t.id,group:e.props.group,task:t,users:e.props.users})})),t.placeholder)})),r.a.createElement("div",{className:"task task-add"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.onAddTask(e.props.group.id,e.elInputAdd.current.value),e.elInputAdd.current.value=""},action:""},r.a.createElement("input",{ref:e.elInputAdd,className:"padding-x-30",placeholder:"+ Add Task",type:"text"}))))}))}}]),a}(n.Component),Ze=a(337),Je=a(333);var Ye={hideSnackbar:Y},Xe=Object(c.b)((function(e){return{isSnackbarShown:e.systemReducer.isSnackbarShown,snackbarShown:e.systemReducer.snackbarTxt}}),Ye)((function(e){var t=e.isSnackbarShown,a=e.snackbarShown;return r.a.createElement(Ze.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:3e3,message:a,action:r.a.createElement(Je.a,{style:{color:"#f2f1dfb0"},onClick:e.hideSnackbar},"Close")})})),Qe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardId:"",txt:""},e.onEditBoard=function(t,a){var n=e.props.boards.find((function(t){return t._id===e.state.boardId}));t===n.name&&a===n.description||(e.props.updateBoard(Object(F.a)(Object(F.a)({},n),{},{name:t,description:a})),e.props.showSnackbar("Updated board."),setTimeout((function(){return e.props.hideSnackbar()}),3e3))},e.applyFilter=function(t,a){var n=JSON.parse(JSON.stringify(t));function r(e){t.groups=t.groups.map((function(t){return t.tasks=t.tasks.filter(e),t}))}return a.groupId&&(t.groups=t.groups.filter((function(e){return e.id===a.groupId}))),a.memberId&&r((function(e){return e.members.some((function(e){return e._id===a.memberId}))})),a.taskPriority&&r((function(e){return e.priority.toLowerCase()===a.taskPriority.toLowerCase()})),a.taskStatus&&r((function(e){return e.status.toLowerCase()===a.taskStatus.toLowerCase()})),a.dueDate&&r((function(e){return e.dueDate===a.dueDate})),e.state.txt&&r((function(t){return t.name.toLowerCase().includes(e.state.txt.toLowerCase())})),n},e.onAddGroup=function(){var t=e.props.boards.find((function(t){return t._id===e.state.boardId}));try{e.props.addGroup(t),e.props.clearFilter(),e.props.showSnackbar("Added group."),setTimeout((function(){return e.props.hideSnackbar()}),3e3)}catch(a){console.log("Error",a)}e.props.history.push("/board/".concat(e.state.boardId))},e.onRemoveGroup=function(t){var a=e.props.boards.find((function(t){return t._id===e.state.boardId}));try{e.props.removeGroup(t,a),e.props.showSnackbar("Removed group."),setTimeout((function(){return e.props.hideSnackbar()}),3e3)}catch(n){console.log("Error",n)}},e.onEditGroup=function(t,a,n){var r=e.props.boards.find((function(t){return t._id===e.state.boardId}));if(a!==n)try{e.props.editGroup(t,r),e.props.showSnackbar("Updated group."),setTimeout((function(){return e.props.hideSnackbar()}),3e3)}catch(o){console.log("Error",o)}},e.onRemoveTask=function(t){var a=e.props.boards.find((function(t){return t._id===e.state.boardId}));try{e.props.removeTask(t,a),e.props.showSnackbar("Removed task."),setTimeout((function(){return e.props.hideSnackbar()}),3e3)}catch(n){console.log("Error",n)}},e.onAddTask=function(t,a){a||(a="New task");var n=e.props.boards.find((function(t){return t._id===e.state.boardId}));try{e.props.addTask(t,a,n),e.props.clearFilter(),e.props.showSnackbar("Added task."),setTimeout((function(){return e.props.hideSnackbar()}),3e3)}catch(r){console.log("Error",r)}},e.onEditTask=function(t){var a=e.props.boards.find((function(t){return t._id===e.state.boardId}));try{e.props.editTask(t,a),e.props.showSnackbar("Updated task."),setTimeout((function(){return e.props.hideSnackbar()}),3e3)}catch(n){console.log("Error",n)}},e.onDragEnd=function(t){var a=t.destination,n=t.source,r=t.draggableId,o=t.type;if(a&&(a.droppableId!==n.droppableId||a.index!==n.index)){var s=e.props.boards.find((function(t){return t._id===e.state.boardId}));if("group"===o){var c=Array.from(s.groups),i=c.find((function(e){return e.id===r}));c.splice(n.index,1),c.splice(a.index,0,i),s.groups=c;try{e.props.updateBoard(s)}catch(w){console.log("Error",w)}}else{var l=s.groups.find((function(e){return e.id===n.droppableId})),u=s.groups.find((function(e){return e.id===a.droppableId}));if(l.id===u.id){var d=Array.from(l.tasks),p=l.tasks.find((function(e){return e.id===r}));d.splice(n.index,1),d.splice(a.index,0,p);var m=Object(F.a)(Object(F.a)({},l),{},{tasks:d}),f=s.groups.findIndex((function(e){return e.id===m.id}));s.groups.splice(f,1,m);try{e.props.updateBoard(s)}catch(w){console.log("Error",w)}}else{var h=Array.from(l.tasks);h.splice(n.index,1);var g=Object(F.a)(Object(F.a)({},l),{},{tasks:h}),b=Array.from(u.tasks),v=l.tasks.find((function(e){return e.id===r}));b.splice(a.index,0,v);var E=Object(F.a)(Object(F.a)({},u),{},{tasks:b}),k=s.groups.findIndex((function(e){return e.id===g.id})),y=s.groups.findIndex((function(e){return e.id===E.id}));s.groups.splice(k,1,g),s.groups.splice(y,1,E);try{e.props.updateBoard(s)}catch(w){console.log("Error",w)}}}}},e.handleSearch=function(t){e.setState({txt:t.target.value})},e.handleBoardBarSearch=function(t){e.setState({boardBarSearch:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.props.boards&&this.props.boards.length){e.next=13;break}return e.next=4,this.props.loadBoards();case 4:if(e.prev=4,this.props.users&&this.props.users.length){e.next=8;break}return e.next=8,this.props.loadUsers();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Error",e.t0);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),console.log("Error",e.t1);case 18:this.setState({boardId:this.props.match.params.id});case 19:case"end":return e.stop()}}),e,this,[[0,15],[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){e.match.params.id!==this.props.match.params.id&&(this.props.clearFilter(),this.setState({boardId:this.props.match.params.id}))}},{key:"render",value:function(){var e=this;if(0===this.props.boards.length)return r.a.createElement("h1",null,"Loading...");var t=this.props.boards.find((function(t){return t._id===e.state.boardId})),a=this.props,n=a.users,o=a.filterBy;if(!t)return r.a.createElement("h1",null,"Loading..");var s=this.applyFilter(t,o);return t.members=n,r.a.createElement("section",{className:"board"},r.a.createElement(Ue,null),r.a.createElement($,{handleBoardBarSearch:this.handleBoardBarSearch}),r.a.createElement("div",{className:"board-container"},r.a.createElement(he,{board:t,onAddGroup:this.onAddGroup,onEditBoard:this.onEditBoard,handleSearch:this.handleSearch}),r.a.createElement("div",{className:"groups-container padding-x-30"},r.a.createElement(z.a,{onDragEnd:this.onDragEnd},r.a.createElement(z.c,{droppableId:t._id,type:"group"},(function(t,a){return r.a.createElement("div",Object.assign({className:"group-list",ref:t.innerRef},t.droppableProps),s.groups.map((function(t,a){return r.a.createElement(qe,{key:t.id,index:a,onEditTask:e.onEditTask,onAddTask:e.onAddTask,onRemoveTask:e.onRemoveTask,onRemoveGroup:e.onRemoveGroup,onEditGroup:e.onEditGroup,onChangeGroupColor:e.onChangeGroupColor,group:t,users:n})})))}))))),r.a.createElement(Xe,null))}}]),a}(n.Component),$e={loadBoards:M,addGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:T.addGroup(e,t)})}catch(n){throw console.log("boardActions: Couldn't add group"),n}}},removeGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:T.removeGroup(e,t)})}catch(n){throw console.log("boardActions: Couldn't remove group"),n}}},addTask:function(e,t,a){return function(n){try{n({type:"SET_BOARD",board:T.addTask(e,t,a)})}catch(r){throw console.log("boardActions: Coulnd't add task"),r}}},removeTask:function(e,t){return function(a){try{a({type:"SET_BOARD",board:T.removeTask(e,t)})}catch(n){throw console.log("boardActions: Coulnd't add task"),n}}},editTask:function(e,t){return function(a){try{a({type:"SET_BOARD",board:T.updateTask(e,t)})}catch(n){throw console.log("boardActions: Coulnd't edit task"),n}}},editGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:T.updateGroup(e,t)})}catch(n){throw console.log("boardActions: Coulnd't edit group"),n}}},updateBoard:I,showSnackbar:J,hideSnackbar:Y,loadUsers:function(){return function(){var e=Object(g.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee.loadUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't load users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},clearFilter:function(){return function(e){e({type:"SET_FILTER",filter:{}})}}},et=Object(c.b)((function(e){return{boards:e.boardReducer.boards,users:e.userReducer.users,filterBy:e.boardReducer.filterBy}}),$e)(Qe),tt=a(28),at=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onLogin=function(){var t=Object(g.a)(h.a.mark((function t(a,n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),t.next=4,e.props.login(a);case 4:e.props.loggedUser&&e.props.history.push("/board/".concat(e.props.boards[0]._id));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(g.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"sign-login"},r.a.createElement(tt.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:this.onLogin},r.a.createElement(tt.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(ce.e,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(tt.b,{className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(tt.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(tt.b,{className:"sign-login-input",type:"text",name:"password"})),r.a.createElement(tt.a,{name:"password",component:"span"}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("a",{href:"/#/signup"},"Don't have an account? sign up here."),r.a.createElement("button",{onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement(q.a,{enterDelay:200,TransitionComponent:Z.a,title:"Back to home",arrow:!0},r.a.createElement("div",{className:"go-back"},r.a.createElement(i.b,{to:"/"},r.a.createElement(ce.c,null)))))}}]),a}(n.Component),nt={login:function(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.login(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:je,loadBoards:M},rt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),nt)(Object(l.f)(at)),ot=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSignup=function(){var t=Object(g.a)(h.a.mark((function t(a,n){var r,o,s,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),r=a.username,o=a.password,s=a.email,c=a.fullName,t.prev=3,t.next=6,e.props.signup({username:r,password:o,email:s,fullName:c});case 6:e.props.history.push("/board/".concat(e.props.boards[0]._id)),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(3),console.log("Signup: Couldn't sign up"),t.t0;case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(g.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"sign-login"},r.a.createElement(tt.d,{initialValues:{username:"",password:"",confirm:"",email:"",fullName:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.fullName||(t.fullName="Required"),e.password||(t.password="Required"),e.confirm!==e.password&&(t.confirm="Doesn't match password"),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email.toLowerCase())||(t.email="Invalid email address"),t},onSubmit:this.onSignup},r.a.createElement(tt.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(ce.e,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(tt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(tt.a,{name:"username",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Full name *"),r.a.createElement(tt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"fullName"})),r.a.createElement(tt.a,{name:"fullName",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Email *"),r.a.createElement(tt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"email"})),r.a.createElement(tt.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(tt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"password"})),r.a.createElement(tt.a,{name:"password",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Confirm password *"),r.a.createElement(tt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"confirm"})),r.a.createElement(tt.a,{name:"confirm",component:"span"}),r.a.createElement("button",{type:"submit"},"Signup"),r.a.createElement("a",{href:"/#/login"},"Already have an account? Login here!"),r.a.createElement("button",{onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement(q.a,{enterDelay:200,TransitionComponent:Z.a,title:"Back to home",arrow:!0},r.a.createElement("div",{className:"go-back"},r.a.createElement(i.b,{to:"/"},r.a.createElement(ce.c,null)))))}}]),a}(n.Component),st={signup:function(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't signup"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:je,loadBoards:M},ct=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),st)(Object(l.f)(ot)),it=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:!1,user:{_id:"",email:"",username:"",passowrd:"",fullName:"",imgUrl:""}},e.toggleModal=function(){e.setState({isModalOpen:!e.state.isModalOpen})},e.handleChange=function(t){var a=t.target;e.setState({user:Object(F.a)(Object(F.a)({},e.state.user),{},Object(ue.a)({},a.name,a.value))})},e.updateProfile=function(t){t.preventDefault(),e.props.updateUser(e.state.user),e.toggleModal()},e.uploadImg=function(){var t=Object(g.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze.uploadImg(a);case 2:n=t.sent,e.setState({user:Object(F.a)(Object(F.a)({},e.state.user),{},{imgUrl:n.url})});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(g.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.loadBoards(),e.next=3,Ee.getUserById(this.props.match.params.id);case 3:t=e.sent,this.setState({user:Object(F.a)({},t)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user,t=e.email,a=e.fullName,n=e.username,o=e.imgUrl,s=e._id;if(!s)return r.a.createElement("h1",null,"Loading...");var c=this.props.loggedUser;return r.a.createElement("section",{className:"user-profile"},r.a.createElement(Ue,null),r.a.createElement($,null),r.a.createElement("div",{className:"user-container"},r.a.createElement("header",{className:"header-container padding-x-15 padding-y-15 flex justify-center  align-center"},r.a.createElement("img",{className:"user-profile-big",src:o,alt:""})),r.a.createElement("div",{className:"user-details-container padding-x-30 padding-y-45 align-center  flex column"},c._id===s?r.a.createElement("h2",{onClick:this.toggleModal,className:"clickable-header"},"Edit Profile"):"",r.a.createElement("div",{className:"user-details-inner-container"},r.a.createElement("h3",null,"Email: ",r.a.createElement("span",{className:"span-user-details"},t)),r.a.createElement("h3",null,"Full Name: ",r.a.createElement("span",{className:"span-user-details"},a)),r.a.createElement("h3",null,"Username: ",r.a.createElement("span",{className:"span-user-details"},n)," "))),r.a.createElement(de.a,{in:this.state.isModalOpen},r.a.createElement("div",{className:"modal-screen flex justify-center align-center"},r.a.createElement("div",{className:"modal-container padding-x-15 padding-y-15"},r.a.createElement("div",{className:"user-modal-col align-center"},r.a.createElement("label",null," ",this.state.user.imgUrl?r.a.createElement("img",{className:"user-profile-big",src:this.state.user.imgUrl,alt:"profile-img"}):r.a.createElement("div",null,this.props.loggedUser.fullName),r.a.createElement("input",{type:"file",onChange:this.uploadImg,hidden:!0}))),r.a.createElement("div",{className:"user-modal-col"},r.a.createElement("form",{className:"form-container flex justify-center column  align-center",action:""},r.a.createElement("input",{value:this.state.user.email,onChange:this.handleChange,name:"email",placeholder:"Email",type:"email"}),r.a.createElement("input",{value:this.state.user.username,onChange:this.handleChange,name:"username",placeholder:"Username",type:"text"}),r.a.createElement("input",{value:this.state.user.password,onChange:this.handleChange,name:"password",placeholder:"Password",type:"password"}),r.a.createElement("input",{value:this.state.user.fullName,onChange:this.handleChange,name:"fullName",placeholder:"Full Name",type:"text"}),r.a.createElement("button",{onClick:this.updateProfile},"Save Changes"),r.a.createElement("button",{type:"button",className:"secondary-btn",onClick:this.toggleModal},"Cancel"))))))))}}]),a}(n.Component),lt={loadBoards:M,updateUser:function(e){return function(){var t=Object(g.a)(h.a.mark((function t(a){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,Ee.updateUser(e),a({type:"SET_USER",user:e}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("userActions: Couldn't update user"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}},ut=Object(c.b)((function(e){return{modal:e.systemReducer.modal,loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),lt)(it),dt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchVal:"",isOrderReversed:!1},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e.reverseOrder=function(){e.setState({isOrderReversed:!e.state.isOrderReversed})},e.moveToUserProfile=function(t){e.props.history.push("/user/".concat(t))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.boards&&this.props.boards.length||this.props.loadBoards()}},{key:"getUpcomingTasks",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-5,n=[],r=this.props.boards;return r.forEach((function(t){t.groups.forEach((function(r){n.push.apply(n,Object(Re.a)(r.tasks.filter((function(n){var r=Date.now();return n.boardId=t._id,n.boardName=t.name,oe()(n.dueDate).isBefore(oe()(r).add(e,"days"))&&oe()(r).isAfter(oe()(n.dueDate).add(a,"days"))}))))}))})),n.sort((function(e,a){var n=t.state.isOrderReversed?-1:1;return e.dueDate<a.dueDate?-n:e.dueDate>a.dueDate?n:0})),n}},{key:"getDaysFromNow",value:function(e){return oe()(e).isAfter(oe()(Date.now()).add(1,"day").endOf("day"))?oe()(e).format("dddd"):oe()(e).isBefore(oe()().endOf("day"))?"Today":"Tomorrow"}},{key:"render",value:function(){var e=this,t=this.getUpcomingTasks(7),a=this.state,n=a.searchVal,o=a.isOrderReversed,s=this.props.loggedUser.fullName.split(" ")[0];return n&&(t=t.filter((function(e){return e.name.toLowerCase().includes(n.toLocaleLowerCase())}))),r.a.createElement("section",{className:"my-week flex"},r.a.createElement(Ue,null),r.a.createElement($,null),r.a.createElement("div",{className:"my-week-container flex column space around"},r.a.createElement("div",{className:"my-week-header flex column space-around"},r.a.createElement("div",{className:"flex align-center space-around"},r.a.createElement("img",{src:"my-week-calendar.png",alt:""}),r.a.createElement("section",{className:"greeting-container"},r.a.createElement("h1",null,"Hey ".concat(s,",")),r.a.createElement("h1",null,"Welcome to My Week")))),r.a.createElement("div",{className:"search-container flex space-between align-center"},r.a.createElement("h2",null,"Upcoming:"),r.a.createElement("input",{onChange:this.handleChange,value:n,type:"text",placeholder:"search"}),o?r.a.createElement(q.a,{enterDelay:200,TransitionComponent:Z.a,title:"Order by date",arrow:!0},r.a.createElement("div",null,r.a.createElement(ce.d,{size:"1.5rem",onClick:this.reverseOrder}))):r.a.createElement(q.a,{enterDelay:200,TransitionComponent:Z.a,title:"Order by date",arrow:!0},r.a.createElement("div",null,r.a.createElement(ce.b,{size:"1.5rem",onClick:this.reverseOrder})))),t.length?r.a.createElement("section",{className:"upcoming-tasks-container"},r.a.createElement("div",{className:"upcoming-tasks"},t.map((function(t){return r.a.createElement("div",{key:t.id,className:"task-preview space-between align-center padding-x-15"},r.a.createElement("div",null,r.a.createElement("h2",null,t.name),r.a.createElement("p",{className:"task-location"},"Board: ",r.a.createElement("span",{onClick:function(){return e.props.history.push("/board/".concat(t.boardId))}},t.boardName))),r.a.createElement("div",{className:"label-box ".concat(t.status.toLocaleLowerCase())}," ",r.a.createElement("p",null,t.status)),r.a.createElement("div",{className:"user-img-container flex justify-center align-center"},0!==t.members.length&&(t.members[0].imgUrl?r.a.createElement("img",{onClick:function(){return e.moveToUserProfile(t.members[0]._id)},alt:"profile",src:t.members[0].imgUrl}):r.a.createElement("div",{onClick:function(){return e.moveToUserProfile(t.members[0]._id)},className:"member-letter"},t.members[0].fullName.charAt(0).toUpperCase()))),r.a.createElement("h2",null,e.getDaysFromNow(t.dueDate)))})))):r.a.createElement("h1",{className:"no-tasks"},"No tasks left for this week")))}}]),a}(n.Component),pt={loadBoards:M},mt=[{path:"/",component:P},{path:"/board/:id",component:et},{path:"/login",component:rt},{path:"/signup",component:ct},{path:"/user/:id",component:ut},{path:"/myweek",component:Object(c.b)((function(e){return{boards:e.boardReducer.boards,loggedUser:e.userReducer.loggedUser}}),pt)(Object(l.f)(dt))}];function ft(){return j.setup(),r.a.createElement(i.a,null,r.a.createElement("main",{className:"app"},r.a.createElement(l.c,null,mt.map((function(e){return r.a.createElement(l.a,{key:e.path,exact:!0,component:e.component,path:e.path})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ht=a(38),gt=a(172),bt={boards:[],filterBy:{},isBoardbarShown:!0};var vt={users:[],loggedUser:{_id:"5f68936cf878123b2cdce96d",username:"frize",fullName:"Roei Arazi",password:"3333",email:"frize@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[{byUser:{fullName:"Liam Zety",imgUrl:"https://via.placeholder.com/250"},content:"just uploaded the logo!",createdAt:Date.now()}],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},userProfile:null};var Et={isLoading:!1,isSnackbarShown:!1,snackbarTxt:""};var kt=Object(ht.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(F.a)(Object(F.a)({},e),{},{users:t.users});case"SHOW_PROFILE":return Object(F.a)(Object(F.a)({},e),{},{userProfile:t.user});case"SET_USER":return Object(F.a)(Object(F.a)({},e),{},{loggedUser:t.user});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(F.a)(Object(F.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(F.a)(Object(F.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(F.a)(Object(F.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"ADD_BOARD":return Object(F.a)(Object(F.a)({},e),{},{boards:[].concat(Object(Re.a)(e.boards),[t.board])});case"SET_FILTER":return Object(F.a)(Object(F.a)({},e),{},{filterBy:t.filter});case"TOGGLE_BOARDBAR":return Object(F.a)(Object(F.a)({},e),{},{isBoardbarShown:!e.isBoardbarShown});default:return e}},systemReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(F.a)(Object(F.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(F.a)(Object(F.a)({},e),{},{isLoading:!1});case"SHOW_SNACKBAR":return Object(F.a)(Object(F.a)({},e),{},{isSnackbarShown:!0,snackbarTxt:t.msg});case"HIDE_SNACKBAR":return Object(F.a)(Object(F.a)({},e),{},{isSnackbarShown:!1,snackbarTxt:""});default:return e}}}),yt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ht.d,wt=Object(ht.e)(kt,yt(Object(ht.a)(gt.a)));a(299);s.a.render(r.a.createElement(c.a,{store:wt},r.a.createElement(ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[178,1,2]]]);
//# sourceMappingURL=main.82f02ff4.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{180:function(e,t,a){e.exports=a(302)},234:function(e,t){},301:function(e,t,a){},302:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(11),s=a.n(o),c=a(17),l=a(30),i=a(26),u=a(12),d=a(13),p=a(15),m=a(14),g=a(6),f=a.n(g),h=a(8),b=a(19),v=a(5),E=a(159),k=a.n(E).a.create({withCredentials:!0}),y=function(e,t){return O(e,"GET",t)},N=function(e,t){return O(e,"POST",t)},x=function(e,t){return O(e,"PUT",t)},w=function(e,t){return O(e,"DELETE",t)};function O(e){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(f.a.mark((function e(t){var a,n,r,o=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,k({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&e.t0.response.status,e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S,j=a(160),U=a.n(j),T={setup:function(){console.log("established connection"),S=U()("/")},terminate:function(){S=null},on:function(e,t){S.on(e,t)},off:function(e,t){S.off(e,t)},emit:function(e,t){S.emit(e,t)}};var A={loadBoards:function(){return B.apply(this,arguments)},addBoard:function(e){return M.apply(this,arguments)},removeBoard:function(e){return w("board/".concat(e))},updateBoard:D,addGroup:function(e){var t={id:L(),name:"week1",createdAt:"date",color:"#70ADB5",lastUpdated:Date.now(),isTagsShown:!1,tags:[],columns:[{type:"date",name:"due date"}],tasks:[{id:L(),name:"sneeze",createdAt:Date.now(),members:[],status:"Working on it",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]}]};try{return e.groups.push(t),D(e),e}catch(a){throw console.log("boardService: Couldn't add group"),a}},removeGroup:function(e,t){return t.groups=t.groups.filter((function(t){return t.id!==e})),D(t),t},updateGroup:function(e,t){return t.groups=t.groups.map((function(t){return t.id===e.id?e:t})),D(t),t},addTask:function(e,t,a){var n={id:L(),name:t,createdAt:Date.now(),members:[],status:"Done",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:Date.now(),isSelected:!1,posts:[],tags:[]},r=JSON.parse(JSON.stringify(a));return r.groups.forEach((function(t){t.id===e&&t.tasks.push(n)})),D(r),r},removeTask:function(e,t){return _.apply(this,arguments)},updateTask:function(e,t){return t.groups=t.groups.map((function(t){return t.tasks=t.tasks.map((function(t){return t.id===e.id?e:t})),t})),D(t),t},handleBoardChanges:function(e,t,a){var n={id:L(),changedAt:Date.now(),isRead:!1,desc:e,byUser:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl}};return D(Object(v.a)(Object(v.a)({},a),{},{activityLog:[n].concat(Object(b.a)(a.activityLog))}))}};function B(){return(B=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("board");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return R.apply(this,arguments)}function R(){return(R=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.emit("updateBoard",t),x("board/".concat(t._id),t),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("LOGGED USER",t),a={boardCreator:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl},name:"board",createdAt:Date.now(),description:"Enter description here",members:[{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl}],groups:[{id:L(),name:"group 1",createdAt:Date.now(),color:"#22f24",lastUpdated:Date.now(),isTagsShown:!1,tags:[],columns:[{type:"date",name:"due date"}],tasks:[{id:L(),name:"sneeze",createdAt:Date.now(),members:[],status:"Stuck",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]},{id:L(),name:"sneeze",createdAt:Date.now(),members:[],status:"Working on it",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]}]}],activityLog:[]},e.next=4,N("board",a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(h.a)(f.a.mark((function e(t,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.groups=a.groups.map((function(e){return e.tasks=e.tasks.filter((function(e){return e.id!==t})),e})),D(a),e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function I(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.loadBoards();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("boardActions: Couldn't load boards"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function G(e){return console.log("show board to save",e),function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,A.updateBoard(e),a({type:"SET_BOARD",board:e}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("boardActions: Couldn't update board"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}var F=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return this.props.boards&&0!==this.props.boards.length?r.a.createElement("section",{className:"home flex column"},r.a.createElement("div",{className:"home-header flex space-between align-center"},r.a.createElement("h1",null,"Home"),r.a.createElement("div",{className:"home-header-right flex"},r.a.createElement(l.b,{to:"/login"},r.a.createElement("button",{className:"home-header-btn"},"Login")),r.a.createElement(l.b,{to:"/signup"},r.a.createElement("button",{className:"home-header-btn"},"Sign-up")))),r.a.createElement("main",{className:"home-main flex justify-center align-center column"},r.a.createElement(l.b,{to:"/board/".concat(this.props.boards[0]._id)},r.a.createElement("button",{className:"guest-button"},"Start Here!")))):r.a.createElement("h1",null,"Loading...")}}]),a}(n.Component),P={loadBoards:I},W=Object(c.b)((function(e){return{boards:e.boardReducer.boards}}),P)(F),H=a(59),V=a(335),z=a(336),Y=a(161),J=a(54),K=[{username:"frize",fullName:"Roei Arazi",password:"3333",email:"frize@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},{username:"anstrio",fullName:"Osher Kabada",password:"2222",email:"anstrio@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224127124"},{username:"smoking",fullName:"Liam Zety",password:"1111",email:"smoking@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224112124"}],q={loadUsers:function(){return X.apply(this,arguments)},getUserById:function(e){return Q.apply(this,arguments)},login:function(e){return $.apply(this,arguments)},signup:function(e){return ee.apply(this,arguments)},guestLogin:function(){return te.apply(this,arguments)},markAsRead:function(e){return Z.apply(this,arguments)},updateUser:ae,logout:function(){return re.apply(this,arguments)}};function X(){return(X=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y("user");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userService: Coulnd't get users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Z(){return(Z=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.notifications.forEach((function(e){e.isRead=!0})),ae(t),e.prev=2,e.abrupt("return",t);case 6:throw e.prev=6,e.t0=e.catch(2),console.log("userService: Something went wrong"),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function Q(){return(Q=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("got to user service",t),e.prev=1,e.next=4,y("user/".concat(t));case 4:return a=e.sent,console.log("got from service:",a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),console.log("userService: Coulnd't get user"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function $(){return($=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("auth/login",t);case 3:if(a=e.sent){e.next=6;break}throw"Wrong username or password";case 6:return e.abrupt("return",oe(a));case 9:throw e.prev=9,e.t0=e.catch(0),console.log("userService: Wrong username or password"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ee(){return(ee=Object(h.a)(f.a.mark((function e(t){var a,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(v.a)({imgUrl:"https://via.placeholder.com/100",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},t),e.prev=1,e.next=4,N("auth/signup",a);case 4:return n=e.sent,e.abrupt("return",oe(n));case 8:throw e.prev=8,e.t0=e.catch(1),console.log("userService: Couldn't sign up"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function te(){return(te=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:se(),username:"guest",fullName:"guest",password:"none",imgUrl:"https://via.placeholder.com/100",isAdmin:!0,boards:[{id:"212",name:"board1"}],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},e.prev=1,K.push(t),e.abrupt("return",t);case 6:throw e.prev=6,e.t0=e.catch(1),console.log("userService: Couldn't login as guest"),e.t0;case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x("user/".concat(t._id),t),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function se(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function ce(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.guestLogin();case 3:a=e.sent,t({type:"SET_USER",user:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't login as a guest"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function le(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,q.updateUser(e),a({type:"SET_USER",user:e}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("userActions: Couldn't update user"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function ie(e){return function(t){t({type:"SHOW_SNACKBAR",msg:e})}}function ue(){return function(e){e({type:"HIDE_SNACKBAR"})}}var de=a(31),pe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,selectedBoardId:"",isSnackbarOpen:!1,isShown:"",searchVal:""},e.handleMenuOpen=function(t,a){e.setState({anchorEl:t.currentTarget,selectedBoardId:a})},e.handleMenuClose=function(){e.setState({anchorEl:null})},e.onAddBoard=function(){T.emit("add-delete-board"),e.props.addBoard(e.props.loggedUser)},e.onBoardRemove=function(t){var a=e.props,n=a.boards,r=a.match,o=a.history,s=a.removeBoard,c=r.params.id;if(e.handleMenuClose(),1!==n.length){if(s(t),T.emit("add-delete-board"),e.props.showSnackbar("Removed board."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),c===t){var l=n.findIndex((function(e){return e._id!==t}));o.push("/board/".concat(n[l]._id))}}else console.log("you need at least one board!")},e.onToggleShown=function(){e.props.toggleBoardbar(),e.setState({isShown:!e.state.isShown})},e.handleSearchChange=function(t){e.setState({searchVal:t.target.value})},e.handleSearch=function(){return console.log("got board:",e.props.boards),e.props.boards.filter((function(t){return t.name.toLowerCase().includes(e.state.searchVal.toLowerCase())}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;T.on("updatedBoard",(function(t){e.props.recieveUpdate(t)})),T.on("add-delete-board",(function(){e.props.loadBoards()})),T.on("accept-notif",(function(t){e.props.updateUser(Object(v.a)(Object(v.a)({},e.props.loggedUser),{},{notifications:[].concat(Object(b.a)(e.props.loggedUser.notifications),[t])}))})),T.emit("user",this.props.loggedUser._id),this.setState({isShown:this.props.isBoardbarShown})}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard"),T.off("add-delete-board"),T.off("accept-notif")}},{key:"onMoveToBoard",value:function(e){this.props.history.push("/board/".concat(e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.anchorEl,n=t.selectedBoardId,o=t.isShown,s=this.handleSearch();return r.a.createElement("section",{className:"boardbar fixed column ".concat(o&&"board-bar-shown")},r.a.createElement("div",{"data-title":"Toggle Board",onClick:this.onToggleShown,className:"board-bar-toggle-container"},r.a.createElement(de.e,{style:{color:this.props.location.pathname.includes("/myweek")&&"#151515",transform:o&&"rotate(180deg)"},className:"board-bar-toggle"})),o&&r.a.createElement("div",{className:"boardbar-header"},r.a.createElement("h1",null,"Boards"),r.a.createElement(J.d,{onClick:this.onAddBoard})),o&&r.a.createElement("input",{onChange:this.handleSearchChange,type:"text",placeholder:"Search Board"}),r.a.createElement("ul",null,o&&s.map((function(t,a){return r.a.createElement("li",{className:"flex align-center",key:a},r.a.createElement(Y.a,{onClick:function(a){return e.handleMenuOpen(a,t._id)}}),r.a.createElement("h4",{onClick:function(){return e.onMoveToBoard(t._id)}},t.name))}))),r.a.createElement(V.a,{role:"menuContainer",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:this.handleMenuClose},r.a.createElement(z.a,{onClick:function(){return e.onBoardRemove(n)}},"Delete"),r.a.createElement(z.a,{onClick:this.handleMenuClose},"Edit")))}}]),a}(n.Component),me={updateBoard:G,removeBoard:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.removeBoard(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.log("boardActions: Couldn't remove board"),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},addBoard:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A.addBoard(e);case 3:n=t.sent,a({type:"ADD_BOARD",board:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("boardActions: Couldn't add board"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},showSnackbar:ie,hideSnackbar:ue,toggleBoardbar:function(){return function(e){e({type:"TOGGLE_BOARDBAR"})}},recieveUpdate:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,a({type:"SET_BOARD",board:e}),t.next=8;break;case 4:throw t.prev=4,t.t0=t.catch(0),console.log("boardActions: Couldn't update board"),t.t0;case 8:case"end":return t.stop()}}),t,null,[[0,4]])})));return function(e){return t.apply(this,arguments)}}()},loadBoards:I,updateUser:le},ge=Object(c.b)((function(e){return{boards:e.boardReducer.boards,isBoardbarShown:e.boardReducer.isBoardbarShown,loggedUser:e.userReducer.loggedUser}}),me)(Object(i.f)(pe)),fe=a(165),he=a(84),be=a(63),ve=a.n(be),Ee=a(173),ke=a(34),ye=a(18),Ne=a.n(ye),xe=a(333),we=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOrderReversed:!1,isFilterOpen:!1,filterBy:{},searchVal:""},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e.toggleFilter=function(){e.setState({isFilterOpen:!e.state.isFilterOpen})},e}return Object(d.a)(a,[{key:"onSetFilter",value:function(e,t){var a=Object(v.a)({},this.state.filterBy);a[e]===t&&(t=""),this.setState({filterBy:Object(v.a)(Object(v.a)({},a),{},Object(ke.a)({},e,t))})}},{key:"getActivityDates",value:function(){var e=this.props.activityLog.reduce((function(e,t){return e[Ne()(t.createdAt).format("DD MMM")]="",e}),{});return Object.keys(e)}},{key:"getActivityMembers",value:function(){var e=this.props.activityLog.reduce((function(e,t){return e[t.byUser.fullName]="",e}),{});return Object.keys(e)}},{key:"applyFilter",value:function(e){var t=Object(b.a)(e),a=this.state,n=a.filterBy,r=a.searchVal;return n.date&&(t=t.filter((function(e){return Ne()(e.createdAt).format("DD MMM")===n.date}))),n.member&&(t=t.filter((function(e){return e.byUser.fullName===n.member}))),r&&(t=t.filter((function(e){return e.description.toLowerCase().includes(r)||e.byUser.fullName.toLowerCase().includes(r)}))),t}},{key:"render",value:function(){var e=this;if(!this.props.activityLog)return r.a.createElement("h1",null,"Loading...");var t=this.state,a=t.isFilterOpen,o=t.filterBy,s=t.searchVal,c=Object(Ee.a)(this.activities,2),l=c[0],i=c[1],u=this.getActivityDates(),d=this.getActivityMembers();return l=this.applyFilter(l),i=this.applyFilter(i),r.a.createElement("section",{className:"activities flex column"},r.a.createElement("header",{className:"padding-x-15 padding-y-15"},r.a.createElement(de.a,{onClick:this.props.onToggleActivities}),r.a.createElement("h1",null,r.a.createElement("span",null,this.props.boardName)," Log"),r.a.createElement("div",{className:"filters-container space-between flex align-center"},r.a.createElement("input",{value:s,onChange:this.handleChange,type:"text",placeholder:"Search"}),r.a.createElement("div",{className:"filter-outer-container relative"},r.a.createElement("button",{onClick:this.toggleFilter},"Filter"),a&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleFilter}),r.a.createElement(xe.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"activity-member-filter"},r.a.createElement("h3",null,"Member"),d.map((function(t,a){return r.a.createElement("button",{className:o.member===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("member",t)}},t)}))),r.a.createElement("section",{className:"activity-date-filter"},r.a.createElement("h3",null,"Date"),r.a.createElement("div",{className:"filter-list"},u.map((function(t,a){return r.a.createElement("button",{className:o.date===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("date",t)}},t)}))))))),r.a.createElement("button",{onClick:this.props.onClearLog},"Clear Log")))),r.a.createElement("div",{className:"all-activities-container"},0!==i.length&&r.a.createElement("div",{className:"activity-list-not-read column flex  padding-y-15"},r.a.createElement("h1",null,"New Activities"),i.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Ne()(e.createdAt).format("DD MMM"))),r.a.createElement("img",{src:e.byUser.imgUrl,alt:""}),r.a.createElement("h2",null,e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))}))),0!==l.length&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"activity-list column flex  padding-y-15"},r.a.createElement("h1",null,"Activities Read"),l.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity  space-between flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Ne()(e.createdAt).format("DD MMM"))),r.a.createElement("img",{src:e.byUser.imgUrl,alt:""}),r.a.createElement("h2",null,e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))}))))),0===l.length&&r.a.createElement("h1",{className:"padding-x-15"},"No recent board activities!"))}},{key:"activities",get:function(){var e=this.props.activityLog;return[e.filter((function(e){return e.isRead})),e.filter((function(e){return!e.isRead}))]}}]),a}(n.Component);var Oe={setFilter:function(e){return function(t){t({type:"SET_FILTER",filter:e})}}},Ce=Object(c.b)((function(e){return{filterBy:e.boardReducer.filterBy}}),Oe)(Object(i.f)((function(e){var t=e.board,a=e.filterBy,n=e.setFilter;function o(e,t){a[e]===t&&(t=""),n(Object(v.a)(Object(v.a)({},a),{},Object(ke.a)({},e,t)))}if(!t)return r.a.createElement("h1",null,"Loading...");var s=t.groups,c=t.members,l=function(){var e={};t.groups.forEach((function(t){t.tasks.forEach((function(t){var a=Ne()(t.dueDate).format("DD.MM.YY");e[a]=t.dueDate}))}));var a=[];for(var n in e)a.push({formatted:n,value:e[n]});return a}();return r.a.createElement(xe.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"group-name-filter flex column align-center"},r.a.createElement("h3",null,"Groups"),r.a.createElement("div",{className:"filter-list"},s.map((function(e,t){return r.a.createElement("button",{className:a.groupId===e.id?"remove-filter-btn":"",key:t,onClick:function(){return o("groupId",e.id)}},e.name)})))),r.a.createElement("section",{className:"task-member-filter flex column align-center"},r.a.createElement("h3",null,"Member"),r.a.createElement("div",{className:"filter-list"},c.map((function(e,t){return r.a.createElement("button",{className:a.memberId===e._id?"remove-filter-btn":"",key:t,onClick:function(){return o("memberId",e._id)}},e.fullName)})))),r.a.createElement("section",{className:"task-priority-filter flex column align-center"},r.a.createElement("h3",null,"Priority"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"low"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","low")}},"Low"),r.a.createElement("button",{className:"medium"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","medium")}},"Medium"),r.a.createElement("button",{className:"high"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","high")}},"High"))),r.a.createElement("section",{className:"task-status-filter flex column align-center"},r.a.createElement("h3",null,"Status"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"done"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","done")}},"Done"),r.a.createElement("button",{className:"working on it"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","working on it")}},"Working on it "),r.a.createElement("button",{className:"stuck"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","stuck")}},"Stuck"))),r.a.createElement("section",{className:"task-date-filter flex column align-center"},r.a.createElement("h3",null,"Due-Date"),r.a.createElement("div",{className:"filter-list"},l.map((function(e,t){return r.a.createElement("button",{className:a.dueDate===e.value?"remove-filter-btn":"",key:t,onClick:function(){return o("dueDate",e.value)}},e.formatted)}))))))}))),Se=a(83),je=a(62),Ue=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_id:"",isActivitiesOpen:!1,isFiltersOpen:!1,isUsersOpen:!1,elSetting:null},e.handleChangeName=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{name:t.target.value})},console.log("change name! ",e.state.board))},e.handleChangeDesc=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{description:t.target.value})})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onToggleActivities=function(){e.setState({isActivitiesOpen:!e.state.isActivitiesOpen});var t=e.props.board;e.state.isActivitiesOpen&&(t=Object(v.a)(Object(v.a)({},t),{},{activityLog:t.activityLog.map((function(e){return e.isRead=!0,e}))})),e.props.onEditBoard(t.name,t.description,!1,"openModal",t.members,t.activityLog)},e.onToggleFilters=function(){e.setState({isFiltersOpen:!e.state.isFiltersOpen})},e.handleMenuOpen=function(t,a){e.setState({elSetting:t.currentTarget})},e.handleMenuClose=function(){e.setState({elSetting:null})},e.onToggleUsers=function(){e.setState({isUsersOpen:!e.state.isUsersOpen})},e.onRemoveMemberFromBoard=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{members:e.state.board.members.filter((function(e){return e._id!==t}))})},(function(){e.props.onEditBoard(e.state.board.name,e.state.board.desc,!0,"removeMemberFromBoard",e.state.board.members)}))},e.onAddUserToBoard=function(t){var a=e.props.users.find((function(e){return e._id===t}));e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{members:[].concat(Object(b.a)(e.state.board.members),[a])})},(function(){e.props.onEditBoard(e.state.board.name,e.state.board.desc,!0,"addMemberToBoard",e.state.board.members)}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t))},e.onClearLog=function(){var t=Object(v.a)(Object(v.a)({},e.state.board),{},{activityLog:[]});e.setState({board:t},(function(){e.props.onEditBoard(t.name,t.description,!1,"clearLog",t.members,t.activityLog)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.editableName=r.a.createRef(),this.editableDescription=r.a.createRef(),this.searchInput=r.a.createRef(),T.on("updatedBoard",(function(){e.setState({board:e.props.board})})),this.setState({board:this.props.board,_id:this.props.board._id})}},{key:"componentDidUpdate",value:function(e,t){e.board._id!==this.props.board._id&&(console.log("COMP DID UPDATE"),this.setState({board:this.props.board}))}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard")}},{key:"render",value:function(){var e=this;if(!this.state._id)return r.a.createElement("h1",null,"Loading...");var t=this.state.board.members,a=this.props.users.filter((function(e){return!t.some((function(t){return t._id===e._id}))})),n=this.props.board.activityLog.filter((function(e){return!e.isRead})),o=this.props.board.activityLog.filter((function(e){return e.isRead}));return r.a.createElement("section",{className:"board-header flex column padding-x-30"},r.a.createElement("div",{className:"board-header-header flex space-between grow align-center"},r.a.createElement("h1",{className:"flex align-center"},r.a.createElement(ve.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableName,html:this.state.board.name,disabled:!1,onChange:this.handleChangeName,onBlur:function(){e.props.onEditBoard(e.state.board.name,e.state.board.description,!0,"changeBoardTitle")},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditBoard(e.state.board.name,e.state.board.description,!0,"changeBoardTitle"))}})),r.a.createElement("div",{className:"board-header-right relative flex align-center"},r.a.createElement("div",{className:"board-users flex justify-center",onClick:this.onToggleUsers},0===t.length&&r.a.createElement("div",{className:"user-img-container"}," ",r.a.createElement(je.b,null)),0!==t.length&&t.map((function(e,t){return r.a.createElement("div",{key:t,className:"user-img-container"},r.a.createElement("img",{src:e.imgUrl}))}))),this.state.isUsersOpen&&r.a.createElement("div",{className:"users-modal absolute"},r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),t.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(de.d,{onClick:function(){return e.onRemoveMemberFromBoard(t._id)}}))}))),r.a.createElement("div",{className:"site-users-box"},r.a.createElement("h3",null,"Site Users"),a.map((function(t){return r.a.createElement("section",{key:t._id,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex  align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(Se.a,{onClick:function(){return e.onAddUserToBoard(t._id)}}))})))),r.a.createElement("div",{onClick:this.onToggleActivities,className:"activities-outer-container flex align-center  cursor-pointer"},r.a.createElement("h2",null," Activities ",r.a.createElement("span",{style:{color:0!==n.length?"#0085ff":""}},n.length)," / ",o.length+n.length)))),r.a.createElement("div",{className:"board-header-footer flex align-center space-between"},r.a.createElement("h5",null,r.a.createElement(ve.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableDescription,html:this.state.board.description,disabled:!1,onChange:this.handleChangeDesc,onBlur:function(){e.props.onEditBoard(e.state.board.name,e.state.board.description,!0,"changeBoardDesc")},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditBoard(e.state.board.name,e.state.board.description,!0,"changeBoardDesc"))}})),r.a.createElement("div",{className:"header-options flex"},r.a.createElement("button",{onClick:this.props.onAddGroup},"New Group"),r.a.createElement("div",{onClick:function(){return e.searchInput.focus()},className:"search-outer-container flex align-center"},r.a.createElement("input",{ref:function(t){e.searchInput=t},placeholder:"Search",type:"text",onChange:this.props.handleSearch}),r.a.createElement(fe.a,null)),r.a.createElement("div",{onClick:this.state.isFiltersOpen?function(){}:this.onToggleFilters,className:"filters-outer-container relative flex align-center cursor-pointer"},r.a.createElement(he.c,null),r.a.createElement("h2",null,"Filter"),this.state.isFiltersOpen&&r.a.createElement(Ce,{board:this.props.board}))),r.a.createElement("div",{className:"".concat(this.state.isActivitiesOpen&&"animate-side-modal"," side-modal")},r.a.createElement(we,{onClearLog:this.onClearLog,onToggleActivities:this.onToggleActivities,boardName:this.state.board.name,activityLog:this.props.board.activityLog})),this.state.isFiltersOpen&&r.a.createElement("div",{onClick:this.onToggleFilters,className:"modal-screen-wrapper"}),this.state.isActivitiesOpen&&r.a.createElement("div",{onClick:this.onToggleActivities,className:"modal-screen-wrapper"}),this.state.isUsersOpen&&r.a.createElement("div",{onClick:this.onToggleUsers,className:"modal-screen-wrapper"})))}}]),a}(r.a.Component),Te=Object(i.f)(Ue),Ae=a(48),Be=a(93),De=a(85),Re=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:null},e.onRemoveNotifications=function(){e.props.removeNotifications(e.props.loggedUser),e.setState({isModalOpen:!0})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({isModalOpen:!0})}},{key:"render",value:function(){var e=this.props.loggedUser;return r.a.createElement(xe.a,{in:this.state.isModalOpen},r.a.createElement("section",{className:"notifications padding-x-15 padding-y-15"},r.a.createElement("header",{className:"flex space-between align-center"},0!==e.notifications.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Notifications"),",",r.a.createElement(de.b,{onClick:this.onRemoveNotifications})):r.a.createElement("h1",null,"You have no notifications.")),r.a.createElement("div",{className:"notifications-container"},e.notifications&&e.notifications.map((function(e,t){return r.a.createElement("div",{key:t,className:"notification flex "},r.a.createElement("div",{className:"user-img-container"},r.a.createElement("img",{src:e.byUser.imgUrl,alt:"profile"})),r.a.createElement("div",{className:"notification-msg flex align-center column"},r.a.createElement("h2",null,r.a.createElement(De.a,{lines:1,ellipsis:"...",width:350},e.byUser.fullName)),r.a.createElement("p",null,r.a.createElement(De.a,{lines:1,ellipsis:"...",width:350},e.content)),r.a.createElement("div",null,r.a.createElement("p",null,Ne()(e.createdAt).fromNow()))))})))))}}]),a}(n.Component),Me=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isNotificationShown:!1},e.toggleNotifications=function(){e.onMarkAsRead(),e.setState({isNotificationShown:!e.state.isNotificationShown})},e.onMarkAsRead=function(){e.props.markAsRead(e.props.loggedUser)},e.onLogout=function(){e.props.logout(),e.props.history.push("/login")},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.isNotificationShown,t=this.props,a=t.loggedUser,n=t.removeNotifications;return r.a.createElement("section",{className:"navbar flex column space-between align-center padding-y-15"},r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement("li",{className:"icon-container cursor-pointer"},r.a.createElement(l.b,{to:"/"},r.a.createElement(Ae.a,null))),e&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleNotifications}),r.a.createElement("li",{className:"icon-container cursor-pointer",onClick:this.state.isNotificationShown?function(){}:this.toggleNotifications},0===a.notifications.filter((function(e){return!e.isRead})).length?"":r.a.createElement("p",{className:"notifications-counter"},a.notifications.filter((function(e){return!e.isRead})).length),e&&r.a.createElement(Re,{removeNotifications:n,loggedUser:a}),a.notifications.some((function(e){return!e.isRead}))?r.a.createElement(he.b,null):r.a.createElement(he.a,null))),r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(l.b,{to:"/myweek"},r.a.createElement("li",{className:"icon-container"},r.a.createElement(J.b,null))),r.a.createElement(l.b,{to:a?"/user/".concat(a._id):"/login"},r.a.createElement("li",{className:"icon-container"},r.a.createElement(Ae.c,null))),r.a.createElement("li",{className:"icon-container"},r.a.createElement(Be.b,{onClick:this.onLogout}))))}}]),a}(n.Component),_e={markAsRead:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.markAsRead(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login as a guest"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeNotifications:function(e){var t=e;return t.notifications=[],function(){var a=Object(h.a)(f.a.mark((function a(n){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{q.updateUser(e),n({type:"UPDATE_PROFILE",user:t})}catch(r){console.log("ERROR, couldnt remove notifications",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},logout:function(){return function(e){try{q.logout(),e({type:"SET_USER",user:null})}catch(t){throw console.log("userActions: Couldn't logout"),t}}}},Le=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}),_e)(Object(i.f)(Me)),Ie=a(98);a(240);function Ge(e){var t=e.users.filter((function(t){return!e.members.some((function(e){return e._id===t._id}))}));return r.a.createElement("div",{className:"user-img-container relative flex justify-center align-center",onClick:function(){return e.openModal("users")}},e.members.length?e.members[0].imgUrl?r.a.createElement("img",{alt:"profile",src:e.members[0].imgUrl}):r.a.createElement("div",{className:"member-letter"},e.members[0].fullName.charAt(0).toUpperCase()):r.a.createElement("div",{className:"no-members-container"}," ",r.a.createElement(je.b,{className:"no-members-icon"})," ",r.a.createElement(Se.a,{className:"no-members-icon-plus"})),0!==e.members.length&&r.a.createElement("div",{className:"task-number-of-imgs flex justify-center align-center"},r.a.createElement("span",null,e.members.length)),e.isUsersShown&&r.a.createElement("div",{className:"users-modal absolute"},r.a.createElement("div",{className:"task-users-box"},r.a.createElement("h3",null,"Task Members"),e.members.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(de.d,{onClick:function(){return e.onRemoveMemberFromTask(t._id)}}))}))),r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),t.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex  align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(Se.a,{onClick:function(){return e.onAddUserToTask(t._id)}}))})))))}function Fe(e){return r.a.createElement("div",{className:"label-container relative flex align-center"},r.a.createElement("div",{className:"label-box ".concat(e.status.split(" ")[0].toLowerCase()),onClick:function(){return e.openModal("status")}},r.a.createElement("div",{className:"task-label-name flex align-center justify-center"},r.a.createElement("p",null,e.status)),e.isStatusShown&&r.a.createElement("div",{className:"label-list absolute flex column align-center"},r.a.createElement("section",{className:"label-selector flex align-center justify-center stuck",onClick:function(){return e.handleChange("Stuck")}},r.a.createElement("p",null,"Stuck")),r.a.createElement("section",{className:"label-selector flex align-center justify-center working",onClick:function(){return e.handleChange("Working on it")}},r.a.createElement("p",null,"Working on it")),r.a.createElement("section",{className:"label-selector flex align-center justify-center done",onClick:function(){return e.handleChange("Done")}},r.a.createElement("p",null,"Done")))))}var Pe=a(166),We=a.n(Pe);function He(e){return r.a.createElement("label",{className:"date-picker"},r.a.createElement(We.a,{selected:e.dueDate,onChange:e.handleDateChange,dateFormat:"dd/MM/yyyy"}))}function Ve(e){return r.a.createElement("div",{className:"label-container relative flex align-center"},r.a.createElement("div",{className:"label-box ".concat(e.priority.toLowerCase()),onClick:function(){return e.openModal("priority")}},r.a.createElement("div",{className:"task-label-name flex align-center justify-center"},r.a.createElement("p",null,e.priority)),e.isPriorityShown&&r.a.createElement("div",{className:"label-list absolute flex column align-center"},r.a.createElement("section",{className:"label-selector flex align-center justify-center low",onClick:function(){return e.handleChange("Low")}},r.a.createElement("p",null,"Low")),r.a.createElement("section",{className:"label-selector flex align-center justify-center medium",onClick:function(){return e.handleChange("Medium")}},r.a.createElement("p",null,"Medium")),r.a.createElement("section",{className:"label-selector flex align-center justify-center high",onClick:function(){return e.handleChange("High")}},r.a.createElement("p",null,"High")))))}var ze={uploadImg:function(e){return Ye.apply(this,arguments)}};function Ye(){return(Ye=Object(h.a)(f.a.mark((function e(t){var a,n,r,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("IMAGE?",t),"dtg7n0zye",a="https://api.cloudinary.com/v1_1/".concat("dtg7n0zye","/image/upload"),(n=new FormData).append("file",t),n.append("upload_preset","Task-Us"),e.prev=6,e.next=9,fetch(a,{method:"POST",body:n});case 9:return r=e.sent,e.next=12,r.json();case 12:return o=e.sent,e.abrupt("return",o);case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var Je=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1},e.handleChange=function(t){var a=t.target;e.setState(Object(ke.a)({},a.name,a.value))},e.toggleEditMode=function(t){e.setState({isEditMode:!e.state.isEditMode,txt:t})},e.updateReply=function(t){if(t.txt===e.state.txt)return e.setState({isEditMode:!1});t.txt=e.state.txt;var a=e.props.update.replies.map((function(e){return e.id===t.id?t:e})),n=Object(v.a)(Object(v.a)({},e.props.update),{},{replies:a});e.props.updateNote(n),e.setState({isEditMode:!1,txt:""})},e.removeReply=function(t){var a=e.props.update.replies.findIndex((function(e){return e.id===t})),n=Object(v.a)({},e.props.update).replies.splice(a,1);e.props.updateNote(n)},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.reply,n=t.idx;return r.a.createElement("div",{key:n,className:"reply-box flex column relative"},r.a.createElement("button",{className:"remove-reply-btn absolute",onClick:function(){return e.removeReply(a.id)}},"X"),r.a.createElement("div",{className:"reply-content flex align-center"},r.a.createElement("img",{src:a.member.imgUrl,alt:""}),r.a.createElement("p",{className:"reply-name"},a.member.fullName),this.state.isEditMode?r.a.createElement("div",{className:"edit-box flex"},r.a.createElement("textarea",{name:"txt",onChange:this.handleChange,value:this.state.txt}),r.a.createElement(de.f,{className:"update-reply-btn",onClick:function(){return e.updateReply(a)}})):r.a.createElement("p",{className:"reply-text"},a.txt)),r.a.createElement("p",{className:"edit-reply-btn",onClick:function(){return e.toggleEditMode(a.txt)}},"Edit"))}}]),a}(r.a.Component),Ke=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1},e.onReply=function(t){if(e.state.txt&&!e.state.txt.split("").every((function(e){return" "===e}))){var a={txt:e.state.txt,createdAt:Date.now(),id:e.props.makeid(),member:{fullName:e.props.loggedUser.fullName,username:e.props.loggedUser.userName,_id:e.props.loggedUser.userName,imgUrl:e.props.loggedUser.imgUrl}},n=e.props.updates.find((function(e){return e.id===t.id}));n.replies=[].concat(Object(b.a)(n.replies),[a]),e.props.updateNote(n),e.setState({txt:""})}},e.removeUpdate=function(t){console.log(t),console.log(e.props.updates);var a=e.props.updates.findIndex((function(e){return e.id===t})),n=Object(b.a)(e.props.updates).splice(a,1);e.props.sendNote(n)},e.onToggleEditUpdate=function(){e.setState({isEditMode:!e.state.isEditMode})},e.editUpdate=function(t){if(t.txt===e.state.txt)return e.setState({isEditMode:!1});t.txt=e.state.txt;var a=e.props.updates.map((function(e){return e.id===t.id?t:e}));e.props.sendNote(a),e.setState({isEditMode:!1,txt:""})},e.handleChange=function(t){var a=t.target;e.setState(Object(ke.a)({},a.name,a.value))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.update,n=t.idx;return r.a.createElement("div",{key:n,className:"update-box flex wrap column relative"},r.a.createElement("button",{className:"remove-update-btn",onClick:function(){return e.removeUpdate(a.id)}},"X"),r.a.createElement("div",{className:"update-box-header flex align-center"},r.a.createElement("img",{src:a.member.imgUrl,alt:""}),r.a.createElement("p",{className:"member-name"},a.member.fullName)),this.state.isEditMode?r.a.createElement("div",{className:"update-box-edit flex column relative"},r.a.createElement("textarea",{value:this.state.txt,name:"txt",onChange:this.handleChange}),r.a.createElement(de.f,{className:"submit-edit-btn absolute",onClick:function(){return e.editUpdate(a)}}),a.imgUrl&&r.a.createElement("img",{src:a.imgUrl,alt:""})):r.a.createElement("div",{className:"update-box-main flex column"},a.txt&&r.a.createElement("p",{className:"update-text"},a.txt),a.imgUrl&&r.a.createElement("img",{src:a.imgUrl,alt:""})),r.a.createElement("p",{className:"edit-update-btn",onClick:this.onToggleEditUpdate},"Edit"),r.a.createElement("div",{className:"update-box-footer flex column"},a.replies&&r.a.createElement("div",{className:"replies-box flex column"},a.replies.map((function(t,a){return r.a.createElement(Je,{reply:t,idx:a,update:e.props.update,updateNote:e.props.updateNote})}))),!this.state.isEditMode&&r.a.createElement("div",{className:"reply-footer flex space-between align-center"},r.a.createElement("textarea",{value:this.state.txt,name:"txt",onChange:this.handleChange}),r.a.createElement("button",{className:"reply-button",onClick:function(){return e.onReply(a)}},"Reply"))))}}]),a}(r.a.Component);function qe(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var Xe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={reply:{txt:""},update:{id:"",txt:"",imgUrl:"",replies:[]},isLoading:!1,imageUploaded:!1},e.handleChange=function(t){"file-img"===t.target.name?e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{img:t.target.files[0]})},(function(){e.uploadImg()})):"txt"===t.target.name?e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{txt:t.target.value})}):e.setState({reply:Object(v.a)(Object(v.a)({},e.state.reply),{},{txt:t.target.value})})},e.uploadImg=Object(h.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,ze.uploadImg(e.state.update.img,e.state);case 3:a=t.sent,e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{imgUrl:a.url}),isLoading:!1,imageUploaded:!0});case 5:case"end":return t.stop()}}),t)}))),e.sendNote=function(t){if(t.preventDefault(),e.state.update.txt&&!e.state.update.txt.split("").every((function(e){return" "===e}))||e.state.update.imgUrl){var a=[{id:qe(),createdAt:Date.now(),txt:e.state.update.txt,imgUrl:e.state.update.imgUrl,replies:[],member:{fullName:e.props.loggedUser.fullName,username:e.props.loggedUser.userName,_id:e.props.loggedUser.userName,imgUrl:e.props.loggedUser.imgUrl}}].concat(Object(b.a)(e.props.updates));e.setState({update:{txt:"",imgUrl:""},imageUploaded:!1}),e.props.sendNote(a)}},e.updateNote=function(t){var a=Object(b.a)(e.props.updates).map((function(e){return e.id===t.id?t:e}));e.props.sendNote(a)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({imageUploaded:!1})}},{key:"render",value:function(){var e=this;if(!this.props.updates)return r.a.createElement("h1",null,"Loading...");var t=this.props.updates;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"updates-header flex column"},r.a.createElement(de.a,{onClick:this.props.closeModal}),r.a.createElement("h1",null,this.props.task.name),r.a.createElement("div",{className:"updates-header-options flex column"},r.a.createElement("form",{onSubmit:this.sendNote,className:"notes-form flex align-center"},r.a.createElement("textarea",{name:"txt",value:this.state.update.txt,onChange:this.handleChange})),r.a.createElement("div",{className:"updates-btns flex align-center space-between"},r.a.createElement("div",{className:"image-uploader flex"},r.a.createElement("label",{htmlFor:this.props.task.id},this.state.isLoading?r.a.createElement("div",{class:"loadingio-spinner-spinner-gvjl1rpqs7q"},r.a.createElement("div",{class:"ldio-subadnemdcd"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):r.a.createElement(Be.a,null)),r.a.createElement("input",{name:"file-img",type:"file",id:this.props.task.id,onChange:this.handleChange,hidden:!0}),this.state.imageUploaded&&r.a.createElement("div",{className:"image-uploaded flex align-center"},r.a.createElement(Ie.b,null),r.a.createElement("p",null," Image Ready!"))),this.state.isLoading?r.a.createElement("p",null,"Image is uploading.."):r.a.createElement("button",{onClick:this.sendNote},"Upload")))),r.a.createElement("div",{className:"updates-container"},t.map((function(a,n){return r.a.createElement(Ke,{update:a,key:n,idx:n,updates:t,loggedUser:e.props.loggedUser,sendNote:e.props.sendNote,updateNote:e.updateNote,makeid:qe})}))))}}]),a}(r.a.Component),Ze=a(119),Qe=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t,a){var n=e.state.tags.map((function(e){return e.id===a&&(e.txt=t.target.value),e}));e.setState({tags:n})},e.onAddTag=function(){var t=Object(b.a)(e.state.tags),a=e.elTagInput.current.value?e.elTagInput.current.value:"New Tag";t.push({id:e._makeid(),txt:a,color:$e()}),e.setState({tags:t}),e.props.onEditTags(t,a,"addTag")},e.onRemoveTag=function(t){var a=e.state.tags.find((function(e){return e.id===t})),n=e.state.tags.filter((function(e){return e.id!==t}));e.setState({tags:n}),e.props.onEditTags(n,a.txt,"removeTag")},e.onEditTag=function(t,a,n){e.props.task.tags[t].txt!==e.state.tags[t].txt&&e.props.onEditTags(e.state.tags,a,n)},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.elTagInput=r.a.createRef(),this.elTag=r.a.createRef(),this.setState({tags:JSON.parse(JSON.stringify(this.props.task.tags))})}},{key:"_makeid",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}},{key:"render",value:function(){var e=this;return this.state.tags&&0!==this.state.tags?r.a.createElement("div",{onClick:function(){return e.props.openModal("tags")},className:"label-container tags relative"},r.a.createElement("div",{className:"task-label-name flex justify-center align-center "},this.state.tags.map((function(t,a){if(!(a>2))return a>1?r.a.createElement("div",{key:t.id,className:"task-number-of-tags"},r.a.createElement("span",null,e.state.tags.length>9?"+9":"+".concat(e.state.tags.length-2))):r.a.createElement("p",Object(ke.a)({key:a,style:{color:t.color}},"key",a),r.a.createElement(De.a,{lines:1,ellipsis:"...",width:75},a===e.state.tags.length-1||1===a?t.txt:t.txt+","))}))),this.props.isTagsShown&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"label-list tags-modal absolute flex column align-center"},r.a.createElement("div",{className:"tag-add-container  flex justify-center align-center"},r.a.createElement(J.a,{onClick:this.onAddTag}),r.a.createElement("input",{onKeyDown:function(t){"Enter"===t.key&&(e.onAddTag(),t.target.blur(),t.target.value="")},placeholder:"New tag",ref:this.elTagInput,type:"text"})),r.a.createElement("section",null,this.state.tags.map((function(t,a){return r.a.createElement("div",{className:"tag-container flex justify-center align-center",key:a},r.a.createElement(Ze.a,{className:"tag-remove-icon",onClick:function(){return e.onRemoveTag(t.id)}}),r.a.createElement("input",{style:{color:t.color},onBlur:function(t){t.target.blur(),e.onEditTag(a)},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.onEditTag(a))},onChange:function(a){return e.handleChange(a,t.id)},value:t.txt,type:"text"}))})))))):r.a.createElement("h1",null,"no tags")}}]),a}(n.Component);function $e(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}var et=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1,imgUrl:"",isImageModalShown:!1},e.reloadProps=function(){e.setState({task:e.props.task})},e.handleNameChange=function(t){e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{name:t.target.value})})},e.handleDateChange=function(t){var a=e.state.task.dueDate;e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{dueDate:Ne()(t).valueOf()})},(function(){e.props.onEditTask(e.state.task,e.props.group,Ne()(t).valueOf(),a,"date")}))},e.handleChange=function(t,a){if(console.log("got data:",t),"Stuck"===t||"Working on it"===t||"Done"===t){var n=e.state.task.status;e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{status:t})},(function(){console.log("in callback"),e.props.onEditTask(e.state.task,e.props.group,t,n,"status"),e.closeModal()}))}else{var r=e.state.task.priority;e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{priority:t})},(function(){e.props.onEditTask(e.state.task,e.props.group,t,r,"priority"),e.closeModal()}))}},e.sendNote=function(t){e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{updates:Object(b.a)(t)})},(function(){e.props.onEditTask(e.state.task,e.props.group,!0,!1,"sendNote")}))},e.openModal=function(t){switch(t){case"status":e.setState({isStatusShown:!0});break;case"users":e.setState({isUsersShown:!0});break;case"updates":e.setState({isUpdatesShown:!0});break;case"priority":e.setState({isPriorityShown:!0});break;case"tags":e.setState({isTagsShown:!0})}},e.closeModal=function(){e.setState({isImageModalShown:!1,isStatusShown:!1,isUsersShown:!1,isPriorityShown:!1,isUpdatesShown:!1,isTagsShown:!1})},e.onRemoveMemberFromTask=function(t){var a=e.state.task.members.find((function(e){return e._id===t}));e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{members:e.state.task.members.filter((function(e){return e._id!==t}))})},(function(){e.props.onEditTask(e.state.task,e.props.group,a,!1,"removeFromTask")}))},e.onAddUserToTask=function(t){var a=e.props.users.find((function(e){return e._id===t}));e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{members:[].concat(Object(b.a)(e.state.task.members),[a])})},(function(){e.props.onEditTask(e.state.task,e.props.group,a,!1,"addToTask")}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t)),e.closeModal()},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onEditTags=function(t,a,n){e.setState(Object(v.a)(Object(v.a)({},e.state),{},{task:Object(v.a)(Object(v.a)({},e.state.task),{},{tags:JSON.parse(JSON.stringify(t))})}),(function(){e.props.onEditTask(e.state.task,e.props.group,a,!1,n)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.contentEditable=r.a.createRef(),T.on("updatedBoard",this.reloadProps),this.setState(Object(v.a)(Object(v.a)({},this.state),{},{task:this.props.task,isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1}))}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard",this.reloadProps)}},{key:"render",value:function(){var e=this;if(!this.state.task)return r.a.createElement("h1",null,"Loading...");var t=this.state.task,a=t.name,n=t.members,o=t.status,s=t.priority,c=t.dueDate,l=t.updates,i=t.id,u=this.state,d=u.isUsersShown,p=u.isStatusShown,m=u.isPriorityShown,g=u.isUpdatesShown,f=u.isTagsShown;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"".concat(g&&"animate-side-modal"," side-modal")},r.a.createElement(Xe,{task:this.state.task,isImageModalShown:this.state.isImageModalShown,loggedUser:this.props.loggedUser,updates:l,uploadImg:this.uploadImg,sendNote:this.sendNote,closeModal:this.closeModal})),(d||p||m||g||f)&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.closeModal}),r.a.createElement(H.b,{draggableId:i,index:this.props.index},(function(t,u){return r.a.createElement("section",Object.assign({key:i,className:"task flex space-between align-center ".concat(u.isDragging?"drag":"")},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),r.a.createElement("div",{className:"task-left flex align-center"},r.a.createElement("div",{className:"task-color-remove"},r.a.createElement("div",{style:{backgroundColor:e.props.group.color},className:"task-color"}),r.a.createElement("div",{className:"icon-container"},r.a.createElement(Ie.a,{className:"task-remove-icon",onClick:function(){e.props.onRemoveTask(i,e.props.group)}}))),r.a.createElement("div",{className:"task-title-updates flex align-center space-between grow"},r.a.createElement("h2",null,r.a.createElement(ve.a,{onFocus:e.focusText,className:"cursor-initial content-editable",innerRef:e.contentEditable,html:a,disabled:!1,onChange:e.handleNameChange,onBlur:function(){e.props.onEditTask(e.state.task,e.props.group,e.state.task.name,a,"name")},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditTask(e.state.task,e.props.group,e.state.task.name,a,"name"))}})),r.a.createElement("div",{onClick:function(){return e.openModal("updates")},className:"notes-container relative grow"},r.a.createElement(J.c,null),0!==l.length&&r.a.createElement("div",{className:"task-number-of-imgs flex justify-center align-center"},r.a.createElement("span",null,l.length))))),r.a.createElement("div",{className:"task-right flex align-center"},r.a.createElement(Ge,{members:n,users:e.props.users,isUsersShown:d,openModal:e.openModal,goToUserProfile:e.goToUserProfile,onAddUserToTask:e.onAddUserToTask,onRemoveMemberFromTask:e.onRemoveMemberFromTask}),r.a.createElement(Fe,{status:o,isStatusShown:p,handleChange:e.handleChange,openModal:e.openModal}),r.a.createElement(He,{dueDate:c,handleDateChange:e.handleDateChange}),r.a.createElement(Ve,{priority:s,isPriorityShown:m,openModal:e.openModal,handleChange:e.handleChange}),r.a.createElement(Qe,Object(ke.a)({handleChange:e.handleChange,onEditTags:e.onEditTags,task:e.state.task,isTagsShown:f,openModal:e.openModal},"handleChange",e.handleChange))))})),this.state.isImageModalShown&&r.a.createElement("div",{onClick:this.onToggleImageModal,className:"updates-image-modal"},r.a.createElement("img",{src:this.state.imgUrl})))}}]),a}(n.Component),tt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}))(Object(i.f)(et)),at=a(169),nt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",ElGroupSettings:null,elGroupColors:!1},e.reloadProps=function(){e.setState(Object(v.a)(Object(v.a)({},e.state),{},{name:e.props.group.name}))},e.handleChange=function(t){e.setState({name:t.target.value})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.handleMenuOpen=function(t){e.setState({ElGroupSettings:t.currentTarget})},e.handleMenuClose=function(){e.setState({ElGroupSettings:null,elGroupColors:!1})},e.handleColorsOpen=function(t){e.setState({elGroupColors:t.currentTarget})},e.handleColorsToggle=function(){e.setState({elGroupColors:!e.state.elGroupColors})},e.onChangeGroupColor=function(t){try{e.props.onEditGroup(e.props.group.id,t,e.state.color,"color")}catch(a){console.log("Error",a)}e.setState({ElGroupSettings:null,elGroupColors:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.elInputAdd=r.a.createRef(),this.contentEditable=r.a.createRef(),T.on("updatedBoard",this.reloadProps),this.setState(Object(v.a)(Object(v.a)({},this.state),{},{name:this.props.group.name,id:this.props.group.id}))}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard",this.reloadProps)}},{key:"convertToData",value:function(e){var t=this.props.group.tasks,a=t.length,n=t.length/100,o=t.reduce((function(t,a){var n=a[e];return t[n]||(t[n]=0),t[n]++,t}),{}),s=[];for(var c in o)o[c]/=n,s.push(r.a.createElement("div",{key:c,style:{width:o[c]?"".concat(o[c],"%"):"0"},"data-title":o[c]?" ".concat(c," ").concat(a*o[c]/100,"/").concat(a," ").concat(o[c].toFixed(1),"%"):"",className:"precent-bar ".concat(c.toLowerCase())}));return s}},{key:"render",value:function(){var e=this;if(!this.state.name)return r.a.createElement("h1",null,"Loading...");var t=this.convertToData("priority"),a=this.convertToData("status"),n=this.state,o=n.name,s=n.ElGroupSettings,c=n.elGroupColors,l=this.props,i=l.group,u=l.index;return r.a.createElement(H.b,{draggableId:i.id,index:u},(function(n,l){return r.a.createElement("section",Object.assign({key:i.id,className:"group padding-y-45"},n.draggableProps,{ref:n.innerRef}),r.a.createElement("div",{className:"group-header-container flex space-between align-center"},r.a.createElement("div",{className:"group-header-left align-center flex relative"},r.a.createElement(at.a,{style:{color:i.color},className:"drop-down-menu-icon",onClick:e.handleMenuOpen}),r.a.createElement(V.a,{role:"menuContainer",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:e.handleMenuClose},r.a.createElement(z.a,{onClick:function(){e.props.onRemoveGroup(i.id)}},r.a.createElement(de.b,{className:"delete-group-icon"})," Delete Group"),r.a.createElement(z.a,{onClick:e.handleColorsToggle},r.a.createElement(je.a,{className:"color-group-icon"})," Change Color")),c&&r.a.createElement("div",{className:"color-picker absolute flex wrap justify-center align-center"},r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#ffcbcb")},className:"color-pick",style:{backgroundColor:"#ffcbcb"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#f0a500")},className:"color-pick",style:{backgroundColor:"#f0a500"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#70adb5")},className:"color-pick",style:{backgroundColor:"#70adb5"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1a1c20")},className:"color-pick",style:{backgroundColor:"#1a1c20"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#9d65c9")},className:"color-pick",style:{backgroundColor:"#9d65c9"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#931a25")},className:"color-pick",style:{backgroundColor:"#931a25"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#7ea04d")},className:"color-pick",style:{backgroundColor:"#7ea04d"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#838383")},className:"color-pick",style:{backgroundColor:"#838383"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1d2d50")},className:"color-pick",style:{backgroundColor:"#1d2d50"}})),r.a.createElement("div",Object.assign({className:"drag-icon"},n.dragHandleProps),r.a.createElement(de.c,null)),r.a.createElement("h1",{style:{color:i.color},className:"group-title"},r.a.createElement(ve.a,{onFocus:e.focusText,className:"content-editable cursor-initial",innerRef:e.contentEditable,html:o,disabled:!1,onChange:e.handleChange,onBlur:function(){e.props.onEditGroup(i.id,e.state.name,o,"name")},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.props.onEditGroup(i.id,e.state.name,o,"name"))}}))),r.a.createElement("div",{className:"group-header-right flex"},r.a.createElement("h3",{style:{color:e.props.group.color}},"Members"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Status"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Due-Date"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Priority"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Tags"))),r.a.createElement(H.c,{droppableId:i.id,type:"task"},(function(t,a){return r.a.createElement("div",Object.assign({className:"task-list ".concat(a.isDraggingOver?"drag-over":""),ref:t.innerRef},t.droppableProps),i.tasks.map((function(t,a){return r.a.createElement(tt,{onToggleUpdates:e.props.onToggleUpdates,onEditTask:e.props.onEditTask,index:a,onRemoveTask:e.props.onRemoveTask,key:t.id,group:i,task:t,users:e.props.users})})),t.placeholder)})),r.a.createElement("div",{className:"task task-add"},r.a.createElement("div",{className:"task-color",style:{backgroundColor:i.color}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.onAddTask(i.id,e.elInputAdd.current.value),e.elInputAdd.current.value=""},action:""},r.a.createElement("input",{ref:e.elInputAdd,className:"padding-x-30",placeholder:"+ Add Task",type:"text"}))),r.a.createElement("section",{className:"group-precent-container flex"},r.a.createElement("div",{className:"group-precent flex"},a),r.a.createElement("div",{className:"group-precent flex"},t)))}))}}]),a}(n.Component),rt=a(337),ot=a(334);var st={hideSnackbar:ue},ct=Object(c.b)((function(e){return{isSnackbarShown:e.systemReducer.isSnackbarShown,snackbarShown:e.systemReducer.snackbarTxt}}),st)((function(e){var t=e.isSnackbarShown,a=e.snackbarShown;return r.a.createElement(rt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:3e3,message:a,action:r.a.createElement(ot.a,{style:{color:"#f2f1dfb0"},onClick:e.hideSnackbar},"Close")})}));var lt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardId:"",txt:""},e.onEditBoard=function(){var t=Object(h.a)(f.a.mark((function t(a,n){var r,o,s,c,l,i,u=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=u.length>2&&void 0!==u[2]&&u[2],o=u.length>3?u[3]:void 0,s=u.length>4?u[4]:void 0,c=u.length>5?u[5]:void 0,l=e._getCurrBoard(),console.log("SHOW activityLog",c),i=Object(v.a)(Object(v.a)({},l),{},{name:a,desc:n,members:s||l.members,activityLog:c||l.activityLog}),console.log("SHOW NEW BOARRD",i),!r){t.next=21;break}t.t0=o,t.next="changeBoardTitle"===t.t0?12:"changeBoardDesc"===t.t0?14:"addMemberToBoard"===t.t0?16:"removeMemberFromBoard"===t.t0?19:21;break;case 12:try{console.log("CHANGING TITLE"),e.props.groupChanges("".concat(e.props.loggedUser.fullName," Changed the board title from ").concat(l.name," to ").concat(a),e.props.loggedUser,i)}catch(d){console.log("Error",d)}return t.abrupt("break",21);case 14:try{e.props.groupChanges("".concat(e.props.loggedUser.fullName," Changed ").concat(l.name," description to ").concat(n),e.props.loggedUser,i)}catch(d){console.log("Error",d)}return t.abrupt("break",21);case 16:console.log("ADDING MEMBER TO BOARD");try{e.props.groupChanges("".concat(e.props.loggedUser.fullName," Invited a member to the board "),e.props.loggedUser,i)}catch(d){console.log("Error",d)}return t.abrupt("break",21);case 19:try{e.props.groupChanges("".concat(e.props.loggedUser.fullName," Removed a member from the board"),e.props.loggedUser,i)}catch(d){console.log("Error",d)}return t.abrupt("break",21);case 21:e.props.updateBoard(i),e.props.showSnackbar("Updated board."),setTimeout((function(){return e.props.hideSnackbar()}),3e3);case 24:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.applyFilter=function(t,a){var n=JSON.parse(JSON.stringify(t));function r(e){n.groups=n.groups.map((function(t){return t.tasks=t.tasks.filter(e),t}))}return a.groupId&&(n.groups=n.groups.filter((function(e){return e.id===a.groupId}))),a.memberId&&r((function(e){return e.members.some((function(e){return e._id===a.memberId}))})),a.taskPriority&&r((function(e){return e.priority.toLowerCase()===a.taskPriority.toLowerCase()})),a.taskStatus&&r((function(e){return e.status.toLowerCase()===a.taskStatus.toLowerCase()})),a.dueDate&&r((function(e){return e.dueDate===a.dueDate})),e.state.txt&&r((function(t){return t.name.toLowerCase().includes(e.state.txt.toLowerCase())||t.tags.some((function(t){return t.txt.toLowerCase().includes(e.state.txt.toLowerCase())}))})),n},e.onAddGroup=Object(h.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e._getCurrBoard(),t.prev=1,t.next=4,e.props.groupChanges("".concat(e.props.loggedUser.fullName," Added a new group"),e.props.loggedUser,a);case 4:e.props.addGroup(e._getCurrBoard()),e.props.clearFilter(),e.props.showSnackbar("Added group."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.log("Error",t.t0);case 13:e.props.history.push("/board/".concat(e.state.boardId));case 14:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.onRemoveGroup=function(){var t=Object(h.a)(f.a.mark((function t(a){var n,r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._getCurrBoard(),r=n.groups.find((function(e){return e.id===a})),t.prev=2,t.next=5,e.props.groupChanges("".concat(e.props.loggedUser.fullName," Removed group: ").concat(r.name),e.props.loggedUser,n);case 5:e.props.removeGroup(a,e._getCurrBoard()),e.props.showSnackbar("Removed group."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log("Error",t.t0);case 13:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),e.onEditGroup=function(){var t=Object(h.a)(f.a.mark((function t(a,n,r,o){var s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e._getCurrBoard(),c=s.groups.find((function(e){return e.id===a})),n!==r){t.next=4;break}return t.abrupt("return");case 4:return c[o]=n,t.prev=5,t.next=8,e.props.groupChanges("".concat(e.props.loggedUser.fullName," Changed ").concat(r," title to ").concat(n),e.props.loggedUser,s);case 8:e.props.editGroup(c,e._getCurrBoard(),r,n),e.props.showSnackbar("Updated group."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(5),console.log("Error",t.t0);case 16:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,a,n,r){return t.apply(this,arguments)}}(),e.onRemoveTask=function(){var t=Object(h.a)(f.a.mark((function t(a,n){var r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e._getCurrBoard(),o=null,r.groups.forEach((function(e){o||(o=e.tasks.find((function(e){return e.id===a})))})),t.prev=3,t.next=6,e.props.groupChanges("".concat(e.props.loggedUser.fullName," Removed task: ").concat(o.name," from group ").concat(n.name),e.props.loggedUser,r);case 6:e.props.removeTask(a,e._getCurrBoard()),e.props.showSnackbar("Removed task."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),console.log("Error",t.t0);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onAddTask=function(){var t=Object(h.a)(f.a.mark((function t(a,n){var r,o;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n||(n="New task"),r=e._getCurrBoard(),o=r.groups.find((function(e){return e.id===a})),t.prev=3,t.next=6,e.props.groupChanges("".concat(e.props.loggedUser.fullName," Added a new task: ").concat(n," to group ").concat(o.name),e.props.loggedUser,r);case 6:e.props.addTask(a,n,e._getCurrBoard()),e.props.clearFilter(),e.props.showSnackbar("Added task."),setTimeout((function(){return e.props.hideSnackbar()}),3e3),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),console.log("Error",t.t0);case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onEditTask=function(){var t=Object(h.a)(f.a.mark((function t(a,n){var r,o,s,c,l=arguments;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(l.length>2&&void 0!==l[2])||l[2],o=l.length>3&&void 0!==l[3]&&l[3],s=l.length>4?l[4]:void 0,c=e._getCurrBoard(),r!==o){t.next=6;break}return t.abrupt("return");case 6:t.t0=s,t.next="name"===t.t0?9:"sendNote"===t.t0?18:"status"===t.t0?27:"priority"===t.t0?36:"date"===t.t0?45:"removeFromTask"===t.t0?54:"addToTask"===t.t0?63:"addTag"===t.t0?72:"removeTag"===t.t0?81:90;break;case 9:return t.prev=9,t.next=12,e.props.groupChanges("".concat(e.props.loggedUser.fullName," changed task name from ").concat(o," to ").concat(r," at group - ").concat(n.name),e.props.loggedUser,c);case 12:t.next=17;break;case 14:t.prev=14,t.t1=t.catch(9),console.log("Error",t.t1);case 17:return t.abrupt("break",91);case 18:return t.prev=18,t.next=21,e.props.groupChanges("".concat(e.props.loggedUser.fullName," sent an update at task: ").concat(a.name," at group - ").concat(n.name),e.props.loggedUser,c);case 21:t.next=26;break;case 23:t.prev=23,t.t2=t.catch(18),console.log("Error",t.t2);case 26:return t.abrupt("break",91);case 27:return t.prev=27,t.next=30,e.props.groupChanges("".concat(e.props.loggedUser.fullName," changed task: ").concat(a.name," status from ").concat(o," to ").concat(r," at group - ").concat(n.name),e.props.loggedUser,c);case 30:t.next=35;break;case 32:t.prev=32,t.t3=t.catch(27),console.log("Error",t.t3);case 35:return t.abrupt("break",91);case 36:return t.prev=36,t.next=39,e.props.groupChanges("".concat(e.props.loggedUser.fullName," changed task: ").concat(a.name," priority from ").concat(o," to ").concat(r," at group - ").concat(n.name),e.props.loggedUser,c);case 39:t.next=44;break;case 41:t.prev=41,t.t4=t.catch(36),console.log("Error",t.t4);case 44:return t.abrupt("break",91);case 45:return t.prev=45,t.next=48,e.props.groupChanges("".concat(e.props.loggedUser.fullName," changed task ").concat(a.name," date from ").concat(Ne()(o).format("DD/MMM/YYYY")," to ").concat(Ne()(r).format("DD/MMM/YYYY")," at group - ").concat(n.name),e.props.loggedUser,c);case 48:t.next=53;break;case 50:t.prev=50,t.t5=t.catch(45),console.log("Error",t.t5);case 53:return t.abrupt("break",91);case 54:return t.prev=54,t.next=57,e.props.groupChanges("".concat(e.props.loggedUser.fullName," removed ").concat(r.fullName," from ").concat(a.name," at group - ").concat(n.name),e.props.loggedUser,c);case 57:t.next=62;break;case 59:t.prev=59,t.t6=t.catch(54),console.log("Error",t.t6);case 62:return t.abrupt("break",91);case 63:return t.prev=63,t.next=66,e.props.groupChanges("".concat(e.props.loggedUser.fullName," tasked ").concat(r.fullName," to ").concat(a.name," on group - ").concat(n.name),e.props.loggedUser,c);case 66:t.next=71;break;case 68:t.prev=68,t.t7=t.catch(63),console.log("Error",t.t7);case 71:return t.abrupt("break",91);case 72:return t.prev=72,t.next=75,e.props.groupChanges("".concat(e.props.loggedUser.fullName," added tag named ").concat(r," to ").concat(a.name," on group - ").concat(n.name),e.props.loggedUser,c);case 75:t.next=80;break;case 77:t.prev=77,t.t8=t.catch(72),console.log("Error",t.t8);case 80:return t.abrupt("break",91);case 81:return t.prev=81,t.next=84,e.props.groupChanges("".concat(e.props.loggedUser.fullName," removed tag named ").concat(r," from ").concat(a.name," on group - ").concat(n.name),e.props.loggedUser,c);case 84:t.next=89;break;case 86:t.prev=86,t.t9=t.catch(81),console.log("Error",t.t9);case 89:case 90:return t.abrupt("break",91);case 91:e.props.editTask(a,e._getCurrBoard()),e.props.showSnackbar("Updated task."),setTimeout((function(){return e.props.hideSnackbar()}),3e3);case 94:case"end":return t.stop()}}),t,null,[[9,14],[18,23],[27,32],[36,41],[45,50],[54,59],[63,68],[72,77],[81,86]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onDragEnd=function(){var t=Object(h.a)(f.a.mark((function t(a){var n,r,o,s,c,l,i,u,d,p,m,g,h,b,E,k,y,N,x,w;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.destination,r=a.source,o=a.draggableId,s=a.type,n){t.next=3;break}return t.abrupt("return");case 3:if(n.droppableId!==r.droppableId||n.index!==r.index){t.next=5;break}return t.abrupt("return");case 5:if(c=e._getCurrBoard(),"group"!==s){t.next=15;break}l=Array.from(c.groups),i=l.find((function(e){return e.id===o})),l.splice(r.index,1),l.splice(n.index,0,i),c.groups=l;try{e.props.updateBoard(c)}catch(f){console.log("Error",f)}t.next=48;break;case 15:if(u=c.groups.find((function(e){return e.id===r.droppableId})),d=c.groups.find((function(e){return e.id===n.droppableId})),u.id!==d.id){t.next=28;break}p=Array.from(u.tasks),m=u.tasks.find((function(e){return e.id===o})),p.splice(r.index,1),p.splice(n.index,0,m),g=Object(v.a)(Object(v.a)({},u),{},{tasks:p}),h=c.groups.findIndex((function(e){return e.id===g.id})),c.groups.splice(h,1,g);try{e.props.updateBoard(c)}catch(f){console.log("Error",f)}t.next=48;break;case 28:return(b=Array.from(u.tasks)).splice(r.index,1),E=Object(v.a)(Object(v.a)({},u),{},{tasks:b}),k=Array.from(d.tasks),y=u.tasks.find((function(e){return e.id===o})),k.splice(n.index,0,y),N=Object(v.a)(Object(v.a)({},d),{},{tasks:k}),x=c.groups.findIndex((function(e){return e.id===E.id})),w=c.groups.findIndex((function(e){return e.id===N.id})),c.groups.splice(x,1,E),c.groups.splice(w,1,N),t.prev=39,t.next=42,e.props.groupChanges("".concat(e.props.loggedUser.fullName," Moved ").concat(y.name," from ").concat(E.name," to ").concat(N.name),e.props.loggedUser,c);case 42:e.props.updateBoard(e._getCurrBoard()),t.next=48;break;case 45:t.prev=45,t.t0=t.catch(39),console.log("Error",t.t0);case 48:case"end":return t.stop()}}),t,null,[[39,45]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSearch=function(t){e.setState({txt:t.target.value})},e.handleBoardBarSearch=function(t){e.setState({boardBarSearch:t})},e._getCurrBoard=function(){return e.props.boards.find((function(t){return t._id===e.state.boardId}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.props.boards&&this.props.boards.length){e.next=13;break}return e.next=4,this.props.loadBoards();case 4:if(e.prev=4,this.props.users&&this.props.users.length){e.next=8;break}return e.next=8,this.props.loadUsers();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Error",e.t0);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),console.log("Error",e.t1);case 18:this.setState({boardId:this.props.match.params.id});case 19:case"end":return e.stop()}}),e,this,[[0,15],[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e,t){e.match.params.id!==this.props.match.params.id&&(this.props.clearFilter(),this.setState({boardId:this.props.match.params.id}))}},{key:"render",value:function(){var e=this;if(0===this.props.boards.length)return r.a.createElement("h1",null,"Loading...");var t=this._getCurrBoard(),a=this.props,n=a.users,o=a.filterBy;if(!t)return r.a.createElement("h1",null,"Loading..");var s=this.applyFilter(t,o);return r.a.createElement("section",{className:"board"},r.a.createElement(Le,null),r.a.createElement(ge,{handleBoardBarSearch:this.handleBoardBarSearch}),r.a.createElement("div",{className:"board-container"},r.a.createElement(Te,{board:t,onAddGroup:this.onAddGroup,onEditBoard:this.onEditBoard,handleSearch:this.handleSearch,users:n}),r.a.createElement("div",{className:"groups-container padding-x-30"},r.a.createElement(H.a,{onDragEnd:this.onDragEnd},r.a.createElement(H.c,{droppableId:t._id,type:"group"},(function(a,n){return r.a.createElement("div",Object.assign({className:"group-list",ref:a.innerRef},a.droppableProps),s.groups.map((function(a,n){return r.a.createElement(nt,{key:a.id,index:n,onEditTask:e.onEditTask,onAddTask:e.onAddTask,onRemoveTask:e.onRemoveTask,onRemoveGroup:e.onRemoveGroup,onEditGroup:e.onEditGroup,onChangeGroupColor:e.onChangeGroupColor,group:a,users:t.members})})))}))))),r.a.createElement(ct,null))}}]),a}(n.Component),it={loadBoards:I,addGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:A.addGroup(e,t)})}catch(n){throw console.log("boardActions: Couldn't add group"),n}}},removeGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:A.removeGroup(e,t)})}catch(n){throw console.log("boardActions: Couldn't remove group"),n}}},addTask:function(e,t,a){return function(){var n=Object(h.a)(f.a.mark((function n(r){var o;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.addTask(e,t,a);case 3:o=n.sent,console.log("got board:",o),r({type:"SET_BOARD",board:o}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(0),console.log("boardActions: Coulnd't add task"),n.t0;case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},removeTask:function(e,t){return function(a){try{a({type:"SET_BOARD",board:A.removeTask(e,t)})}catch(n){throw console.log("boardActions: Coulnd't add task"),n}}},editTask:function(e,t){return function(a){try{a({type:"SET_BOARD",board:A.updateTask(e,t)})}catch(n){throw console.log("boardActions: Coulnd't edit task"),n}}},editGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:A.updateGroup(e,t)})}catch(n){throw console.log("boardActions: Coulnd't edit group"),n}}},updateBoard:G,showSnackbar:ie,hideSnackbar:ue,loadUsers:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.loadUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't load users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},clearFilter:function(){return function(e){e({type:"SET_FILTER",filter:{}})}},groupChanges:function(e,t,a){return function(){var n=Object(h.a)(f.a.mark((function n(r){var o,s,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,A.handleBoardChanges(e,t,a);case 3:return o=n.sent,r({type:"SET_BOARD",board:o}),n.next=7,q.loadUsers();case 7:s=n.sent,c={byUser:{fullName:t.fullName,imgUrl:t.imgUrl},content:"".concat(a.name,": ").concat(e),createdAt:Date.now()},a.members.forEach((function(e){if(e._id!==t._id){console.log("got member:",e);var a=s.find((function(t){return t._id===e._id}));a.notifications.unshift(c),q.updateUser(a),T.emit("send-notif",{memberId:e._id,notification:c})}})),n.next=16;break;case 12:throw n.prev=12,n.t0=n.catch(0),console.log("boardActions: Couldn't send activities/notif"),n.t0;case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}()}},ut=Object(c.b)((function(e){return{boards:e.boardReducer.boards,users:e.userReducer.users,loggedUser:e.userReducer.loggedUser,filterBy:e.boardReducer.filterBy}}),it)(lt),dt=a(28),pt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onLogin=function(){var t=Object(h.a)(f.a.mark((function t(a,n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),t.next=4,e.props.login(a);case 4:e.props.loggedUser&&e.props.history.push("/board/".concat(e.props.boards[0]._id));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"sign-login"},r.a.createElement(dt.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:this.onLogin},r.a.createElement(dt.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(Ae.d,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(dt.b,{className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(dt.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(dt.b,{className:"sign-login-input",type:"text",name:"password"})),r.a.createElement(dt.a,{name:"password",component:"span"}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("a",{href:"/#/signup"},"Don't have an account? sign up here."),r.a.createElement("button",{className:"guest-button",onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement("div",{"data-title":"Back to home",className:"go-back"},r.a.createElement(l.b,{to:"/"},r.a.createElement(Ae.b,null))))}}]),a}(n.Component),mt={login:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.login(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:ce,loadBoards:I},gt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),mt)(Object(i.f)(pt)),ft=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSignup=function(){var t=Object(h.a)(f.a.mark((function t(a,n){var r,o,s,c;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),r=a.username,o=a.password,s=a.email,c=a.fullName,t.prev=3,t.next=6,e.props.signup({username:r,password:o,email:s,fullName:c});case 6:e.props.history.push("/board/".concat(e.props.boards[0]._id)),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(3),console.log("Signup: Couldn't sign up"),t.t0;case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(h.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"sign-login"},r.a.createElement(dt.d,{initialValues:{username:"",password:"",confirm:"",email:"",fullName:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.fullName||(t.fullName="Required"),e.password||(t.password="Required"),e.confirm!==e.password&&(t.confirm="Doesn't match password"),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email.toLowerCase())||(t.email="Invalid email address"),t},onSubmit:this.onSignup},r.a.createElement(dt.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(Ae.d,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(dt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(dt.a,{name:"username",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Full name *"),r.a.createElement(dt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"fullName"})),r.a.createElement(dt.a,{name:"fullName",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Email *"),r.a.createElement(dt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"email"})),r.a.createElement(dt.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(dt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"password"})),r.a.createElement(dt.a,{name:"password",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Confirm password *"),r.a.createElement(dt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"confirm"})),r.a.createElement(dt.a,{name:"confirm",component:"span"}),r.a.createElement("button",{type:"submit"},"Signup"),r.a.createElement("a",{href:"/#/login"},"Already have an account? Login here!"),r.a.createElement("button",{className:"guest-button",onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement("div",{"data-title":"Back to home",className:"go-back"},r.a.createElement(l.b,{to:"/"},r.a.createElement(Ae.b,null))))}}]),a}(n.Component),ht={signup:function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't signup"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:ce,loadBoards:I},bt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),ht)(Object(i.f)(ft)),vt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:!1,user:{_id:"",email:"",username:"",passowrd:"",fullName:"",imgUrl:""}},e.toggleModal=function(){e.setState({isModalOpen:!e.state.isModalOpen})},e.handleChange=function(t){var a=t.target;e.setState({user:Object(v.a)(Object(v.a)({},e.state.user),{},Object(ke.a)({},a.name,a.value))})},e.updateProfile=function(t){t.preventDefault(),e.props.updateUser(e.state.user),e.toggleModal()},e.uploadImg=function(){var t=Object(h.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ze.uploadImg(a.target.files[0]);case 2:n=t.sent,e.setState({user:Object(v.a)(Object(v.a)({},e.state.user),{},{imgUrl:n.url})});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.loadBoards(),e.next=3,q.getUserById(this.props.match.params.id);case 3:t=e.sent,this.setState({user:Object(v.a)({},t)});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user,t=e.email,a=e.fullName,n=e.username,o=e.imgUrl,s=e._id;if(!s)return r.a.createElement("h1",null,"Loading...");var c=this.props.loggedUser;return r.a.createElement("section",{className:"user-profile"},r.a.createElement(Le,null),r.a.createElement(ge,null),r.a.createElement("div",{className:"user-container"},r.a.createElement("header",{className:"header-container padding-x-15 padding-y-15 flex justify-center  align-center"},r.a.createElement("img",{className:"user-profile-big",src:o,alt:""})),r.a.createElement("div",{className:"user-details-container padding-x-30 padding-y-45 align-center  flex column"},c._id===s?r.a.createElement("h2",{onClick:this.toggleModal,className:"clickable-header"},"Edit Profile"):"",r.a.createElement("div",{className:"user-details-inner-container"},r.a.createElement("h3",null,"Email: ",r.a.createElement("span",{className:"span-user-details"},t)),r.a.createElement("h3",null,"Full Name: ",r.a.createElement("span",{className:"span-user-details"},a)),r.a.createElement("h3",null,"Username: ",r.a.createElement("span",{className:"span-user-details"},n)," "))),r.a.createElement(xe.a,{in:this.state.isModalOpen},r.a.createElement("div",{className:"modal-screen flex justify-center align-center"},r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"user-modal-header padding-x-15 padding-y-15 flex justify-center align-center"},r.a.createElement("label",null," ",this.state.user.imgUrl?r.a.createElement("img",{className:"user-profile-big",src:this.state.user.imgUrl,alt:"profile-img"}):r.a.createElement("div",null,this.props.loggedUser.fullName),r.a.createElement("input",{type:"file",onChange:this.uploadImg,hidden:!0}))),r.a.createElement("div",{className:"user-modal-main"},r.a.createElement("form",{className:"form-container flex justify-center column  align-center",onSubmit:this.updateProfile},r.a.createElement("input",{value:this.state.user.email,onChange:this.handleChange,name:"email",placeholder:"Email",type:"email"}),r.a.createElement("input",{value:this.state.user.username,onChange:this.handleChange,name:"username",placeholder:"Username",type:"text"}),r.a.createElement("input",{value:this.state.user.password,onChange:this.handleChange,name:"password",placeholder:"Password",type:"password"}),r.a.createElement("input",{value:this.state.user.fullName,onChange:this.handleChange,name:"fullName",placeholder:"Full Name",type:"text"}),r.a.createElement("button",{onClick:this.updateProfile},"Save Changes"),r.a.createElement("button",{type:"button",className:"secondary-btn",onClick:this.toggleModal},"Cancel"))))))))}}]),a}(n.Component),Et={loadBoards:I,updateUser:le},kt=Object(c.b)((function(e){return{modal:e.systemReducer.modal,loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),Et)(vt);var yt=Object(i.f)((function(e){function t(t){e.history.push("/user/".concat(t))}var a=e.tasks,n=e.header;return r.a.createElement("div",{className:"upcoming-tasks"},r.a.createElement("h2",{className:"tasks-header"},"".concat(n,": (").concat(a.length,")")),a.map((function(a){return r.a.createElement("div",{key:a.id,className:"task-preview space-between align-center"},r.a.createElement("div",{className:"left-column"},r.a.createElement("p",{className:"task-preview-name"},a.name),r.a.createElement("p",{className:"task-location"},"At: ",r.a.createElement("span",{onClick:function(){return e.history.push("/board/".concat(a.boardId))}},"".concat(a.boardName," > ").concat(a.groupName)))),r.a.createElement("section",{className:"right-column flex align-center space-between"},r.a.createElement("div",{className:"user-img-container flex justify-center align-center"},0!==a.members.length&&(a.members[0].imgUrl?r.a.createElement("img",{onClick:function(){return t(a.members[0]._id)},alt:"profile",src:a.members[0].imgUrl}):r.a.createElement("div",{onClick:function(){return t(a.members[0]._id)},className:"member-letter"},a.members[0].fullName.charAt(0).toUpperCase()))),r.a.createElement("div",{className:"deadline-container flex align-center",onClick:function(){return e.history.push("/board/".concat(a.boardId))}},r.a.createElement("h2",null,(n=a.dueDate,Ne()(n).isAfter(Ne()().add(1,"day").endOf("day"))?Ne()(n).format("MMM DD"):Ne()(n).isBefore(Ne()().endOf("day"))?"Today":"Tomorrow")))));var n})))})),Nt=function(e){Object(p.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchVal:""},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.boards&&this.props.boards.length||this.props.loadBoards()}},{key:"getUpcomingTasks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=this.props,r=n.boards,o=n.loggedUser;return r.forEach((function(n){n.groups.forEach((function(r){a.push.apply(a,Object(b.a)(r.tasks.filter((function(a){a.boardId=n._id,a.boardName=n.name,a.groupName=r.name;var s=a.members.some((function(e){return e._id===o._id})),c=!t||Ne()(a.dueDate).isAfter(Ne()().add(t,"days").endOf("day"));return Ne()(a.dueDate).isBefore(Ne()().add(e,"days").startOf("day"))&&c&&s}))))}))})),a}},{key:"applySearch",value:function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}},{key:"render",value:function(){var e=this.getUpcomingTasks(1),t=this.getUpcomingTasks(7,1),a=this.state.searchVal,o=this.props.loggedUser.fullName.split(" ")[0],s=e.length+t.length;return a&&(e=this.applySearch(e,a),t=this.applySearch(t,a)),r.a.createElement("section",{className:"my-week flex"},r.a.createElement(Le,null),r.a.createElement(ge,null),r.a.createElement("div",{className:"my-week-container flex column space around"},r.a.createElement("div",{className:"my-week-header flex column space-around"},r.a.createElement("div",{className:"flex align-center space-around"},r.a.createElement("img",{src:"my-week-calendar.png",alt:""}),r.a.createElement("section",{className:"greeting-container"},r.a.createElement("h1",null,"Hey ".concat(o,",")),r.a.createElement("h1",null,s?"You have ".concat(s," assignments this week."):"You have no assignments this week")))),r.a.createElement("input",{className:"task-search",onChange:this.handleChange,value:a,type:"text",placeholder:"search"}),s?r.a.createElement(n.Fragment,null,r.a.createElement(yt,{header:"Today",tasks:e}),r.a.createElement(yt,{header:"Upcoming",tasks:t})):r.a.createElement("h1",{className:"no-tasks"},"No tasks left for this week")))}}]),a}(n.Component),xt={loadBoards:I},wt=[{path:"/",component:W},{path:"/board/:id",component:ut},{path:"/login",component:gt},{path:"/signup",component:bt},{path:"/user/:id",component:kt},{path:"/myweek",component:Object(c.b)((function(e){return{boards:e.boardReducer.boards,loggedUser:e.userReducer.loggedUser}}),xt)(Nt)}];function Ot(){return T.setup(),r.a.createElement(l.a,null,r.a.createElement("main",{className:"app"},r.a.createElement(i.c,null,wt.map((function(e){return r.a.createElement(i.a,{key:e.path,exact:!0,component:e.component,path:e.path})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ct=a(40),St=a(172),jt={boards:[],filterBy:{},isBoardbarShown:!0};var Ut={users:[],loggedUser:{_id:"5f68936cf878123b2cdce96d",username:"frize",fullName:"Roei Arazi",password:"3333",email:"frize@gmail.com",imgUrl:"https://via.placeholder.com/250",isAdmin:!0,boards:[],notifications:[{byUser:{fullName:"Liam Zety",imgUrl:"https://via.placeholder.com/250"},content:"just uploaded the logo!",createdAt:Date.now()}],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},userProfile:null};var Tt={isLoading:!1,isSnackbarShown:!1,snackbarTxt:""};var At=Object(Ct.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(v.a)(Object(v.a)({},e),{},{users:t.users});case"SHOW_PROFILE":return Object(v.a)(Object(v.a)({},e),{},{userProfile:t.user});case"SET_USER":return Object(v.a)(Object(v.a)({},e),{},{loggedUser:t.user});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(v.a)(Object(v.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"ADD_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:[].concat(Object(b.a)(e.boards),[t.board])});case"SET_FILTER":return Object(v.a)(Object(v.a)({},e),{},{filterBy:t.filter});case"TOGGLE_BOARDBAR":return Object(v.a)(Object(v.a)({},e),{},{isBoardbarShown:!e.isBoardbarShown});default:return e}},systemReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(v.a)(Object(v.a)({},e),{},{isLoading:!1});case"SHOW_SNACKBAR":return Object(v.a)(Object(v.a)({},e),{},{isSnackbarShown:!0,snackbarTxt:t.msg});case"HIDE_SNACKBAR":return Object(v.a)(Object(v.a)({},e),{},{isSnackbarShown:!1,snackbarTxt:""});default:return e}}}),Bt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ct.d,Dt=Object(Ct.e)(At,Bt(Object(Ct.a)(St.a)));a(301);s.a.render(r.a.createElement(c.a,{store:Dt},r.a.createElement(Ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[180,1,2]]]);
//# sourceMappingURL=main.c2f9d5b9.chunk.js.map
{"version":3,"sources":["services/httpService.js","services/socketService.js","services/boardService.js","store/actions/boardActions.js","services/userService.js","store/actions/userActions.js","pages/Home.jsx","store/actions/systemActions.js","cmps/Dashboard.jsx","cmps/Boardbar.jsx","cmps/Activities.jsx","cmps/Filter.jsx","cmps/BoardHeader.jsx","cmps/Notifications.jsx","cmps/Navbar.jsx","cmps/task-cmps/Members.jsx","cmps/task-cmps/Status.jsx","cmps/task-cmps/Date.jsx","cmps/task-cmps/Priority.jsx","services/cloudinaryService.js","cmps/task-cmps/Reply.jsx","cmps/task-cmps/Update.jsx","cmps/task-cmps/Updates.jsx","cmps/task-cmps/Tags.jsx","cmps/Task.jsx","cmps/Group.jsx","cmps/Popup.jsx","mobile-pages/MobileNav.jsx","pages/Board.jsx","store/actions/changesActions.js","pages/Boards.jsx","pages/Login.jsx","pages/Signup.jsx","pages/UserProfile.jsx","cmps/my-week-cmps/UpcomingTasks.jsx","pages/MyWeek.jsx","mobile-pages/mobActivities.jsx","routes.js","App.jsx","services/serviceWorker.js","store/reducers/boardReducer.js","store/reducers/userReducer.js","store/reducers/systemReducer.js","store/store.js","index.js"],"names":["axios","Axios","create","withCredentials","endpoint","data","ajax","a","method","url","res","console","log","dir","response","status","socket","setup","io","terminate","on","eventName","cb","off","emit","boardService","loadBoards","addBoard","removeBoard","boardId","httpService","updateBoard","addGroup","board","loggedUser","group","_makeid","Date","now","groups","push","handleBoardChanges","fullName","err","removeGroup","groupId","filter","currGroup","isGroup","id","name","updateGroup","updatedGroup","desc","map","addTask","taskName","task","createdAt","members","priority","dueDate","updates","lastUpdated","isSelected","posts","tags","groupIdx","findIndex","tasks","removeTask","taskId","currTask","isTask","updateTask","updatedTask","boards","boardCreator","_id","imgUrl","newBoard","changes","changedAt","isRead","byUser","activityLog","boardToSave","socketService","length","text","possible","i","charAt","Math","floor","random","dispatch","type","userService","loadUsers","getUserById","login","signup","guestLogin","markAsRead","updateUser","logout","notifyUsers","users","notifications","forEach","notification","userId","user","userCred","_handleLogin","isAdmin","birthDay","company","phoneNumber","newUser","username","password","sessionStorage","clear","content","member","userToUpdate","find","unshift","setItem","JSON","stringify","_Home","this","video","React","createRef","props","className","to","onClick","current","play","ref","autoPlay","muted","src","Component","mapDispatchToProps","Home","connect","state","boardReducer","showSnackbar","msg","dispath","hideSnackbar","Dashboard","d3","append","_Boardbar","anchorEl","selectedBoardId","isSnackbarOpen","isShown","searchVal","handleMenuOpen","ev","setState","currentTarget","handleMenuClose","onAddBoard","notif","onBoardRemove","match","history","params","displayPopup","idx","onToggleShown","toggleBoardbar","handleSearchChange","target","value","handleSearch","toLowerCase","includes","updatedBoard","recieveUpdate","isBoardbarShown","setTimeout","filteredBoards","style","color","location","pathname","transform","onChange","placeholder","key","onMoveToBoard","Menu","role","keepMounted","open","Boolean","onClose","MenuItem","Boardbar","userReducer","withRouter","Activities","isOrderReversed","isFilterOpen","filterBy","isActivitiesShown","isActivitiesNotReadShown","handleChange","toggleFilter","toggleActivities","toggleActivitiesNotRead","split","firstName","lastName","initials","toUpperCase","dates","reduce","acc","activity","moment","format","Object","keys","activities","date","activitiesNotRead","getActivityDates","getActivityMembers","applyFilter","onToggleActivities","boardName","Fade","in","onSetFilter","onClearLog","alt","getInitials","setFilter","Filter","filterKey","filterValue","formatted","getBoardDates","memberId","taskPriority","taskStatus","_BoardHeader","isActivitiesOpen","isFiltersOpen","isUsersOpen","elSetting","handleChangeName","handleChangeDesc","focusText","document","execCommand","onEditBoard","onToggleFilters","onToggleUsers","onRemoveMemberFromBoard","onAddUserToBoard","goToUserProfile","editableName","editableDescription","searchInput","prevProps","prevState","firstNameChar","lastNameChar","isFiltering","values","some","usersToAdd","activitiesRead","onFocus","innerRef","html","disabled","onBlur","onKeyDown","blur","_getMemeberInitials","onAddGroup","focus","input","BoardHeader","Notifications","isModalOpen","onRemoveNotifications","removeNotifications","Fragment","fromNow","_Navbar","isNotificationShown","toggleNotifications","onMarkAsRead","onLogout","Navbar","Members","openModal","isUsersShown","onRemoveMemberFromTask","onAddUserToTask","Status","isStatusShown","selected","handleDateChange","dateFormat","Priority","isPriorityShown","cloudinaryService","uploadImg","img","UPLOAD_URL","formData","FormData","fetch","body","json","Reply","txt","isEditMode","isOptionsModal","toggleEditMode","replyTxt","updateReply","newReply","newReplies","update","replies","reply","updateNote","removeReply","replyId","splice","toggleOptionsModal","Update","onReply","newUpdate","every","letter","makeid","userName","removeUpdate","updateId","sendNote","onToggleEditUpdate","editUpdate","newUpdates","borderTop","Updates","isLoading","imageUploaded","files","preventDefault","newNotes","closeModal","onSubmit","data-title","htmlFor","class","hidden","Tags","tag","onAddTag","tagName","elTagInput","_getRandomColor","onEditTags","onRemoveTag","tagToRemove","onEditTag","elTag","parse","Truncate","lines","ellipsis","width","isTagsShown","_Task","isUpdatesShown","isImageModalShown","reloadProps","handleNameChange","valueOf","onEditTask","removedMember","contentEditable","draggableId","index","provided","snapshot","isDragging","draggableProps","dragHandleProps","backgroundColor","onRemoveTask","onToggleImageModal","Task","Group","ElGroupSettings","elGroupColors","handleColorsOpen","handleColorsToggle","onChangeGroupColor","onEditGroup","elInputAdd","property","taskCount","percent","toFixed","convertToBar","window","innerWidth","onRemoveGroup","droppableId","isDraggingOver","droppableProps","onToggleUpdates","onAddTask","action","Popup","isSnackbarShown","systemReducer","snackbarShown","snackbarTxt","Snackbar","anchorOrigin","vertical","horizontal","autoHideDuration","message","Button","MobileNav","isMenuShown","toggleMenuModal","closeMenuModal","_Board","filteredBoard","filterTasks","_getCurrBoard","clearFilter","changedValue","originalValue","editGroup","prevTask","lodash","isEqual","editTask","onDragEnd","result","destination","source","newGroups","Array","from","draggedGroup","groupStart","groupEnd","newTasks","newTask","newGroup","newIdx","startTasks","newStartGroup","endTasks","newTaskToPaste","newFinishGroup","startIdx","endIdx","handleBoardBarSearch","val","boardBarSearch","innerwidth","height","groupChanges","Board","_Boards","goToBoard","Boards","_Login","onLogin","resetForm","onGuestLogin","responseFacebook","initialValues","validate","formValues","errors","component","appId","size","fields","callback","href","Login","_Signup","onSignup","email","confirm","test","autoComplete","Signup","_UserProfile","passowrd","toggleModal","updateProfile","guestId","UserProfile","modal","UpcomingTasks","moveToUserProfile","header","groupName","isAfter","add","endOf","isBefore","_MyWeek","maxDaysLeft","minDaysLeft","belongsToUser","startOf","todaysTasks","getUpcomingTasks","upcomingTasks","applySearch","MyWeek","_mobActivities","getBoardById","path","App","routes","route","exact","hostname","initialState","userProfile","mainReducer","combineReducers","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.b32f0a05.chunk.js","sourcesContent":["import Axios from 'axios';\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n});\r\n\r\nexport default {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'get', data = null) {\r\n    try {\r\n        const res = await axios({\r\n            url: `${BASE_URL}${endpoint}`,\r\n            method,\r\n            data\r\n        })\r\n        return res.data;\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`);\r\n        console.dir(err);\r\n        if (err.response && err.response.status === 401) {\r\n            // window.location.assign('/#/login');\r\n        }\r\n        throw err;\r\n    }\r\n}","import io from 'socket.io-client';\r\n\r\nconst BASE_URL =\r\n    process.env.NODE_ENV === 'production' ? '/' : '//localhost:3030';\r\n\r\nlet socket;\r\n\r\nexport default {\r\n    setup,\r\n    terminate,\r\n    on,\r\n    off,\r\n    emit\r\n};\r\n\r\nfunction setup() {\r\n    socket = io(BASE_URL);\r\n}\r\n\r\nfunction terminate() {\r\n    socket = null;\r\n}\r\n\r\nfunction on(eventName, cb) {\r\n    socket.on(eventName, cb);\r\n}\r\n\r\nfunction off(eventName, cb) {\r\n    socket.off(eventName, cb);\r\n}\r\n\r\nfunction emit(eventName, data) {\r\n    socket.emit(eventName, data);\r\n}\r\n","import httpService from './httpService'\r\nimport socketService from './socketService';\r\n\r\nexport const boardService = {\r\n    loadBoards,\r\n    addBoard,\r\n    removeBoard,\r\n    updateBoard,\r\n    addGroup,\r\n    removeGroup,\r\n    updateGroup,\r\n    addTask,\r\n    removeTask,\r\n    updateTask,\r\n    handleBoardChanges\r\n}\r\n\r\nasync function loadBoards() {\r\n    const boards = await httpService.get(`board`)\r\n    return boards\r\n}\r\n\r\nfunction removeBoard(boardId) {\r\n    return httpService.delete(`board/${boardId}`)\r\n}\r\n\r\nasync function addBoard(loggedUser) {\r\n    const board = {\r\n        boardCreator: {\r\n            \"_id\": loggedUser._id,\r\n            \"fullName\": loggedUser.fullName,\r\n            \"imgUrl\": loggedUser.imgUrl,\r\n        },\r\n        \"name\": \"board\",\r\n        \"createdAt\": Date.now(),\r\n        \"desc\": 'Enter description here',\r\n        \"members\": [{\r\n            \"_id\": loggedUser._id,\r\n            \"fullName\": loggedUser.fullName,\r\n            \"imgUrl\": loggedUser.imgUrl,\r\n        }],\r\n        \"groups\": [{\r\n            \"id\": _makeid(),\r\n            \"name\": 'group 1',\r\n            \"createdAt\": Date.now(),\r\n            \"color\": '#22f24',\r\n            \"lastUpdated\": Date.now(),\r\n            \"isTagsShown\": false,\r\n            \"tags\": [],\r\n            \"columns\": [{\r\n                \"type\": 'date',\r\n                \"name\": 'due date'\r\n            }],\r\n            \"tasks\": [{\r\n                \"id\": _makeid(),\r\n                \"name\": 'sneeze',\r\n                \"createdAt\": Date.now(),\r\n                \"members\": [],\r\n                \"status\": 'Stuck',\r\n                \"priority\": 'Low',\r\n                \"dueDate\": Date.now(),\r\n                \"updates\": [],\r\n                \"lastUpdated\": 'yesterday',\r\n                \"isSelected\": false,\r\n                \"posts\": [],\r\n                \"tags\": []\r\n            }, {\r\n                \"id\": _makeid(),\r\n                \"name\": 'sneeze',\r\n                \"createdAt\": Date.now(),\r\n                \"members\": [],\r\n                \"status\": 'Working on it',\r\n                \"priority\": 'Low',\r\n                \"dueDate\": Date.now(),\r\n                \"updates\": [],\r\n                \"lastUpdated\": 'yesterday',\r\n                \"isSelected\": false,\r\n                \"posts\": [],\r\n                \"tags\": []\r\n            }]\r\n        }],\r\n        \"activityLog\": []\r\n    }\r\n    const newBoard = await httpService.post(`board`, board);\r\n    return newBoard;\r\n}\r\n\r\nfunction addGroup(board, loggedUser) {\r\n    const group = {\r\n        \"id\": _makeid(),\r\n        \"name\": 'week1',\r\n        \"createdAt\": 'date',\r\n        \"color\": '#70ADB5',\r\n        \"lastUpdated\": Date.now(),\r\n        \"isTagsShown\": false,\r\n        \"tags\": [],\r\n        \"columns\": [{\r\n            \"type\": 'date',\r\n            \"name\": 'due date'\r\n        }],\r\n        \"tasks\": [{\r\n            \"id\": _makeid(),\r\n            \"name\": 'sneeze',\r\n            \"createdAt\": Date.now(),\r\n            \"members\": [],\r\n            \"status\": 'Working on it',\r\n            \"priority\": 'Low',\r\n            \"dueDate\": Date.now(),\r\n            \"updates\": [],\r\n            \"lastUpdated\": 'yesterday',\r\n            \"isSelected\": false,\r\n            \"posts\": [],\r\n            \"tags\": []\r\n        }]\r\n    }\r\n    try {\r\n        board.groups.push(group)\r\n        const desc = `${loggedUser.fullName} Added a new group.`\r\n        return handleBoardChanges(desc, loggedUser, board)\r\n    } catch (err) {\r\n        console.log('boardService: Couldn\\'t add group');\r\n        throw err;\r\n    }\r\n}\r\n\r\nfunction removeGroup(groupId, board, loggedUser) {\r\n    let group = null;\r\n    board.groups = board.groups.filter(currGroup => {\r\n        const isGroup = currGroup.id === groupId;\r\n        if (isGroup) group = currGroup;\r\n        return !isGroup;\r\n    })\r\n    const desc = `${loggedUser.fullName} Removed group: ${group.name}`\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\n\r\nfunction updateGroup(updatedGroup, board, desc, loggedUser) {\r\n    board.groups = board.groups.map(group => group.id === updatedGroup.id ? updatedGroup : group)\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\n\r\nfunction removeTask(taskId, board, group, loggedUser) {\r\n    let task = null\r\n    const groupIdx = board.groups.findIndex(currGroup => currGroup.id === group.id)\r\n    board.groups[groupIdx].tasks = board.groups[groupIdx].tasks.filter(currTask => {\r\n        const isTask = currTask.id === taskId\r\n        if (isTask) task = currTask;\r\n        return !isTask;\r\n    })\r\n    const desc = `${loggedUser.fullName} Removed task: ${task.name} from group ${group.name}`;\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\n\r\nfunction addTask(groupId, taskName, board, loggedUser) {\r\n    const task = {\r\n        id: _makeid(),\r\n        name: taskName,\r\n        createdAt: Date.now(),\r\n        members: [],\r\n        status: 'Done',\r\n        priority: 'Low',\r\n        dueDate: Date.now(),\r\n        updates: [],\r\n        lastUpdated: Date.now(),\r\n        isSelected: false,\r\n        posts: [],\r\n        tags: []\r\n    }\r\n    const groupIdx = board.groups.findIndex(group => group.id === groupId)\r\n    const desc = `${loggedUser.fullName} Added a new task: ${taskName} to group ${board.groups[groupIdx].name}`\r\n    board.groups[groupIdx].tasks.push(task)\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\n\r\nfunction updateTask(updatedTask, board, desc, loggedUser) {\r\n    board.groups = board.groups.map(group => {\r\n        group.tasks = group.tasks.map(task => task.id === updatedTask.id ? updatedTask : task)\r\n        return group;\r\n    })\r\n    return handleBoardChanges(desc, loggedUser, board)\r\n}\r\n\r\nfunction handleBoardChanges(desc, loggedUser, board) {\r\n    if (!desc) return updateBoard(board)\r\n    const changes = {\r\n        id: _makeid(),\r\n        changedAt: Date.now(),\r\n        isRead: false,\r\n        desc,\r\n        byUser: {\r\n            _id: loggedUser._id,\r\n            fullName: loggedUser.fullName,\r\n            imgUrl: loggedUser.imgUrl\r\n        },\r\n    }\r\n    const updatedBoard = { ...board, activityLog: [changes, ...board.activityLog,] }\r\n    return updateBoard(updatedBoard)\r\n}\r\n\r\n\r\nfunction updateBoard(boardToSave) {\r\n    socketService.emit('updateBoard', boardToSave);\r\n    httpService.put(`board/${boardToSave._id}`, boardToSave)\r\n    return boardToSave\r\n}\r\n\r\n\r\nfunction _makeid(length = 7) {\r\n    var text = \"\";\r\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return text;\r\n}","import { boardService } from '../../services/boardService'\r\n\r\n\r\n\r\n//------------------BOARD CRUD-----------------\r\nexport function loadBoards() {\r\n\r\n    return async dispatch => {\r\n        try {\r\n            const boards = await boardService.loadBoards();\r\n            dispatch({ type: 'SET_BOARDS', boards })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t load boards');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function updateBoard(boardToSave, desc, loggedUser) {\r\n\r\n    return async dispatch => {\r\n        try {\r\n            const board = boardService.handleBoardChanges(desc, loggedUser, boardToSave);\r\n            dispatch({ type: 'SET_BOARD', board })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t update board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function recieveUpdate(boardToSave) {\r\n    return dispatch => {\r\n        try {\r\n            dispatch({ type: 'SET_BOARD', board: boardToSave })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t update board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeBoard(boardId) {\r\n    return async dispatch => {\r\n        try {\r\n            await boardService.removeBoard(boardId);\r\n            dispatch({ type: 'REMOVE_BOARD', boardId })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t remove board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function addBoard(loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            const board = await boardService.addBoard(loggedUser);\r\n            dispatch({ type: 'ADD_BOARD', board })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t add board');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n//------------------GROUP CRUD-----------------\r\n\r\nexport function removeGroup(groupId, board, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.removeGroup(groupId, board, loggedUser)\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard });\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t remove group');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nexport function addGroup(board, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.addGroup(board, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t add group');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\nexport function editGroup(group, board, desc, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.updateGroup(group, board, desc, loggedUser)\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t edit group');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n//-----------------TASKS CRUD------------------------\r\n\r\nexport function addTask(groupId, taskName, board, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.addTask(groupId, taskName, board, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t add task');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeTask(taskId, board, group, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.removeTask(taskId, board, group, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t add task');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function editTask(task, board, desc, loggedUser) {\r\n    return dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.updateTask(task, board, desc, loggedUser);\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n        } catch (err) {\r\n            console.log('boardActions: Coulnd\\'t edit task');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\n//-----------------FILTER ACTIONS------------------------\r\n\r\nexport function setFilter(filter) {\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filter })\r\n    }\r\n}\r\n\r\nexport function clearFilter() {\r\n    return dispatch => {\r\n        dispatch({ type: 'SET_FILTER', filter: {} })\r\n    }\r\n}\r\n//---------------------BOARD BAR--------------------\r\n\r\n\r\nexport function toggleBoardbar() {\r\n    return dispatch => {\r\n        dispatch({ type: 'TOGGLE_BOARDBAR' })\r\n    }\r\n}","import httpService from './httpService';\r\nimport socketService from './socketService'\r\n\r\n// let users = [{\r\n//     \"username\": 'frize',\r\n//     \"fullName\": 'Roei Arazi',\r\n//     \"password\": '3333',\r\n//     \"email\": 'frize@gmail.com',\r\n//     \"imgUrl\": 'https://via.placeholder.com/250',\r\n//     \"isAdmin\": true,\r\n//     \"boards\": [],\r\n//     \"notifications\": [],\r\n//     \"birthDay\": '2nd August 1997',\r\n//     \"company\": 'adidas',\r\n//     \"phoneNumber\": '0224132124'\r\n// },\r\n// {\r\n//     \"username\": 'anstrio',\r\n//     \"fullName\": 'Osher Kabada',\r\n//     \"password\": '2222',\r\n//     \"email\": 'anstrio@gmail.com',\r\n//     \"imgUrl\": 'https://via.placeholder.com/250',\r\n//     \"isAdmin\": true,\r\n//     \"boards\": [],\r\n//     \"notifications\": [],\r\n//     \"birthDay\": '2nd August 1997',\r\n//     \"company\": 'adidas',\r\n//     \"phoneNumber\": '0224127124'\r\n// },\r\n// {\r\n//     \"username\": 'smoking',\r\n//     \"fullName\": 'Liam Zety',\r\n//     \"password\": '1111',\r\n//     \"email\": 'smoking@gmail.com',\r\n//     \"imgUrl\": 'https://via.placeholder.com/250',\r\n//     \"isAdmin\": true,\r\n//     \"boards\": [],\r\n//     \"notifications\": [],\r\n//     \"birthDay\": '2nd August 1997',\r\n//     \"company\": 'adidas',\r\n//     \"phoneNumber\": '0224112124'\r\n// }\r\n// ]\r\n\r\nexport const userService = {\r\n    loadUsers,\r\n    getUserById,\r\n    login,\r\n    signup,\r\n    guestLogin,\r\n    markAsRead,\r\n    updateUser,\r\n    logout,\r\n    notifyUsers\r\n}\r\n\r\nasync function loadUsers() {\r\n    try {\r\n        const users = await httpService.get('user')\r\n        return users;\r\n    } catch (err) {\r\n        console.log('userService: Coulnd\\'t get users');\r\n        throw err;\r\n    }\r\n}\r\n\r\nasync function markAsRead(loggedUser) {\r\n    loggedUser.notifications.forEach(notification => {\r\n        notification.isRead = true\r\n    })\r\n    updateUser(loggedUser)\r\n    try {\r\n        return loggedUser\r\n\r\n    } catch (err) {\r\n        console.log('userService: Something went wrong');\r\n        throw err;\r\n    }\r\n}\r\n\r\nasync function getUserById(userId) {\r\n    console.log('got to user service', userId);\r\n    try {\r\n        const user = await httpService.get(`user/${userId}`);\r\n        console.log('got from service:', user);\r\n        return user\r\n    } catch (err) {\r\n        console.log('userService: Coulnd\\'t get user');\r\n        throw err;\r\n    }\r\n}\r\n\r\nasync function login(userCred) {\r\n    try {\r\n        // const user = users.find(user => user.username === userCred.username && user.password === userCred.password);\r\n        const user = await httpService.post('auth/login', userCred);\r\n        if (!user) throw 'Wrong username or password'\r\n        return _handleLogin(user)\r\n    } catch (err) {\r\n        console.log('userService: Wrong username or password');\r\n        throw err;\r\n    }\r\n}\r\n\r\nasync function signup(userCred) {\r\n    const user = {\r\n        isAdmin: true,\r\n        boards: [],\r\n        notifications: [],\r\n        birthDay: '2nd August 1997',\r\n        company: 'adidas',\r\n        phoneNumber: '0224132124',\r\n        ...userCred\r\n    }\r\n    try {\r\n        const newUser = await httpService.post('auth/signup', user)\r\n        return _handleLogin(newUser)\r\n    } catch (err) {\r\n        console.log('userService: Couldn\\'t sign up');\r\n        throw err;\r\n    }\r\n}\r\n\r\nasync function guestLogin() {\r\n    // const user = {\r\n    //     _id: _makeid(), \r\n    //     username: 'guest',\r\n    //     fullName: 'Guest User',\r\n    //     password: 'none',\r\n    //     imgUrl: 'https://www.shareicon.net/data/2015/08/15/85434_guest_512x512.png',\r\n    //     isAdmin: true,\r\n    //     boards: [{ id: '212', name: 'board1' }],\r\n    //     notifications: [], \r\n    //     birthDay: '2nd August 1997',\r\n    //     company: 'adidas',\r\n    //     phoneNumber: '0224132124',\r\n\r\n    // }\r\n    try {\r\n        // users.push(user);\r\n        const user = login({ username: 'guest', password: '123456' })\r\n        return user\r\n    } catch (err) {\r\n        console.log('userService: Couldn\\'t login as guest');\r\n        throw err;\r\n    }\r\n}\r\n\r\n\r\nasync function updateUser(user) {\r\n    httpService.put(`user/${user._id}`, user)\r\n    return user\r\n}\r\n\r\nasync function logout() {\r\n    await httpService.post('auth/logout');\r\n    sessionStorage.clear();\r\n}\r\n\r\nasync function notifyUsers(content, members, loggedUser) {\r\n    const users = await loadUsers();\r\n    if (members === 'add') members = [...users]\r\n    const notification = {\r\n        byUser: {\r\n            _id: loggedUser._id,\r\n            fullName: loggedUser.fullName,\r\n            imgUrl: loggedUser.imgUrl\r\n        },\r\n        content,\r\n        createdAt: Date.now()\r\n    }\r\n    members.forEach(member => {\r\n        if (member._id === loggedUser._id) return;\r\n        let userToUpdate = users.find(user => user._id === member._id);\r\n        if (!userToUpdate) {\r\n            console.log('can\\'t updated user:', userToUpdate);\r\n            return;\r\n        }\r\n        userToUpdate.notifications.unshift(notification);\r\n        userService.updateUser(userToUpdate);\r\n        socketService.emit('send-notif', { userId: member._id, notification });\r\n    })\r\n}\r\n\r\nfunction _handleLogin(user) {\r\n    sessionStorage.setItem('user', JSON.stringify(user))\r\n    return user;\r\n}\r\n\r\n// function _makeid(length = 7) {\r\n//     var text = \"\";\r\n//     var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n//     for (var i = 0; i < length; i++) {\r\n//         text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n//     }\r\n//     return text;\r\n// }\r\n","import { userService } from \"../../services/userService\";\r\nimport socketService from '../../services/socketService.js';\r\n\r\n\r\nexport function loadUsers() {\r\n    return async dispatch => {\r\n        try {\r\n            const users = await userService.loadUsers();\r\n            dispatch({ type: 'SET_USERS', users })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t load users');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function login(userCred) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.login(userCred);\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t login');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function signup(userCred) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.signup(userCred);\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t signup');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function guestLogin() {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.guestLogin();\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t login as a guest');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function markAsRead(loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            const user = await userService.markAsRead(loggedUser);\r\n            dispatch({ type: 'SET_USER', user })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t login as a guest');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function removeNotifications(loggedUser) {\r\n    const user = loggedUser\r\n    user.notifications = []\r\n\r\n    return async dispatch => {\r\n        try {\r\n            userService.updateUser(loggedUser)\r\n            dispatch({ type: 'UPDATE_PROFILE', user })\r\n        } catch (err) {\r\n            console.log('ERROR, couldnt remove notifications', err);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport function updateUser(loggedUser) {\r\n    return async dispatch => {\r\n        try {\r\n            userService.updateUser(loggedUser)\r\n            dispatch({ type: 'SET_USER', user: loggedUser })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t update user');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n\r\nexport function logout() {\r\n    return dispatch => {\r\n        try {\r\n            userService.logout();\r\n            dispatch({ type: 'SET_USER', user: null })\r\n        } catch (err) {\r\n            console.log('userActions: Couldn\\'t logout');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { loadBoards } from '../store/actions/boardActions'\r\nimport { guestLogin } from '../store/actions/userActions'\r\n\r\nclass _Home extends Component {\r\n\r\n\r\n    componentDidMount() {\r\n        this.video = React.createRef();\r\n\r\n        this.props.loadBoards()\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.boards || this.props.boards.length === 0) return (\r\n            <div className=\"loader-container flex justify-center align-center\">\r\n                <img src=\"loading.gif\" />\r\n            </div>\r\n        )\r\n        return (\r\n            <section className=\"home flex column\">\r\n                <main className=\"home-main flex align-center  \">\r\n                    <div className=\"home-login-sign-cta absolute\">\r\n                        <NavLink to=\"/login\">\r\n                            <button>Login</button>\r\n                        </NavLink>\r\n                        <NavLink to=\"/signup\">\r\n                            <button>Sign-up</button>\r\n                        </NavLink>\r\n                    </div>\r\n                    <div className=\"col-left flex align-center justify-center\">\r\n\r\n                        <video onClick={() => this.video.current.play()} ref={this.video} autoPlay muted src=\"taskus-home-video.mp4\"></video>\r\n                    </div>\r\n                    <div className=\"col-right flex align-center justify-center padding-x-30  column\">\r\n                        <h1>Join the future.</h1>\r\n\r\n                        <p>The next step in multi-planning and productivity! <br />\r\n                            <span>Task-us </span> will help you keep track of hundreds of tasks. <br />\r\n                            An efficient way to manage your co-workers / employees. <br />\r\n                            Half the hassle and twice the fun.\r\n                        </p>\r\n\r\n                        <NavLink to={`/board/${this.props.boards[0]._id}`}>\r\n                            <button onClick={this.props.guestLogin} className=\"guest-button \">Try As a Guest!</button>\r\n                        </NavLink>\r\n\r\n                    </div>\r\n                </main>\r\n\r\n\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    guestLogin\r\n}\r\n\r\nexport const Home = connect(mapStateToProps, mapDispatchToProps)(_Home);","export function loading() {\r\n  return dispatch => {\r\n    dispatch({ type: 'LOADING_START' })\r\n  }\r\n}\r\nexport function doneLoading() {\r\n  return dispatch => {\r\n    dispatch({ type: 'LOADING_DONE' })\r\n  }\r\n}\r\n\r\nexport function showSnackbar(msg){\r\n  return dispath => {\r\n    dispath({type: 'SHOW_SNACKBAR', msg})\r\n    // setTimeout(dispatch =>{\r\n  }\r\n}\r\n\r\nexport function hideSnackbar(){\r\n  return dispatch => {\r\n    dispatch({type: 'HIDE_SNACKBAR'})\r\n  }\r\n}","import React, {Component} from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nexport class Dashboard extends Component{\r\n\r\n    componentDidMount(){\r\n        this.ref = React.createRef();\r\n        d3.select(this.ref.current)\r\n        .append('p')\r\n        .text('I\\'m here!')\r\n        console.log(this.ref);\r\n    }\r\n\r\n    render(){\r\n        return <div ref={this.ref}>\r\n\r\n        </div>\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport { HiOutlineCog } from 'react-icons/hi';\r\nimport { BsFillPlusCircleFill, } from 'react-icons/bs';\r\n\r\nimport { removeBoard, addBoard, toggleBoardbar, updateBoard, recieveUpdate, loadBoards } from '../store/actions/boardActions.js';\r\nimport { updateUser } from '../store/actions/userActions.js';\r\nimport { showSnackbar, hideSnackbar } from '../store/actions/systemActions.js';\r\nimport socketService from '../services/socketService';\r\nimport { userService } from '../services/userService.js';\r\nimport { AiOutlineRight } from 'react-icons/ai';\r\nimport { Dashboard } from './Dashboard'\r\n\r\nclass _Boardbar extends Component {\r\n    state = {\r\n        anchorEl: null,\r\n        selectedBoardId: '',\r\n        isSnackbarOpen: false,\r\n        isShown: '',\r\n        searchVal: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        socketService.on('updatedBoard', updatedBoard => {\r\n            this.props.recieveUpdate(updatedBoard)\r\n        });\r\n\r\n        socketService.on('reloadBoards', () => {\r\n            console.log('reloading...');\r\n            this.props.loadBoards()\r\n        })\r\n        socketService.on('accept-notif', (notification) => {\r\n            this.props.updateUser({ ...this.props.loggedUser, notifications: [notification, ...this.props.loggedUser.notifications] })\r\n        })\r\n\r\n        socketService.emit('user', this.props.loggedUser._id)\r\n        this.setState({ isShown: this.props.isBoardbarShown })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard')\r\n        socketService.off('reloadBoards')\r\n        socketService.off('accept-notif')\r\n    }\r\n\r\n    displayPopup(msg) {\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n\r\n    onMoveToBoard(id) {\r\n        this.props.history.push(`/board/${id}`)\r\n    }\r\n\r\n    handleMenuOpen = (ev, boardId) => {\r\n        this.setState({ anchorEl: ev.currentTarget, selectedBoardId: boardId })\r\n    }\r\n\r\n    handleMenuClose = () => {\r\n        this.setState({ anchorEl: null })\r\n    }\r\n\r\n    onAddBoard = async () => {\r\n        const { loggedUser } = this.props;\r\n        await this.props.addBoard(this.props.loggedUser)\r\n        const notif = `${loggedUser.fullName} added a new board`\r\n        userService.notifyUsers(notif, 'add', loggedUser)\r\n        socketService.emit('add-delete-board')\r\n    }\r\n\r\n    onBoardRemove = async (boardId) => {\r\n        const { boards, match, history, removeBoard, loggedUser } = this.props\r\n        const board = boards.find(board => board._id === boardId);\r\n        const notif = `${loggedUser.fullName} deleted ${board.name}`;\r\n        userService.notifyUsers(notif, board.members, loggedUser)\r\n        const { id } = match.params;\r\n        this.handleMenuClose()\r\n        if (boards.length === 1) {\r\n            console.log('you need at least one board!');\r\n            return;\r\n        }\r\n        await removeBoard(boardId);\r\n        socketService.emit('add-delete-board')\r\n        this.displayPopup('Removed board.');\r\n        if (id === boardId) {\r\n            const idx = boards.findIndex(board => board._id !== boardId)\r\n            history.push(`/board/${boards[idx]._id}`)\r\n        }\r\n    }\r\n\r\n    onToggleShown = () => {\r\n        this.props.toggleBoardbar()\r\n        this.setState({ isShown: !this.state.isShown })\r\n    }\r\n    handleSearchChange = (ev) => {\r\n        this.setState({ searchVal: ev.target.value })\r\n    }\r\n    handleSearch = () => {\r\n        const filteredBoards =\r\n            this.props.boards.filter(board => board.name.toLowerCase().includes(this.state.searchVal.toLowerCase()))\r\n        return filteredBoards\r\n    }\r\n\r\n    render() {\r\n        const { anchorEl, selectedBoardId, isShown } = this.state;\r\n        const filteredBoards = this.handleSearch()\r\n\r\n        return (\r\n            <section className={`boardbar fixed column ${isShown && 'board-bar-shown'}`}>\r\n                <div onClick={this.onToggleShown} className=\"board-bar-toggle-container\">\r\n                    <AiOutlineRight style={{ color: this.props.location.pathname.includes('/myweek') && '#151515', transform: isShown && 'rotate(180deg)' }}\r\n                        className=\"board-bar-toggle\" />\r\n                </div>\r\n\r\n                {isShown && <div className=\"boardbar-header\">\r\n                    <h1>Boards</h1>\r\n                    <BsFillPlusCircleFill onClick={this.onAddBoard} />\r\n\r\n                </div>}\r\n                {isShown && <input onChange={this.handleSearchChange} type=\"text\" placeholder=\"Search Board\" />}\r\n                <ul>\r\n                    {isShown && filteredBoards.map((board, idx) => {\r\n                        return <li\r\n                            className=\"flex align-center\"\r\n                            key={idx}>\r\n                            <HiOutlineCog onClick={(ev) => this.handleMenuOpen(ev, board._id)} />\r\n\r\n                            <h4 onClick={() => this.onMoveToBoard(board._id)}>{board.name}</h4>\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n                <Dashboard />\r\n                <Menu\r\n                    role=\"menuContainer\"\r\n                    anchorEl={anchorEl}\r\n                    keepMounted\r\n                    open={Boolean(anchorEl)}\r\n                    onClose={this.handleMenuClose}\r\n                >\r\n                    <MenuItem onClick={() => this.onBoardRemove(selectedBoardId)}>Delete</MenuItem>\r\n                    <MenuItem onClick={this.handleMenuClose}>Edit</MenuItem>\r\n                </Menu>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        isBoardbarShown: state.boardReducer.isBoardbarShown,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    updateBoard,\r\n    removeBoard,\r\n    addBoard,\r\n    showSnackbar,\r\n    hideSnackbar,\r\n    toggleBoardbar,\r\n    recieveUpdate,\r\n    loadBoards,\r\n    updateUser\r\n}\r\n\r\nexport const Boardbar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Boardbar));","import React, { Component, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport { AiOutlineClose } from 'react-icons/ai';\r\nimport { Fade } from '@material-ui/core';\r\nimport { VscListFilter } from 'react-icons/vsc';\r\nimport { IoIosArrowDropdown } from 'react-icons/io';\r\n\r\n\r\nexport default class Activities extends Component {\r\n\r\n    state = {\r\n        isOrderReversed: false,\r\n        isFilterOpen: false,\r\n        filterBy: {},\r\n        searchVal: '',\r\n        isActivitiesShown: true,\r\n        isActivitiesNotReadShown: true\r\n    }\r\n\r\n    get activities() {\r\n        const { activityLog } = this.props;\r\n        return [activityLog.filter(activity => activity.isRead), activityLog.filter(activity => !activity.isRead)]\r\n    }\r\n\r\n    getInitials(fullName){\r\n        const [firstName, lastName] = fullName.split(' ');\r\n        let initials = firstName.charAt(0).toUpperCase();\r\n        if(lastName) initials += lastName.charAt(0).toUpperCase();\r\n        return initials;\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        this.setState({ searchVal: target.value })\r\n    }\r\n\r\n    toggleFilter = () => {\r\n        this.setState({ isFilterOpen: !this.state.isFilterOpen });\r\n    }\r\n\r\n    onSetFilter(key, value) {\r\n        const filterBy = { ...this.state.filterBy }\r\n        if (filterBy[key] === value) value = '';\r\n        this.setState({ filterBy: { ...filterBy, [key]: value } })\r\n    }\r\n\r\n    getActivityDates() {\r\n        const activities = this.props.activityLog;\r\n        const dates = activities.reduce((acc, activity) => {\r\n            const date = moment(activity.createdAt).format('DD MMM');\r\n            acc[date] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(dates);\r\n    }\r\n\r\n    getActivityMembers() {\r\n        const activities = this.props.activityLog;\r\n        const members = activities.reduce((acc, activity) => {\r\n            acc[activity.byUser.fullName] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(members)\r\n    }\r\n\r\n    applyFilter(activities) {\r\n        let res = [...activities];\r\n        const { filterBy, searchVal } = this.state;\r\n        if (filterBy.date) res = res.filter(activity => moment(activity.createdAt).format('DD MMM') === filterBy.date);\r\n        if (filterBy.member) res = res.filter(activity => activity.byUser.fullName === filterBy.member)\r\n        if (searchVal) res = res.filter(activity => {\r\n            return activity.desc.toLowerCase().includes(searchVal)\r\n                || activity.byUser.fullName.toLowerCase().includes(searchVal)\r\n        })\r\n        return res;\r\n    }\r\n    toggleActivities = () => {\r\n        this.setState({ isActivitiesShown: !this.state.isActivitiesShown })\r\n\r\n    }\r\n    toggleActivitiesNotRead = () => {\r\n        this.setState({ isActivitiesNotReadShown: !this.state.isActivitiesNotReadShown })\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.activityLog) return <h1>Loading...</h1>\r\n        const { isFilterOpen, filterBy, searchVal } = this.state;\r\n        let [activities, activitiesNotRead] = this.activities;\r\n        const dates = this.getActivityDates();\r\n        const members = this.getActivityMembers();\r\n        activities = this.applyFilter(activities)\r\n        activitiesNotRead = this.applyFilter(activitiesNotRead)\r\n        return (\r\n            <section className=\"activities flex column\">\r\n                <header className=\"padding-x-15 padding-y-15\">\r\n\r\n                    <AiOutlineClose onClick={this.props.onToggleActivities} />\r\n                    <h1><span>{this.props.boardName}</span> Log</h1>\r\n\r\n                    <div className='filters-container space-between flex align-center'>\r\n                        <input value={searchVal} onChange={this.handleChange} type=\"text\" placeholder=\"Search\" />\r\n\r\n                        <div className=\"filter-outer-container flex relative\">\r\n                            <button className=\"flex align-center\" onClick={this.toggleFilter}><VscListFilter /> Filter</button>\r\n                            {isFilterOpen &&\r\n                                <Fragment>\r\n                                    <div className=\"modal-screen-wrapper\" onClick={this.toggleFilter}></div>\r\n                                    <Fade in={true}>\r\n                                        <div className=\"filter-modal flex absolute\">\r\n                                            <section className=\"activity-member-filter\">\r\n                                                <h3>Member</h3>\r\n                                                <div className=\"filter-list flex justify-center align-center column\">\r\n                                                {members.map((member, idx) => <button\r\n                                                    className={filterBy.member === member ? 'remove-filter-btn' : ''}\r\n                                                    key={idx}\r\n                                                    onClick={() => this.onSetFilter('member', member)}>{member}</button>)}\r\n                                                    </div>\r\n                                            </section>\r\n                                            <section className=\"activity-date-filter\">\r\n                                                <h3>Date</h3>\r\n                                                <div className=\"filter-list flex justify-center align-center column\">\r\n                                                    {dates.map((date, idx) => <button\r\n                                                        className={filterBy.date === date ? 'remove-filter-btn' : ''}\r\n                                                        key={idx}\r\n                                                        onClick={() => this.onSetFilter('date', date)}>{date}</button>)}\r\n                                                </div>\r\n                                            </section>\r\n                                        </div>\r\n                                    </Fade>\r\n                                </Fragment>\r\n                            }\r\n                            <button onClick={this.props.onClearLog}>Clear Log</button>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n                <div className=\"all-activities-container\">\r\n                    {/* Activities which are not read: */}\r\n                    <div className=\"activity-list-not-read column flex  padding-y-15\">\r\n                        <h1 className=\"flex space-between\">\r\n                            New Activities ({activitiesNotRead.length})\r\n                         <IoIosArrowDropdown className={this.state.isActivitiesNotReadShown ? \" toggle-btn rotate0\" : \" toggle-btn rotate90\"} onClick={this.toggleActivitiesNotRead} />\r\n                        </h1>\r\n                        {this.state.isActivitiesNotReadShown && activitiesNotRead.length !== 0 && activitiesNotRead.map((activity, idx) => {\r\n                            return (\r\n                                <div key={idx} className=\"activity flex align-center padding-y-15 \">\r\n                                    <div className=\"user-img-container flex align-center\">\r\n                                        <div className=\"date-container\">\r\n                                            <p className=\"date-created\">\r\n                                                {moment(activity.createdAt).format(\"DD MMM\")}\r\n                                            </p>\r\n                                        </div>\r\n                                        {activity.byUser.imgUrl ? <img src={activity.byUser.imgUrl} alt=\"\" />:\r\n                                        <div className=\"member-letter flex align-center justify-center\">{this.getInitials(activity.byUser.fullName)}</div>}\r\n                                        <h2>{activity.byUser.fullName}</h2>\r\n                                    </div>\r\n                                    <div className=\"activity-desc-container flex align-center\">\r\n                                        <p>\r\n                                            {activity.desc}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                        {activitiesNotRead.length === 0 &&\r\n                            <h3 className=\"padding-x-15\">No new board activities!</h3>\r\n                        }\r\n                    </div>\r\n                    {/* Activities which are already read */}\r\n                    <div className=\"activity-list column flex  padding-y-15\">\r\n                        <h1 className=\"flex space-between\">\r\n                            Activities Read ({activities.length})\r\n                        <IoIosArrowDropdown onClick={this.toggleActivities} className={this.state.isActivitiesShown ? \"toggle-btn rotate0\" : \"toggle-btn rotate90\"} />\r\n                        </h1>\r\n                        {\r\n                            this.state.isActivitiesShown && activities.length !== 0 && activities.map((activity, idx) => {\r\n                                return (\r\n                                    <div key={idx} className=\"activity  space-between flex align-center padding-y-15 \">\r\n                                        <div className=\"user-img-container flex align-center\">\r\n                                            <div className=\"date-container\">\r\n                                                <p className=\"date-created\">\r\n                                                    {moment(activity.createdAt).format(\"DD MMM\")}\r\n                                                </p>\r\n                                            </div>\r\n                                            <img src={activity.byUser.imgUrl} alt=\"\" />\r\n                                            <h2>{activity.byUser.fullName}</h2>\r\n                                        </div>\r\n                                        <div className=\"activity-desc-container flex align-center\">\r\n                                            <p>\r\n                                                {activity.desc}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                        {activities.length === 0 &&\r\n                            <h3 className=\"padding-x-15\">No read board activities!</h3>\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n\r\n            </section>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { setFilter } from '../store/actions/boardActions';\r\nimport { Fade } from '@material-ui/core';\r\n\r\nimport moment from 'moment';\r\n\r\nfunction _Filter(props) {\r\n    const { board, filterBy, setFilter } = props;\r\n\r\n    function onSetFilter(filterKey, filterValue) {\r\n        if (filterBy[filterKey] === filterValue) filterValue = '';\r\n        setFilter({ ...filterBy, [filterKey]: filterValue })\r\n    }\r\n\r\n    function getBoardDates() {\r\n        const dates = {};\r\n        board.groups.forEach(group => {\r\n            group.tasks.forEach(task => {\r\n                const date = moment(task.dueDate).format('DD.MM.YY');\r\n                dates[date] = task.dueDate;\r\n            })\r\n        })\r\n        const res = [];\r\n        for (let key in dates) {\r\n            res.push({ formatted: key, value: dates[key] })\r\n        }\r\n        return res;\r\n    }\r\n \r\n    if (!board) return <h1>Loading...</h1>\r\n    const { groups, members } = board;\r\n    const dates = getBoardDates();\r\n    return (\r\n        <Fade in={true}>\r\n            <div className=\"filter-modal flex absolute\">\r\n                <section className=\"group-name-filter flex column align-center\">\r\n                    <h3>Groups</h3>\r\n                    <div className=\"filter-list\">\r\n                        {groups.map((group, idx) => <button\r\n                            className={filterBy.groupId === group.id ? 'remove-filter-btn' : ''}\r\n                            key={idx}\r\n                            onClick={() => onSetFilter('groupId', group.id)}>{group.name}</button>)}\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-member-filter flex column align-center\">\r\n                    <h3>Member</h3>\r\n                    <div className=\"filter-list\">\r\n                        {members.map((member,idx) => <button\r\n                            className={filterBy.memberId === member._id ? 'remove-filter-btn' : ''}\r\n                            key={idx}\r\n                            onClick={() => onSetFilter('memberId', member._id)}>{member.fullName}</button>)}\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-priority-filter flex column align-center\">\r\n                    <h3>Priority</h3>\r\n                    <div className=\"filter-list\">\r\n                        <button className={filterBy.taskPriority === 'low' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskPriority', 'low')}>Low</button>\r\n                        <button className={filterBy.taskPriority === 'medium' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskPriority', 'medium')}>Medium</button>\r\n                        <button className={filterBy.taskPriority === 'high' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskPriority', 'high')}>High</button>\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-status-filter flex column align-center\">\r\n                    <h3>Status</h3>\r\n                    <div className=\"filter-list\">\r\n                        <button className={filterBy.taskStatus === 'done' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskStatus', 'done')}>Done</button>\r\n                        <button className={filterBy.taskStatus === 'working on it' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskStatus', 'working on it')}>Working on it </button>\r\n                        <button className={filterBy.taskStatus === 'stuck' ? 'remove-filter-btn' : ''} onClick={() => onSetFilter('taskStatus', 'stuck')}>Stuck</button>\r\n                    </div>\r\n                </section>\r\n                <section className=\"task-date-filter flex column align-center\">\r\n                    <h3>Due-Date</h3>\r\n                    <div className=\"filter-list\">\r\n                        {dates.map((date, idx) => <button\r\n                            className={filterBy.dueDate === date.value ? 'remove-filter-btn' : ''}\r\n                            key={idx}\r\n                            onClick={() => onSetFilter('dueDate', date.value)}>{date.formatted}</button>)}\r\n                    </div>\r\n                </section>\r\n            </div>\r\n        </Fade>\r\n    )\r\n}\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        filterBy: state.boardReducer.filterBy\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    setFilter\r\n}\r\n\r\nexport const Filter = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Filter));","import React from 'react';\r\nimport { GoSearch } from 'react-icons/go'\r\nimport { VscListFilter } from 'react-icons/vsc'\r\nimport ContentEditable from 'react-contenteditable';\r\nimport Activities from './Activities';\r\nimport { Filter } from './Filter';\r\nimport { withRouter } from 'react-router-dom';\r\nimport socketService from '../services/socketService.js'\r\nimport { FiMinus } from 'react-icons/fi';\r\nimport { CgProfile } from 'react-icons/cg';\r\nimport { FiPlus } from 'react-icons/fi';\r\n\r\n\r\nexport class _BoardHeader extends React.Component {\r\n\r\n    state = {\r\n        _id: '',\r\n        isActivitiesOpen: false,\r\n        isFiltersOpen: false,\r\n        isUsersOpen: false,\r\n        elSetting: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.editableName = React.createRef();\r\n        this.editableDescription = React.createRef();\r\n        this.searchInput = React.createRef();\r\n\r\n        socketService.on('updatedBoard', () => {\r\n            this.setState({ board: this.props.board })\r\n        })\r\n        this.setState({ board: this.props.board, _id: this.props.board._id })\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.board._id !== this.props.board._id) {\r\n            this.setState({ board: this.props.board })\r\n        }\r\n    }\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard')\r\n    }\r\n    handleChangeName = (ev) => {\r\n        this.setState({ board: { ...this.state.board, name: ev.target.value } })\r\n    }\r\n\r\n    handleChangeDesc = (ev) => {\r\n        this.setState({ board: { ...this.state.board, desc: ev.target.value } })\r\n    }\r\n\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n    onToggleActivities = () => {\r\n        let board = this.props.board\r\n\r\n        if (this.state.isActivitiesOpen) {\r\n            board = {\r\n                ...board,\r\n                activityLog: board.activityLog.map(activity => {\r\n                    activity.isRead = true\r\n                    return activity\r\n                })\r\n            }\r\n\r\n        }\r\n        console.log('new board:!!', board)\r\n\r\n        this.props.onEditBoard(board)\r\n        this.setState({ isActivitiesOpen: !this.state.isActivitiesOpen })\r\n\r\n    }\r\n\r\n    onToggleFilters = () => {\r\n        this.setState({ isFiltersOpen: !this.state.isFiltersOpen })\r\n    }\r\n\r\n    handleMenuOpen = (ev, boardId) => {\r\n        this.setState({ elSetting: ev.currentTarget })\r\n    }\r\n\r\n    handleMenuClose = () => {\r\n        this.setState({ elSetting: null })\r\n    }\r\n\r\n    onToggleUsers = () => {\r\n        this.setState({ isUsersOpen: !this.state.isUsersOpen })\r\n    }\r\n\r\n    onRemoveMemberFromBoard = (memberId) => {\r\n        const user = this.state.board.members.find(member => member._id === memberId)\r\n        const desc = `${this.props.loggedUser.fullName} removed ${user.fullName} from ${this.state.board.name}`\r\n        this.setState({ board: { ...this.state.board, members: this.state.board.members.filter(member => member._id !== memberId) } }, () => {\r\n            this.props.onEditBoard(this.state.board, desc)\r\n        })\r\n    }\r\n    onAddUserToBoard = (userId) => {\r\n        const newUser = this.props.users.find(user => user._id === userId)\r\n        const desc = `${this.props.loggedUser.fullName} invited ${newUser.fullName} to ${this.state.board.name}`\r\n\r\n        this.setState({ board: { ...this.state.board, members: [...this.state.board.members, newUser] } }, () => {\r\n            this.props.onEditBoard(this.state.board, desc)\r\n        })\r\n    }\r\n    goToUserProfile = (userId) => {\r\n        this.props.history.push(`/user/${userId}`)\r\n    }\r\n    onClearLog = () => {\r\n        const board = {\r\n            ...this.state.board,\r\n            activityLog: []\r\n        }\r\n        this.setState({ board }, () => {\r\n            this.props.onEditBoard(board)\r\n        })\r\n\r\n\r\n    }\r\n\r\n    _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n\r\n    render() {\r\n        if (!this.state._id) return <h1>Loading...</h1>\r\n        const { members } = this.state.board\r\n        const { users, loggedUser, filterBy } = this.props;\r\n        const isFiltering = Object.values(filterBy).some(value => value)\r\n        const usersToAdd = users.filter(user => !members.some(member => member._id === user._id))\r\n        const activitiesNotRead = this.props.board.activityLog.filter(activity => !activity.isRead)\r\n        const activitiesRead = this.props.board.activityLog.filter(activity => activity.isRead)\r\n\r\n\r\n        return (\r\n            <section className=\"board-header flex column padding-x-30\">\r\n                <div className=\"board-header-header flex space-between grow align-center\">\r\n                    <h1 className=\"flex align-center\">\r\n                        <ContentEditable\r\n                            onFocus={this.focusText}\r\n                            className=\"content-editable cursor-initial\"\r\n                            innerRef={this.editableName}\r\n                            html={this.state.board.name}\r\n                            disabled={false}\r\n                            onChange={this.handleChangeName}\r\n                            onBlur={() => {\r\n                                const desc = `${loggedUser.fullName} Changed the board title from ${this.props.board.name} to ${this.state.board.name}`\r\n                                console.log('state name:', this.state.board)\r\n                                const board = {\r\n                                    ...this.props.board,\r\n                                    name: this.state.board.name\r\n                                }\r\n\r\n                                this.props.onEditBoard(board, desc)\r\n                            }}\r\n                            onKeyDown={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    ev.target.blur()\r\n                                }\r\n                            }}\r\n                        />\r\n                    </h1>\r\n                    <div className=\"board-header-right relative flex align-center\">\r\n                        <div className=\"board-users flex justify-center\" onClick={this.onToggleUsers}>\r\n                            {members.length === 0 && <div className=\"no-members-container relative\">\r\n                                <img src=\"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg\" />\r\n                                <FiPlus className=\"no-members-icon-plus\" />\r\n                            </div>}\r\n                            {members.length !== 0 && members.map((member, idx) => {\r\n                                return <div key={idx} className=\"user-img-container\">\r\n                                    {\r\n                                        member.imgUrl ? <img src={member.imgUrl} />\r\n                                            :\r\n                                            <div className=\"member-letter\">\r\n                                                {this._getMemeberInitials(member)[0]}\r\n                                                {this._getMemeberInitials(member)[1]}\r\n                                            </div>\r\n\r\n                                    }\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                        {this.state.isUsersOpen &&\r\n                            <div className=\"users-modal absolute\">\r\n                                <div className=\"board-users-box\">\r\n                                    <h3>Board Members</h3>\r\n                                    {members.map((member, idx) =>\r\n                                        <section key={idx} className=\"user-box flex space-between align-center\">\r\n                                            <div className=\"user-box-info flex align-center\" onClick={() => this.goToUserProfile(member._id)}>\r\n                                                {member.imgUrl\r\n                                                    ? <img src={member.imgUrl} alt=\"profile\" />\r\n                                                    : <div className=\"member-letter\">\r\n                                                        {this._getMemeberInitials(member)[0]}\r\n                                                        {this._getMemeberInitials(member)[1]}\r\n                                                    </div>}\r\n                                                <p className=\"member-name\">{member.fullName}</p>\r\n                                            </div>\r\n                                            {\r\n                                                (loggedUser._id === \"5f68936cf878123b2cd354436ce96d\" ||\r\n                                                    this.state.board.boardCreator._id === loggedUser._id) &&\r\n                                                <FiMinus onClick={() => this.onRemoveMemberFromBoard(member._id)} />\r\n                                            }\r\n                                        </section>\r\n                                    )}\r\n\r\n                                </div>\r\n                                <div className=\"site-users-box\">\r\n                                    <h3>Site Users</h3>\r\n                                    {usersToAdd.map(user => {\r\n                                        return <section key={user._id} className=\"user-box flex space-between align-center\">\r\n                                            <div className=\"user-box-info flex  align-center\" onClick={() => this.goToUserProfile(user._id)}>\r\n                                                {\r\n                                                    user.imgUrl ? <img src={user.imgUrl} alt=\"profile\" />\r\n                                                        : <div className=\"member-letter\">\r\n                                                            {this._getMemeberInitials(user)[0]}\r\n                                                            {this._getMemeberInitials(user)[1]}\r\n                                                        </div>\r\n                                                }\r\n                                                <p className=\"member-name\">{user.fullName}</p>\r\n                                            </div>\r\n                                            {\r\n                                                (loggedUser._id === \"5f68936cf878123b2cd354436ce96d\" ||\r\n                                                    this.state.board.boardCreator._id === loggedUser._id) &&\r\n                                                <FiPlus onClick={() => this.onAddUserToBoard(user._id)} />\r\n                                            }\r\n                                        </section>\r\n                                    })}\r\n                                </div>\r\n\r\n                            </div>}\r\n                        <div onClick={this.onToggleActivities} className=\"activities-outer-container flex align-center  cursor-pointer\">\r\n                            <h2>\r\n                                Activities {\" \"}\r\n                                <span style={{ color: activitiesNotRead.length !== 0 ? '#0085ff' : '' }}>\r\n                                    {activitiesNotRead.length}\r\n                                </span> {\" \"} / {activitiesRead.length + activitiesNotRead.length}\r\n                            </h2>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"board-header-footer flex align-center space-between\">\r\n                    <h5>\r\n                        <ContentEditable\r\n                            onFocus={this.focusText}\r\n                            className=\"content-editable cursor-initial\"\r\n                            innerRef={this.editableDescription}\r\n                            html={this.state.board.desc} // innerHTML of the editable div\r\n                            disabled={false}        // use true to disable editing\r\n                            onChange={this.handleChangeDesc} // handle innerHTML change\r\n                            onBlur={() => {\r\n                                const desc = `${loggedUser.fullName} Changed ${this.state.board.name} description to ${this.state.board.desc}`\r\n\r\n                                const board = {\r\n                                    ...this.props.board,\r\n                                    desc: this.state.board.desc\r\n                                }\r\n\r\n                                this.props.onEditBoard(board, desc)\r\n                            }}\r\n                            onKeyDown={(ev) => {\r\n                                if (ev.key === 'Enter') {\r\n                                    ev.target.blur()\r\n                                }\r\n                            }}\r\n                        />\r\n                    </h5>\r\n                    <div className=\"header-options flex\">\r\n                        <button className=\"new-group-btn\" onClick={this.props.onAddGroup}>New Group</button>\r\n                        <div onClick={() => this.searchInput.focus()} className=\"search-outer-container flex align-center\">\r\n                            <input ref={(input) => { this.searchInput = input; }} placeholder=\"Search\" type='text' onChange={this.props.handleSearch} />\r\n                            <GoSearch />\r\n                        </div>\r\n                        <div onClick={!this.state.isFiltersOpen ? this.onToggleFilters : () => { }}\r\n\r\n                            className=\"filters-outer-container relative flex align-center cursor-pointer\"  >\r\n                            {isFiltering && <div className=\"filter-active-indicator\"></div>}\r\n                            <VscListFilter className={isFiltering ? 'filter-active' : ''} />\r\n                            <h2 className={isFiltering ? 'filter-active' : ''}>Filter</h2>\r\n                            {\r\n                                this.state.isFiltersOpen &&\r\n\r\n                                <Filter board={this.props.board} />\r\n\r\n                            }\r\n                        </div>\r\n\r\n\r\n\r\n                    </div>\r\n                    <div className={`${this.state.isActivitiesOpen && 'animate-side-modal'} side-modal`}>\r\n                        <Activities onClearLog={this.onClearLog} onToggleActivities={this.onToggleActivities}\r\n                            boardName={this.state.board.name} activityLog={this.props.board.activityLog} />\r\n                    </div>\r\n                    {\r\n                        this.state.isFiltersOpen && <div onClick={this.onToggleFilters} className='modal-screen-wrapper'></div>\r\n                    }\r\n\r\n                    {\r\n                        this.state.isActivitiesOpen && <div onClick={this.onToggleActivities} className='modal-screen-wrapper'></div>\r\n                    }\r\n                    {\r\n                        this.state.isUsersOpen && <div onClick={this.onToggleUsers} className='modal-screen-wrapper'></div>\r\n                    }\r\n                </div>\r\n\r\n\r\n            </section>\r\n        )\r\n    }\r\n\r\n}\r\n\r\n\r\nexport const BoardHeader = withRouter(_BoardHeader)","import React, { Component } from 'react'\r\nimport moment from 'moment'\r\nimport { Fade } from '@material-ui/core';\r\nimport { AiOutlineDelete } from 'react-icons/ai';\r\n\r\nexport class Notifications extends Component {\r\n\r\n    state = {\r\n        isModalOpen: null\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ isModalOpen: true })\r\n    }\r\n    onRemoveNotifications = () => {\r\n        this.props.removeNotifications(this.props.loggedUser)\r\n        this.setState({ isModalOpen: true })\r\n    }\r\n\r\n    _getMemeberInitials(member) {\r\n        console.log('member:', member)\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n    }\r\n\r\n\r\n    render() {\r\n        const { loggedUser } = this.props;\r\n        return (\r\n\r\n            <Fade in={this.state.isModalOpen}>\r\n                <section className=\"notifications padding-x-15 padding-y-15\">\r\n                    <header className=\"flex space-between align-center\">\r\n                        {loggedUser.notifications.length !== 0\r\n                            ? (\r\n                                <React.Fragment>\r\n                                    <h1>Notifications</h1>\r\n                                    <AiOutlineDelete onClick={this.onRemoveNotifications} />\r\n                                </React.Fragment>\r\n                            )\r\n                            : (<h1>You have no notifications.</h1>)}\r\n                    </header>\r\n                    <div className=\"notifications-container\">\r\n                        {\r\n                            loggedUser.notifications && (\r\n                                loggedUser.notifications.map((notification, idx) => {\r\n                                    return (\r\n                                        <div key={idx} className=\"notification flex \">\r\n                                            <div onClick={() => this.props.goToUserProfile(notification.byUser._id)} className=\"user-img-container\">\r\n                                                {\r\n                                                    notification.byUser.imgUrl ?\r\n                                                        <img className=\"cursor-pointer\" src={notification.byUser.imgUrl} alt=\"profile\" />\r\n                                                        :\r\n                                                        <div className=\"member-letter cursor-pointer\">\r\n                                                            {this._getMemeberInitials(notification.byUser)[0]}\r\n                                                            {this._getMemeberInitials(notification.byUser)[1]}\r\n                                                        </div>\r\n                                                }\r\n                                            </div>\r\n                                            <div className=\"notification-msg flex column\">\r\n                                                <h2>\r\n                                                    {notification.byUser.fullName}\r\n                                                </h2>\r\n                                                <p>\r\n                                                    {notification.content}\r\n                                                </p>\r\n                                                <div>\r\n                                                    <p>{moment(notification.createdAt).fromNow()}</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    )\r\n\r\n                                })\r\n                            )\r\n\r\n\r\n                        }\r\n                    </div>\r\n                </section>\r\n            </Fade>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { FaAd, FaRegUser } from 'react-icons/fa'\r\nimport { VscBell, VscBellDot } from 'react-icons/vsc'\r\nimport { BsCalendar } from 'react-icons/bs'\r\nimport { CgProfile } from 'react-icons/cg'\r\nimport { BiLogOut } from 'react-icons/bi'\r\nimport { Notifications } from './Notifications';\r\nimport { markAsRead, removeNotifications, logout } from '../store/actions/userActions'\r\nclass _Navbar extends Component {\r\n    state = {\r\n        isNotificationShown: false\r\n    }\r\n\r\n    toggleNotifications = () => {\r\n\r\n        this.onMarkAsRead()\r\n        this.setState({ isNotificationShown: !this.state.isNotificationShown })\r\n    }\r\n    onMarkAsRead = () => {\r\n        this.props.markAsRead(this.props.loggedUser)\r\n    }\r\n\r\n    onLogout = () => {\r\n        this.props.logout()\r\n        this.props.history.push('/login')\r\n    }\r\n    goToUserProfile = (id) => {\r\n        this.props.history.push(`/user/${id}`)\r\n\r\n    }\r\n\r\n    render() {\r\n        const { isNotificationShown } = this.state\r\n        const { loggedUser, removeNotifications } = this.props\r\n        return (\r\n            <section className=\"navbar flex column space-between align-center padding-y-15\">\r\n\r\n                <ul className=\"navbar-links flex column space-around\">\r\n                    <NavLink to=\"/\">\r\n                        <img className=\"logo-navbar\" src=\"taskus-nav.png\" alt=\"\" />\r\n                    </NavLink>\r\n\r\n\r\n                    {isNotificationShown && <div className=\"modal-screen-wrapper\" onClick={this.toggleNotifications} />}\r\n                    <li className=\"icon-container cursor-pointer\" onClick={!this.state.isNotificationShown ? this.toggleNotifications : () => { }} >\r\n                        {\r\n                            loggedUser.notifications.filter(notification => !notification.isRead).length === 0\r\n                                ? ''\r\n                                : <p className=\"notifications-counter\">\r\n                                    {loggedUser.notifications.filter(notification => !notification.isRead).length}\r\n                                </p>\r\n                        }\r\n                        {\r\n                            isNotificationShown &&\r\n                            <Notifications goToUserProfile={this.goToUserProfile} removeNotifications={removeNotifications} loggedUser={loggedUser} />\r\n\r\n                        }\r\n\r\n                        {loggedUser.notifications.some(notification => !notification.isRead)\r\n                            ? <VscBellDot />\r\n                            : <VscBell />}\r\n                    </li>\r\n                </ul>\r\n\r\n                <ul className=\"navbar-links flex column space-around\">\r\n                    <NavLink to=\"/myweek\">\r\n                        <li className=\"icon-container\"><BsCalendar /></li>\r\n                    </NavLink>\r\n                    <NavLink to={loggedUser ? `/user/${loggedUser._id}` : '/login'}>\r\n                        <li className=\"icon-container\"><FaRegUser /></li>\r\n                    </NavLink>\r\n                    <li className=\"icon-container\" ><BiLogOut onClick={this.onLogout} /></li>\r\n                </ul>\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    markAsRead,\r\n    removeNotifications,\r\n    logout\r\n}\r\n\r\nexport const Navbar = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Navbar));","import React from 'react'\r\nimport { CgProfile } from 'react-icons/cg'\r\nimport { FiMinus } from 'react-icons/fi'\r\nimport { FiPlus } from 'react-icons/fi';\r\n\r\nexport function Members(props) {\r\n\r\n\r\n    function _getMemeberInitials(member) {\r\n        let [firstName, lastName] = member.fullName.split(\" \")\r\n        let firstNameChar = ''\r\n        let lastNameChar = ''\r\n\r\n        if (firstName) firstNameChar = firstName.charAt(0).toUpperCase()\r\n        if (lastName) lastNameChar = lastName.charAt(0).toUpperCase()\r\n        return [firstNameChar, lastNameChar]\r\n\r\n\r\n    }\r\n\r\n    const usersToAdd = props.users.filter(user => !props.members.some(member => member._id === user._id))\r\n    return (\r\n\r\n        <div className=\"user-img-container relative flex justify-center align-center\" onClick={() => props.openModal('users')}>\r\n            {props.members.length ? props.members[0].imgUrl\r\n                ?\r\n                <div className=\"member-img-container relative\">\r\n                    {props.members.map(member => <img key={member._id} className=\"member-img\" src={member.imgUrl} alt=\"\" />)}\r\n                    <FiPlus className=\"no-members-icon-plus absolute\" />\r\n                </div>\r\n                :\r\n                <div className=\"member-letter\">\r\n                    {props.members[0].fullName.charAt(0).toUpperCase()}\r\n                </div>\r\n                :\r\n                <div className=\"no-members-container\">\r\n                    <img src=\"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg\" className=\"no-members-icon\" />\r\n                    <FiPlus className=\"no-members-icon-plus\" />\r\n                </div>}\r\n\r\n\r\n            {props.isUsersShown &&\r\n                <div className=\"users-modal absolute\">\r\n                    <div className=\"task-users-box\">\r\n                        <h3>Task Members</h3>\r\n                        {props.members.map((member, idx) =>\r\n                            <section key={idx} className=\"user-box flex space-between align-center\">\r\n                                <div className=\"user-box-info flex align-center\" onClick={() => props.goToUserProfile(member._id)}>\r\n                                    {member.imgUrl ? <img src={member.imgUrl} alt=\"profile\" /> : <div className=\"member-letter\">{member.fullName.charAt(0).toUpperCase()}</div>}\r\n                                    <p className=\"member-name\">{member.fullName}</p>\r\n                                </div>\r\n                                <FiMinus onClick={() => props.onRemoveMemberFromTask(member._id)} />\r\n                            </section>\r\n                        )}\r\n\r\n                    </div>\r\n                    <div className=\"board-users-box\">\r\n                        <h3>Board Members</h3>\r\n                        {usersToAdd.map((user, idx) => {\r\n                            return <section key={idx} className=\"user-box flex space-between align-center\">\r\n                                <div className=\"user-box-info flex  align-center\" onClick={() => props.goToUserProfile(user._id)}>\r\n                                    {user.imgUrl ? <img src={user.imgUrl} alt=\"profile\" /> :\r\n                                        <div className=\"member-letter\">\r\n                                            {_getMemeberInitials(user)[0]}\r\n                                            {_getMemeberInitials(user)[1]}\r\n                                        </div>}\r\n                                    <p className=\"member-name\">{user.fullName}</p>\r\n                                </div>\r\n                                <FiPlus onClick={() => props.onAddUserToTask(user._id)} />\r\n                            </section>\r\n                        })}\r\n                    </div>\r\n\r\n                </div>}\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport function Status(props) {\r\n    return (\r\n        <div className=\"label-container relative flex align-center\">\r\n            <div className={`label-box ${props.status.split(\" \")[0].toLowerCase()}`} onClick={() => props.openModal('status')}>\r\n                <div className=\"task-label-name flex align-center justify-center\">\r\n                <p>{props.status}</p>\r\n                </div>\r\n                {props.isStatusShown &&\r\n                    <div className=\"label-list absolute flex column align-center\">\r\n                        <section className=\"label-selector flex align-center justify-center stuck\" onClick={() => props.handleChange(\"Stuck\")}>\r\n                            <p>Stuck</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center working\" onClick={() => props.handleChange(\"Working on it\")}>\r\n                            <p>Working on it</p>\r\n                        </section>\r\n                        <section className=\"label-selector flex align-center justify-center done\" onClick={() => props.handleChange(\"Done\")}>\r\n                            <p>Done</p>\r\n                        </section>\r\n                    </div>\r\n                }\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React from 'react'\r\nimport DatePicker from \"react-datepicker\";\r\n\r\nexport function Date(props){\r\n    return(\r\n        <label className=\"date-picker\">\r\n        <DatePicker\r\n            selected={props.dueDate}\r\n            onChange={props.handleDateChange}\r\n            dateFormat=\"dd/MM/yyyy\"\r\n        />\r\n    </label>\r\n    )\r\n}","import React from 'react'\r\n\r\nexport function Priority(props){\r\n    return(\r\n        <div className=\"label-container relative flex align-center\">\r\n        <div className={`label-box ${props.priority.toLowerCase()}`} onClick={() => props.openModal('priority')}>\r\n        <div className=\"task-label-name flex align-center justify-center\">\r\n            <p>{props.priority}</p>\r\n            </div>\r\n            {props.isPriorityShown &&\r\n                <div className=\"label-list absolute flex column align-center\">\r\n                    <section className=\"label-selector flex align-center justify-center low\" onClick={() => props.handleChange(\"Low\")}>\r\n                        <p>Low</p>\r\n                    </section>\r\n                    <section className=\"label-selector flex align-center justify-center medium\" onClick={() => props.handleChange(\"Medium\")}>\r\n                        <p>Medium</p>\r\n                    </section>\r\n                    <section className=\"label-selector flex align-center justify-center high\" onClick={() => props.handleChange(\"High\")}>\r\n                        <p>High</p>\r\n                    </section>\r\n                </div>\r\n            }\r\n\r\n        </div>\r\n    </div>\r\n    )\r\n}","\r\nexport const cloudinaryService = {\r\n    uploadImg\r\n}\r\n\r\nasync function uploadImg(img) {\r\n    console.log('IMAGE?', img)\r\n    const CLOUD_NAME = \"dtg7n0zye\"\r\n    const UPLOAD_URL = `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', img)\r\n    formData.append('upload_preset', 'Task-Us');\r\n    try {\r\n        const res = await fetch(UPLOAD_URL, {\r\n            method: 'POST',\r\n            body: formData\r\n        })\r\n        const data = await res.json()\r\n        return data\r\n\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { AiOutlineSend } from 'react-icons/ai';\r\nimport { HiOutlineDotsHorizontal } from 'react-icons/hi';\r\n\r\n\r\nexport class Reply extends React.Component {\r\n    state = {\r\n        txt: '',\r\n        isEditMode: false,\r\n        isOptionsModal: false\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        this.setState({ [target.name]: target.value })\r\n    }\r\n\r\n\r\n    toggleEditMode = (replyTxt) => {\r\n        this.setState({ isEditMode: !this.state.isEditMode, txt: replyTxt })\r\n    }\r\n\r\n    updateReply = (newReply) => {\r\n        if (newReply.txt === this.state.txt) return this.setState({ isEditMode: false })\r\n        newReply.txt = this.state.txt\r\n        const newReplies = this.props.update.replies.map(reply => {\r\n            return reply.id === newReply.id ? newReply : reply\r\n        })\r\n\r\n        const update = { ...this.props.update, replies: newReplies }\r\n        this.props.updateNote(update)\r\n        this.setState({ isEditMode: false, txt: '' })\r\n    }\r\n\r\n    removeReply = (replyId) => {\r\n        const idx = this.props.update.replies.findIndex(reply => reply.id === replyId)\r\n        const newUpdate = { ...this.props.update }\r\n        const update = newUpdate.replies.splice(idx, 1)\r\n        this.props.updateNote(update)\r\n    }\r\n\r\n    toggleOptionsModal = () => {\r\n        this.setState({ isOptionsModal: !this.state.isOptionsModal })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { reply, idx } = this.props\r\n        return (\r\n\r\n            <div key={idx} className=\"reply-box flex column relative\">\r\n                <HiOutlineDotsHorizontal className=\"options-reply-btn cursor-pointer\" onClick={this.toggleOptionsModal} />\r\n\r\n                <div className=\"reply-content flex align-center\">\r\n                    <img src={reply.member.imgUrl} alt=\"\" />\r\n                    <p className=\"reply-name\">{reply.member.fullName}</p>\r\n                    {!this.state.isEditMode ?\r\n                        <p className=\"reply-text\">{reply.txt}</p>\r\n                        :\r\n                        <div className=\"edit-box flex\">\r\n                            <textarea name=\"txt\" onChange={this.handleChange} value={this.state.txt}></textarea>\r\n                            <AiOutlineSend className=\"update-reply-btn\" onClick={() => this.updateReply(reply)} />\r\n                        </div>\r\n                    }\r\n                </div>\r\n\r\n                {this.state.isOptionsModal &&\r\n                    <Fragment>\r\n                        <div onClick={() => {\r\n                            this.toggleOptionsModal()\r\n                        }} className=\"modal-screen-wrapper\"></div>\r\n\r\n                        <div className=\"update-options-modal\">\r\n                            <p className=\"remove-reply-btn  cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.removeReply(reply.id)\r\n                            }}>Delete Post</p>\r\n                            <p className=\"edit-reply-btn cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.toggleEditMode(reply.txt)\r\n                            }}>Edit Post</p>\r\n                        </div>\r\n                    </Fragment>\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Fragment } from 'react'\r\nimport { AiOutlineSend } from 'react-icons/ai';\r\nimport { HiOutlineDotsHorizontal } from 'react-icons/hi';\r\nimport { Reply } from './Reply';\r\n\r\nexport class Update extends React.Component {\r\n\r\n    state = {\r\n        txt: '',\r\n        isEditMode: false,\r\n        isOptionsModal: false\r\n    }\r\n\r\n\r\n    onReply = (newUpdate) => {\r\n        if (!this.state.txt || this.state.txt.split('').every(letter => letter === ' ')) return\r\n        const newReply = {\r\n            txt: this.state.txt,\r\n            createdAt: Date.now(),\r\n            id: this.props.makeid(),\r\n            member: {\r\n                fullName: this.props.loggedUser.fullName,\r\n                username: this.props.loggedUser.userName,\r\n                _id: this.props.loggedUser.userName,\r\n                imgUrl: this.props.loggedUser.imgUrl\r\n            }\r\n        }\r\n        const update = this.props.updates.find(update => update.id === newUpdate.id)\r\n        update.replies = [...update.replies, newReply]\r\n        this.props.updateNote(update)\r\n\r\n        this.setState({ txt: '' })\r\n    }\r\n\r\n    removeUpdate = (updateId) => {\r\n        const updates = this.props.updates.filter(update => update.id !== updateId)\r\n        this.props.sendNote(updates)\r\n    }\r\n\r\n    onToggleEditUpdate = () => {\r\n        this.setState({ isEditMode: !this.state.isEditMode })\r\n    }\r\n\r\n    editUpdate = (newUpdate) => {\r\n        if (newUpdate.txt === this.state.txt) return this.setState({ isEditMode: false })\r\n        newUpdate.txt = this.state.txt\r\n        const newUpdates = this.props.updates.map(update => {\r\n            return update.id === newUpdate.id ? newUpdate : update\r\n        })\r\n\r\n        this.props.sendNote(newUpdates)\r\n        this.setState({ isEditMode: false, txt: '' })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        this.setState({ [target.name]: target.value })\r\n    }\r\n\r\n    toggleOptionsModal = () => {\r\n        this.setState({ isOptionsModal: !this.state.isOptionsModal })\r\n    }\r\n\r\n\r\n    render() {\r\n        const { update, idx } = this.props\r\n\r\n        return (\r\n            <div key={idx} className=\"update-box flex wrap column relative\">\r\n                <HiOutlineDotsHorizontal className=\"options-reply-btn cursor-pointer\" onClick={this.toggleOptionsModal} />\r\n                {this.state.isOptionsModal &&\r\n                    <Fragment>\r\n                        <div onClick={() => {\r\n                            this.toggleOptionsModal()\r\n                        }} className=\"modal-screen-wrapper\"></div>\r\n\r\n                        <div className=\"update-options-modal\">\r\n                            <p className=\"remove-reply-btn  cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.removeUpdate(update.id)\r\n                            }}>Delete Post</p>\r\n                            <p className=\"edit-reply-btn cursor-pointer\" onClick={() => {\r\n                                this.toggleOptionsModal()\r\n                                this.onToggleEditUpdate()\r\n                            }}>Edit Post</p>\r\n                        </div>\r\n                    </Fragment>\r\n                }\r\n                {/* <button className=\"remove-update-btn\" onClick={() => this.removeUpdate(update.id)}>X</button> */}\r\n                <div className=\"update-box-header flex align-center\">\r\n                    <img src={update.member.imgUrl} alt=\"\" />\r\n                    <p className=\"member-name\">{update.member.fullName}</p>\r\n                </div>\r\n\r\n\r\n                {this.state.isEditMode ?\r\n                    <div className=\"update-box-edit flex column relative\">\r\n                        <textarea value={this.state.txt} name=\"txt\" onChange={this.handleChange}></textarea>\r\n                        <AiOutlineSend className=\"submit-edit-btn absolute\" onClick={() => this.editUpdate(update)} />\r\n                        {update.imgUrl && <img src={update.imgUrl} alt=\"\" />}\r\n                    </div>\r\n                    :\r\n                    <div className=\"update-box-main flex column\">\r\n                        {update.txt && <p className=\"update-text\">{update.txt}</p>}\r\n                        {update.imgUrl && <img src={update.imgUrl} alt=\"\" />}\r\n                    </div>\r\n                }\r\n                {/* <p className=\"edit-update-btn\" onClick={this.onToggleEditUpdate}>Edit</p> */}\r\n                <div className=\"update-box-footer flex column\">\r\n\r\n                    {update.replies &&\r\n                        <div className=\"replies-box flex column\" style={{ borderTop: `${update.replies.length && '1px solid rgba(109, 109, 109, 0.35)'}` }}>\r\n                            {update.replies.map((reply, idx) =>\r\n                                <Reply key={idx} reply={reply} idx={idx} update={this.props.update}\r\n                                    updateNote={this.props.updateNote} />\r\n                            )}</div>\r\n                    }\r\n                    {!this.state.isEditMode &&\r\n                        <div className=\"reply-footer flex space-between align-center\">\r\n                            <textarea value={this.state.txt} name=\"txt\" onChange={this.handleChange}></textarea>\r\n                            <button className=\"reply-button\" onClick={() => this.onReply(update)}>Reply</button>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { AiOutlineClose } from 'react-icons/ai'\r\nimport { BiImage } from 'react-icons/bi';\r\nimport { MdDone } from 'react-icons/md';\r\n\r\nimport { cloudinaryService } from '../../services/cloudinaryService';\r\nimport { Update } from './Update';\r\n\r\n\r\nfunction makeid(length = 7) {\r\n    var text = \"\";\r\n    var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n    }\r\n\r\n    return text;\r\n}\r\n\r\nexport class Updates extends React.Component {\r\n\r\n    state = {\r\n        reply: {\r\n            txt: ''\r\n        },\r\n        update: {\r\n            id: '',\r\n            txt: '',\r\n            imgUrl: '',\r\n            replies: []\r\n        },\r\n        isLoading: false,\r\n        imageUploaded: false\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({ imageUploaded: false })\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        if (ev.target.name === 'file-img') {\r\n            this.setState({ update: { ...this.state.update, img: ev.target.files[0] } }, () => {\r\n                this.uploadImg()\r\n            })\r\n        } else if (ev.target.name === 'txt') {\r\n            this.setState({ update: { ...this.state.update, txt: ev.target.value } })\r\n        } else {\r\n            this.setState({ reply: { ...this.state.reply, txt: ev.target.value } })\r\n        }\r\n    }\r\n\r\n    uploadImg = async () => {\r\n        this.setState({ isLoading: true })\r\n        const res = await cloudinaryService.uploadImg(this.state.update.img, this.state)\r\n        this.setState({ update: { ...this.state.update, imgUrl: res.url }, isLoading: false, imageUploaded: true })\r\n    }\r\n\r\n    sendNote = (ev) => {\r\n        ev.preventDefault()\r\n        if ((!this.state.update.txt || this.state.update.txt.split('').every(letter => letter === ' ')) && !this.state.update.imgUrl) return\r\n        const newNote = {\r\n            id: makeid(),\r\n            createdAt: Date.now(),\r\n            txt: this.state.update.txt,\r\n            imgUrl: this.state.update.imgUrl,\r\n            replies: [],\r\n            member: {\r\n                fullName: this.props.loggedUser.fullName,\r\n                username: this.props.loggedUser.userName,\r\n                _id: this.props.loggedUser.userName,\r\n                imgUrl: this.props.loggedUser.imgUrl\r\n            }\r\n        }\r\n        const updates = [newNote, ...this.props.updates]\r\n        this.setState({ update: { txt: '', imgUrl: '' }, imageUploaded: false })\r\n        this.props.sendNote(updates)\r\n    }\r\n\r\n    updateNote = (newUpdate) => {\r\n        const newNotes = [...this.props.updates].map(update => update.id === newUpdate.id ? newUpdate : update)\r\n        this.props.sendNote(newNotes)\r\n    }\r\n\r\n\r\n    render() {\r\n        if (!this.props.updates) return <h1>Loading...</h1>;\r\n        const { updates } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"updates-header flex column\">\r\n                    <AiOutlineClose onClick={this.props.closeModal} />\r\n                    <h1>{this.props.task.name}</h1>\r\n                    <div className=\"updates-header-options flex column\">\r\n                        <form onSubmit={this.sendNote} className=\"notes-form flex align-center\">\r\n                            <textarea name=\"txt\" value={this.state.update.txt} onChange={this.handleChange} />\r\n                        </form>\r\n\r\n                        <div className=\"updates-btns flex align-center space-between\">\r\n                            <div className=\"image-uploader flex\">\r\n                                <label data-title=\"Upload Image\" htmlFor={this.props.task.id}>{this.state.isLoading ? <div class=\"loadingio-spinner-spinner-gvjl1rpqs7q\"><div class=\"ldio-subadnemdcd\">\r\n                                    <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>\r\n                                </div></div> : <BiImage />}\r\n                                </label>\r\n                                <input name=\"file-img\" type=\"file\" id={this.props.task.id} onChange={(this.handleChange)} hidden />\r\n                                {this.state.imageUploaded && <div className=\"image-uploaded flex align-center\"><MdDone /><p> Image Ready!</p></div>}\r\n                            </div>\r\n                            {this.state.isLoading ? <p>Image is uploading..</p> : <button onClick={this.sendNote}>Send</button>}\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"updates-container\">\r\n                    {updates.map((update, idx) => <Update update={update} key={idx} idx={idx}\r\n                        updates={updates} loggedUser={this.props.loggedUser}\r\n                        sendNote={this.props.sendNote}\r\n                        updateNote={this.updateNote} makeid={makeid} />)}\r\n                </div>\r\n            </React.Fragment>\r\n\r\n        )\r\n    }\r\n}","import React, { Component, Fragment } from 'react'\r\nimport { BsBookmarkPlus, BsFilePlus } from 'react-icons/bs';\r\nimport { RiDeleteBack2Line } from 'react-icons/ri';\r\nimport Truncate from 'react-truncate'\r\n\r\nexport class Tags extends Component {\r\n\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        this.elTagInput = React.createRef();\r\n        this.elTag = React.createRef();\r\n\r\n        this.setState({ tags: JSON.parse(JSON.stringify(this.props.task.tags)) })\r\n    }\r\n\r\n    handleChange = (ev, id) => {\r\n        const tags = this.state.tags.map(tag => {\r\n            if (tag.id === id) {\r\n                tag.txt = ev.target.value\r\n            }\r\n            return tag\r\n        })\r\n        this.setState({ tags });\r\n    }\r\n\r\n    onAddTag = () => {\r\n        const tags = [...this.state.tags]\r\n        const tagName = this.elTagInput.current.value ? this.elTagInput.current.value : 'New Tag'\r\n        tags.push({ id: this._makeid(), txt: tagName, color: _getRandomColor() })\r\n        this.setState({ tags });\r\n        this.props.onEditTags(tags, tagName, 'addTag')\r\n    }\r\n\r\n    onRemoveTag = (id) => {\r\n        const tagToRemove = this.state.tags.find(tag => tag.id === id)\r\n        const tags = this.state.tags.filter(tag => tag.id !== id)\r\n        this.setState({ tags });\r\n        this.props.onEditTags(tags, tagToRemove.txt, 'removeTag')\r\n    }\r\n    onEditTag = (idx, tagName, type) => {\r\n        if (this.props.task.tags[idx].txt === this.state.tags[idx].txt) {\r\n            return\r\n        }\r\n        this.props.onEditTags(this.state.tags, tagName, type)\r\n    }\r\n\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n\r\n    _makeid(length = 7) {\r\n        var text = \"\";\r\n        var possible = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n\r\n        for (var i = 0; i < length; i++) {\r\n            text += possible.charAt(Math.floor(Math.random() * possible.length));\r\n        }\r\n\r\n        return text;\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.tags || this.state.tags === 0) return <h1>no tags</h1>\r\n        return (\r\n            <div onClick={() => this.props.openModal('tags')} className=\"label-container tags relative\">\r\n                <div className=\"task-label-name flex justify-center align-center \">\r\n                    {this.state.tags.map((tag, idx) => {\r\n                        if (idx > 2) return\r\n                        if (idx > 1) return (\r\n                            <div key={tag.id} className=\"task-number-of-tags\">\r\n                                <span>{this.state.tags.length > 9 ? '+9' : `+${this.state.tags.length - 2}`}</span>\r\n                            </div>\r\n                        )\r\n\r\n                        return (\r\n                            <p key={idx} style={{ color: tag.color }} key={idx}>\r\n                                <Truncate lines={1} ellipsis={\"...\"} width={75}>\r\n                                    {idx === this.state.tags.length - 1 ? tag.txt : (idx === 1 ? tag.txt : tag.txt + \",\")}\r\n                                </Truncate>\r\n                            </p>\r\n                        )\r\n                    })}\r\n                </div>\r\n\r\n                {this.props.isTagsShown &&\r\n                    <Fragment>\r\n                        <div className=\"label-list tags-modal absolute flex column align-center\">\r\n                            <div className=\"tag-add-container  flex justify-center align-center\">\r\n                                <BsBookmarkPlus onClick={this.onAddTag} />\r\n                                <input onKeyDown={(ev) => {\r\n                                    if (ev.key === 'Enter') {\r\n                                        this.onAddTag()\r\n                                        ev.target.blur()\r\n                                        ev.target.value = ''\r\n                                    }\r\n                                }} placeholder=\"New tag\" ref={this.elTagInput} type=\"text\" />\r\n                            </div>\r\n                            <section>\r\n                                {this.state.tags.map((tag, idx) => {\r\n                                    return (\r\n                                        <div className=\"tag-container flex justify-center align-center\" key={idx}>\r\n                                            <RiDeleteBack2Line className=\"tag-remove-icon\" onClick={() => this.onRemoveTag(tag.id)} />\r\n\r\n                                            <input style={{ color: tag.color }} onBlur={(ev) => {\r\n                                                ev.target.blur()\r\n                                                this.onEditTag(idx)\r\n                                            }}\r\n                                                onKeyDown={(ev) => {\r\n                                                    if (ev.key === 'Enter') {\r\n                                                        ev.target.blur()\r\n                                                        this.onEditTag(idx)\r\n                                                    }\r\n                                                }}\r\n                                                onChange={(ev) => this.handleChange(ev, tag.id)} value={tag.txt} type=\"text\" />\r\n                                        </div>\r\n                                    )\r\n                                })}\r\n                            </section>\r\n\r\n                        </div>\r\n                    </Fragment>\r\n                }\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nfunction _getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n        color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n}\r\n\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport ContentEditable from 'react-contenteditable'\r\nimport { withRouter } from 'react-router-dom';\r\nimport { Draggable } from 'react-beautiful-dnd'\r\nimport { RiDeleteBack2Line } from 'react-icons/ri'\r\nimport { BsChatDots } from 'react-icons/bs'\r\nimport { MdDelete } from 'react-icons/md'\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport socketService from '../services/socketService.js'\r\nimport moment from 'moment';\r\n//Material ui\r\nimport { Tooltip, Zoom } from '@material-ui/core';\r\n\r\n// Inside Imports\r\nimport { Members } from './task-cmps/Members';\r\nimport { Status } from './task-cmps/Status'\r\nimport { Date } from './task-cmps/Date';\r\nimport { Priority } from './task-cmps/Priority';\r\nimport { Updates } from './task-cmps/Updates';\r\nimport { Tags } from './task-cmps/Tags';\r\n\r\nclass _Task extends Component {\r\n\r\n    state = {\r\n        id: '',\r\n        isStatusShown: false,\r\n        isPriorityShown: false,\r\n        isUsersShown: false,\r\n        isUpdatesShown: false,\r\n        isTagsShown: false,\r\n        imgUrl: '',\r\n        isImageModalShown: false\r\n    }\r\n\r\n    reloadProps = () => {\r\n        this.setState({ task: this.props.task })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.contentEditable = React.createRef();\r\n        socketService.on('updatedBoard', this.reloadProps)\r\n        this.setState({\r\n            ...this.state,\r\n            task: this.props.task,\r\n            isStatusShown: false,\r\n            isPriorityShown: false,\r\n            isUsersShown: false,\r\n            isUpdatesShown: false,\r\n            isTagsShown: false\r\n        })\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard', this.reloadProps)\r\n    }\r\n\r\n    handleNameChange = (ev) => {\r\n        this.setState({ task: { ...this.state.task, name: ev.target.value } });\r\n    }\r\n\r\n    handleDateChange = date => {\r\n\r\n        const prevDate = moment(this.state.task.dueDate).format('DD/MMM/YYYY')\r\n        const changedDate = moment(date).format('DD/MMM/YYYY')\r\n        if (prevDate === changedDate) return\r\n\r\n        this.setState({ task: { ...this.state.task, dueDate: moment(date).valueOf() } }, () => {\r\n\r\n            const desc = `${this.props.loggedUser.fullName} changed task ${this.state.task.name} date from ${moment(this.props.task.dueDate).format('DD/MMM/YYYY')} to ${moment(this.state.task.dueDate).format('DD/MMM/YYYY')} at group -${this.props.group.name}`\r\n\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n\r\n    handleChange = (data, tags) => {\r\n\r\n        let desc = ''\r\n\r\n        if (data === 'Stuck' || data === 'Working on it' || data === 'Done') {\r\n            this.setState({ task: { ...this.state.task, status: data } }, () => {\r\n\r\n                desc = `${this.props.loggedUser.fullName} changed task: ${this.state.task.name} status from ${this.props.task.status} to ${this.state.task.status} at group - ${this.props.group.name}`\r\n\r\n                this.props.onEditTask(this.state.task, this.props.task, desc)\r\n                if (!this.state.isUpdatesShown) this.closeModal()\r\n            })\r\n        } else {\r\n            this.setState({ task: { ...this.state.task, priority: data } }, () => {\r\n\r\n                desc = `${this.props.loggedUser.fullName} changed task: ${this.state.task.name} priority from ${this.props.task.priority} to ${this.state.task.priority} at group - ${this.props.group.name}`\r\n\r\n                this.props.onEditTask(this.state.task, this.props.task, desc)\r\n\r\n                this.closeModal()\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    sendNote = (newUpdates) => {\r\n        let desc = ''\r\n\r\n        this.setState({ task: { ...this.state.task, updates: [...newUpdates] } }, () => {\r\n\r\n            desc = `${this.props.loggedUser.fullName} sent an update at task: ${this.props.task.name} at group - ${this.props.group.name}`\r\n\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n\r\n    openModal = (data) => {\r\n        switch (data) {\r\n            case 'status':\r\n                this.setState({ isStatusShown: true })\r\n                break;\r\n            case 'users':\r\n                this.setState({ isUsersShown: true })\r\n                break;\r\n            case 'updates':\r\n                this.setState({ isUpdatesShown: true })\r\n                break;\r\n            case 'priority':\r\n                this.setState({ isPriorityShown: true })\r\n                break;\r\n            case 'tags':\r\n                this.setState({ isTagsShown: true })\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    closeModal = () => {\r\n        this.setState({ isImageModalShown: false, isStatusShown: false, isUsersShown: false, isPriorityShown: false, isUpdatesShown: false, isTagsShown: false })\r\n    }\r\n\r\n    onRemoveMemberFromTask = (memberId) => {\r\n        let desc = ''\r\n        const removedMember = this.state.task.members.find(member => member._id === memberId)\r\n        this.setState({ task: { ...this.state.task, members: this.state.task.members.filter(member => member._id !== memberId) } }, () => {\r\n            desc = `${this.props.loggedUser.fullName} removed ${removedMember.fullName} from ${this.state.task.name} at group - ${this.props.group.name}`\r\n\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n\r\n    onAddUserToTask = (userId) => {\r\n        let desc = ''\r\n\r\n        const newUser = this.props.users.find(user => user._id === userId)\r\n        this.setState({ task: { ...this.state.task, members: [...this.state.task.members, newUser] } }, () => {\r\n\r\n            desc = `${this.props.loggedUser.fullName} tasked ${newUser.fullName} to ${this.state.task.name} on group - ${this.props.group.name}`\r\n\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n\r\n    goToUserProfile = (userId) => {\r\n        this.props.history.push(`/user/${userId}`)\r\n        this.closeModal()\r\n    }\r\n\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n\r\n    onEditTags = (tags, tagName, type) => {\r\n        let desc = ''\r\n        console.log('type:', type)\r\n        this.setState({ ...this.state, task: { ...this.state.task, tags: JSON.parse(JSON.stringify(tags)) } }, () => {\r\n            if (type === 'addTag') {\r\n                desc = `${this.props.loggedUser.fullName} added tag named ${tagName} to ${this.state.task.name} on group - ${this.props.group.name}`\r\n            }\r\n            else if (type === 'removeTag') {\r\n                desc = `${this.props.loggedUser.fullName} removed tag named ${tagName} from ${this.state.task.name} on group - ${this.props.group.name}`\r\n            }\r\n            this.props.onEditTask(this.state.task, this.props.task, desc)\r\n        })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n\r\n        if (!this.state.task) return <h1>Loading...</h1>\r\n        const { name, members, status, priority, dueDate, updates, id } = this.state.task;\r\n        const { isUsersShown, isStatusShown, isPriorityShown, isUpdatesShown, isTagsShown } = this.state\r\n\r\n        return (\r\n            <React.Fragment>\r\n                {isUpdatesShown &&\r\n                    <div className={`${isUpdatesShown && 'animate-side-modal'} side-modal`}>\r\n                        <Updates task={this.state.task} updates={updates} members={members} priority={priority} status={status} dueDate={dueDate}\r\n                            loggedUser={this.props.loggedUser} users={this.props.users}\r\n                            sendNote={this.sendNote} handleChange={this.handleChange} handleDateChange={this.handleDateChange} onEditTags={this.onEditTags}\r\n                            onEditTask={this.props.onEditTask} closeModal={this.closeModal}\r\n                        />\r\n                    </div>\r\n                }\r\n\r\n\r\n                {(isUsersShown || isStatusShown || isPriorityShown || isUpdatesShown || isTagsShown) && <div className=\"modal-screen-wrapper\" onClick={this.closeModal}></div>}\r\n                <Draggable draggableId={id} index={this.props.index}>\r\n                    {(provided, snapshot) => (\r\n                        <section key={id} className={`task flex space-between align-center ${snapshot.isDragging ? 'drag' : ''}`}\r\n                            {...provided.draggableProps}\r\n                            {...provided.dragHandleProps}\r\n                            ref={provided.innerRef}\r\n                        >\r\n\r\n                            <div className=\"task-left flex align-center\">\r\n                                <div className=\"task-color-remove\">\r\n                                    <div style={{ backgroundColor: this.props.group.color }} className=\"task-color\"></div>\r\n                                    <div className='icon-container'>\r\n                                        <MdDelete className=\"task-remove-icon\" onClick={() => { this.props.onRemoveTask(id, this.props.group) }} />\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <div className=\"task-title-updates flex align-center space-between grow\">\r\n                                    <h2>\r\n                                        <ContentEditable\r\n                                            onFocus={this.focusText}\r\n                                            className=\"cursor-initial content-editable\"\r\n                                            innerRef={this.contentEditable}\r\n                                            html={name}\r\n                                            disabled={false}\r\n                                            onChange={this.handleNameChange}\r\n                                            onBlur={() => {\r\n                                                const desc = `${this.props.loggedUser.fullName} changed task name from ${this.state.task.name} to ${name} at group - ${this.props.group.name}`\r\n\r\n                                                this.props.onEditTask(this.state.task, this.props.task, desc)\r\n                                            }}\r\n                                            onKeyDown={(ev) => {\r\n                                                if (ev.key === 'Enter') {\r\n                                                    ev.target.blur()\r\n                                                }\r\n                                            }}\r\n                                        />\r\n                                    </h2>\r\n\r\n\r\n                                    <div onClick={() => this.openModal('updates')} className=\"notes-container relative grow\"><BsChatDots />\r\n                                        {(updates.length !== 0) && <div className=\"task-number-of-imgs flex justify-center align-center\"><span>{updates.length}</span></div>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"task-right flex align-center\">\r\n                                <Members members={members} users={this.props.users} isUsersShown={isUsersShown}\r\n                                    openModal={this.openModal} goToUserProfile={this.goToUserProfile} onAddUserToTask={this.onAddUserToTask}\r\n                                    onRemoveMemberFromTask={this.onRemoveMemberFromTask} />\r\n\r\n                                <Status status={status} isStatusShown={isStatusShown}\r\n                                    handleChange={this.handleChange} openModal={this.openModal} />\r\n\r\n                                <Date dueDate={dueDate} handleDateChange={this.handleDateChange} />\r\n\r\n                                <Priority priority={priority} isPriorityShown={isPriorityShown}\r\n                                    openModal={this.openModal} handleChange={this.handleChange} />\r\n\r\n                                <Tags handleChange={this.handleChange} onEditTags={this.onEditTags}\r\n                                    task={this.state.task} isTagsShown={isTagsShown}\r\n                                    openModal={this.openModal} handleChange={this.handleChange} />\r\n\r\n\r\n\r\n                            </div>\r\n                        </section>\r\n\r\n                    )}\r\n                </Draggable>\r\n                {this.state.isImageModalShown &&\r\n                    <div onClick={this.onToggleImageModal} className=\"updates-image-modal\">\r\n                        <img src={this.state.imgUrl} />\r\n                    </div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\n\r\n\r\nexport const Task = connect(mapStateToProps)(withRouter(_Task));","import React, { Component } from 'react';\r\nimport { Task } from './Task'\r\nimport { Droppable, Draggable } from 'react-beautiful-dnd';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\n//Material ui\r\nimport { IoIosArrowDropdownCircle } from 'react-icons/io'\r\nimport { AiOutlineDelete, AiOutlineDrag } from 'react-icons/ai'\r\n\r\nimport ContentEditable from 'react-contenteditable';\r\nimport { CgColorPicker } from 'react-icons/cg';\r\nimport socketService from '../services/socketService.js'\r\n\r\n\r\nexport class Group extends Component {\r\n\r\n    state = {\r\n        id: '',\r\n        ElGroupSettings: null,\r\n        elGroupColors: false,\r\n    }\r\n\r\n    reloadProps = () => {\r\n        this.setState({ ...this.state, name: this.props.group.name })\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.elInputAdd = React.createRef();\r\n        this.contentEditable = React.createRef();\r\n        socketService.on('updatedBoard', this.reloadProps)\r\n        this.setState({ ...this.state, name: this.props.group.name, id: this.props.group.id })\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        socketService.off('updatedBoard', this.reloadProps)\r\n    }\r\n\r\n    handleChange = (ev) => {\r\n        this.setState({ name: ev.target.value });\r\n    }\r\n\r\n    focusText = () => {\r\n        setTimeout(() => {\r\n            document.execCommand('selectAll', false, null)\r\n        }, 0)\r\n    }\r\n\r\n    handleMenuOpen = (ev) => {\r\n        this.setState({ ElGroupSettings: ev.currentTarget })\r\n    }\r\n\r\n    handleMenuClose = () => {\r\n        this.setState({ ElGroupSettings: null, elGroupColors: false })\r\n    }\r\n\r\n    handleColorsOpen = (ev) => {\r\n        this.setState({ elGroupColors: ev.currentTarget })\r\n    }\r\n\r\n    handleColorsToggle = () => {\r\n        this.setState({ elGroupColors: !this.state.elGroupColors })\r\n    }\r\n\r\n    onChangeGroupColor = (color) => {\r\n        try {\r\n            this.props.onEditGroup(this.props.group.id, color, 'color')\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.setState({ ElGroupSettings: null, elGroupColors: false })\r\n    }\r\n\r\n    convertToBar(property) {\r\n        const { tasks } = this.props.group;\r\n        const taskCount = tasks.length;\r\n        const percent = tasks.length / 100;\r\n        const data = tasks.reduce((acc, task) => {\r\n            const value = task[property]\r\n            acc[value] = acc[value] ? ++acc[value] : 1; \r\n            return acc;\r\n        }, {})\r\n        const res = [];\r\n        for (let key in data) {\r\n            data[key] /= percent;\r\n            res.push(<div key={key} style={{ width: data[key] ? `${data[key]}%` : '0' }}\r\n                data-title={data[key] ? ` ${key} ${taskCount * data[key] / 100}/${taskCount} ${data[key].toFixed(1)}%` : ''}\r\n                className={`precent-bar ${key.toLowerCase()}`}></div>)\r\n        }\r\n        return res;\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.id) return <h1>Loading...</h1>\r\n        const priority = this.convertToBar('priority')\r\n        const status = this.convertToBar('status')\r\n        const { name, ElGroupSettings, elGroupColors } = this.state;\r\n        const { group, index } = this.props;\r\n        return (\r\n            <Draggable draggableId={group.id} index={index}>\r\n                {(provided, snapshot) =>\r\n                    <section key={group.id} className={`group ${window.innerWidth > 450 ? 'padding-y-45 padding-x-30' : 'padding-y-15'}`}\r\n                        {...provided.draggableProps}\r\n\r\n                        ref={provided.innerRef}>\r\n                        <div className=\"group-header-container flex space-between align-center\">\r\n                            <div className=\"group-header-left align-center flex relative\">\r\n\r\n                                <IoIosArrowDropdownCircle style={{ color: group.color }}\r\n                                    className=\"drop-down-menu-icon\" onClick={this.handleMenuOpen} />\r\n                                <Menu\r\n                                    role=\"menuContainer\"\r\n                                    anchorEl={ElGroupSettings}\r\n                                    keepMounted\r\n                                    open={Boolean(ElGroupSettings)}\r\n                                    onClose={this.handleMenuClose}\r\n                                >\r\n                                    <MenuItem onClick={() => {\r\n                                        this.props.onRemoveGroup(group.id)\r\n                                    }}>\r\n                                        <AiOutlineDelete className=\"delete-group-icon\" /> Delete Group\r\n                                    </MenuItem>\r\n                                    <MenuItem onClick={this.handleColorsToggle}>\r\n                                        <CgColorPicker className=\"color-group-icon\" /> Change Color\r\n\r\n                                    </MenuItem>\r\n\r\n                                </Menu>\r\n                                {elGroupColors &&\r\n                                    <div className=\"color-picker absolute flex wrap justify-center align-center\">\r\n                                        <div onClick={() => this.onChangeGroupColor('#ffcbcb')} className=\"color-pick\" style={{ backgroundColor: '#ffcbcb' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#f0a500')} className=\"color-pick\" style={{ backgroundColor: '#f0a500' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#70adb5')} className=\"color-pick\" style={{ backgroundColor: '#70adb5' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#1a1c20')} className=\"color-pick\" style={{ backgroundColor: '#1a1c20' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#9d65c9')} className=\"color-pick\" style={{ backgroundColor: '#9d65c9' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#931a25')} className=\"color-pick\" style={{ backgroundColor: '#931a25' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#7ea04d')} className=\"color-pick\" style={{ backgroundColor: '#7ea04d' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#838383')} className=\"color-pick\" style={{ backgroundColor: '#838383' }}></div>\r\n                                        <div onClick={() => this.onChangeGroupColor('#1d2d50')} className=\"color-pick\" style={{ backgroundColor: '#1d2d50' }}></div>\r\n                                    </div>\r\n                                }\r\n                                <div className=\"drag-icon\" {...provided.dragHandleProps}>\r\n                                    <AiOutlineDrag />\r\n                                </div>\r\n\r\n\r\n                                <h1 style={{ color: group.color }} className=\"group-title\">\r\n                                    <ContentEditable\r\n                                        onFocus={this.focusText}\r\n                                        className=\"content-editable cursor-initial\"\r\n                                        innerRef={this.contentEditable}\r\n                                        html={name} // innerHTML of the editable div\r\n                                        disabled={false}       // use true to disable editing\r\n                                        onChange={this.handleChange} // handle innerHTML change\r\n                                        onBlur={() => {\r\n                                            this.props.onEditGroup(group.id, this.state.name, 'name')\r\n                                        }}\r\n                                        onKeyDown={(ev) => {\r\n                                            if (ev.key === 'Enter') {\r\n                                                ev.target.blur()\r\n                                            }\r\n                                        }}\r\n                                    />\r\n                                </h1>\r\n                            </div>\r\n                            <div className=\"group-header-right flex\"  {...provided.dragHandleProps}>\r\n                             \r\n                                    <h3 style={{ color: this.props.group.color }}>Members</h3>\r\n\r\n                                <h3 style={{ color: this.props.group.color }}>Status</h3>\r\n                              \r\n                                    <h3 style={{ color: this.props.group.color }}>Due-Date</h3>\r\n                               \r\n                                    <h3 style={{ color: this.props.group.color }}>Priority</h3>\r\n                                \r\n                                    <h3 style={{ color: this.props.group.color }}>Tags</h3>\r\n\r\n\r\n\r\n                            </div>\r\n                        </div>\r\n\r\n                        <Droppable droppableId={group.id} type=\"task\">\r\n                            {(provided, snapshot) =>\r\n                                <div className={`task-list ${snapshot.isDraggingOver ? 'drag-over' : ''}`}\r\n                                    ref={provided.innerRef}\r\n                                    {...provided.droppableProps}\r\n                                >\r\n                                    {group.tasks.map((task, index) => {\r\n                                        return <Task onToggleUpdates={this.props.onToggleUpdates}\r\n                                            onEditTask={this.props.onEditTask} index={index}\r\n                                            onRemoveTask={this.props.onRemoveTask} key={task.id}\r\n                                            group={group} task={task} users={this.props.users} />\r\n                                    })}\r\n                                    {provided.placeholder}\r\n\r\n                                </div>\r\n                            }\r\n                        </Droppable>\r\n\r\n                        <div className=\"task task-add\">\r\n                            <div className=\"task-color\" style={{ backgroundColor: group.color }}></div>\r\n                            <form onSubmit={(ev) => {\r\n                                ev.preventDefault()\r\n                                this.props.onAddTask(group.id, this.elInputAdd.current.value)\r\n                                this.elInputAdd.current.value = ''\r\n                            }} action=\"\">\r\n                                <input ref={this.elInputAdd} className=\"padding-x-30\" placeholder=\"+ Add Task\" type=\"text\" />\r\n                            </form>\r\n                        </div>\r\n                        {window.innerWidth > 450 &&\r\n                            <section className=\"group-precent-container flex\">\r\n                                <div className=\"group-precent flex\">\r\n                                    {status}\r\n                                </div>\r\n                                <div className=\"group-precent flex\">\r\n                                    {priority}\r\n                                </div>\r\n                            </section>\r\n                        }\r\n\r\n                    </section>\r\n                }\r\n            </Draggable>\r\n        )\r\n    }\r\n\r\n} ","import { Snackbar, Button } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { hideSnackbar } from '../store/actions/systemActions.js';\r\n\r\nfunction _Popup(props){\r\n    const {isSnackbarShown, snackbarShown} = props;\r\n    return <Snackbar\r\n    anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'left',\r\n    }}\r\n    open={isSnackbarShown}\r\n    autoHideDuration={3000}\r\n    message={snackbarShown}\r\n    action={<Button style={{color: '#f2f1dfb0'}} onClick={props.hideSnackbar}>Close</Button>}\r\n/>\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        isSnackbarShown: state.systemReducer.isSnackbarShown,\r\n        snackbarShown: state.systemReducer.snackbarTxt\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    hideSnackbar\r\n}\r\n\r\nexport const Popup = connect(mapStateToProps, mapDispatchToProps)(_Popup)","import React from 'react'\r\nimport { NavLink } from 'react-router-dom';\r\nimport { GiHamburgerMenu } from 'react-icons/gi'\r\nimport { CgProfile } from 'react-icons/cg';\r\nimport { BiLogOut } from 'react-icons/bi';\r\nimport { FaRegUser } from 'react-icons/fa';\r\nimport { BsCalendar, BsCardList } from 'react-icons/bs';\r\nimport { MdNotificationsActive } from 'react-icons/md';\r\nimport { AiOutlineHome } from 'react-icons/ai';\r\n\r\n\r\nexport class MobileNav extends React.Component {\r\n\r\n    state = {\r\n        isMenuShown: false\r\n    }\r\n\r\n    toggleMenuModal = () => {\r\n        this.setState({ isMenuShown: !this.state.isMenuShown })\r\n    }\r\n\r\n    closeMenuModal = () => {\r\n        this.setState({ isMenuShown: false })\r\n    }\r\n\r\n    render() {\r\n        console.log('props id:', this.props)\r\n        const { loggedUser, params, members, boardName } = this.props\r\n        return (\r\n            <React.Fragment>\r\n                <nav className=\" flex align-center space-between\">\r\n                    <div className=\"mobile-nav-left flex\">\r\n\r\n                    <GiHamburgerMenu onClick={this.toggleMenuModal} />\r\n                    <h1>{boardName ? boardName : loggedUser.fullName}</h1>\r\n                    </div>\r\n\r\n                    {boardName &&\r\n                        <div className=\"board-users-container flex\">\r\n\r\n                            {members.length === 0 && <div className=\"user-img-container\"> <CgProfile /></div>}\r\n                            {members.length !== 0 && members.map((member, idx) => {\r\n                                return <div key={idx} className=\"user-img-container\">\r\n                                    {\r\n                                        member.imgUrl ? <img className=\"member-img\" src={member.imgUrl} alt=\"\" />\r\n                                            :\r\n                                            <img src=\"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg\" />\r\n\r\n                                    }\r\n                                </div>\r\n                            })}\r\n                        </div>\r\n                    }\r\n\r\n\r\n                </nav>\r\n                <section className={`${this.state.isMenuShown && 'animate-menu-modal'} menu-modal flex column align-center`}>\r\n                    <NavLink to=\"/\">\r\n                        <AiOutlineHome />  <h3>Home</h3>\r\n                    </NavLink>\r\n                    <NavLink to=\"/boards\">\r\n                        <BsCardList /> <h3>Boards List</h3>\r\n                    </NavLink>\r\n                    {params && <NavLink to={`/mob-activities/${params.id}`}>\r\n                        <MdNotificationsActive /> <h3>Activities</h3>\r\n                    </NavLink>}\r\n                    <NavLink to=\"/myweek\">\r\n                        <BsCalendar /> <h3>My Week</h3>\r\n                    </NavLink>\r\n                    <NavLink to={`/user/${loggedUser._id}`}>\r\n                        <FaRegUser /> <h3>My Profile</h3>\r\n                    </NavLink>\r\n                    <NavLink to=\"/login\">\r\n                        <BiLogOut /> <h3>Logout</h3>\r\n                    </NavLink>\r\n                </section>\r\n                {this.state.isMenuShown && <div className=\"modal-screen-wrapper\" onClick={this.closeMenuModal}></div>}\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { DragDropContext, Droppable } from 'react-beautiful-dnd';\r\nimport { Boardbar } from '../cmps/Boardbar';\r\nimport { BoardHeader } from '../cmps/BoardHeader';\r\nimport { Navbar } from '../cmps/Navbar';\r\nimport { Group } from '../cmps/Group';\r\nimport { Popup } from '../cmps/Popup'\r\nimport { showSnackbar, hideSnackbar } from '../store/actions/systemActions.js';\r\nimport { userService } from '../services/userService.js';\r\nimport lodash from 'lodash'\r\n// Reducers funcs\r\nimport { loadUsers } from '../store/actions/userActions'\r\nimport {\r\n    updateBoard, loadBoards,   //BOARD\r\n    addGroup, editGroup, removeGroup, //GROUP\r\n    addTask, removeTask, editTask,  //TASK\r\n    clearFilter //FILTER\r\n}\r\n    from '../store/actions/boardActions'\r\nimport { groupChanges } from '../store/actions/changesActions'\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\nimport { BsFillPlusCircleFill } from 'react-icons/bs';\r\n\r\n\r\nclass _Board extends Component {\r\n\r\n    state = {\r\n        boardId: '',\r\n        txt: ''\r\n    }\r\n\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            if (!this.props.boards || !this.props.boards.length) {\r\n                await this.props.loadBoards();\r\n                try {\r\n                    if (!this.props.users || !this.props.users.length) {\r\n                        await this.props.loadUsers();\r\n                    }\r\n                } catch (err) {\r\n                    console.log('Error', err)\r\n                }\r\n            }\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.setState({ boardId: this.props.match.params.id })\r\n    }\r\n\r\n    displayPopup(msg) {\r\n        console.log('showing popup:', msg);\r\n        this.props.showSnackbar(msg)\r\n        setTimeout(this.props.hideSnackbar, 3000)\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (prevProps.match.params.id !== this.props.match.params.id) {\r\n            this.props.clearFilter();\r\n            this.setState({ boardId: this.props.match.params.id })\r\n        }\r\n    }\r\n\r\n    onEditBoard = async (newBoard, desc) => {\r\n        const { loggedUser } = this.props;\r\n\r\n        this.props.updateBoard(newBoard, desc, loggedUser)\r\n        userService.notifyUsers(`${newBoard.name}: ${desc}`, newBoard.members, loggedUser)\r\n        if (desc) this.displayPopup('Updated board.')\r\n\r\n    }\r\n\r\n    applyFilter = (board, filterBy) => {\r\n\r\n\r\n        const filteredBoard = JSON.parse(JSON.stringify(board))\r\n        if (filterBy.groupId) {\r\n            filteredBoard.groups = filteredBoard.groups.filter(group => group.id === filterBy.groupId)\r\n        }\r\n        function filterTasks(cb) {\r\n            filteredBoard.groups = filteredBoard.groups.map(group => {\r\n                group.tasks = group.tasks.filter(cb)\r\n                return group;\r\n            })\r\n        }\r\n        if (filterBy.memberId) {\r\n            filterTasks(task => task.members.some(member => member._id === filterBy.memberId))\r\n        }\r\n        if (filterBy.taskPriority) {\r\n            filterTasks(task => task.priority.toLowerCase() === filterBy.taskPriority.toLowerCase())\r\n        }\r\n        if (filterBy.taskStatus) {\r\n            filterTasks(task => task.status.toLowerCase() === filterBy.taskStatus.toLowerCase())\r\n        }\r\n        if (filterBy.dueDate) {\r\n            filterTasks(task => task.dueDate === filterBy.dueDate)\r\n        }\r\n        if (this.state.txt) {\r\n            filterTasks(task => {\r\n                return (\r\n                    task.name.toLowerCase().includes(this.state.txt.toLowerCase())\r\n                    ||\r\n                    task.tags.some(tag => tag.txt.toLowerCase().includes(this.state.txt.toLowerCase()))\r\n                )\r\n\r\n            })\r\n        }\r\n        return filteredBoard\r\n    }\r\n\r\n    //------------------GROUP CRUD-----------------\r\n    onAddGroup = async () => {\r\n        console.log('ADDING GROUP',)\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        try {\r\n            this.props.addGroup(board, this.props.loggedUser);\r\n            userService.notifyUsers(`${board.name}: ${loggedUser.fullName} added a group.`, board.members, loggedUser)\r\n            this.props.clearFilter();\r\n            this.displayPopup('Added group.')\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.props.history.push(`/board/${this.state.boardId}`)\r\n    }\r\n    onRemoveGroup = async (groupId) => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        const group = board.groups.find(group => group.id === groupId);\r\n        const notif = `${board.name}: ${loggedUser.fullName} removed group ${group.name}`;\r\n        try {\r\n            this.props.removeGroup(groupId, board, this.props.loggedUser)\r\n            userService.notifyUsers(notif, board.members, loggedUser);\r\n            this.displayPopup('Removed group.')\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n    onEditGroup = async (groupId, changedValue, key) => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        const group = board.groups.find(group => group.id === groupId)\r\n        if (group[key] === changedValue) return;\r\n        const originalValue = group[key];\r\n        group[key] = changedValue;\r\n        try {\r\n            const desc = `${group.name}: ${loggedUser.fullName} Changed ${key} from ${originalValue} to ${changedValue}`;\r\n            this.props.editGroup(group, board, desc, loggedUser)\r\n            userService.notifyUsers(desc, board.members, loggedUser);\r\n            this.displayPopup('Updated group.')\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n\r\n\r\n    //-----------------TASKS CRUD------------------------\r\n    onRemoveTask = async (taskId, group) => {\r\n        const { loggedUser } = this.props;\r\n        const board = this._getCurrBoard()\r\n        try {\r\n            const task = group.tasks.find(task => task.id === taskId);\r\n            const notif = `${loggedUser.fullName} Removed the task ${task.name} from ${group.name}`;\r\n            this.props.removeTask(taskId, board, group, loggedUser);\r\n            userService.notifyUsers(notif, board.members, loggedUser);\r\n            this.displayPopup('Removed task.');\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n    onAddTask = async (groupId, taskName) => {\r\n        if (!taskName) taskName = 'New task'\r\n\r\n        const { loggedUser } = this.props;\r\n        console.log('user:', loggedUser);\r\n        const board = this._getCurrBoard()\r\n        const group = board.groups.find(group => group.id === groupId)\r\n        const notif = ` ${board.name}: ${loggedUser.fullName} Added a task to ${group.name}`;\r\n        try {\r\n            this.props.addTask(groupId, taskName, board, loggedUser)\r\n            userService.notifyUsers(notif, board.members, loggedUser)\r\n            this.props.clearFilter()\r\n            this.displayPopup('Added task.')\r\n\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n\r\n\r\n\r\n    onEditTask = async (task, prevTask, desc) => {\r\n        if (lodash.isEqual(task, prevTask)) return console.log('same');\r\n\r\n        const board = this._getCurrBoard()\r\n        const { loggedUser } = this.props;\r\n\r\n        this.props.editTask(task, board, desc, this.props.loggedUser)\r\n        userService.notifyUsers(`${board.name}: ${desc}`, board.members, loggedUser)\r\n        this.displayPopup('Updated task.')\r\n\r\n\r\n    }\r\n    //---------------------Draggable----------------------\r\n\r\n    onDragEnd = async result => {\r\n        const { destination, source, draggableId, type } = result\r\n        if (!destination) return;\r\n        if (destination.droppableId === source.droppableId\r\n            &&\r\n            destination.index === source.index) return;\r\n\r\n        const board = this._getCurrBoard()\r\n\r\n        if (type === 'group') {\r\n            const newGroups = Array.from(board.groups)\r\n            const draggedGroup = newGroups.find(group => group.id === draggableId)\r\n            newGroups.splice(source.index, 1)\r\n            newGroups.splice(destination.index, 0, draggedGroup)\r\n            board.groups = newGroups\r\n            try {\r\n                this.props.updateBoard(board)\r\n\r\n            } catch (err) {\r\n                console.log('Error', err);\r\n            }\r\n        } else {\r\n            const groupStart = board.groups.find(group => group.id === source.droppableId)\r\n            const groupEnd = board.groups.find(group => group.id === destination.droppableId)\r\n\r\n            if (groupStart.id === groupEnd.id) {\r\n\r\n                const newTasks = Array.from(groupStart.tasks)\r\n                const newTask = groupStart.tasks.find(task => task.id === draggableId)\r\n\r\n                newTasks.splice(source.index, 1)\r\n                newTasks.splice(destination.index, 0, newTask)\r\n\r\n                const newGroup = {\r\n                    ...groupStart,\r\n                    tasks: newTasks\r\n                }\r\n                const newIdx = board.groups.findIndex(group => group.id === newGroup.id)\r\n                board.groups.splice(newIdx, 1, newGroup)\r\n                try {\r\n                    this.props.updateBoard(board)\r\n\r\n\r\n                } catch (err) {\r\n                    console.log('Error', err);\r\n                }\r\n            } else {\r\n\r\n                const startTasks = Array.from(groupStart.tasks)\r\n                startTasks.splice(source.index, 1)\r\n                const newStartGroup = {\r\n                    ...groupStart,\r\n                    tasks: startTasks\r\n                }\r\n                const endTasks = Array.from(groupEnd.tasks)\r\n                const newTaskToPaste = groupStart.tasks.find(task => task.id === draggableId)\r\n                endTasks.splice(destination.index, 0, newTaskToPaste)\r\n                const newFinishGroup = {\r\n                    ...groupEnd,\r\n                    tasks: endTasks\r\n                }\r\n\r\n                const startIdx = board.groups.findIndex(group => group.id === newStartGroup.id)\r\n                const endIdx = board.groups.findIndex(group => group.id === newFinishGroup.id)\r\n\r\n                board.groups.splice(startIdx, 1, newStartGroup)\r\n                board.groups.splice(endIdx, 1, newFinishGroup)\r\n                try {\r\n                    const { loggedUser } = this.props;\r\n                    const desc = `${loggedUser.fullName} Moved ${newTaskToPaste.name} from ${newStartGroup.name} to ${newFinishGroup.name}`\r\n                    this.props.updateBoard(this._getCurrBoard(), desc, loggedUser)\r\n                    userService.notifyUsers(`${board.name}: ${desc}`, board.members, loggedUser)\r\n\r\n                } catch (err) {\r\n                    console.log('Error', err);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleSearch = (ev) => {\r\n        this.setState({ txt: ev.target.value })\r\n    }\r\n    handleBoardBarSearch = (val) => {\r\n        this.setState({ boardBarSearch: val })\r\n    }\r\n\r\n    _getCurrBoard = () => {\r\n\r\n        return this.props.boards.find(board => board._id === this.state.boardId)\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        const board = this._getCurrBoard()\r\n        const { users, filterBy } = this.props;\r\n        if (!board) {\r\n            return (\r\n                <div className=\"loader-container flex justify-center align-center\">\r\n                    <img src=\"loading.gif\" />\r\n                </div>\r\n            )\r\n        }\r\n\r\n        console.log('SHOW ME PARAMS FROM BOARD', this.props.match.params)\r\n        const filteredBoard = this.applyFilter(board, filterBy);\r\n        return (\r\n            <section className={`board ${window.innerWidth > 450 ? 'flex' : 'flex column'}`}>\r\n                {window.innerWidth > 450 ?\r\n                    <React.Fragment>\r\n                        <Navbar />\r\n                        <Boardbar handleBoardBarSearch={this.handleBoardBarSearch} />\r\n                    </React.Fragment>\r\n                    :\r\n                    <MobileNav boardName={board.name} members={board.members} params={this.props.match.params} loggedUser={this.props.loggedUser} />\r\n                }\r\n                <div className=\"board-container\">\r\n                    {window.innerWidth > 450 && <BoardHeader filterBy={filterBy} loggedUser={this.props.loggedUser} board={board} onAddGroup={this.onAddGroup} onEditBoard={this.onEditBoard}\r\n                        handleSearch={this.handleSearch} users={users} />}\r\n                    <div className={`groups-container ${window.innerwidth > 450 && 'padding-x-30'}`} style={{ height: `${window.innerWidth < 450 && 94 + 'vh'}` }}>\r\n                        <DragDropContext\r\n                            onDragEnd={this.onDragEnd}\r\n                        >\r\n                            <Droppable droppableId={board._id} type=\"group\">\r\n                                {(provided, snapshot) =>\r\n                                    <div className={`group-list`}\r\n                                        ref={provided.innerRef}\r\n                                        {...provided.droppableProps}>\r\n                                        {filteredBoard.groups.map((group, index) => {\r\n                                            return <Group key={group.id} index={index}\r\n                                                onEditTask={this.onEditTask} onAddTask={this.onAddTask} onRemoveTask={this.onRemoveTask}\r\n                                                onRemoveGroup={this.onRemoveGroup} onEditGroup={this.onEditGroup}\r\n                                                onChangeGroupColor={this.onChangeGroupColor} group={group} users={board.members} />\r\n                                        })}\r\n                                    </div>\r\n                                }\r\n                            </Droppable>\r\n                        </DragDropContext>\r\n                        {window.innerWidth < 450 && \r\n                        <BsFillPlusCircleFill className=\"group-add-btn\" onClick={this.onAddGroup} />\r\n                        }\r\n                        \r\n                    </div>\r\n                </div>\r\n                <Popup />\r\n            </section>\r\n        )\r\n    }\r\n}\r\n\r\n\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        users: state.userReducer.users,\r\n        loggedUser: state.userReducer.loggedUser,\r\n        filterBy: state.boardReducer.filterBy\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    addGroup,\r\n    removeGroup,\r\n    addTask,\r\n    removeTask,\r\n    editTask,\r\n    editGroup,\r\n    updateBoard,\r\n    showSnackbar,\r\n    hideSnackbar,\r\n    loadUsers,\r\n    clearFilter,\r\n    groupChanges\r\n}\r\n\r\nexport const Board = connect(mapStateToProps, mapDispatchToProps)(_Board);","import { boardService } from '../../services/boardService'\r\nimport socketService from '../../services/socketService.js'\r\nimport { userService } from '../../services/userService.js'\r\n\r\nexport function groupChanges(desc, loggedUser, board) {\r\n    return async dispatch => {\r\n        try {\r\n            const updatedBoard = boardService.handleBoardChanges(desc, loggedUser, board)\r\n            dispatch({ type: 'SET_BOARD', board: updatedBoard })\r\n\r\n            const users = await userService.loadUsers();\r\n            const notification = {\r\n                byUser: {\r\n                    fullName: loggedUser.fullName,\r\n                    imgUrl: loggedUser.imgUrl\r\n                },\r\n                content: `${board.name}: ${desc}`,\r\n                createdAt: Date.now()\r\n            }\r\n            board.members.forEach(member => {\r\n                if (member._id === loggedUser._id) return;\r\n                let userToUpdate = users.find(user => user._id === member._id);\r\n                userToUpdate.notifications.unshift(notification);\r\n                userService.updateUser(userToUpdate);\r\n                socketService.emit('send-notif', { memberId: member._id, notification });\r\n            })\r\n\r\n        } catch (err) {\r\n            console.log('boardActions: Couldn\\'t send activities/notif');\r\n            throw err;\r\n        }\r\n    }\r\n}\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { BsFillPlusCircleFill, } from 'react-icons/bs';\r\n\r\n\r\nimport { loadUsers } from '../store/actions/userActions';\r\nimport { addBoard, loadBoards } from '../store/actions/boardActions.js';\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\n\r\nclass _Boards extends Component {\r\n\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            if (!this.props.boards || !this.props.boards.length) {\r\n                await this.props.loadBoards();\r\n                try {\r\n                    if (!this.props.users || !this.props.users.length) {\r\n                        await this.props.loadUsers();\r\n                    }\r\n                } catch (err) {\r\n                    console.log('Error', err)\r\n                }\r\n            }\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n    }\r\n\r\n    goToBoard = (boardId) => {\r\n        this.props.history.push(`/board/${boardId}`)\r\n    }\r\n\r\n\r\n    onAddBoard = () => {\r\n        this.props.addBoard(this.props.loggedUser)\r\n    }\r\n\r\n    render() {\r\n        if (this.props.boards.length === 0) return <h1>Loading...</h1>\r\n        return (\r\n            <React.Fragment>\r\n                <MobileNav loggedUser={this.props.loggedUser} />\r\n                <div className=\"boards-list flex column align-center relative\">\r\n                    {this.props.boards.map(board =>\r\n                        <div key={board._id} className=\"board-details flex column\" onClick={() => this.goToBoard(board._id)}>\r\n                            <div className=\"board-details-header flex  space-between\">\r\n                                <h2>{board.name}</h2>\r\n                                <div className=\"board-members-imgs\">\r\n                                    {board.members.map(member => <img className=\"member-img\" key={member._id} src={member.imgUrl} alt=\"\" />)}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"board-details-main flex column wrap\">\r\n                                {board.groups.map(group => <p style={{ color: group.color }} key={group.id}>{group.name}</p>)}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                    <BsFillPlusCircleFill onClick={this.onAddBoard} />\r\n                </div>\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        users: state.userReducer.users,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    addBoard,\r\n    loadUsers\r\n}\r\n\r\nexport const Boards = connect(mapStateToProps, mapDispatchToProps)(_Boards);","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { FaArrowLeft, FaUserCircle } from 'react-icons/fa';\r\nimport FacebookLogin from 'react-facebook-login'\r\n\r\nimport { login, guestLogin } from '../store/actions/userActions.js'\r\nimport { loadBoards } from '../store/actions/boardActions'\r\n\r\nclass _Login extends Component {\r\n\r\n    componentDidMount() {\r\n        this.props.loadBoards()\r\n    }\r\n\r\n    onLogin = async (values, { resetForm }) => {\r\n        resetForm();\r\n        await this.props.login(values);\r\n        if (this.props.loggedUser) this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n\r\n    onGuestLogin = async () => {\r\n        await this.props.guestLogin();\r\n        this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n\r\n    responseFacebook = (response) => {\r\n        console.log(response);\r\n      }\r\n\r\n    render() {\r\n        const initialValues = { username: '', password: '' }\r\n        return <div className=\"sign-login\">\r\n            <Formik\r\n                initialValues={initialValues}\r\n\r\n                validate={formValues => {\r\n                    const errors = {};\r\n                    if (!formValues.username) errors.username = 'Required';\r\n                    if (!formValues.password) errors.password = 'Required';\r\n                    return errors;\r\n                }}\r\n                onSubmit={this.onLogin}\r\n            >\r\n                <Form className=\"sign-login-form flex column align-center space-around\">\r\n                    <FaUserCircle />\r\n                    <section>\r\n                        <legend>Username *</legend>\r\n                        <Field className=\"sign-login-input\" type=\"text\" name=\"username\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"email\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Password *</legend>\r\n                        <Field className=\"sign-login-input\" type=\"password\" name=\"password\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"password\" component=\"span\" />\r\n                    <button type=\"submit\">Login</button>\r\n                    <FacebookLogin\r\n                        appId=\"1088597931155576\"\r\n                        size=\"small\"\r\n                        fields=\"name,email,picture\"\r\n                        // onClick={this.onLogin}\r\n                        callback={this.responseFacebook} />\r\n                    <a href=\"/#/signup\">Don't have an account? sign up here.</a>\r\n                    <button className=\"guest-button\" onClick={this.onGuestLogin}>Or try as a guest!</button>\r\n                </Form>\r\n            </Formik>\r\n            \r\n            <div data-title=\"Back to home\" className=\"go-back\">\r\n                <NavLink to=\"/\"><FaArrowLeft /></NavLink>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser,\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    login,\r\n    guestLogin,\r\n    loadBoards\r\n}\r\n\r\nexport const Login = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Login));","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavLink, withRouter } from 'react-router-dom';\r\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\r\nimport { FaArrowLeft, FaUserCircle } from 'react-icons/fa';\r\nimport { signup, guestLogin } from '../store/actions/userActions.js'\r\n\r\nimport { loadBoards } from '../store/actions/boardActions'\r\n\r\nclass _Signup extends Component {\r\n\r\n    componentDidMount() {\r\n        // if(this.props.loggedUser)   this.props.history.push('/board/123')\r\n        this.props.loadBoards()\r\n    }\r\n\r\n    onSignup = async (values, { resetForm }) => {\r\n        resetForm();\r\n        const { username, password, email, fullName } = values;\r\n        try {\r\n            await this.props.signup({ username, password, email, fullName });\r\n            this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n        } catch (err) {\r\n            console.log('Signup: Couldn\\'t sign up');\r\n            throw err;\r\n        }\r\n    }\r\n\r\n    onGuestLogin = async () => {\r\n        await this.props.guestLogin();\r\n        this.props.history.push(`/board/${this.props.boards[0]._id}`)\r\n    }\r\n\r\n    render() {\r\n        const initialValues = { username: '', password: '', confirm: '', email: '', fullName: '' }\r\n        return <div className=\"sign-login\">\r\n            <Formik\r\n                initialValues={initialValues}\r\n\r\n                validate={formValues => {\r\n                    const errors = {};\r\n                    const re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n                    if (!formValues.username) errors.username = 'Required';\r\n                    if (!formValues.fullName) errors.fullName = 'Required';\r\n                    if (!formValues.password) errors.password = 'Required';\r\n                    if (formValues.confirm !== formValues.password) errors.confirm = 'Doesn\\'t match password';\r\n                    if (!re.test(formValues.email.toLowerCase())) errors.email = 'Invalid email address'\r\n                    return errors;\r\n                }}\r\n                onSubmit={this.onSignup}\r\n            >\r\n                <Form className=\"sign-login-form flex column align-center space-around\">\r\n                    <FaUserCircle />\r\n                    <section>\r\n                        <legend>Username *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"text\" name=\"username\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"username\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Full name *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"text\" name=\"fullName\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"fullName\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Email *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"text\" name=\"email\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"email\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Password *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"password\" name=\"password\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"password\" component=\"span\" />\r\n                    <section>\r\n                        <legend>Confirm password *</legend>\r\n                        <Field autoComplete=\"something\" className=\"sign-login-input\" type=\"password\" name=\"confirm\" />\r\n                    </section>\r\n                    <ErrorMessage name=\"confirm\" component=\"span\" />\r\n                    <button type=\"submit\">Signup</button>\r\n                    <a href=\"/#/login\">Already have an account? Login here!</a>\r\n                    <button className=\"guest-button\" onClick={this.onGuestLogin}>Or try as a guest!</button>\r\n                </Form>\r\n            </Formik>\r\n            <div data-title=\"Back to home\" className=\"go-back\">\r\n                <NavLink to=\"/\"><FaArrowLeft /></NavLink>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        loggedUser: state.userReducer.loggedUser,\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    signup,\r\n    guestLogin,\r\n    loadBoards\r\n}\r\n\r\nexport const Signup = connect(mapStateToProps, mapDispatchToProps)(withRouter(_Signup));","\r\nimport React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Fade } from '@material-ui/core';\r\nimport { Boardbar } from '../cmps/Boardbar';\r\nimport { Navbar } from '../cmps/Navbar';\r\nimport { loadBoards } from '../store/actions/boardActions';\r\nimport { userService } from '../services/userService.js';\r\nimport { updateUser } from '../store/actions/userActions';\r\nimport { cloudinaryService } from '../services/cloudinaryService';\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\n\r\nclass _UserProfile extends Component {\r\n    state = {\r\n        isModalOpen: false,\r\n        user: {\r\n            _id: '',\r\n            email: '',\r\n            username: '',\r\n            passowrd: '',\r\n            fullName: '',\r\n            imgUrl: '',\r\n        }\r\n    }\r\n\r\n    async componentDidMount() {\r\n        this.props.loadBoards();\r\n        setTimeout(async () => { //for loading extravaganza\r\n            const user = await userService.getUserById(this.props.match.params.id)\r\n            this.setState({ user: { ...user } })\r\n        }, 2000);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps) {\r\n        if (prevProps.match.params.id !== this.props.match.params.id) {\r\n            console.log('IM HERE',)\r\n\r\n            this.setState({ user: {} }, () => {\r\n                setTimeout(async () => { //for loading extravaganza\r\n                    const user = await userService.getUserById(this.props.match.params.id)\r\n                    this.setState({ user: { ...user } })\r\n\r\n                }, 2000)\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    toggleModal = () => {\r\n        this.setState({ isModalOpen: !this.state.isModalOpen })\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        this.setState({ user: { ...this.state.user, [target.name]: target.value } })\r\n    }\r\n\r\n    updateProfile = (ev) => {\r\n        ev.preventDefault()\r\n        this.props.updateUser(this.state.user)\r\n        this.toggleModal()\r\n    }\r\n\r\n\r\n    uploadImg = async (ev) => {\r\n        const res = await cloudinaryService.uploadImg(ev.target.files[0])\r\n        this.setState({ user: { ...this.state.user, imgUrl: res.url } })\r\n    }\r\n\r\n    render() {\r\n        let { email, fullName, username, imgUrl, _id } = this.state.user;\r\n        if (!_id) {\r\n            return (\r\n                <div className=\"loader-container flex justify-center align-center\">\r\n                    <img src='loading.gif' />\r\n                </div>\r\n            )\r\n        }\r\n        const [firstName, lastName] = fullName.split(' ');\r\n        let initials = firstName.charAt(0).toUpperCase();\r\n        if (lastName) initials += lastName.charAt(0).toUpperCase()\r\n        const guestId = '5f6efc73805dbf6054d58794';\r\n\r\n        const { loggedUser } = this.props\r\n        console.log('loggedUser id:', loggedUser._id);\r\n        console.log('guest id:', guestId);\r\n        return (\r\n\r\n                <section className={`user-profile flex ${window.innerWidth<450 && 'column'}`}>\r\n                {window.innerWidth > 450 ?\r\n                    <React.Fragment>\r\n                        <Navbar />\r\n                        <Boardbar />\r\n                    </React.Fragment>\r\n                    : <MobileNav loggedUser={this.props.loggedUser} />\r\n                }\r\n                    <div className=\"user-container relative\">\r\n                        <header className=\"header-container padding-x-15 padding-y-15 flex justify-center  align-center\">\r\n                            {imgUrl ? <img className=\"user-profile-big\" src={imgUrl} alt=\"\" /> :\r\n                                <div className=\"user-profile-big flex align-center justify-center\">{initials}</div>}\r\n                        </header>\r\n\r\n                        <div className=\"user-details-container padding-x-30 padding-y-45 align-center  flex column\">\r\n                            {(loggedUser._id === _id && loggedUser._id !== guestId) ? <h2 onClick={this.toggleModal}\r\n                                className=\"clickable-header\">Edit Profile</h2> : ''}\r\n                            <div className=\"user-details-inner-container\">\r\n\r\n                                <h3>Email: <span className=\"span-user-details\">{email}</span></h3>\r\n                                <h3>Full Name: <span className=\"span-user-details\">{fullName}</span></h3>\r\n                                <h3>Username: <span className=\"span-user-details\">{username}</span> </h3>\r\n                            </div>\r\n                        </div>\r\n                        {/* Modal */}\r\n                        <Fade in={this.state.isModalOpen}>\r\n                            <div className=\"modal-screen flex justify-center align-center\">\r\n                                <div className=\"modal-container absolute\">\r\n\r\n                                    <div className=\"user-modal-header padding-x-15 padding-y-15 flex justify-center align-center\">\r\n\r\n\r\n                                        <label> {this.state.user.imgUrl ?\r\n                                            <img className=\"user-profile-big\" src={this.state.user.imgUrl} alt=\"profile-img\" />\r\n                                            : <div>{this.props.loggedUser.fullName}</div>}\r\n                                            <input type=\"file\" onChange={this.uploadImg} hidden />\r\n                                        </label>\r\n\r\n                                    </div>\r\n                                    <div className=\"user-modal-main\">\r\n                                        <form className=\"form-container flex justify-center column  align-center\" onSubmit={this.updateProfile}>\r\n                                            <input value={this.state.user.email} onChange={this.handleChange} name=\"email\" placeholder=\"Email\" type=\"email\" />\r\n                                            <input value={this.state.user.username} onChange={this.handleChange} name=\"username\" placeholder=\"Username\" type=\"text\" />\r\n                                            <input value={this.state.user.password} onChange={this.handleChange} name=\"password\" placeholder=\"Password\" type=\"password\" />\r\n                                            <input value={this.state.user.fullName} onChange={this.handleChange} name=\"fullName\" placeholder=\"Full Name\" type=\"text\" />\r\n                                            <button onClick={this.updateProfile}>Save Changes</button>\r\n                                            <button type=\"button\" className=\"secondary-btn\" onClick={this.toggleModal}>Cancel</button>\r\n                                        </form>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </Fade>\r\n\r\n\r\n                    </div>\r\n                </section>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        modal: state.systemReducer.modal,\r\n        loggedUser: state.userReducer.loggedUser,\r\n        boards: state.boardReducer.boards\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    updateUser\r\n}\r\n\r\nexport const UserProfile = connect(mapStateToProps, mapDispatchToProps)(_UserProfile);","import React from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\nimport moment from 'moment';\r\n\r\nfunction _UpcomingTasks(props) {\r\n\r\n    function getDaysFromNow(date) {\r\n        if (moment(date).isAfter(moment().add(1, 'day').endOf('day'))) {\r\n            return moment(date).format('MMM DD')\r\n        }\r\n        return moment(date).isBefore(moment().endOf('day')) ? 'Today' : 'Tomorrow'\r\n    } \r\n\r\n    function moveToUserProfile(userId) {\r\n        props.history.push(`/user/${userId}`)\r\n    }\r\n\r\n    const { tasks, header } = props;\r\n\r\n    return <div className=\"upcoming-tasks\">\r\n        <h2 className=\"tasks-header\">{`${header}: (${tasks.length})`}</h2>\r\n        {tasks.map(task => <div\r\n            key={task.id}\r\n            className=\"task-preview space-between align-center\">\r\n            <div className=\"left-column\">\r\n                <p className=\"task-preview-name\">{task.name}</p>\r\n                <p className=\"task-location\">At: <span onClick={() => props.history.push(`/board/${task.boardId}`)}>{`${task.boardName} > ${task.groupName}`}</span></p>\r\n            </div>\r\n            <section className=\"right-column flex align-center space-between\">\r\n                {/* <div className={`label-box flex align-center ${task.status.toLocaleLowerCase()}`}> <p>{task.status}</p></div> */}\r\n                <div className=\"user-img-container flex justify-center align-center\">\r\n                    {task.members.length !== 0 && (task.members[0].imgUrl ? <img onClick={() => moveToUserProfile(task.members[0]._id)} alt=\"profile\" src={task.members[0].imgUrl} /> :\r\n                        <div onClick={() => moveToUserProfile(task.members[0]._id)} className=\"member-letter\">{task.members[0].fullName.charAt(0).toUpperCase()}</div>)}\r\n                </div>\r\n                <div className=\"deadline-container flex align-center\"  onClick={() => props.history.push(`/board/${task.boardId}`)}>\r\n                    <h2 >{getDaysFromNow(task.dueDate)}</h2>\r\n                </div>\r\n            </section>\r\n        </div>)}\r\n    </div>\r\n}\r\n\r\nexport const UpcomingTasks = withRouter(_UpcomingTasks)","import React, { Component, Fragment } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Boardbar } from '../cmps/Boardbar';\r\nimport { loadBoards } from '../store/actions/boardActions'\r\nimport { Navbar } from '../cmps/Navbar';\r\nimport { MobileNav } from '../mobile-pages/MobileNav';\r\nimport moment from 'moment';\r\nimport { UpcomingTasks } from '../cmps/my-week-cmps/UpcomingTasks';\r\n\r\nclass _MyWeek extends Component {\r\n    state = {\r\n        searchVal: ''\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.props.boards || !this.props.boards.length) {\r\n            this.props.loadBoards();\r\n        }\r\n\r\n    }\r\n\r\n    getUpcomingTasks(maxDaysLeft, minDaysLeft = 0) {\r\n        const tasks = [];\r\n        const { boards, loggedUser } = this.props;\r\n        boards.forEach(board => {\r\n            board.groups.forEach(group => {\r\n                tasks.push(...group.tasks.filter(task => {\r\n                    task.boardId = board._id;\r\n                    task.boardName = board.name;\r\n                    task.groupName = group.name;\r\n                    const belongsToUser = task.members.some(member => member._id === loggedUser._id)\r\n                    const isAfter = minDaysLeft ? moment(task.dueDate).isAfter(moment().add(minDaysLeft, 'days').endOf('day')) : true;\r\n                    return moment(task.dueDate).isBefore(moment().add(maxDaysLeft, 'days').startOf('day'))\r\n                        && isAfter && belongsToUser\r\n                }));\r\n            })\r\n        })\r\n        return tasks;\r\n    }\r\n\r\n\r\n\r\n    handleChange = ({ target }) => {\r\n        this.setState({ searchVal: target.value })\r\n    }\r\n\r\n    applySearch(tasks, searchVal) {\r\n        return tasks.filter(task => task.name.toLowerCase().includes(searchVal.toLowerCase()))\r\n    }\r\n\r\n    render() {\r\n        let todaysTasks = this.getUpcomingTasks(1);\r\n        let upcomingTasks = this.getUpcomingTasks(7, 1);\r\n        const { searchVal } = this.state;\r\n        const firstName = this.props.loggedUser.fullName.split(' ')[0]\r\n        const taskCount = todaysTasks.length + upcomingTasks.length;\r\n        if (searchVal) {\r\n            todaysTasks = this.applySearch(todaysTasks, searchVal)\r\n            upcomingTasks = this.applySearch(upcomingTasks, searchVal)\r\n        }\r\n        return (\r\n            <React.Fragment>\r\n                {window.innerWidth > 450 ?\r\n                    <React.Fragment>\r\n                        <Navbar />\r\n                        <Boardbar />\r\n                    </React.Fragment> \r\n                :\r\n                <MobileNav loggedUser={this.props.loggedUser} />\r\n            }\r\n            <section className=\"my-week flex\">\r\n\r\n\r\n                <div className=\"my-week-container flex column space around\">\r\n                    <div className=\"my-week-header flex column space-around\">\r\n                        <div className=\"flex align-center space-around\">\r\n                            <img src=\"my-week-calendar.png\" alt=\"\" />\r\n                            <section className=\"greeting-container\">\r\n                                <h1>{`Hey ${firstName},`}\r\n                                {taskCount ? `You have ${taskCount} assignments this week.` : 'You have no assignments this week'}</h1>\r\n                            </section>\r\n                        </div>\r\n                    </div>\r\n                    <input className=\"task-search\" onChange={this.handleChange} value={searchVal} type=\"text\" placeholder=\"search\" />\r\n                    {taskCount ?\r\n                        <Fragment>\r\n                            <UpcomingTasks header=\"Today\" tasks={todaysTasks} />\r\n                            <UpcomingTasks header=\"Upcoming\" tasks={upcomingTasks} />\r\n                        </Fragment> :\r\n                        <h1 className=\"no-tasks\">No tasks left for this week</h1>\r\n                    }\r\n                </div>\r\n\r\n\r\n            </section >\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n        loggedUser: state.userReducer.loggedUser\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards\r\n}\r\n\r\nexport const MyWeek = connect(mapStateToProps, mapDispatchToProps)(_MyWeek);","import React, { Component, Fragment } from 'react'\r\nimport moment from 'moment'\r\nimport { AiOutlineClose } from 'react-icons/ai';\r\nimport { Fade } from '@material-ui/core';\r\nimport { VscListFilter } from 'react-icons/vsc';\r\nimport { IoIosArrowDropdown } from 'react-icons/io';\r\nimport { connect } from 'react-redux';\r\nimport { loadBoards, updateBoard } from '../store/actions/boardActions'\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nexport class _mobActivities extends Component {\r\n\r\n    state = {\r\n        isOrderReversed: false,\r\n        isFilterOpen: false,\r\n        filterBy: {},\r\n        searchVal: '',\r\n        isActivitiesShown: true,\r\n        isActivitiesNotReadShown: true\r\n    }\r\n\r\n    async componentDidMount() {\r\n        try {\r\n            if (!this.props.boards || !this.props.boards.length) {\r\n                await this.props.loadBoards();\r\n            }\r\n        } catch (err) {\r\n            console.log('Error', err)\r\n        }\r\n        this.getBoardById(this.props.match.params.id)\r\n    }\r\n\r\n    getBoardById = (id) => {\r\n        const board = this.props.boards.find(board => board._id === id)\r\n        this.setState({ ...this.state, board })\r\n    }\r\n    get activities() {\r\n        const { activityLog } = this.state.board;\r\n        return [activityLog.filter(activity => activity.isRead), activityLog.filter(activity => !activity.isRead)]\r\n    }\r\n\r\n    handleChange = ({ target }) => {\r\n        console.log('Handling change',)\r\n        this.setState({ searchVal: target.value })\r\n    }\r\n\r\n    toggleFilter = () => {\r\n        this.setState({ isFilterOpen: !this.state.isFilterOpen });\r\n    }\r\n\r\n    onSetFilter(key, value) {\r\n        const filterBy = { ...this.state.filterBy }\r\n        if (filterBy[key] === value) value = '';\r\n        this.setState({ filterBy: { ...filterBy, [key]: value } })\r\n    }\r\n\r\n    getActivityDates() {\r\n        const activities = this.state.board.activityLog;\r\n        const dates = activities.reduce((acc, activity) => {\r\n            const date = moment(activity.createdAt).format('DD MMM');\r\n            acc[date] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(dates);\r\n    }\r\n\r\n    getActivityMembers() {\r\n        const activities = this.state.board.activityLog;\r\n        const members = activities.reduce((acc, activity) => {\r\n            acc[activity.byUser.fullName] = '';\r\n            return acc;\r\n        }, {})\r\n        return Object.keys(members)\r\n    }\r\n\r\n    applyFilter(activities) {\r\n        let res = [...activities];\r\n        const { filterBy, searchVal } = this.state;\r\n        if (filterBy.date) res = res.filter(activity => moment(activity.createdAt).format('DD MMM') === filterBy.date);\r\n        if (filterBy.member) res = res.filter(activity => activity.byUser.fullName === filterBy.member)\r\n        if (searchVal) res = res.filter(activity => {\r\n            return activity.desc.toLowerCase().includes(searchVal)\r\n                || activity.byUser.fullName.toLowerCase().includes(searchVal)\r\n        })\r\n        return res;\r\n    }\r\n    toggleActivities = () => {\r\n        this.setState({ isActivitiesShown: !this.state.isActivitiesShown })\r\n\r\n    }\r\n    toggleActivitiesNotRead = () => {\r\n        this.setState({ isActivitiesNotReadShown: !this.state.isActivitiesNotReadShown })\r\n    }\r\n\r\n    onClearLog = () => {\r\n        const board = {\r\n            ...this.state.board,\r\n            activityLog: []\r\n        }\r\n        this.setState({ board }, () => {\r\n            this.props.updateBoard(board)\r\n        })\r\n\r\n    }\r\n\r\n    render() {\r\n        if (!this.state.board) return <h1>Loading...</h1>\r\n        const { isFilterOpen, filterBy, searchVal } = this.state;\r\n        let [activities, activitiesNotRead] = this.activities;\r\n        const dates = this.getActivityDates();\r\n        const members = this.getActivityMembers();\r\n        activities = this.applyFilter(activities)\r\n        activitiesNotRead = this.applyFilter(activitiesNotRead)\r\n        return (\r\n            <section className=\"activities flex column\">\r\n                <header className=\"padding-x-15 padding-y-15\">\r\n\r\n                    <NavLink to={`/board/${this.props.match.params.id}`}>\r\n                        <AiOutlineClose />\r\n                    </NavLink>\r\n\r\n                    <h1><span>{this.props.boardName}</span> Log</h1>\r\n\r\n                    <div className='filters-container space-between flex align-center'>\r\n                        <input value={searchVal} onChange={this.handleChange} type=\"text\" placeholder=\"Search\" />\r\n\r\n                        <div className=\"filter-outer-container flex relative\">\r\n                            <button className=\"flex align-center\" onClick={this.toggleFilter}><VscListFilter /> Filter</button>\r\n                            {isFilterOpen &&\r\n                                <Fragment>\r\n                                    <div className=\"modal-screen-wrapper\" onClick={this.toggleFilter}></div>\r\n                                    <Fade in={true}>\r\n                                        <div className=\"filter-modal flex absolute\">\r\n                                            <section className=\"activity-member-filter\">\r\n                                                <h3>Member</h3>\r\n                                                {members.map((member, idx) => <button\r\n                                                    className={filterBy.member === member ? 'remove-filter-btn' : ''}\r\n                                                    key={idx}\r\n                                                    onClick={() => this.onSetFilter('member', member)}>{member}</button>)}\r\n                                            </section>\r\n                                            <section className=\"activity-date-filter\">\r\n                                                <h3>Date</h3>\r\n                                                <div className=\"filter-list flex justify-center align-center column\">\r\n                                                    {dates.map((date, idx) => <button\r\n                                                        className={filterBy.date === date ? 'remove-filter-btn' : ''}\r\n                                                        key={idx}\r\n                                                        onClick={() => this.onSetFilter('date', date)}>{date}</button>)}\r\n                                                </div>\r\n                                            </section>\r\n                                        </div>\r\n                                    </Fade>\r\n                                </Fragment>\r\n                            }\r\n                            <button onClick={this.onClearLog}>Clear Log</button>\r\n                        </div>\r\n                    </div>\r\n                </header>\r\n                <div className=\"all-activities-container\">\r\n                    {/* Activities which are not read: */}\r\n                    <div className=\"activity-list-not-read column flex  padding-y-15\">\r\n                        <h1 className=\"flex space-between\">\r\n                            New Activities ({activitiesNotRead.length})\r\n                         <IoIosArrowDropdown className={this.state.isActivitiesNotReadShown ? \" toggle-btn rotate0\" : \" toggle-btn rotate90\"} onClick={this.toggleActivitiesNotRead} />\r\n                        </h1>\r\n                        {this.state.isActivitiesNotReadShown && activitiesNotRead.length !== 0 && activitiesNotRead.map((activity, idx) => {\r\n                            return (\r\n                                <div key={idx} className=\"activity flex align-center padding-y-15 \">\r\n                                    <div className=\"user-img-container flex align-center\">\r\n                                        <div className=\"date-container\">\r\n                                            <p className=\"date-created\">\r\n                                                {moment(activity.createdAt).format(\"DD MMM\")}\r\n                                            </p>\r\n                                        </div>\r\n                                        <img src={activity.byUser.imgUrl} alt=\"\" />\r\n                                        <h2>{activity.byUser.fullName}</h2>\r\n                                    </div>\r\n                                    <div className=\"activity-desc-container flex align-center\">\r\n                                        <p>\r\n                                            {activity.desc}\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                        {activitiesNotRead.length === 0 &&\r\n                            <h3 className=\"padding-x-15\">No new board activities!</h3>\r\n                        }\r\n                    </div>\r\n                    {/* Activities which are already read */}\r\n                    <div className=\"activity-list column flex  padding-y-15\">\r\n                        <h1 className=\"flex space-between\">\r\n                            Activities Read ({activities.length})\r\n                        <IoIosArrowDropdown onClick={this.toggleActivities} className={this.state.isActivitiesShown ? \"toggle-btn rotate0\" : \"toggle-btn rotate90\"} />\r\n                        </h1>\r\n                        {\r\n                            this.state.isActivitiesShown && activities.length !== 0 && activities.map((activity, idx) => {\r\n                                return (\r\n                                    <div key={idx} className=\"activity  space-between flex align-center padding-y-15 \">\r\n                                        <div className=\"user-img-container flex align-center\">\r\n                                            <div className=\"date-container\">\r\n                                                <p className=\"date-created\">\r\n                                                    {moment(activity.createdAt).format(\"DD MMM\")}\r\n                                                </p>\r\n                                            </div>\r\n                                            <img src={activity.byUser.imgUrl} alt=\"\" />\r\n                                            <h2>{activity.byUser.fullName}</h2>\r\n                                        </div>\r\n                                        <div className=\"activity-desc-container flex align-center\">\r\n                                            <p>\r\n                                                {activity.desc}\r\n                                            </p>\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                        {activities.length === 0 &&\r\n                            <h3 className=\"padding-x-15\">No read board activities!</h3>\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n\r\n            </section>\r\n        )\r\n    }\r\n}\r\nconst mapStateToProps = state => {\r\n    return {\r\n        boards: state.boardReducer.boards,\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n    loadBoards,\r\n    updateBoard\r\n}\r\n\r\nexport const mobActivities = connect(mapStateToProps, mapDispatchToProps)(_mobActivities);","import { Home } from './pages/Home.jsx'\r\nimport { Board } from './pages/Board.jsx'\r\nimport { Boards } from './pages/Boards.jsx'\r\nimport { Login } from './pages/Login.jsx';\r\nimport { Signup } from './pages/Signup.jsx';\r\nimport { UserProfile } from './pages/UserProfile.jsx';\r\nimport { MyWeek } from './pages/MyWeek.jsx';\r\nimport { mobActivities } from './mobile-pages/mobActivities.jsx';\r\n\r\n\r\nexport default [\r\n    {\r\n        path: '/',\r\n        component: Home\r\n    },\r\n    {\r\n        path: '/boards',\r\n        component: Boards\r\n    },\r\n    {\r\n        path: '/board/:id',\r\n        component: Board\r\n    },\r\n    {\r\n        path: '/login',\r\n        component: Login\r\n    },\r\n    {\r\n        path: '/signup',\r\n        component: Signup\r\n    },\r\n    {\r\n        path: '/user/:id',\r\n        component: UserProfile\r\n    },\r\n    {\r\n        path: '/myweek',\r\n        component: MyWeek\r\n    },\r\n    {\r\n        path: '/mob-activities/:id',\r\n        component: mobActivities\r\n    }\r\n]","import React from 'react';\r\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport routes from './routes.js'\r\nimport socketService from './services/socketService';\r\n\r\nexport function App() {\r\n  socketService.setup();\r\n  return (\r\n    <Router>\r\n      <main className=\"app\">\r\n        <Switch>\r\n          {routes.map(route => <Route key={route.path} exact component={route.component} path={route.path} />)}\r\n        </Switch>\r\n      </main>\r\n    </Router>\r\n  );\r\n}\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","const initialState = {\r\n    boards: [],\r\n    filterBy: {},\r\n    isBoardbarShown: true\r\n}\r\n\r\nexport function boardReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_BOARDS':\r\n            return {\r\n                ...state,\r\n                boards: action.boards\r\n            }\r\n        case 'SET_BOARD': \r\n            return {\r\n                ...state,\r\n                boards: state.boards.map(board => board._id === action.board._id ? action.board : board)\r\n            }\r\n        case 'REMOVE_BOARD':\r\n            return {\r\n                ...state,\r\n                boards: state.boards.filter(board => board._id !== action.boardId)\r\n            }\r\n        case 'ADD_BOARD':\r\n            return {\r\n                ...state,\r\n                boards: [...state.boards, action.board]\r\n            }\r\n        case 'SET_FILTER':\r\n            return {\r\n                ...state,\r\n                filterBy: action.filter\r\n            }\r\n        case 'TOGGLE_BOARDBAR':\r\n            return {\r\n                ...state,\r\n                isBoardbarShown: !state.isBoardbarShown\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n    users: [],\r\n    loggedUser: {\r\n        \"_id\": \"5f68936cf878123b2cd354436ce96d\",\r\n        \"username\": \"guest\",\r\n        \"fullName\": \"Guest User\",\r\n        \"password\": \"\",\r\n        \"email\": \"guest@gmail.com\",\r\n        \"imgUrl\": \"https://www.shareicon.net/data/2015/08/15/85434_guest_512x512.png\",\r\n        \"notifications\": [{\r\n            \"byUser\": {\r\n                \"_id\": \"5f6c5f7e27ed4400175ce1ac\",\r\n                \"imgUrl\": \"http://res.cloudinary.com/dtg7n0zye/image/upload/v1600938007/ybmioy3x7smnwhptho3x.jpg\",\r\n                \"fullName\": \"Liam Zety\"\r\n            },\r\n            \"content\": \"Liam Zety Removed a you from the board Caljul20\",\r\n            \"createdAt\": Date.now() - 1000 * 60 * 2\r\n        },\r\n        {\r\n            \"byUser\": {\r\n                \"_id\": \"5f6c5ef927ed4400175ce1a7\",\r\n                \"imgUrl\": \"http://res.cloudinary.com/dtg7n0zye/image/upload/v1600937821/pd8tx7oddwp2wghsp9qt.jpg\",\r\n                \"fullName\": \"Osher Kabeda\"\r\n            },\r\n            \"content\": \"board: Osher Kabeda Tasked you to task - Learn the ropes\",\r\n            \"createdAt\": Date.now() - 1000 * 60 * 3\r\n        },\r\n        {\r\n            \"byUser\": {\r\n                \"_id\": \"5f6c5f0227ed4400175ce1aa\",\r\n                \"imgUrl\": \"http://res.cloudinary.com/dtg7n0zye/image/upload/v1600937750/ztfvuok0olgwarb9kabo.jpg\",\r\n                \"fullName\": \"Roei Arazi\"\r\n            },\r\n            \"content\": \"board: Roei Arazi Added you to the board - Caljul20\",\r\n            \"createdAt\": Date.now() - 1000 * 60 * 4\r\n        }\r\n        ]\r\n    },\r\n    userProfile: null\r\n}\r\n\r\nexport function userReducer(state = initialState, action) {\r\n    switch (action.type) {\r\n        case 'SET_USERS':\r\n            return {\r\n                ...state,\r\n                users: action.users\r\n            }\r\n        case 'SHOW_PROFILE':\r\n            return {\r\n                ...state,\r\n                userProfile: action.user\r\n            }\r\n        case 'SET_USER':\r\n            return {\r\n                ...state,\r\n                loggedUser: action.user\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}","const initialState = {\r\n  isLoading: false,\r\n  isSnackbarShown: false,\r\n  snackbarTxt: ''\r\n}\r\n\r\nexport function systemReducer(state = initialState, action = {}) {\r\n  switch (action.type) {\r\n    case 'LOADING_START':\r\n      return { ...state, isLoading: true };\r\n    case 'LOADING_DONE':\r\n      return { ...state, isLoading: false };\r\n    case 'SHOW_SNACKBAR':\r\n      return{\r\n        ...state,\r\n        isSnackbarShown: true,\r\n        snackbarTxt: action.msg\r\n      }\r\n    case 'HIDE_SNACKBAR':\r\n        return {\r\n          ...state,\r\n          isSnackbarShown: false,\r\n          snackbarTxt: ''\r\n        }\r\n    default: return state;\r\n  }\r\n}","import { createStore, applyMiddleware, compose, combineReducers } from 'redux'\r\nimport thunk from 'redux-thunk'\r\nimport { boardReducer } from './reducers/boardReducer'\r\nimport { userReducer } from './reducers/userReducer'\r\nimport { systemReducer } from './reducers/systemReducer'\r\n\r\n\r\nconst mainReducer = combineReducers({\r\n    userReducer,\r\n    boardReducer,\r\n    systemReducer\r\n})\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nexport const store = createStore(mainReducer, composeEnhancers(applyMiddleware(thunk)))","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux'\r\nimport { App } from './App';\r\nimport * as serviceWorker from './services/serviceWorker';\r\nimport { store } from './store/store';\r\nimport './assets/style/main.scss';\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}
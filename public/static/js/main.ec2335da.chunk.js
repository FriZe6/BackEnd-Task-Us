(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{185:function(e,t,a){e.exports=a(307)},239:function(e,t){},306:function(e,t,a){},307:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(15),s=a.n(o),c=a(16),i=a(18),l=a(27),u=a(6),d=a.n(u),m=a(8),p=a(11),f=a(12),g=a(14),h=a(13),b=a(20),v=a(4),E=a(161),y=a.n(E).a.create({withCredentials:!0}),k=function(e,t){return x(e,"GET",t)},N=function(e,t){return x(e,"POST",t)},w=function(e,t){return x(e,"PUT",t)},O=function(e,t){return x(e,"DELETE",t)};function x(e){return C.apply(this,arguments)}function C(){return(C=Object(m.a)(d.a.mark((function e(t){var a,n,r,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,y({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&e.t0.response.status,e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S,j=a(162),U=a.n(j),T={setup:function(){S=U()("/")},terminate:function(){S=null},on:function(e,t){S.on(e,t)},off:function(e,t){S.off(e,t)},emit:function(e,t){S.emit(e,t)}};var M={loadBoards:function(){return A.apply(this,arguments)},addBoard:function(e){return B.apply(this,arguments)},removeBoard:function(e){return O("board/".concat(e))},updateBoard:D,addGroup:function(e,t){var a={id:R(),name:"week1",createdAt:"date",color:"#70ADB5",lastUpdated:Date.now(),isTagsShown:!1,tags:[],tasks:[{id:R(),name:"Click here!",createdAt:Date.now(),members:[],status:"",priority:"",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]}]};try{return e.groups.push(a),_("".concat(t.fullName," Added a new group."),t,e)}catch(n){throw console.log("boardService: Couldn't add group"),n}},removeGroup:function(e,t,a){var n=null;return t.groups=t.groups.filter((function(t){var a=t.id===e;return a&&(n=t),!a})),_("".concat(a.fullName," Removed group: ").concat(n.name),a,t)},updateGroup:function(e,t,a,n){return t.groups=t.groups.map((function(t){return t.id===e.id?e:t})),_(a,n,t)},addTask:function(e,t,a,n){var r={id:R(),name:t,createdAt:Date.now(),members:[],status:"",priority:"",dueDate:Date.now(),updates:[],lastUpdated:Date.now(),isSelected:!1,posts:[],tags:[]},o=a.groups.findIndex((function(t){return t.id===e})),s="".concat(n.fullName," Added a new task: ").concat(t," to group ").concat(a.groups[o].name);return a.groups[o].tasks.push(r),_(s,n,a)},removeTask:function(e,t,a,n){var r=null,o=t.groups.findIndex((function(e){return e.id===a.id}));t.groups[o].tasks=t.groups[o].tasks.filter((function(t){var a=t.id===e;return a&&(r=t),!a})),0===t.groups[o].tasks.length&&t.groups.splice(o,1);return _("".concat(n.fullName," Removed task: ").concat(r.name," from group ").concat(a.name),n,t)},updateTask:function(e,t,a,n){return t.groups=t.groups.map((function(t){return t.tasks=t.tasks.map((function(t){return t.id===e.id?e:t})),t})),_(a,n,t)},handleBoardChanges:_};function A(){return(A=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("board");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={boardCreator:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl},name:"Board",createdAt:Date.now(),desc:"Enter description here",members:[{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl}],groups:[{id:R(),name:"group 1",createdAt:Date.now(),color:"#1a1c20",lastUpdated:Date.now(),isTagsShown:!1,tags:[],tasks:[{id:R(),name:"Click me!",createdAt:Date.now(),members:[],status:"",priority:"",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]},{id:R(),name:"Rename here!",createdAt:Date.now(),members:[],status:"",priority:"",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]}]}],activityLog:[]},e.next=3,N("board",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t,a){if(!e)return D(a);var n={id:R(),changedAt:Date.now(),desc:e,byUser:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl}};return D(Object(v.a)(Object(v.a)({},a),{},{activityLog:[n].concat(Object(b.a)(a.activityLog))}))}function D(e){return T.emit("updateBoard",e),w("board/".concat(e._id),e),e}function R(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function L(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.loadBoards();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("boardActions: Couldn't load boards"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function I(e,t,a){return function(){var n=Object(m.a)(d.a.mark((function n(r){var o;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,o=M.handleBoardChanges(t,a,e),r({type:"SET_BOARD",board:o}),n.next=9;break;case 5:throw n.prev=5,n.t0=n.catch(0),console.log("boardActions: Couldn't update board"),n.t0;case 9:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}()}function F(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.addBoard(e);case 3:n=t.sent,a({type:"ADD_BOARD",board:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("boardActions: Couldn't add board"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var P={loadUsers:G,getUserById:function(e){return V.apply(this,arguments)},login:H,signup:function(e){return K.apply(this,arguments)},guestLogin:function(){return J.apply(this,arguments)},markAsRead:function(e){return Y.apply(this,arguments)},updateUser:q,logout:function(){return X.apply(this,arguments)},notifyUsers:function(e,t,a){return Q.apply(this,arguments)},getCurrUser:function(){return JSON.parse(sessionStorage.getItem("user"))}};function G(){return W.apply(this,arguments)}function W(){return(W=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("user");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userService: Coulnd't get users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Y(){return(Y=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.notifications.forEach((function(e){e.isRead=!0})),q(t),e.prev=2,e.abrupt("return",t);case 6:throw e.prev=6,e.t0=e.catch(2),console.log("userService: Something went wrong"),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function V(){return(V=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("user/".concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userService: Coulnd't get user"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function H(e){return z.apply(this,arguments)}function z(){return(z=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("USEr?",t),e.next=4,N("auth/login",t);case 4:return a=e.sent,e.abrupt("return",$(a));case 8:throw e.prev=8,e.t0=e.catch(0),console.log("userService: Wrong username or password"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function K(){return(K=Object(m.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(v.a)({isAdmin:!1,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},t),e.prev=1,e.next=4,N("auth/signup",a);case 4:return n=e.sent,e.abrupt("return",$(n));case 8:throw e.prev=8,e.t0=e.catch(1),console.log("userService: Couldn't sign up"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function J(){return(J=Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H({username:"guest",password:"12345"});case 3:return(t=e.sent).notifications=[{byUser:{_id:"5f6c5f7e27ed4400175ce1ac",imgUrl:"http://res.cloudinary.com/dtg7n0zye/image/upload/v1600938007/ybmioy3x7smnwhptho3x.jpg",fullName:"Liam Zety"},content:"Liam Zety Removed a you from the board Caljul20",createdAt:Date.now()-12e4},{byUser:{_id:"5f6c5ef927ed4400175ce1a7",imgUrl:"http://res.cloudinary.com/dtg7n0zye/image/upload/v1600937821/pd8tx7oddwp2wghsp9qt.jpg",fullName:"Osher Kabeda"},content:"board: Osher Kabeda Tasked you to task - Learn the ropes",createdAt:Date.now()-18e4},{byUser:{_id:"5f6c5f0227ed4400175ce1aa",imgUrl:"http://res.cloudinary.com/dtg7n0zye/image/upload/v1600937750/ztfvuok0olgwarb9kabo.jpg",fullName:"Roei Arazi"},content:"board: Roei Arazi Added you to the board - Caljul20",createdAt:Date.now()-24e4}],e.abrupt("return",t);case 8:throw e.prev=8,e.t0=e.catch(0),console.log("userService: Couldn't login as guest"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function q(e){return Z.apply(this,arguments)}function Z(){return(Z=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/update/".concat(t._id),t);case 2:return a=e.sent,console.log("updated user:",a),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(m.a)(d.a.mark((function e(t,a,n){var r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:r=e.sent,"add"===a&&(a=Object(b.a)(r)),o={byUser:{_id:n._id,fullName:n.fullName,imgUrl:n.imgUrl},content:t,createdAt:Date.now()},a.forEach((function(e){if(e._id!==n._id){var t=r.find((function(t){return t._id===e._id}));t?(t.notifications.unshift(o),P.updateUser(t),T.emit("send-notif",{userId:e._id,notification:o})):console.log("can't updated user:",t)}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function ee(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.loadUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't load users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function te(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't signup"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function ae(){return function(){var e=Object(m.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.guestLogin();case 3:a=e.sent,t({type:"SET_USER",user:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't login as a guest"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function ne(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,P.updateUser(e),a({type:"SET_USER",user:e}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("userActions: Couldn't update user"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}var re=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1},e.guestLogin=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,e.props.guestLogin();case 3:return t.next=5,e.props.loadBoards();case 5:e.setState({isLoading:!1}),e.props.history.push("/board/".concat(e.props.boards[0]._id));case 7:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.video=r.a.createRef()}},{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif",alt:""})):r.a.createElement("section",{className:"home flex column"},r.a.createElement("main",{className:"home-main flex align-center  "},r.a.createElement("div",{className:"home-login-sign-cta absolute"},r.a.createElement(i.b,{to:"/login"},r.a.createElement("button",null,"Login")),r.a.createElement(i.b,{to:"/signup"},r.a.createElement("button",null,"Sign-up"))),r.a.createElement("div",{className:"col-left flex align-center justify-center padding-x-30  column"},r.a.createElement("h1",null,"Join the future."),r.a.createElement("div",{className:"inner-wrapper"},r.a.createElement("p",null,"The next step in multi-planning and productivity! ",r.a.createElement("br",null),r.a.createElement("span",null,"Task-us ")," will help you keep track of hundreds of tasks. ",r.a.createElement("br",null),"An efficient way to manage your co-workers / employees. ",r.a.createElement("br",null),"Half the hassle and twice the fun."),r.a.createElement("button",{onClick:this.guestLogin,className:"guest-button "},"Try As a Guest!"))),r.a.createElement("div",{className:"col-right flex align-center justify-center"},r.a.createElement("video",{onClick:function(){return e.video.current.play()},ref:this.video,autoPlay:!0,muted:!0,src:"taskus-home-video.mp4"}))))}}]),a}(n.Component),oe={loadBoards:L,guestLogin:ae},se=Object(c.b)((function(e){return{boards:e.boardReducer.boards,loggedUser:e.userReducer.loggedUser}}),oe)(re),ce=a(65),ie=a(37);function le(e){return function(t){t({type:"SHOW_SNACKBAR",msg:e})}}function ue(){return function(e){e({type:"HIDE_SNACKBAR"})}}var de=a(163),me=a.n(de),pe=a(58),fe=a(34),ge=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectedBoardId:"",isSnackbarOpen:!1,isShown:"",searchVal:"",isModalShown:!1,selectedBoardName:""},e.onAddBoard=Object(m.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.loggedUser,t.next=3,e.props.addBoard(e.props.loggedUser);case 3:n="".concat(a.fullName," added a new board"),P.notifyUsers(n,"add",a),T.emit("add-delete-board");case 6:case"end":return t.stop()}}),t)}))),e.onBoardRemove=Object(m.a)(d.a.mark((function t(){var a,n,r,o,s,c,i,l,u,m,p;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,n=a.boards,r=a.match,o=a.history,s=a.removeBoard,c=a.loggedUser,i=e.state.selectedBoardId,l=n.find((function(e){return e._id===i})),u="".concat(c.fullName," deleted ").concat(l.name),P.notifyUsers(u,l.members,c),m=r.params.id,1!==n.length){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,s(i);case 10:T.emit("add-delete-board"),e.displayPopup("Removed board."),m===i&&(p=n.findIndex((function(e){return e._id!==i})),o.push("/board/".concat(n[p]._id)));case 13:case"end":return t.stop()}}),t)}))),e.onToggleShown=function(){e.props.toggleBoardbar(),e.setState({isShown:!e.state.isShown})},e.onToggleModal=function(){e.setState({isModalShown:!e.state.isModalShown})},e.handleSearch=function(){return e.props.boards.filter((function(t){return t.name.toLowerCase().includes(e.state.searchVal.toLowerCase())}))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;T.on("updatedBoard",(function(t){e.props.recieveUpdate(t)})),T.on("reloadBoards",(function(){e.props.loadBoards()})),T.on("accept-notif",(function(t){e.props.updateUser(Object(v.a)(Object(v.a)({},e.props.loggedUser),{},{notifications:[t].concat(Object(b.a)(e.props.loggedUser.notifications))}))})),T.emit("user",this.props.loggedUser._id),this.setState({isShown:this.props.isBoardbarShown})}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard"),T.off("reloadBoards"),T.off("accept-notif")}},{key:"displayPopup",value:function(e){this.props.showSnackbar(e),setTimeout(this.props.hideSnackbar,3e3)}},{key:"onMoveToBoard",value:function(e){this.props.history.push("/board/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props.match.params.id,a=this.state,n=a.isShown,o=a.isModalShown,s=a.selectedBoardName,c=this.props.loggedUser,i=this.handleSearch();return r.a.createElement("section",{className:"boardbar fixed column ".concat(n&&"board-bar-shown")},r.a.createElement("div",{onClick:this.onToggleShown,className:"board-bar-toggle-container"},r.a.createElement(fe.e,{style:{color:this.props.location.pathname.includes("/myweek")&&"#151515",transform:n&&"rotate(180deg)"},className:"board-bar-toggle"})),n&&r.a.createElement("div",{className:"boardbar-header"},r.a.createElement("h1",null,"Boards"),r.a.createElement(ie.e,{onClick:this.onAddBoard})),n&&r.a.createElement("input",{onChange:this.handleSearchChange,type:"text",placeholder:"Search Board"}),r.a.createElement("ul",null,n&&i.map((function(a,n){return r.a.createElement("li",{style:{paddingLeft:c._id===a.boardCreator._id||c.isAdmin?"":"25px"},className:"flex align-center cursor-pointer ".concat(a._id===t&&"curr-board"),key:n,onClick:function(){return e.onMoveToBoard(a._id)}},(c._id===a.boardCreator._id||c.isAdmin)&&r.a.createElement(pe.a,{onClick:function(t){t.stopPropagation(),e.setState({selectedBoardId:a._id,selectedBoardName:a.name}),e.onToggleModal()}}),r.a.createElement("h5",{style:{color:c._id===a.boardCreator._id||c.isAdmin?"#0085ff":"#333333"}},a.name))}))),o&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.onToggleModal},r.a.createElement("div",{className:"confirm-board-delete flex column space-between"},r.a.createElement("h1",null,"Are you sure you want to delete ",s,"?"),r.a.createElement("p",null,"You can't take this back"),r.a.createElement("section",{className:"flex"},r.a.createElement("button",{className:"cancel-button",onClick:this.onToggleModal},"Cancel"),r.a.createElement("button",{className:"delete-button",onClick:this.onBoardRemove},"Delete")))))}}]),a}(n.Component),he={updateBoard:I,removeBoard:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.removeBoard(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.log("boardActions: Couldn't remove board"),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},addBoard:F,showSnackbar:le,hideSnackbar:ue,toggleBoardbar:function(){return function(e){e({type:"TOGGLE_BOARDBAR"})}},recieveUpdate:function(e){return function(t){try{t({type:"SET_BOARD",board:e})}catch(a){throw console.log("boardActions: Couldn't update board"),a}}},loadBoards:L,updateUser:ne},be=Object(c.b)((function(e){return{boards:e.boardReducer.boards,isBoardbarShown:e.boardReducer.isBoardbarShown,loggedUser:e.userReducer.loggedUser}}),he)(Object(l.f)(ge)),ve=a(29),Ee=a(167),ye=a(60),ke=a(67),Ne=a.n(ke),we=a(47),Oe=a(59),xe=a(35),Ce=a(19),Se=a.n(Ce),je=a(333),Ue=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isShown:!0},e.toggleIsShown=function(){e.setState({isShown:!e.state.isShown})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this.props,t=e.type,a=e.activities,o=e.getInitials,s=e.moveToProfile;return r.a.createElement("div",{className:"".concat("activitiesRead"===t?"activity-list":"activity-list-not-read","\n                     column flex  padding-y-15")},r.a.createElement("h1",{className:"flex space-between"},r.a.createElement(n.Fragment,null,"Activities Read (",a.length,")",r.a.createElement(Oe.a,{onClick:this.toggleIsShown,className:this.state.isShown?" toggle-btn rotate0":" toggle-btn rotate90"}))),0===a.length?"activitiesRead"===t?r.a.createElement("h3",{className:"padding-x-15"},"No read board activities!"):r.a.createElement("h3",{className:"padding-x-15"},"No new board activities!"):this.state.isShown&&a.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Se()(e.createdAt).format("DD MMM"))),e.byUser.imgUrl?r.a.createElement("img",{className:"cursor-pointer",onClick:function(){return s(e.byUser._id)},src:e.byUser.imgUrl,alt:""}):r.a.createElement("div",{onClick:function(){return s(e.byUser._id)},className:"member-letter flex align-center justify-center"},o(e.byUser.fullName)),r.a.createElement("h2",{onClick:function(){return s(e.byUser._id)}},e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))})))}}]),a}(n.Component),Te=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOrderReversed:!1,isFilterOpen:!1,filterBy:{},searchVal:""},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e.toggleFilter=function(){e.setState({isFilterOpen:!e.state.isFilterOpen})},e.moveToProfile=function(t){e.props.history.push("/user/".concat(t))},e}return Object(f.a)(a,[{key:"getInitials",value:function(e){var t=e.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o=n.charAt(0).toUpperCase();return r&&(o+=r.charAt(0).toUpperCase()),o}},{key:"onSetFilter",value:function(e,t){var a=Object(v.a)({},this.state.filterBy);a[e]===t&&(t=""),this.setState({filterBy:Object(v.a)(Object(v.a)({},a),{},Object(xe.a)({},e,t))})}},{key:"getActivityDates",value:function(){var e=this.props.activityLog.reduce((function(e,t){return e[Se()(t.createdAt).format("DD MMM")]="",e}),{});return Object.keys(e)}},{key:"getActivityMembers",value:function(){var e=this.props.activityLog.reduce((function(e,t){return e[t.byUser.fullName]="",e}),{});return Object.keys(e)}},{key:"applyFilter",value:function(e){var t=Object(b.a)(e),a=this.state,n=a.filterBy,r=a.searchVal;return n.date&&(t=t.filter((function(e){return Se()(e.createdAt).format("DD MMM")===n.date}))),n.member&&(t=t.filter((function(e){return e.byUser.fullName===n.member}))),r&&(t=t.filter((function(e){return e.desc.toLowerCase().includes(r)||e.byUser.fullName.toLowerCase().includes(r)}))),t}},{key:"render",value:function(){var e=this;if(!this.props.activityLog)return r.a.createElement("h1",null,"Loading...");var t=this.state,a=t.isFilterOpen,o=t.filterBy,s=t.searchVal,c=Object(ve.a)(this.activities,2),i=c[0],l=c[1],u=this.getActivityDates(),d=this.getActivityMembers();return i=this.applyFilter(i),l=this.applyFilter(l),r.a.createElement("section",{className:"activities flex column"},r.a.createElement("header",{className:"padding-x-15 padding-y-15"},r.a.createElement(fe.a,{onClick:this.props.onToggleActivities}),r.a.createElement("h1",null,r.a.createElement("span",null,this.props.boardName)," Log"),r.a.createElement("div",{className:"filters-container space-between flex align-center"},r.a.createElement("input",{value:s,onChange:this.handleChange,type:"text",placeholder:"Search"}),r.a.createElement("div",{className:"filter-outer-container flex relative"},r.a.createElement("button",{className:"flex align-center",onClick:this.toggleFilter},r.a.createElement(ye.b,null)," Filter"),a&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleFilter}),r.a.createElement(je.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"activity-member-filter"},r.a.createElement("h3",null,"Member"),r.a.createElement("div",{className:"filter-list flex justify-center align-center column"},d.map((function(t,a){return r.a.createElement("button",{className:o.member===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("member",t)}},t)})))),r.a.createElement("section",{className:"activity-date-filter"},r.a.createElement("h3",null,"Date"),r.a.createElement("div",{className:"filter-list flex justify-center align-center column"},u.map((function(t,a){return r.a.createElement("button",{className:o.date===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("date",t)}},t)}))))))),r.a.createElement("button",{onClick:this.props.onClearLog},"Clear Log")))),r.a.createElement("div",{className:"all-activities-container"},r.a.createElement(Ue,{getInitials:this.getInitials,activities:l,moveToProfile:this.moveToProfile}),r.a.createElement(Ue,{type:"activitiesRead",getInitials:this.getInitials,activities:i,moveToProfile:this.moveToProfile})))}},{key:"activities",get:function(){var e=this.props.activityLog,t=this.props.loggedUser._id;return[e.filter((function(e){return e[t]})),e.filter((function(e){return!e[t]}))]}}]),a}(n.Component),Me=Object(l.f)(Te);var Ae={setFilter:function(e){return function(t){t({type:"SET_FILTER",filter:e})}}},Be=Object(c.b)((function(e){return{filterBy:e.boardReducer.filterBy}}),Ae)(Object(l.f)((function(e){var t=e.board,a=e.filterBy,n=e.setFilter;function o(e,t){a[e]===t&&(t=""),n(Object(v.a)(Object(v.a)({},a),{},Object(xe.a)({},e,t)))}if(!t)return r.a.createElement("h1",null,"Loading...");var s=t.groups,c=t.members,i=function(){var e={};t.groups.forEach((function(t){t.tasks.forEach((function(t){var a=Se()(t.dueDate).format("DD.MM.YY");e[a]=t.dueDate}))}));var a=[];for(var n in e)a.push({formatted:n,value:e[n]});return a}();return r.a.createElement(je.a,{in:e.isFiltersOpen},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"group-name-filter flex column align-center"},r.a.createElement("h3",null,"Groups"),r.a.createElement("div",{className:"filter-list"},s.map((function(e,t){return r.a.createElement("button",{className:a.groupId===e.id?"remove-filter-btn":"",key:t,onClick:function(){return o("groupId",e.id)}},e.name)})))),r.a.createElement("section",{className:"task-member-filter flex column align-center"},r.a.createElement("h3",null,"Member"),r.a.createElement("div",{className:"filter-list"},c.map((function(e,t){return r.a.createElement("button",{className:a.memberId===e._id?"remove-filter-btn":"",key:t,onClick:function(){return o("memberId",e._id)}},e.fullName)})))),r.a.createElement("section",{className:"task-priority-filter flex column align-center"},r.a.createElement("h3",null,"Priority"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"low"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","low")}},"Low"),r.a.createElement("button",{className:"medium"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","medium")}},"Medium"),r.a.createElement("button",{className:"high"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","high")}},"High"))),r.a.createElement("section",{className:"task-status-filter flex column align-center"},r.a.createElement("h3",null,"Status"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"done"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","done")}},"Done"),r.a.createElement("button",{className:"working on it"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","working on it")}},"Working on it "),r.a.createElement("button",{className:"stuck"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","stuck")}},"Stuck"))),r.a.createElement("section",{className:"task-date-filter flex column align-center"},r.a.createElement("h3",null,"Due-Date"),r.a.createElement("div",{className:"filter-list"},i.map((function(e,t){return r.a.createElement("button",{className:a.dueDate===e.value?"remove-filter-btn":"",key:t,onClick:function(){return o("dueDate",e.value)}},e.formatted)}))))))}))),_e=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_id:"",isActivitiesOpen:!1,isFiltersOpen:!1,isUsersOpen:!1,elSetting:null,isModalShown:!1},e.handleChangeName=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{name:t.target.value})})},e.handleChangeDesc=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{desc:t.target.value})})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onToggleActivities=function(){var t=e.props.board,a=e.props.loggedUser._id;e.state.isActivitiesOpen&&(t=Object(v.a)(Object(v.a)({},t),{},{activityLog:t.activityLog.map((function(e){return e[a]=!0,e}))})),e.props.onEditBoard(t),e.setState({isActivitiesOpen:!e.state.isActivitiesOpen})},e.onToggleFilters=function(){e.setState({isFiltersOpen:!e.state.isFiltersOpen})},e.handleMenuOpen=function(t,a){e.setState({elSetting:t.currentTarget})},e.handleMenuClose=function(){e.setState({elSetting:null})},e.onToggleUsers=function(){e.setState({isUsersOpen:!e.state.isUsersOpen})},e.onRemoveMemberFromBoard=function(t){var a=e.state.board.members.find((function(e){return e._id===t})),n="".concat(e.props.loggedUser.fullName," removed ").concat(a.fullName," from ").concat(e.state.board.name);e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{members:e.state.board.members.filter((function(e){return e._id!==t}))})},(function(){e.props.onEditBoard(e.state.board,n)}))},e.onAddUserToBoard=function(t){var a=e.props.users.find((function(e){return e._id===t})),n="".concat(e.props.loggedUser.fullName," invited ").concat(a.fullName," to ").concat(e.state.board.name);e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{members:[].concat(Object(b.a)(e.state.board.members),[a])})},(function(){e.props.onEditBoard(e.state.board,n)}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t))},e.onClearLog=function(){var t=Object(v.a)(Object(v.a)({},e.state.board),{},{activityLog:[]});e.setState({board:t},(function(){e.props.onEditBoard(t)}))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.editableName=r.a.createRef(),this.editableDescription=r.a.createRef(),this.searchInput=r.a.createRef(),T.on("updatedBoard",(function(){e.setState({board:e.props.board})})),this.setState({board:this.props.board,_id:this.props.board._id})}},{key:"componentDidUpdate",value:function(e,t){e.board._id!==this.props.board._id&&this.setState({board:this.props.board})}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard")}},{key:"_getMemeberInitials",value:function(e){var t=e.fullName.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o="",s="";return n&&(o=n.charAt(0).toUpperCase()),r&&(s=r.charAt(0).toUpperCase()),[o,s]}},{key:"render",value:function(){var e=this;if(!this.state._id)return r.a.createElement("h1",null,"Loading...");var t=this.state.board,a=t.members,n=t.boardCreator,o=this.props,s=o.users,c=o.loggedUser,l=o.filterBy,u=o.isBoardShown,d=Object.values(l).some((function(e){return e})),m=s.filter((function(e){return!a.some((function(t){return t._id===e._id}))})),p=this.props.board.activityLog.filter((function(e){return!e[c._id]})),f=this.props.board.activityLog.filter((function(e){return e[c._id]}));return r.a.createElement("section",{className:"board-header flex column padding-x-30"},r.a.createElement("div",{className:"board-header-header flex space-between grow align-center"},r.a.createElement("h1",{className:"flex align-center"},r.a.createElement(Ne.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableName,html:this.state.board.name,disabled:!1,onChange:this.handleChangeName,onBlur:function(){var t="".concat(c.fullName," Changed the board title from ").concat(e.props.board.name," to ").concat(e.state.board.name),a=Object(v.a)(Object(v.a)({},e.props.board),{},{name:e.state.board.name});e.props.onEditBoard(a,t)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),r.a.createElement("div",{className:"board-header-right relative flex align-center"},r.a.createElement("div",{className:"board-users flex justify-center",onClick:this.onToggleUsers},0===a.length&&r.a.createElement("div",{className:"no-members-container relative"},r.a.createElement("img",{src:"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg",alt:""}),r.a.createElement(we.b,{className:"no-members-icon-plus"})),0!==a.length&&a.map((function(t,a){return r.a.createElement("div",{key:a,className:"user-img-container"},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:""}):r.a.createElement("div",{className:"member-letter"},e._getMemeberInitials(t)[0],e._getMemeberInitials(t)[1]))}))),this.state.isUsersOpen&&r.a.createElement("div",{className:"users-modal absolute"},r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),a.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},e._getMemeberInitials(t)[0],e._getMemeberInitials(t)[1]),r.a.createElement("p",{className:"member-name"},t.fullName)),(c.isAdmin||e.state.board.boardCreator._id===c._id)&&r.a.createElement(we.a,{onClick:function(){return e.onRemoveMemberFromBoard(t._id)}}))}))),r.a.createElement("div",{className:"site-users-box"},r.a.createElement("h3",null,"Site Users"),m.map((function(t){return r.a.createElement("section",{key:t._id,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},e._getMemeberInitials(t)[0],e._getMemeberInitials(t)[1]),r.a.createElement("p",{className:"member-name"},t.fullName)),(c.isAdmin||e.state.board.boardCreator._id===c._id)&&r.a.createElement(we.b,{onClick:function(){return e.onAddUserToBoard(t._id)}}))})))),r.a.createElement("div",{onClick:this.onToggleActivities,className:"activities-outer-container flex align-center  cursor-pointer"},r.a.createElement("h2",null,"Activities "," ",r.a.createElement("span",{style:{color:0!==p.length?"#0085ff":""}},p.length)," "," "," / ",f.length+p.length)))),r.a.createElement("div",{className:"board-header-footer flex align-center space-between"},r.a.createElement("div",{className:"board-header-footer-left flex column space-between"},r.a.createElement("h3",null,r.a.createElement(Ne.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableDescription,html:this.state.board.desc,disabled:!1,onChange:this.handleChangeDesc,onBlur:function(){var t="".concat(c.fullName," Changed ").concat(e.state.board.name," description to ").concat(e.state.board.desc),a=Object(v.a)(Object(v.a)({},e.props.board),{},{desc:e.state.board.desc});e.props.onEditBoard(a,t)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),r.a.createElement("p",{className:"created-by"},"Created By:",r.a.createElement(i.b,{to:"/user/".concat(n._id)},n.fullName))),r.a.createElement("div",{className:"header-options flex"},u&&r.a.createElement("button",{className:"new-group-btn",onClick:this.props.onAddGroup},"New Group"),r.a.createElement("div",{className:"relative"},this.props.isModalShown&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.props.toggleModal}),r.a.createElement("button",{className:"flex align-center",onClick:this.props.toggleModal},r.a.createElement("h3",null,u?"Board":"Dashboard")," ",r.a.createElement(Oe.c,null)),r.a.createElement("div",{className:"options-modal absolute ".concat(!this.props.isModalShown&&"hidden")},r.a.createElement("p",{onClick:this.props.showBoard},"Board"),r.a.createElement("p",{onClick:this.props.showDashboard},"Dashboard"))),u&&r.a.createElement("div",{onClick:function(){return e.searchInput.focus()},className:"search-outer-container flex align-center"},r.a.createElement("input",{ref:function(t){e.searchInput=t},placeholder:"Search",type:"text",onChange:this.props.handleSearch}),r.a.createElement(Ee.a,null)),u&&r.a.createElement("div",{onClick:this.state.isFiltersOpen?function(){}:this.onToggleFilters,className:"filters-outer-container relative flex align-center cursor-pointer"},d&&r.a.createElement("div",{className:"filter-active-indicator"}),r.a.createElement(ye.b,{className:d?"filter-active":""}),r.a.createElement("h2",{className:d?"filter-active":""},"Filter"),r.a.createElement(Be,{isFiltersOpen:this.state.isFiltersOpen,board:this.props.board}))),r.a.createElement("div",{className:"".concat(this.state.isActivitiesOpen&&"animate-side-modal"," side-modal")},r.a.createElement(Me,{loggedUser:c,onClearLog:this.onClearLog,onToggleActivities:this.onToggleActivities,boardName:this.state.board.name,activityLog:this.props.board.activityLog})),this.state.isFiltersOpen&&r.a.createElement("div",{onClick:this.onToggleFilters,className:"modal-screen-wrapper"}),this.state.isActivitiesOpen&&r.a.createElement("div",{onClick:this.onToggleActivities,className:"modal-screen-wrapper"}),this.state.isUsersOpen&&r.a.createElement("div",{onClick:this.onToggleUsers,className:"modal-screen-wrapper"})))}}]),a}(r.a.Component),De=Object(l.f)(_e),Re=a(73),Le=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:null},e.onRemoveNotifications=function(){e.props.removeNotifications(e.props.loggedUser),e.setState({isModalOpen:!0})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setState({isModalOpen:!0})}},{key:"_getMemeberInitials",value:function(e){var t=e.fullName.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o="",s="";return n&&(o=n.charAt(0).toUpperCase()),r&&(s=r.charAt(0).toUpperCase()),[o,s]}},{key:"render",value:function(){var e=this,t=this.props.loggedUser;return r.a.createElement(je.a,{in:this.state.isModalOpen},r.a.createElement("section",{className:"notifications padding-x-15 padding-y-15"},r.a.createElement("header",{className:"flex space-between align-center"},0!==t.notifications.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Notifications"),r.a.createElement(fe.b,{onClick:this.onRemoveNotifications})):r.a.createElement("h1",null,"You have no notifications.")),r.a.createElement("div",{className:"notifications-container"},t.notifications&&t.notifications.map((function(t,a){return r.a.createElement("div",{key:a,className:"notification flex "},r.a.createElement("div",{onClick:function(){return e.props.goToUserProfile(t.byUser._id)},className:"user-img-container cursor-pointer"},t.byUser.imgUrl?r.a.createElement("img",{src:t.byUser.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},e._getMemeberInitials(t.byUser)[0],e._getMemeberInitials(t.byUser)[1])),r.a.createElement("div",{className:"notification-msg flex column"},r.a.createElement("h2",{className:"cursor-pointer",onClick:function(){return e.props.goToUserProfile(t.byUser._id)}},t.byUser.fullName),r.a.createElement("p",null,t.content),r.a.createElement("div",null,r.a.createElement("p",null,Se()(t.createdAt).fromNow()))))})))))}}]),a}(n.Component),Ie=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isNotificationShown:!1},e.toggleNotifications=function(){e.onMarkAsRead(),e.setState({isNotificationShown:!e.state.isNotificationShown})},e.onMarkAsRead=function(){e.props.markAsRead(e.props.loggedUser)},e.onLogout=function(){e.props.logout(),e.props.history.push("/login")},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t))},e}return Object(f.a)(a,[{key:"_getMemeberInitials",value:function(e){var t=e.fullName.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o="",s="";return n&&(o=n.charAt(0).toUpperCase()),r&&(s=r.charAt(0).toUpperCase()),[o,s]}},{key:"render",value:function(){var e=this.state.isNotificationShown,t=this.props,a=t.loggedUser,n=t.removeNotifications,o=a.fullName.split(" ")[0];return r.a.createElement("section",{className:"navbar flex column space-between align-center padding-y-15"},r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{className:"logo-navbar",src:"taskus-nav.png",alt:""})),e&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleNotifications}),r.a.createElement("li",{className:"icon-container cursor-pointer",onClick:this.state.isNotificationShown?function(){}:this.toggleNotifications},0===a.notifications.filter((function(e){return!e.isRead})).length?"":r.a.createElement("div",{className:"notifications-counter"},r.a.createElement("p",null,a.notifications.filter((function(e){return!e.isRead})).length>10?"+9":a.notifications.filter((function(e){return!e.isRead})).length)),r.a.createElement(ye.a,null),e&&r.a.createElement(Le,{goToUserProfile:this.goToUserProfile,removeNotifications:n,loggedUser:a}))),r.a.createElement("div",{className:"user-greeting"},"Hello ",o||a.fullName),r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(i.b,{to:a?"/myweek":"/login"},r.a.createElement("li",{className:"icon-container"},r.a.createElement(ie.b,null))),r.a.createElement(i.b,{to:a?"/user/".concat(a._id):"/login"},r.a.createElement("li",{className:"icon-container cursor-pointer"}," ",a.imgUrl?r.a.createElement("img",{className:"small-profile-img",src:a.imgUrl,alt:""}):r.a.createElement("div",{className:"member-letter small-profile-img"},this._getMemeberInitials(a)[0],this._getMemeberInitials(a)[1]))),r.a.createElement("li",{className:"icon-container"},r.a.createElement(Re.b,{onClick:this.onLogout}))))}}]),a}(n.Component),Fe={markAsRead:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.markAsRead(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login as a guest"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeNotifications:function(e){var t=e;return t.notifications=[],function(){var a=Object(m.a)(d.a.mark((function a(n){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{P.updateUser(e),n({type:"UPDATE_PROFILE",user:t})}catch(r){console.log("ERROR, couldnt remove notifications",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},logout:function(){return function(e){try{P.logout(),e({type:"SET_USER",user:null})}catch(t){throw console.log("userActions: Couldn't logout"),t}}}},Pe=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}),Fe)(Object(l.f)(Ie));a(244);function Ge(e){function t(e){var t=e.fullName.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o="",s="";return n&&(o=n.charAt(0).toUpperCase()),r&&(s=r.charAt(0).toUpperCase()),[o,s]}var a=e.users.filter((function(t){return!e.members.some((function(e){return e._id===t._id}))}));return r.a.createElement("div",{className:"user-img-container relative flex justify-center align-center",onClick:function(){return e.openModal("users")}},e.members.length?r.a.createElement("div",{className:"member-img-container flex relative "},e.members.map((function(e){return e.imgUrl?r.a.createElement("img",{key:e._id,className:"member-img",src:e.imgUrl,alt:""}):r.a.createElement("div",{key:e._id,className:"member-letter "},t(e)[0],t(e)[1])})),r.a.createElement(we.b,{className:"no-members-icon-plus absolute"})):r.a.createElement("div",{className:"no-members-container"},r.a.createElement("img",{src:"https://www.flaticon.com/svg/static/icons/svg/847/847969.svg",alt:"",className:"no-members-icon"}),r.a.createElement(we.b,{className:"no-members-icon-plus"})),r.a.createElement(je.a,{in:e.isUsersShown},r.a.createElement("div",{className:"users-modal modal-fade-in absolute"},r.a.createElement("div",{className:"task-users-box"},r.a.createElement("h3",null,"Task Members"),e.members.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(we.a,{onClick:function(){return e.onRemoveMemberFromTask(t._id)}}))}))),r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),a.map((function(a,n){return r.a.createElement("section",{key:n,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex  align-center",onClick:function(){return e.goToUserProfile(a._id)}},a.imgUrl?r.a.createElement("img",{src:a.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t(a)[0],t(a)[1]),r.a.createElement("p",{className:"member-name"},a.fullName)),r.a.createElement(we.b,{onClick:function(){return e.onAddUserToTask(a._id)}}))}))))))}function We(e){return r.a.createElement("div",{className:"label-container relative flex align-center "},r.a.createElement("div",{className:"label-box ".concat(e.status.split(" ")[0].toLowerCase()),onClick:function(){return e.openModal("status")}},r.a.createElement("div",{className:"task-label-name flex align-center justify-center"},r.a.createElement("p",null,"empty"===e.status?" ":e.status)),r.a.createElement(je.a,{in:e.isStatusShown},r.a.createElement("div",{className:"label-list absolute flex column align-center modal-fade-in"},r.a.createElement("section",{className:"label-selector flex align-center justify-center stuck",onClick:function(){return e.handleChange("Stuck","status")}},r.a.createElement("p",null,"Stuck")),r.a.createElement("section",{className:"label-selector flex align-center justify-center working",onClick:function(){return e.handleChange("Working on it","status")}},r.a.createElement("p",null,"Working on it")),r.a.createElement("section",{className:"label-selector flex align-center justify-center done",onClick:function(){return e.handleChange("Done","status")}},r.a.createElement("p",null,"Done")),r.a.createElement("section",{className:"label-selector flex align-center justify-center empty",onClick:function(){return e.handleChange("","status")}},r.a.createElement("p",null," "))))))}var Ye=a(168),Ve=a.n(Ye);function He(e){return r.a.createElement("label",{className:"date-picker"},r.a.createElement(je.a,null,r.a.createElement(Ve.a,{selected:e.dueDate,onChange:e.handleDateChange,dateFormat:"dd/MM/yyyy"})))}function ze(e){return r.a.createElement("div",{className:"label-container relative flex align-center"},r.a.createElement("div",{className:"label-box ".concat(e.priority.toLowerCase()),onClick:function(){return e.openModal("priority")}},r.a.createElement("div",{className:"task-label-name flex align-center justify-center"},r.a.createElement("p",null,e.priority)),r.a.createElement(je.a,{in:e.isPriorityShown},r.a.createElement("div",{className:"label-list absolute flex column align-center modal-fade-in"},r.a.createElement("section",{className:"label-selector flex align-center justify-center low",onClick:function(){return e.handleChange("Low","priority")}},r.a.createElement("p",null,"Low")),r.a.createElement("section",{className:"label-selector flex align-center justify-center medium",onClick:function(){return e.handleChange("Medium","priority")}},r.a.createElement("p",null,"Medium")),r.a.createElement("section",{className:"label-selector flex align-center justify-center high",onClick:function(){return e.handleChange("High","priority")}},r.a.createElement("p",null,"High")),r.a.createElement("section",{className:"label-selector flex align-center justify-center empty-priority",onClick:function(){return e.handleChange("","priority")}},r.a.createElement("p",null," "))))))}var Ke={uploadImg:function(e){return Je.apply(this,arguments)}};function Je(){return(Je=Object(m.a)(d.a.mark((function e(t){var a,n,r,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"dtg7n0zye",a="https://api.cloudinary.com/v1_1/".concat("dtg7n0zye","/image/upload"),(n=new FormData).append("file",t),n.append("upload_preset","Task-Us"),e.prev=5,e.next=8,fetch(a,{method:"POST",body:n});case 8:return r=e.sent,e.next=11,r.json();case 11:return o=e.sent,e.abrupt("return",o);case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[5,15]])})))).apply(this,arguments)}var qe=a(99),Ze=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1,isOptionsModal:!1},e.handleChange=function(t){var a=t.target;e.setState(Object(xe.a)({},a.name,a.value))},e.toggleEditMode=function(t){e.setState({isEditMode:!e.state.isEditMode,txt:t})},e.updateReply=function(t){if(t.txt===e.state.txt)return e.setState({isEditMode:!1});t.txt=e.state.txt;var a=e.props.update.replies.map((function(e){return e.id===t.id?t:e})),n=Object(v.a)(Object(v.a)({},e.props.update),{},{replies:a});e.props.updateNote(n),e.setState({isEditMode:!1,txt:""})},e.removeReply=function(t){var a=e.props.update.replies.findIndex((function(e){return e.id===t})),n=Object(v.a)({},e.props.update).replies.splice(a,1);e.props.updateNote(n)},e.toggleOptionsModal=function(){e.setState({isOptionsModal:!e.state.isOptionsModal})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.reply,o=t.idx;return r.a.createElement("div",{key:o,className:"reply-box flex column relative"},r.a.createElement(qe.a,{className:"options-reply-btn cursor-pointer",onClick:this.toggleOptionsModal}),r.a.createElement("div",{className:"reply-content flex align-center"},r.a.createElement("img",{src:a.member.imgUrl,alt:""}),r.a.createElement("p",{className:"reply-name"},a.member.fullName),this.state.isEditMode?r.a.createElement("div",{className:"edit-box flex"},r.a.createElement("textarea",{name:"txt",onChange:this.handleChange,value:this.state.txt}),r.a.createElement(fe.f,{className:"update-reply-btn",onClick:function(){return e.updateReply(a)}})):r.a.createElement("p",{className:"reply-text"},a.txt)),this.state.isOptionsModal&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(){e.toggleOptionsModal()},className:"modal-screen-wrapper"}),r.a.createElement("div",{className:"update-options-modal"},r.a.createElement("p",{className:"remove-reply-btn  cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.removeReply(a.id)}},"Delete Post"),r.a.createElement("p",{className:"edit-reply-btn cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.toggleEditMode(a.txt)}},"Edit Post"))))}}]),a}(r.a.Component),Xe=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1,isOptionsModal:!1},e.onReply=function(t){if(e.state.txt&&!e.state.txt.split("").every((function(e){return" "===e}))){var a={txt:e.state.txt,createdAt:Date.now(),id:e.props.makeid(),member:{fullName:e.props.loggedUser.fullName,username:e.props.loggedUser.userName,_id:e.props.loggedUser.userName,imgUrl:e.props.loggedUser.imgUrl}},n=e.props.updates.find((function(e){return e.id===t.id}));n.replies=[].concat(Object(b.a)(n.replies),[a]),e.props.updateNote(n),e.setState({txt:""})}},e.removeUpdate=function(t){var a=e.props.updates.filter((function(e){return e.id!==t}));e.props.sendNote(a)},e.onToggleEditUpdate=function(){e.setState({isEditMode:!e.state.isEditMode})},e.editUpdate=function(t){if(t.txt===e.state.txt)return e.setState({isEditMode:!1});t.txt=e.state.txt;var a=e.props.updates.map((function(e){return e.id===t.id?t:e}));e.props.sendNote(a),e.setState({isEditMode:!1,txt:""})},e.handleChange=function(t){var a=t.target;e.setState(Object(xe.a)({},a.name,a.value))},e.toggleOptionsModal=function(){e.setState({isOptionsModal:!e.state.isOptionsModal})},e}return Object(f.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.update,o=t.idx;return r.a.createElement("div",{key:o,className:"update-box flex wrap column relative"},r.a.createElement(qe.a,{className:"options-reply-btn cursor-pointer",onClick:this.toggleOptionsModal}),this.state.isOptionsModal&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(){e.toggleOptionsModal()},className:"modal-screen-wrapper"}),r.a.createElement("div",{className:"update-options-modal"},r.a.createElement("p",{className:"remove-reply-btn cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.removeUpdate(a.id)}},"Delete Post"),r.a.createElement("p",{className:"edit-reply-btn cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.onToggleEditUpdate()}},"Edit Post"))),r.a.createElement("div",{className:"update-box-header flex align-center"},r.a.createElement("img",{src:a.member.imgUrl,alt:""}),r.a.createElement("p",{className:"member-name"},a.member.fullName)),this.state.isEditMode?r.a.createElement("div",{className:"update-box-edit flex column relative"},r.a.createElement("textarea",{value:this.state.txt,name:"txt",onChange:this.handleChange}),r.a.createElement(fe.f,{className:"submit-edit-btn absolute",onClick:function(){return e.editUpdate(a)}}),a.imgUrl&&r.a.createElement("img",{src:a.imgUrl,alt:""})):r.a.createElement("div",{className:"update-box-main flex column"},a.txt&&r.a.createElement("p",{className:"update-text"},a.txt),a.imgUrl&&r.a.createElement("img",{src:a.imgUrl,alt:""})),r.a.createElement("div",{className:"update-box-footer flex column"},a.replies&&r.a.createElement("div",{className:"replies-box flex column",style:{borderTop:"".concat(a.replies.length&&"1px solid rgba(109, 109, 109, 0.35)")}},a.replies.map((function(t,a){return r.a.createElement(Ze,{key:a,reply:t,idx:a,update:e.props.update,updateNote:e.props.updateNote})}))),!this.state.isEditMode&&r.a.createElement("div",{className:"reply-footer flex space-between align-center"},r.a.createElement("textarea",{value:this.state.txt,name:"txt",onChange:this.handleChange}),r.a.createElement("button",{className:"reply-button",onClick:function(){return e.onReply(a)}},"Reply"))))}}]),a}(r.a.Component),Qe=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={reply:{txt:""},update:{id:"",txt:"",imgUrl:"",replies:[]},isLoading:!1,imageUploaded:!1},e.handleChange=function(t){"file-img"===t.target.name?e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{img:t.target.files[0]})},(function(){e.uploadImg()})):"txt"===t.target.name?e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{txt:t.target.value})}):e.setState({reply:Object(v.a)(Object(v.a)({},e.state.reply),{},{txt:t.target.value})})},e.uploadImg=Object(m.a)(d.a.mark((function t(){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Ke.uploadImg(e.state.update.img,e.state);case 3:a=t.sent,e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{imgUrl:a.url}),isLoading:!1,imageUploaded:!0});case 5:case"end":return t.stop()}}),t)}))),e.sendNote=function(t){if(t.preventDefault(),e.state.update.txt&&!e.state.update.txt.split("").every((function(e){return" "===e}))||e.state.update.imgUrl){var a=[{id:$e(),createdAt:Date.now(),txt:e.state.update.txt,imgUrl:e.state.update.imgUrl,replies:[],member:{fullName:e.props.loggedUser.fullName,username:e.props.loggedUser.userName,_id:e.props.loggedUser.userName,imgUrl:e.props.loggedUser.imgUrl}}].concat(Object(b.a)(e.props.updates));e.setState({update:{txt:"",imgUrl:""},imageUploaded:!1}),e.props.sendNote(a)}},e.updateNote=function(t){var a=Object(b.a)(e.props.updates).map((function(e){return e.id===t.id?t:e}));e.props.sendNote(a)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.setState({imageUploaded:!1})}},{key:"render",value:function(){var e=this;if(!this.props.updates)return r.a.createElement("h1",null,"Loading...");var t=this.props.updates;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"updates-header flex column"},r.a.createElement(fe.a,{onClick:this.props.closeModal}),r.a.createElement("h1",null,this.props.task.name),r.a.createElement("div",{className:"updates-header-options flex column"},r.a.createElement("form",{onSubmit:this.sendNote,className:"notes-form flex align-center"},r.a.createElement("textarea",{name:"txt",value:this.state.update.txt,onChange:this.handleChange})),r.a.createElement("div",{className:"updates-btns flex align-center space-between"},r.a.createElement("div",{className:"image-uploader flex"},r.a.createElement("label",{"data-title":"Upload Image",htmlFor:this.props.task.id},this.state.isLoading?r.a.createElement("div",{class:"loadingio-spinner-spinner-gvjl1rpqs7q"},r.a.createElement("div",{class:"ldio-subadnemdcd"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):r.a.createElement(Re.a,null)),r.a.createElement("input",{name:"file-img",type:"file",id:this.props.task.id,onChange:this.handleChange,hidden:!0}),this.state.imageUploaded&&r.a.createElement("div",{className:"image-uploaded flex align-center"},r.a.createElement(pe.b,null),r.a.createElement("p",null," Image Ready!"))),this.state.isLoading?r.a.createElement("p",null,"Image is uploading.."):r.a.createElement("button",{onClick:this.sendNote},"Send")))),r.a.createElement("div",{className:"updates-container  ".concat(t.length?"":"flex justify-center align-center"," ")},t.length?t.map((function(a,n){return r.a.createElement(Xe,{update:a,key:n,idx:n,updates:t,loggedUser:e.props.loggedUser,sendNote:e.props.sendNote,updateNote:e.updateNote,makeid:$e})})):r.a.createElement("h1",null,"There are no posts to show.")))}}]),a}(r.a.Component);function $e(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var et=a(172),tt=a(171),at=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t,a){var n=e.state.tags.map((function(e){return e.id===a&&(e.txt=t.target.value),e}));e.setState({tags:n})},e.onAddTag=function(){var t=Object(b.a)(e.state.tags),a=e.elTagInput.current.value?e.elTagInput.current.value:"New Tag";t.push({id:e._makeid(),txt:a,color:nt()}),e.setState({tags:t}),e.props.onEditTags(t,a,"addTag")},e.onRemoveTag=function(t){var a=e.state.tags.find((function(e){return e.id===t})),n=e.state.tags.filter((function(e){return e.id!==t}));e.setState({tags:n}),e.props.onEditTags(n,a.txt,"removeTag")},e.onEditTag=function(t,a,n){e.props.task.tags[t].txt!==e.state.tags[t].txt&&e.props.onEditTags(e.state.tags,a,n)},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.elTagInput=r.a.createRef(),this.elTag=r.a.createRef(),this.setState({tags:JSON.parse(JSON.stringify(this.props.task.tags))})}},{key:"_makeid",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}},{key:"render",value:function(){var e=this;return this.state.tags&&0!==this.state.tags?r.a.createElement("div",{onClick:function(){return e.props.openModal("tags")},className:"label-container tags relative"},r.a.createElement("div",{className:"task-label-name flex justify-center align-center "},this.state.tags.map((function(t,a){return a>2?[]:a>1?r.a.createElement("div",{key:t.id,className:"task-number-of-tags"},r.a.createElement("span",null,e.state.tags.length>9?"+9":"+".concat(e.state.tags.length-2))):r.a.createElement("p",{key:a,style:{color:t.color}},r.a.createElement(tt.a,{lines:1,ellipsis:"...",width:75},"#",a===e.state.tags.length-1||1===a?t.txt:t.txt+","))}))),r.a.createElement(je.a,{in:this.props.isTagsShown},r.a.createElement("div",{className:"label-list tags-modal absolute flex column align-center "},r.a.createElement("div",{className:"tag-add-container  flex justify-center align-center"},r.a.createElement(ie.a,{onClick:function(t){e.elTagInput.current.value="",e.onAddTag()}}),r.a.createElement("input",{onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.onAddTag(),t.target.value="")},placeholder:"New tag",ref:this.elTagInput,type:"text"})),r.a.createElement("section",null,this.state.tags.map((function(t,a){return r.a.createElement("div",{className:"tag-container flex justify-center align-center",key:a},r.a.createElement(et.a,{className:"tag-remove-icon",onClick:function(){return e.onRemoveTag(t.id)}}),r.a.createElement("input",{style:{color:t.color},onBlur:function(t){t.target.blur(),e.onEditTag(a)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()},onChange:function(a){return e.handleChange(a,t.id)},value:t.txt,type:"text"}))})))))):r.a.createElement("h1",null,"no tags")}}]),a}(n.Component);function nt(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}var rt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1,imgUrl:"",isImageModalShown:!1},e.reloadProps=function(){e.setState({task:e.props.task})},e.handleNameChange=function(t){e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{name:t.target.value})})},e.handleDateChange=function(t){Se()(e.state.task.dueDate).format("DD/MMM/YYYY")!==Se()(t).format("DD/MMM/YYYY")&&e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{dueDate:Se()(t).valueOf()})},(function(){var t="".concat(e.props.loggedUser.fullName," changed task ").concat(e.state.task.name," date from ").concat(Se()(e.props.task.dueDate).format("DD/MMM/YYYY")," to ").concat(Se()(e.state.task.dueDate).format("DD/MMM/YYYY")," at group -").concat(e.props.group.name);e.props.onEditTask(e.state.task,e.props.task,t)}))},e.handleChange=function(t,a){var n="";e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},Object(xe.a)({},a,t))},(function(){n="".concat(e.props.loggedUser.fullName," changed task: ").concat(e.state.task.name," ").concat(a," from ").concat(e.props.task[a]," to ").concat(e.state.task[a]," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,n),e.state.isUpdatesShown||e.closeModal()}))},e.sendNote=function(t){var a="";e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{updates:Object(b.a)(t)})},(function(){a="".concat(e.props.loggedUser.fullName," sent an update at task: ").concat(e.props.task.name," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,a)}))},e.openModal=function(t){switch(t){case"status":e.setState({isStatusShown:!0});break;case"users":e.setState({isUsersShown:!0});break;case"updates":e.setState({isUpdatesShown:!0});break;case"priority":e.setState({isPriorityShown:!0});break;case"tags":e.setState({isTagsShown:!0})}},e.closeModal=function(){e.setState({isImageModalShown:!1,isStatusShown:!1,isUsersShown:!1,isPriorityShown:!1,isUpdatesShown:!1,isTagsShown:!1})},e.onRemoveMemberFromTask=function(t){var a="",n=e.state.task.members.find((function(e){return e._id===t}));e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{members:e.state.task.members.filter((function(e){return e._id!==t}))})},(function(){a="".concat(e.props.loggedUser.fullName," removed ").concat(n.fullName," from ").concat(e.state.task.name," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,a)}))},e.onAddUserToTask=function(t){var a="",n=e.props.users.find((function(e){return e._id===t}));e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{members:[].concat(Object(b.a)(e.state.task.members),[n])})},(function(){a="".concat(e.props.loggedUser.fullName," tasked ").concat(n.fullName," to ").concat(e.state.task.name," on group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,a)}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t)),e.closeModal()},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onEditTags=function(t,a,n){var r="";e.setState(Object(v.a)(Object(v.a)({},e.state),{},{task:Object(v.a)(Object(v.a)({},e.state.task),{},{tags:JSON.parse(JSON.stringify(t))})}),(function(){"addTag"===n?r="".concat(e.props.loggedUser.fullName," added tag named ").concat(a," to ").concat(e.state.task.name," on group - ").concat(e.props.group.name):"removeTag"===n&&(r="".concat(e.props.loggedUser.fullName," removed tag named ").concat(a," from ").concat(e.state.task.name," on group - ").concat(e.props.group.name)),e.props.onEditTask(e.state.task,e.props.task,r)}))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.contentEditable=r.a.createRef(),T.on("updatedBoard",this.reloadProps),this.setState(Object(v.a)(Object(v.a)({},this.state),{},{task:this.props.task,isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1}))}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard",this.reloadProps)}},{key:"render",value:function(){var e=this;if(!this.state.task)return r.a.createElement("h1",null,"Loading...");var t=this.state.task,a=t.name,n=t.members,o=t.status,s=t.priority,c=t.dueDate,i=t.updates,l=t.id,u=this.state,d=u.isUsersShown,m=u.isStatusShown,p=u.isPriorityShown,f=u.isUpdatesShown,g=u.isTagsShown;return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement("div",{className:"".concat(f&&"animate-side-modal"," side-modal")},r.a.createElement(Qe,{task:this.state.task,updates:i,members:n,priority:s,status:o,dueDate:c,loggedUser:this.props.loggedUser,users:this.props.users,sendNote:this.sendNote,handleChange:this.handleChange,handleDateChange:this.handleDateChange,onEditTags:this.onEditTags,onEditTask:this.props.onEditTask,closeModal:this.closeModal})),(d||m||p||f||g)&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.closeModal}),r.a.createElement(ce.b,{draggableId:l,index:this.props.index},(function(t,u){return r.a.createElement("section",Object.assign({key:l,className:"task flex space-between align-center ".concat(u.isDragging?"drag":"")},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),r.a.createElement("div",{className:"task-left flex align-center"},r.a.createElement("div",{className:"task-color-remove"},r.a.createElement("div",{style:{backgroundColor:e.props.group.color},className:"task-color"}),r.a.createElement("div",{className:"icon-container"},r.a.createElement(pe.a,{className:"task-remove-icon",onClick:function(){e.props.onRemoveTask(l,e.props.group)}}))),r.a.createElement("div",{className:"task-title-updates flex align-center space-between grow"},r.a.createElement("h2",null,r.a.createElement(Ne.a,{onFocus:e.focusText,className:"cursor-initial content-editable",innerRef:e.contentEditable,html:a,disabled:!1,onChange:e.handleNameChange,onBlur:function(){var t="".concat(e.props.loggedUser.fullName," changed task name from ").concat(e.state.task.name," to ").concat(a," at group - ").concat(e.props.group.name);e.props.onEditTask(e.state.task,e.props.task,t)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),r.a.createElement("div",{onClick:function(){return e.openModal("updates")},className:"notes-container relative grow"},r.a.createElement(ie.d,null),0!==i.length&&r.a.createElement("div",{className:"task-number-of-imgs flex justify-center align-center"},r.a.createElement("span",null,i.length))))),r.a.createElement("div",{className:"task-right flex align-center"},r.a.createElement(Ge,{members:n,users:e.props.users,isUsersShown:d,openModal:e.openModal,goToUserProfile:e.goToUserProfile,onAddUserToTask:e.onAddUserToTask,onRemoveMemberFromTask:e.onRemoveMemberFromTask}),r.a.createElement(We,{status:o,isStatusShown:m,handleChange:e.handleChange,openModal:e.openModal}),r.a.createElement(He,{dueDate:c,handleDateChange:e.handleDateChange}),r.a.createElement(ze,{priority:s,isPriorityShown:p,openModal:e.openModal,handleChange:e.handleChange}),r.a.createElement(at,{onEditTags:e.onEditTags,task:e.state.task,isTagsShown:g,openModal:e.openModal,handleChange:e.handleChange})))})),this.state.isImageModalShown&&r.a.createElement("div",{onClick:this.onToggleImageModal,className:"updates-image-modal"},r.a.createElement("img",{src:this.state.imgUrl,alt:""})))}}]),a}(n.Component),ot=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}))(Object(l.f)(rt)),st=a(339),ct=a(340),it=a(100),lt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",ElGroupSettings:null,elGroupColors:!1},e.reloadProps=function(){e.setState(Object(v.a)(Object(v.a)({},e.state),{},{name:e.props.group.name}))},e.handleChange=function(t){e.setState({name:t.target.value})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.handleMenuOpen=function(t){e.setState({ElGroupSettings:t.currentTarget})},e.handleMenuClose=function(){e.setState({ElGroupSettings:null,elGroupColors:!1})},e.handleColorsOpen=function(t){e.setState({elGroupColors:t.currentTarget})},e.handleColorsToggle=function(){e.setState({elGroupColors:!e.state.elGroupColors})},e.onChangeGroupColor=function(t){try{e.props.onEditGroup(e.props.group.id,t,"color")}catch(a){console.log("Error",a)}e.setState({ElGroupSettings:null,elGroupColors:!1})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.elInputAdd=r.a.createRef(),this.contentEditable=r.a.createRef(),T.on("updatedBoard",this.reloadProps),this.setState(Object(v.a)(Object(v.a)({},this.state),{},{name:this.props.group.name,id:this.props.group.id}))}},{key:"componentWillUnmount",value:function(){T.off("updatedBoard",this.reloadProps)}},{key:"convertToBar",value:function(e){var t=this.props.group.tasks,a=t.length,n=t.length/100,o=t.reduce((function(t,a){var n=a[e];return n&&(t[n]=t[n]?++t[n]:1),t}),{}),s=[];for(var c in o)o[c]/=n,s.push(r.a.createElement("div",{key:c,style:{width:o[c]?"".concat(o[c],"%"):"0"},"data-title":o[c]?" ".concat(c," ").concat(Math.round(a*o[c]/100),"/").concat(a," ").concat(o[c].toFixed(1),"%"):"",className:"precent-bar ".concat(c.toLowerCase())}));return s}},{key:"render",value:function(){var e=this;if(!this.state.id)return r.a.createElement("h1",null,"Loading...");var t=this.convertToBar("priority"),a=this.convertToBar("status"),n=this.state,o=n.name,s=n.ElGroupSettings,c=n.elGroupColors,i=this.props,l=i.group,u=i.index;return r.a.createElement(ce.b,{draggableId:l.id,index:u},(function(n,i){return r.a.createElement("section",Object.assign({key:l.id,className:"group ".concat(window.innerWidth>450?"padding-y-45 padding-x-30":"padding-y-15")},n.draggableProps,{ref:n.innerRef}),r.a.createElement("div",{className:"group-header-container flex space-between align-center"},r.a.createElement("div",{className:"group-header-left align-center flex relative"},r.a.createElement(Oe.b,{style:{color:l.color},className:"drop-down-menu-icon",onClick:e.handleMenuOpen}),r.a.createElement(st.a,{role:"menuContainer",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:e.handleMenuClose},r.a.createElement(ct.a,{onClick:function(){e.props.onRemoveGroup(l.id)}},r.a.createElement(fe.b,{className:"delete-group-icon"})," Delete Group"),r.a.createElement(ct.a,{onClick:e.handleColorsToggle},r.a.createElement(it.a,{className:"color-group-icon"})," Change Color")),c&&r.a.createElement("div",{className:"color-picker absolute flex wrap justify-center align-center"},r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#ffcbcb")},className:"color-pick",style:{backgroundColor:"#ffcbcb"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#f0a500")},className:"color-pick",style:{backgroundColor:"#f0a500"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#70adb5")},className:"color-pick",style:{backgroundColor:"#70adb5"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1a1c20")},className:"color-pick",style:{backgroundColor:"#1a1c20"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#9d65c9")},className:"color-pick",style:{backgroundColor:"#9d65c9"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#931a25")},className:"color-pick",style:{backgroundColor:"#931a25"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#7ea04d")},className:"color-pick",style:{backgroundColor:"#7ea04d"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#838383")},className:"color-pick",style:{backgroundColor:"#838383"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1d2d50")},className:"color-pick",style:{backgroundColor:"#1d2d50"}})),r.a.createElement("div",Object.assign({className:"drag-icon"},n.dragHandleProps),r.a.createElement(fe.c,null)),r.a.createElement("h1",{style:{color:l.color},className:"group-title"},r.a.createElement(Ne.a,{onFocus:e.focusText,className:"content-editable cursor-initial",innerRef:e.contentEditable,html:o,disabled:!1,onChange:e.handleChange,onBlur:function(){e.props.onEditGroup(l.id,e.state.name,"name")},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}))),r.a.createElement("div",Object.assign({className:"group-header-right flex"},n.dragHandleProps),r.a.createElement("h3",{style:{color:e.props.group.color}},"Members"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Status"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Due-Date"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Priority"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Tags"))),r.a.createElement(ce.c,{droppableId:l.id,type:"task"},(function(t,a){return r.a.createElement("div",Object.assign({className:"task-list ".concat(a.isDraggingOver?"drag-over":""),ref:t.innerRef},t.droppableProps),l.tasks.map((function(t,a){return r.a.createElement(ot,{onToggleUpdates:e.props.onToggleUpdates,onEditTask:e.props.onEditTask,index:a,onRemoveTask:e.props.onRemoveTask,key:t.id,group:l,task:t,users:e.props.users})})),t.placeholder)})),r.a.createElement("div",{className:"task task-add"},r.a.createElement("div",{className:"task-color",style:{backgroundColor:l.color}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.onAddTask(l.id,e.elInputAdd.current.value),e.elInputAdd.current.value=""},action:""},r.a.createElement("input",{ref:e.elInputAdd,className:"padding-x-30",placeholder:"+ Add Task",type:"text"}))),window.innerWidth>450&&r.a.createElement("section",{className:"group-precent-container flex"},r.a.createElement("div",{className:"group-precent flex"},a),r.a.createElement("div",{className:"group-precent flex"},t)))}))}}]),a}(n.Component),ut=a(341),dt=a(338);var mt={hideSnackbar:ue},pt=Object(c.b)((function(e){return{isSnackbarShown:e.systemReducer.isSnackbarShown,snackbarShown:e.systemReducer.snackbarTxt}}),mt)((function(e){var t=e.isSnackbarShown,a=e.snackbarShown;return r.a.createElement(ut.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:3e3,message:a,action:r.a.createElement(dt.a,{style:{color:"#f2f1dfb0"},onClick:e.hideSnackbar},"Close")})}));var ft=a(173),gt=a(42),ht=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuShown:!1},e.toggleMenuModal=function(){e.setState({isMenuShown:!e.state.isMenuShown})},e.closeMenuModal=function(){e.setState({isMenuShown:!1})},e}return Object(f.a)(a,[{key:"_getMemeberInitials",value:function(e){var t=e.fullName.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o="",s="";return n&&(o=n.charAt(0).toUpperCase()),r&&(s=r.charAt(0).toUpperCase()),[o,s]}},{key:"render",value:function(){var e=this,t=this.props,a=t.loggedUser,n=t.params,o=t.members,s=t.boardName;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:" flex align-center space-between"},r.a.createElement("div",{className:"mobile-nav-left flex"},r.a.createElement(ft.a,{onClick:this.toggleMenuModal}),r.a.createElement("h1",null,s||a.fullName)),s&&r.a.createElement("div",{className:"board-users-container flex"},0===o.length&&r.a.createElement("div",{className:"user-img-container"}," ",r.a.createElement(it.b,null)),0!==o.length&&o.map((function(t,a){return r.a.createElement("div",{key:a,className:"user-img-container"},t.imgUrl?r.a.createElement("img",{className:"member-img",src:t.imgUrl,alt:""}):r.a.createElement("div",{className:"member-letter"},e._getMemeberInitials(t)[0],e._getMemeberInitials(t)[1]))})))),r.a.createElement("section",{className:"".concat(this.state.isMenuShown&&"animate-menu-modal"," menu-modal flex column align-center")},r.a.createElement(i.b,{to:"/"},r.a.createElement(fe.d,null),"  ",r.a.createElement("h3",null,"Home")),r.a.createElement(i.b,{to:"/boards"},r.a.createElement(ie.c,null)," ",r.a.createElement("h3",null,"Boards List")),n&&r.a.createElement(i.b,{to:"/mob-activities/".concat(n.id)},r.a.createElement(pe.c,null)," ",r.a.createElement("h3",null,"Activities")),r.a.createElement(i.b,{to:"/myweek"},r.a.createElement(ie.b,null)," ",r.a.createElement("h3",null,"My Week")),r.a.createElement(i.b,{to:"/user/".concat(a._id)},r.a.createElement(gt.c,null)," ",r.a.createElement("h3",null,"My Profile")),r.a.createElement(i.b,{to:"/login"},r.a.createElement(Re.b,null)," ",r.a.createElement("h3",null,"Logout"))),this.state.isMenuShown&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.closeMenuModal}))}}]),a}(r.a.Component),bt=a(174),vt=a.n(bt);function Et(e){var t=e.board,a=t.members.map((function(e){var t=Object(v.a)({},e);return t.done=0,t["working on it"]=0,t.stuck=0,t.other=0,t}));a.forEach((function(e){t.groups.forEach((function(t){t.tasks.forEach((function(t){t.members.some((function(t){return t._id===e._id}))&&(t.status?e[t.status.toLowerCase()]++:e.other++)}))}))}));var n=[],o=[],s=[],c=[],i=[];a.forEach((function(e){n.push(e.fullName),o.push(e.done),s.push(e["working on it"]),c.push(e.stuck),i.push(e.other)}));var l={colors:["#00ca72","#fdab3d","#e44258","#a8a8a8"],chart:{type:"bar",height:"100%",width:"100%",stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[],plotOptions:{bar:{horizontal:!1}},xaxis:{categories:[]},legend:{position:"right",offsetY:40},fill:{opacity:1}};l.xaxis={categories:n};var u=[{name:"Done",data:o},{name:"Working on it",data:s},{name:"Stuck",data:c},{name:"Other",data:i}];return r.a.createElement(vt.a,{options:l,series:u,type:"bar",width:"90%",height:"75%"})}var yt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardId:"",txt:"",isBoardShown:!0,isDashboardShown:!1,isModalShown:!1},e.onEditBoard=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.loggedUser,e.props.updateBoard(a,n,r),P.notifyUsers("".concat(a.name,": ").concat(n),a.members,r),n&&e.displayPopup("Updated board.");case 4:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.applyFilter=function(t,a){var n=JSON.parse(JSON.stringify(t));function r(e){n.groups=n.groups.map((function(t){return t.tasks=t.tasks.filter(e),t}))}return a.groupId&&(n.groups=n.groups.filter((function(e){return e.id===a.groupId}))),a.memberId&&r((function(e){return e.members.some((function(e){return e._id===a.memberId}))})),a.taskPriority&&r((function(e){return e.priority.toLowerCase()===a.taskPriority.toLowerCase()})),a.taskStatus&&r((function(e){return e.status.toLowerCase()===a.taskStatus.toLowerCase()})),a.dueDate&&r((function(e){return e.dueDate===a.dueDate})),e.state.txt&&r((function(t){return t.name.toLowerCase().includes(e.state.txt.toLowerCase())||t.tags.some((function(t){return t.txt.toLowerCase().includes(e.state.txt.toLowerCase())}))})),n},e.onAddGroup=Object(m.a)(d.a.mark((function t(){var a,n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props.loggedUser,n=e._getCurrBoard();try{e.props.addGroup(n,e.props.loggedUser),P.notifyUsers("".concat(n.name,": ").concat(a.fullName," added a group."),n.members,a),e.props.clearFilter(),e.displayPopup("Added group.")}catch(r){console.log("Error",r)}e.props.history.push("/board/".concat(e.state.boardId));case 4:case"end":return t.stop()}}),t)}))),e.onRemoveGroup=function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r,o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.loggedUser,r=e._getCurrBoard(),o=r.groups.find((function(e){return e.id===a})),s="".concat(r.name,": ").concat(n.fullName," removed group ").concat(o.name);try{e.props.removeGroup(a,r,e.props.loggedUser),P.notifyUsers(s,r.members,n),e.displayPopup("Removed group.")}catch(c){console.log("Error",c)}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onEditGroup=function(){var t=Object(m.a)(d.a.mark((function t(a,n,r){var o,s,c,i,l;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.loggedUser,s=e._getCurrBoard(),(c=s.groups.find((function(e){return e.id===a})))[r]!==n){t.next=5;break}return t.abrupt("return");case 5:i=c[r],c[r]=n;try{l="".concat(c.name,": ").concat(o.fullName," Changed ").concat(r," from ").concat(i," to ").concat(n),e.props.editGroup(c,s,l,o),P.notifyUsers(l,s.members,o),e.displayPopup("Updated group.")}catch(u){console.log("Error",u)}case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.onRemoveTask=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r,o,s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.loggedUser,o=e._getCurrBoard();try{s=n.tasks.find((function(e){return e.id===a})),c="".concat(r.fullName," Removed the task ").concat(s.name," from ").concat(n.name),e.props.removeTask(a,o,n,r),P.notifyUsers(c,o.members,r),e.displayPopup("Removed task.")}catch(i){console.log("Error",i)}case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onAddTask=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r,o,s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n||(n="New task"),r=e.props.loggedUser,o=e._getCurrBoard(),s=o.groups.find((function(e){return e.id===a})),c=" ".concat(o.name,": ").concat(r.fullName," Added a task to ").concat(s.name);try{e.props.addTask(a,n,o,r),P.notifyUsers(c,o.members,r),e.props.clearFilter(),e.displayPopup("Added task.")}catch(i){console.log("Error",i)}case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onEditTask=function(){var t=Object(m.a)(d.a.mark((function t(a,n,r){var o,s;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!me.a.isEqual(a,n)){t.next=2;break}return t.abrupt("return");case 2:o=e._getCurrBoard(),s=e.props.loggedUser,e.props.editTask(a,o,r,e.props.loggedUser),P.notifyUsers("".concat(o.name,": ").concat(r),o.members,s),e.displayPopup("Updated task.");case 7:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.onDragEnd=function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r,o,s,c,i,l,u,m,p,f,g,h,b,E,y,k,N,w,O,x,C;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.destination,r=a.source,o=a.draggableId,s=a.type,n){t.next=3;break}return t.abrupt("return");case 3:if(n.droppableId!==r.droppableId||n.index!==r.index){t.next=5;break}return t.abrupt("return");case 5:if(c=e._getCurrBoard(),"group"===s){i=Array.from(c.groups),l=i.find((function(e){return e.id===o})),i.splice(r.index,1),i.splice(n.index,0,l),c.groups=i;try{e.props.updateBoard(c)}catch(d){console.log("Error",d)}}else if(u=c.groups.find((function(e){return e.id===r.droppableId})),m=c.groups.find((function(e){return e.id===n.droppableId})),u.id===m.id){p=Array.from(u.tasks),f=u.tasks.find((function(e){return e.id===o})),p.splice(r.index,1),p.splice(n.index,0,f),g=Object(v.a)(Object(v.a)({},u),{},{tasks:p}),h=c.groups.findIndex((function(e){return e.id===g.id})),c.groups.splice(h,1,g);try{e.props.updateBoard(c)}catch(d){console.log("Error",d)}}else{(b=Array.from(u.tasks)).splice(r.index,1),E=Object(v.a)(Object(v.a)({},u),{},{tasks:b}),y=Array.from(m.tasks),k=u.tasks.find((function(e){return e.id===o})),y.splice(n.index,0,k),N=Object(v.a)(Object(v.a)({},m),{},{tasks:y}),w=c.groups.findIndex((function(e){return e.id===E.id})),O=c.groups.findIndex((function(e){return e.id===N.id})),c.groups.splice(w,1,E),c.groups.splice(O,1,N);try{x=e.props.loggedUser,C="".concat(x.fullName," Moved ").concat(k.name," from ").concat(E.name," to ").concat(N.name),e.props.updateBoard(e._getCurrBoard(),C,x),P.notifyUsers("".concat(c.name,": ").concat(C),c.members,x)}catch(d){console.log("Error",d)}}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSearch=function(t){e.setState({txt:t.target.value})},e.handleBoardBarSearch=function(t){e.setState({boardBarSearch:t})},e._getCurrBoard=function(){return e.props.boards.find((function(t){return t._id===e.state.boardId}))},e.showBoard=function(){e.setState({isBoardShown:!0,isDashboardShown:!1,isModalShown:!1})},e.showDashboard=function(){e.setState({isDashboardShown:!0,isBoardShown:!1,isModalShown:!1})},e.toggleModal=function(){e.setState({isModalShown:!e.state.isModalShown})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedUser||this.props.history.push("/"),e.prev=1,this.props.boards&&this.props.boards.length){e.next=5;break}return e.next=5,this.props.loadBoards();case 5:if(this.props.users&&this.props.users.length){e.next=8;break}return e.next=8,this.props.loadUsers();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("Error",e.t0);case 13:this.setState({boardId:this.props.match.params.id});case 14:case"end":return e.stop()}}),e,this,[[1,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"displayPopup",value:function(e){this.props.showSnackbar(e),setTimeout(this.props.hideSnackbar,3e3)}},{key:"componentDidUpdate",value:function(e,t){e.match.params.id!==this.props.match.params.id&&(this.props.clearFilter(),this.setState({boardId:this.props.match.params.id}))}},{key:"render",value:function(){var e=this,t=this._getCurrBoard(),a=this.props,n=a.users,o=a.filterBy;if(!t)return r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif",alt:""}));var s=this.applyFilter(t,o);return r.a.createElement("section",{className:"board ".concat(window.innerWidth>450?"flex":"flex column")},window.innerWidth>450?r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,null),r.a.createElement(be,{handleBoardBarSearch:this.handleBoardBarSearch})):r.a.createElement(ht,{boardName:t.name,members:t.members,params:this.props.match.params,loggedUser:this.props.loggedUser}),r.a.createElement("div",{className:"board-container"},window.innerWidth>450&&r.a.createElement(De,{filterBy:o,loggedUser:this.props.loggedUser,board:t,onAddGroup:this.onAddGroup,onEditBoard:this.onEditBoard,handleSearch:this.handleSearch,users:n,showBoard:this.showBoard,showDashboard:this.showDashboard,toggleModal:this.toggleModal,isModalShown:this.state.isModalShown,isBoardShown:this.state.isBoardShown}),this.state.isBoardShown?r.a.createElement("div",{className:"groups-container ".concat(window.innerwidth>450&&"padding-x-30"),style:{height:"".concat(window.innerWidth<450&&"94vh")}},r.a.createElement(ce.a,{onDragEnd:this.onDragEnd},r.a.createElement(ce.c,{droppableId:t._id,type:"group"},(function(a,n){return r.a.createElement("div",Object.assign({className:"group-list",ref:a.innerRef},a.droppableProps),s.groups.map((function(a,n){return r.a.createElement(lt,{key:a.id,index:n,onEditTask:e.onEditTask,onAddTask:e.onAddTask,onRemoveTask:e.onRemoveTask,onRemoveGroup:e.onRemoveGroup,onEditGroup:e.onEditGroup,onChangeGroupColor:e.onChangeGroupColor,group:a,users:t.members})})),a.placeholder)}))),window.innerWidth<450&&r.a.createElement(ie.e,{className:"group-add-btn",onClick:this.onAddGroup})):r.a.createElement(Et,{board:t})),r.a.createElement(pt,null))}}]),a}(n.Component),kt={loadBoards:L,addGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:M.addGroup(e,t)})}catch(n){throw console.log("boardActions: Couldn't add group"),n}}},removeGroup:function(e,t,a){return function(n){try{n({type:"SET_BOARD",board:M.removeGroup(e,t,a)})}catch(r){throw console.log("boardActions: Couldn't remove group"),r}}},addTask:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.addTask(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't add task"),o}}},removeTask:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.removeTask(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't add task"),o}}},editTask:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.updateTask(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't edit task"),o}}},editGroup:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.updateGroup(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't edit group"),o}}},updateBoard:I,showSnackbar:le,hideSnackbar:ue,loadUsers:ee,clearFilter:function(){return function(e){e({type:"SET_FILTER",filter:{}})}},groupChanges:function(e,t,a){return function(){var n=Object(m.a)(d.a.mark((function n(r){var o,s,c;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=M.handleBoardChanges(e,t,a),r({type:"SET_BOARD",board:o}),n.next=5,P.loadUsers();case 5:s=n.sent,c={byUser:{fullName:t.fullName,imgUrl:t.imgUrl},content:"".concat(a.name,": ").concat(e),createdAt:Date.now()},a.members.forEach((function(e){if(e._id!==t._id){var a=s.find((function(t){return t._id===e._id}));a.notifications.unshift(c),P.updateUser(a),T.emit("send-notif",{memberId:e._id,notification:c})}})),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(0),console.log("boardActions: Couldn't send activities/notif"),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}},Nt=Object(c.b)((function(e){return{boards:e.boardReducer.boards,users:e.userReducer.users,loggedUser:e.userReducer.loggedUser,filterBy:e.boardReducer.filterBy}}),kt)(yt),wt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToBoard=function(t){e.props.history.push("/board/".concat(t))},e.onAddBoard=function(){e.props.addBoard(e.props.loggedUser)},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.props.boards&&this.props.boards.length){e.next=13;break}return e.next=4,this.props.loadBoards();case 4:if(e.prev=4,this.props.users&&this.props.users.length){e.next=8;break}return e.next=8,this.props.loadUsers();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Error",e.t0);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),console.log("Error",e.t1);case 18:case"end":return e.stop()}}),e,this,[[0,15],[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"_getMemeberInitials",value:function(e){var t=e.fullName.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o="",s="";return n&&(o=n.charAt(0).toUpperCase()),r&&(s=r.charAt(0).toUpperCase()),[o,s]}},{key:"render",value:function(){var e=this;return 0===this.props.boards.length?r.a.createElement("h1",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(ht,{loggedUser:this.props.loggedUser}),r.a.createElement("div",{className:"boards-list flex column align-center relative"},this.props.boards.map((function(t){return r.a.createElement("div",{key:t._id,className:"board-details flex column",onClick:function(){return e.goToBoard(t._id)}},r.a.createElement("div",{className:"board-details-header flex  space-between"},r.a.createElement("h2",null,t.name),r.a.createElement("div",{className:"board-members-imgs flex"},t.members.map((function(t){return t.imgUrl?r.a.createElement("img",{className:"member-img",key:t._id,src:t.imgUrl,alt:""}):r.a.createElement("div",{key:t._id,className:"member-letter member-img"},e._getMemeberInitials(t)[0],e._getMemeberInitials(t)[1])})))),r.a.createElement("div",{className:"board-details-main flex column wrap"},t.groups.map((function(e){return r.a.createElement("p",{style:{color:e.color},key:e.id},e.name)}))))})),r.a.createElement(ie.e,{onClick:this.onAddBoard})))}}]),a}(n.Component),Ot={loadBoards:L,addBoard:F,loadUsers:ee},xt=Object(c.b)((function(e){return{boards:e.boardReducer.boards,users:e.userReducer.users,loggedUser:e.userReducer.loggedUser}}),Ot)(wt),Ct=a(30),St=a(177),jt=a.n(St),Ut=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1,isErrLogin:!1},e.onLogin=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.resetForm,t.prev=1,r(),t.next=5,e.props.login(a);case 5:return e.setState({isLoading:!0}),t.next=8,e.props.loadBoards();case 8:e.setState({isLoading:!1}),e.props.loggedUser&&e.props.history.push("/board/".concat(e.props.boards[0]._id)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(1),e.setState({isErrLogin:!0}),setTimeout((function(){e.setState({isErrLogin:!1})}),2e3);case 16:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:return e.setState({isLoading:!0}),t.next=5,e.props.loadBoards();case 5:e.setState({isLoading:!1}),e.props.history.push("/board/".concat(e.props.boards[0]._id));case 7:case"end":return t.stop()}}),t)}))),e.responseFacebook=function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:a.name,email:a.email,imgUrl:a.picture.data.url,facebookId:a.userID},t.next=3,e.props.login(n);case 3:return e.setState({isLoading:!0}),t.next=6,e.props.loadBoards();case 6:e.setState({isLoading:!1}),e.props.loggedUser&&e.props.history.push("/board/".concat(e.props.boards[0]._id));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif",alt:""})):r.a.createElement("div",{className:"sign-login"},r.a.createElement(Ct.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:this.onLogin},r.a.createElement(Ct.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(gt.d,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(Ct.b,{className:"sign-login-input",type:"text",autoComplete:"curren-username",name:"username"})),r.a.createElement(Ct.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(Ct.b,{className:"sign-login-input",type:"password",autoComplete:"current-password",name:"password"})),r.a.createElement(Ct.a,{name:"password",component:"span"}),r.a.createElement("div",null,r.a.createElement("button",{type:"submit flex"},"Login"),r.a.createElement("div",{type:"button",className:"facebook-btn-container"},r.a.createElement(gt.b,null),r.a.createElement(jt.a,{appId:"632288707652598",fields:"name,email,picture",cssClass:"facebook-btn",callback:this.responseFacebook}))),r.a.createElement("a",{href:"/#/signup"},"Don't have an account? sign up here."),r.a.createElement("button",{className:"guest-button",onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement("div",{"data-title":"Back to home",className:"go-back"},r.a.createElement(i.b,{to:"/"},r.a.createElement(gt.a,null))),r.a.createElement("div",{className:"login-err-modal flex justify-center align-center ".concat(this.state.isErrLogin&&"animate-login-err-modal")},r.a.createElement("h2",null,"Wrong password / username")))}}]),a}(n.Component),Tt={login:function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.login(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:ae,loadBoards:L,signup:te},Mt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),Tt)(Object(l.f)(Ut)),At=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isLoading:!1},e.onSignup=function(){var t=Object(m.a)(d.a.mark((function t(a,n){var r,o,s,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),r=a.username,o=a.password,s=a.email,c=a.fullName,t.prev=3,t.next=6,e.props.signup({username:r,password:o,email:s,fullName:c});case 6:return e.setState({isLoading:!0}),t.next=9,e.props.loadBoards();case 9:e.setState({isLoading:!1}),e.props.history.push("/board/".concat(e.props.boards[0]._id)),t.next=17;break;case 13:throw t.prev=13,t.t0=t.catch(3),console.log("Signup: Couldn't sign up"),t.t0;case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(m.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(f.a)(a,[{key:"render",value:function(){return this.state.isLoading?r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif",alt:""})):r.a.createElement("div",{className:"sign-login"},r.a.createElement(Ct.d,{initialValues:{username:"",password:"",confirm:"",email:"",fullName:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.fullName||(t.fullName="Required"),e.password||(t.password="Required"),e.confirm!==e.password&&(t.confirm="Doesn't match password"),/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email.toLowerCase())||(t.email="Invalid email address"),t},onSubmit:this.onSignup},r.a.createElement(Ct.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(gt.d,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(Ct.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(Ct.a,{name:"username",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Full name *"),r.a.createElement(Ct.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"fullName"})),r.a.createElement(Ct.a,{name:"fullName",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Email *"),r.a.createElement(Ct.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"email"})),r.a.createElement(Ct.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(Ct.b,{autoComplete:"something",className:"sign-login-input",type:"password",name:"password"})),r.a.createElement(Ct.a,{name:"password",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Confirm password *"),r.a.createElement(Ct.b,{autoComplete:"something",className:"sign-login-input",type:"password",name:"confirm"})),r.a.createElement(Ct.a,{name:"confirm",component:"span"}),r.a.createElement("button",{type:"submit"},"Signup"),r.a.createElement("a",{href:"/#/login"},"Already have an account? Login here!"),r.a.createElement("button",{className:"guest-button",onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement("div",{"data-title":"Back to home",className:"go-back"},r.a.createElement(i.b,{to:"/"},r.a.createElement(gt.a,null))))}}]),a}(n.Component),Bt={signup:te,guestLogin:ae,loadBoards:L},_t=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),Bt)(Object(l.f)(At)),Dt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:!1,user:{_id:"",email:"",username:"",fullName:"",imgUrl:""}},e.toggleModal=function(){e.setState({isModalOpen:!e.state.isModalOpen})},e.handleChange=function(t){var a=t.target;e.setState({user:Object(v.a)(Object(v.a)({},e.state.user),{},Object(xe.a)({},a.name,a.value))})},e.updateProfile=function(t){t.preventDefault(),e.props.updateUser(e.state.user),e.toggleModal()},e.uploadImg=function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ke.uploadImg(a.target.files[0]);case 2:n=t.sent,e.setState({user:Object(v.a)(Object(v.a)({},e.state.user),{},{imgUrl:n.url})});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(d.a.mark((function e(){var t=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.loadBoards(),setTimeout(Object(m.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getUserById(t.props.match.params.id);case 2:a=e.sent,t.setState({user:Object(v.a)({},a)});case 4:case"end":return e.stop()}}),e)}))),500);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.match.params.id!==this.props.match.params.id&&this.setState({user:{}},(function(){setTimeout(Object(m.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getUserById(a.props.match.params.id);case 2:t=e.sent,a.setState({user:Object(v.a)({},t)});case 4:case"end":return e.stop()}}),e)}))),500)}));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onMoveToBoard",value:function(e){this.props.history.push("/board/".concat(e))}},{key:"render",value:function(){var e=this,t=this.state.user,a=t.email,n=t.fullName,o=t.imgUrl,s=t._id;if(!s)return r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif",alt:""}));var c=n.split(" "),i=Object(ve.a)(c,2),l=i[0],u=i[1],d=l.charAt(0).toUpperCase();u&&(d+=u.charAt(0).toUpperCase());var m=this.props.loggedUser,p=this.props.boards.filter((function(t){return t.boardCreator._id===e.state.user._id})),f=0;return this.props.boards.forEach((function(t){t.groups.forEach((function(t){t.tasks.forEach((function(t){t.members.forEach((function(t){t&&t._id===e.state.user._id&&f++}))}))}))})),r.a.createElement("section",{className:"user-profile flex ".concat(window.innerWidth<450&&"column")},window.innerWidth>450?r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,null),r.a.createElement(be,null)):r.a.createElement(ht,{loggedUser:this.props.loggedUser}),r.a.createElement("div",{className:"user-container relative"},r.a.createElement("header",{className:"header-container padding-x-15 padding-y-15 flex justify-center  align-center"},o?r.a.createElement("img",{className:"user-profile-big",src:o,alt:""}):r.a.createElement("div",{className:"user-profile-big initials flex align-center justify-center"},d)),r.a.createElement("div",{className:"user-details-container padding-x-30 padding-y-45 align-center  flex  column"},r.a.createElement(gt.a,{className:"go-back-arrow",onClick:function(){return e.props.history.goBack()}}),m._id===s&&"5f6efc73805dbf6054d58794"!==m._id?r.a.createElement("h2",{onClick:this.toggleModal,className:"clickable-header"},"Edit Profile"):"",r.a.createElement("div",{className:"user-details-inner-container flex justify-center"},r.a.createElement("div",{className:"col-left"},r.a.createElement("h1",null,"Details"),r.a.createElement("h3",null,"Email: ",a),r.a.createElement("h3",null,"Full Name: ",n)),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-mid"},r.a.createElement("h1",null,"Boards"),p.length?r.a.createElement("h3",null," Boards created by ",m._id===this.props.match.params.id?"you":"this user:","  ",r.a.createElement("br",null),"  ",p.map((function(t,a){return r.a.createElement("li",{onClick:function(){return e.onMoveToBoard(t._id)},key:a},t.name)}))):r.a.createElement("h3",null,"No boards created.")),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-right"},r.a.createElement("h1",null,"Tasks"),r.a.createElement("h3",null,"Number of tasks assigned to ",m._id===this.props.match.params.id?"you":"this user:"," : ",f)))),r.a.createElement(je.a,{in:this.state.isModalOpen},r.a.createElement("div",{className:"modal-screen flex justify-center align-center"},r.a.createElement("div",{className:"modal-container absolute"},r.a.createElement("div",{className:"user-modal-header padding-x-15 padding-y-15 flex justify-center align-center"},r.a.createElement("label",null," ",this.state.user.imgUrl?r.a.createElement("img",{className:"user-profile-big",src:this.state.user.imgUrl,alt:"profile-img"}):r.a.createElement("div",{className:"user-profile-big initials flex align-center justify-center"},d),r.a.createElement("input",{type:"file",onChange:this.uploadImg,hidden:!0}))),r.a.createElement("div",{className:"user-modal-main"},r.a.createElement("form",{className:"form-container flex justify-center column  align-center",onSubmit:this.updateProfile},r.a.createElement("input",{value:this.state.user.email,autoComplete:"current-email",onChange:this.handleChange,name:"email",placeholder:"Email",type:"email"}),r.a.createElement("input",{value:this.state.user.username,autoComplete:"current-username",onChange:this.handleChange,name:"username",placeholder:"Username",type:"text"}),r.a.createElement("input",{value:this.state.user.fullName,autoComplete:"current-fullname",onChange:this.handleChange,name:"fullName",placeholder:"Full Name",type:"text"}),r.a.createElement("button",{onClick:this.updateProfile},"Save Changes"),r.a.createElement("button",{type:"button",className:"secondary-btn",onClick:this.toggleModal},"Cancel"))))))))}}]),a}(n.Component),Rt={loadBoards:L,updateUser:ne},Lt=Object(c.b)((function(e){return{modal:e.systemReducer.modal,loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),Rt)(Dt),It=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isShown:!0},e.toggleIsShown=function(){e.setState({isShown:!e.state.isShown})},e}return Object(f.a)(a,[{key:"getDaysFromNow",value:function(e){return Se()(e).isAfter(Se()().add(1,"day").endOf("day"))?Se()(e).format("MMM DD"):Se()(e).isBefore(Se()().endOf("day"))?"Today":"Tomorrow"}},{key:"moveToUserProfile",value:function(e){this.props.history.push("/user/".concat(e))}},{key:"render",value:function(){var e=this,t=this.props,a=t.tasks,n=t.header;return r.a.createElement("div",{className:"upcoming-tasks"},r.a.createElement("header",{className:"flex space-between align-center"},r.a.createElement("h2",{className:"tasks-header"},"".concat(n,": (").concat(a.length,")")),r.a.createElement(Oe.a,{onClick:this.toggleIsShown,className:this.state.isShown?"toggle-btn rotate0":"toggle-btn rotate90"})),r.a.createElement("div",{className:"upcoming-tasks-container ".concat(!this.state.isShown&&"not-shown")},a.map((function(t){return r.a.createElement("div",{key:t.id,className:"task-preview space-between align-center"},r.a.createElement("div",{className:"left-column"},r.a.createElement("p",{className:"task-preview-name"},t.name),r.a.createElement("p",{className:"task-location"},"At: ",r.a.createElement("span",{onClick:function(){return e.props.history.push("/board/".concat(t.boardId))}},"".concat(t.boardName," > ").concat(t.groupName)))),r.a.createElement("section",{className:"right-column flex align-center space-between"},r.a.createElement("div",{className:"user-img-container flex justify-center align-center"},0!==t.members.length&&(t.members[0].imgUrl?r.a.createElement("img",{onClick:function(){return e.moveToUserProfile(t.members[0]._id)},alt:"profile",src:t.members[0].imgUrl}):r.a.createElement("div",{onClick:function(){return e.moveToUserProfile(t.members[0]._id)},className:"member-letter"},t.members[0].fullName.charAt(0).toUpperCase()))),r.a.createElement("div",{className:"deadline-container flex align-center",onClick:function(){return e.props.history.push("/board/".concat(t.boardId))}},r.a.createElement("h2",null,e.getDaysFromNow(t.dueDate)))))}))))}}]),a}(n.Component),Ft=Object(l.f)(It),Pt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchVal:""},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e.toggleTodayTasks=function(){e.setState({isTodayTasksShown:!e.state.isTodayTasksShown})},e.toggleUpcomingTasks=function(){e.setState({isUpcomingTasksShown:!e.state.isUpcomingTasksShown})},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){this.props.boards&&this.props.boards.length||this.props.loadBoards()}},{key:"getUpcomingTasks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=this.props,r=n.boards,o=n.loggedUser;return r.forEach((function(n){n.groups.forEach((function(r){a.push.apply(a,Object(b.a)(r.tasks.filter((function(a){a.boardId=n._id,a.boardName=n.name,a.groupName=r.name;var s=a.members.some((function(e){return e._id===o._id})),c=!t||Se()(a.dueDate).isAfter(Se()().add(t,"days").endOf("day"));return Se()(a.dueDate).isBefore(Se()().add(e,"days").startOf("day"))&&c&&s}))))}))})),a}},{key:"applySearch",value:function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}},{key:"render",value:function(){var e=this.getUpcomingTasks(1),t=this.getUpcomingTasks(7,1),a=this.state.searchVal,o=this.props.loggedUser.fullName.split(" ")[0],s=e.length+t.length;return a&&(e=this.applySearch(e,a),t=this.applySearch(t,a)),r.a.createElement("section",{className:"my-week flex"},window.innerWidth>450?r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe,null),r.a.createElement(be,null)):r.a.createElement(ht,{loggedUser:this.props.loggedUser}),r.a.createElement("div",{className:"my-week-container flex column space around"},r.a.createElement("div",{className:"my-week-header flex column space-around"},r.a.createElement("div",{className:"flex align-center space-around"},r.a.createElement("img",{src:"my-week-calendar.png",alt:""}),r.a.createElement("section",{className:"greeting-container"},r.a.createElement("h1",null,"Hey ".concat(o,","),s?"You have ".concat(s," assignments this week."):"You have no assignments this week")))),r.a.createElement("input",{className:"task-search",onChange:this.handleChange,value:a,type:"text",placeholder:"search"}),s?r.a.createElement(n.Fragment,null,r.a.createElement(Ft,{header:"Today",tasks:e}),r.a.createElement(Ft,{header:"Upcoming",tasks:t})):r.a.createElement("h1",{className:"no-tasks"},"No tasks left for this week")))}}]),a}(n.Component),Gt={loadBoards:L},Wt=Object(c.b)((function(e){return{boards:e.boardReducer.boards,loggedUser:e.userReducer.loggedUser}}),Gt)(Pt),Yt=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(p.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOrderReversed:!1,isFilterOpen:!1,filterBy:{},searchVal:""},e.getBoardById=function(t){var a=e.props.boards.find((function(e){return e._id===t}));e.setState(Object(v.a)(Object(v.a)({},e.state),{},{board:a}))},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e.toggleFilter=function(){e.setState({isFilterOpen:!e.state.isFilterOpen})},e.onClearLog=function(){var t=Object(v.a)(Object(v.a)({},e.state.board),{},{activityLog:[]});e.setState({board:t},(function(){e.props.updateBoard(t)}))},e.moveToProfile=function(t){e.props.history.push("/user/".concat(t))},e}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.props.boards&&this.props.boards.length){e.next=4;break}return e.next=4,this.props.loadBoards();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error",e.t0);case 9:this.getBoardById(this.props.match.params.id);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSetFilter",value:function(e,t){var a=Object(v.a)({},this.state.filterBy);a[e]===t&&(t=""),this.setState({filterBy:Object(v.a)(Object(v.a)({},a),{},Object(xe.a)({},e,t))})}},{key:"getActivityDates",value:function(){var e=this.state.board.activityLog.reduce((function(e,t){return e[Se()(t.createdAt).format("DD MMM")]="",e}),{});return Object.keys(e)}},{key:"getActivityMembers",value:function(){var e=this.state.board.activityLog.reduce((function(e,t){return e[t.byUser.fullName]="",e}),{});return Object.keys(e)}},{key:"applyFilter",value:function(e){var t=Object(b.a)(e),a=this.state,n=a.filterBy,r=a.searchVal;return n.date&&(t=t.filter((function(e){return Se()(e.createdAt).format("DD MMM")===n.date}))),n.member&&(t=t.filter((function(e){return e.byUser.fullName===n.member}))),r&&(t=t.filter((function(e){return e.desc.toLowerCase().includes(r)||e.byUser.fullName.toLowerCase().includes(r)}))),t}},{key:"getInitials",value:function(e){var t=e.split(" "),a=Object(ve.a)(t,2),n=a[0],r=a[1],o=n.charAt(0).toUpperCase();return r&&(o+=r.charAt(0).toUpperCase()),o}},{key:"render",value:function(){var e=this;if(!this.state.board)return r.a.createElement("h1",null,"Loading...");var t=this.state,a=t.isFilterOpen,o=t.filterBy,s=t.searchVal,c=Object(ve.a)(this.activities,2),l=c[0],u=c[1],d=this.getActivityDates(),m=this.getActivityMembers();return l=this.applyFilter(l),u=this.applyFilter(u),r.a.createElement("section",{className:"activities flex column"},r.a.createElement("header",{className:"padding-x-15 padding-y-15"},r.a.createElement(i.b,{to:"/board/".concat(this.props.match.params.id)},r.a.createElement(gt.a,{className:"go-back-arrow"})),r.a.createElement("h1",null,r.a.createElement("span",null,this.props.boardName)," Log"),r.a.createElement("div",{className:"filters-container space-between flex align-center"},r.a.createElement("input",{value:s,onChange:this.handleChange,type:"text",placeholder:"Search"}),r.a.createElement("div",{className:"filter-outer-container flex relative"},r.a.createElement("button",{className:"flex align-center",onClick:this.toggleFilter},r.a.createElement(ye.b,null)," Filter"),a&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleFilter}),r.a.createElement(je.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"activity-member-filter"},r.a.createElement("h3",null,"Member"),m.map((function(t,a){return r.a.createElement("button",{className:o.member===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("member",t)}},t)}))),r.a.createElement("section",{className:"activity-date-filter"},r.a.createElement("h3",null,"Date"),r.a.createElement("div",{className:"filter-list flex justify-center align-center column"},d.map((function(t,a){return r.a.createElement("button",{className:o.date===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("date",t)}},t)}))))))),r.a.createElement("button",{onClick:this.onClearLog},"Clear Log")))),r.a.createElement("div",{className:"all-activities-container"},r.a.createElement(Ue,{getInitials:this.getInitials,activities:u,moveToProfile:this.moveToProfile}),r.a.createElement(Ue,{type:"activitiesRead",getInitials:this.getInitials,activities:l,moveToProfile:this.moveToProfile})))}},{key:"activities",get:function(){var e=this.state.board.activityLog;return[e.filter((function(e){return e.isRead})),e.filter((function(e){return!e.isRead}))]}}]),a}(n.Component),Vt={loadBoards:L,updateBoard:I},Ht=[{path:"/",component:se},{path:"/boards",component:xt},{path:"/board/:id",component:Nt},{path:"/login",component:Mt},{path:"/signup",component:_t},{path:"/user/:id",component:Lt},{path:"/myweek",component:Wt},{path:"/mob-activities/:id",component:Object(c.b)((function(e){return{boards:e.boardReducer.boards}}),Vt)(Yt)}];function zt(){return T.setup(),r.a.createElement(i.a,null,r.a.createElement("main",{className:"app"},r.a.createElement(l.c,null,Ht.map((function(e){return r.a.createElement(l.a,{key:e.path,exact:!0,component:e.component,path:e.path})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Kt=a(43),Jt=a(178),qt={boards:[],filterBy:{},isBoardbarShown:!0};var Zt={users:[],loggedUser:P.getCurrUser(),userProfile:null};var Xt={isLoading:!1,isSnackbarShown:!1,snackbarTxt:""};var Qt=Object(Kt.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(v.a)(Object(v.a)({},e),{},{users:t.users});case"SHOW_PROFILE":return Object(v.a)(Object(v.a)({},e),{},{userProfile:t.user});case"SET_USER":return Object(v.a)(Object(v.a)({},e),{},{loggedUser:t.user});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(v.a)(Object(v.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"ADD_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:[].concat(Object(b.a)(e.boards),[t.board])});case"SET_FILTER":return Object(v.a)(Object(v.a)({},e),{},{filterBy:t.filter});case"TOGGLE_BOARDBAR":return Object(v.a)(Object(v.a)({},e),{},{isBoardbarShown:!e.isBoardbarShown});default:return e}},systemReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(v.a)(Object(v.a)({},e),{},{isLoading:!1});case"SHOW_SNACKBAR":return Object(v.a)(Object(v.a)({},e),{},{isSnackbarShown:!0,snackbarTxt:t.msg});case"HIDE_SNACKBAR":return Object(v.a)(Object(v.a)({},e),{},{isSnackbarShown:!1,snackbarTxt:""});default:return e}}}),$t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Kt.d,ea=Object(Kt.e)(Qt,$t(Object(Kt.a)(Jt.a)));a(306);s.a.render(r.a.createElement(c.a,{store:ea},r.a.createElement(zt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.ec2335da.chunk.js.map
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{214:function(e,t,a){e.exports=a(335)},268:function(e,t){},334:function(e,t,a){},335:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(15),s=a.n(o),c=a(16),i=a(19),l=a(28),u=a(11),d=a(12),m=a(14),p=a(13),f=a(6),g=a.n(f),h=a(8),b=a(20),v=a(5),E=a(169),y=a.n(E).a.create({withCredentials:!0}),k=function(e,t){return x(e,"GET",t)},N=function(e,t){return x(e,"POST",t)},w=function(e,t){return x(e,"PUT",t)},O=function(e,t){return x(e,"DELETE",t)};function x(e){return C.apply(this,arguments)}function C(){return(C=Object(h.a)(g.a.mark((function e(t){var a,n,r,o=arguments;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,y({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response&&e.t0.response.status,e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var S,j=a(170),U=a.n(j),A={setup:function(){S=U()("/")},terminate:function(){S=null},on:function(e,t){S.on(e,t)},off:function(e,t){S.off(e,t)},emit:function(e,t){S.emit(e,t)}};var M={loadBoards:function(){return T.apply(this,arguments)},addBoard:function(e){return D.apply(this,arguments)},removeBoard:function(e){return O("board/".concat(e))},updateBoard:R,addGroup:function(e,t){var a={id:_(),name:"week1",createdAt:"date",color:"#70ADB5",lastUpdated:Date.now(),isTagsShown:!1,tags:[],columns:[{type:"date",name:"due date"}],tasks:[{id:_(),name:"sneeze",createdAt:Date.now(),members:[],status:"Working on it",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]}]};try{return e.groups.push(a),B("".concat(t.fullName," Added a new group."),t,e)}catch(n){throw console.log("boardService: Couldn't add group"),n}},removeGroup:function(e,t,a){var n=null;return t.groups=t.groups.filter((function(t){var a=t.id===e;return a&&(n=t),!a})),B("".concat(a.fullName," Removed group: ").concat(n.name),a,t)},updateGroup:function(e,t,a,n){return t.groups=t.groups.map((function(t){return t.id===e.id?e:t})),B(a,n,t)},addTask:function(e,t,a,n){var r={id:_(),name:t,createdAt:Date.now(),members:[],status:"Done",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:Date.now(),isSelected:!1,posts:[],tags:[]},o=a.groups.findIndex((function(t){return t.id===e})),s="".concat(n.fullName," Added a new task: ").concat(t," to group ").concat(a.groups[o].name);return a.groups[o].tasks.push(r),B(s,n,a)},removeTask:function(e,t,a,n){var r=null,o=t.groups.findIndex((function(e){return e.id===a.id}));return t.groups[o].tasks=t.groups[o].tasks.filter((function(t){var a=t.id===e;return a&&(r=t),!a})),B("".concat(n.fullName," Removed task: ").concat(r.name," from group ").concat(a.name),n,t)},updateTask:function(e,t,a,n){return t.groups=t.groups.map((function(t){return t.tasks=t.tasks.map((function(t){return t.id===e.id?e:t})),t})),B(a,n,t)},handleBoardChanges:B};function T(){return(T=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("board");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(h.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={boardCreator:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl},name:"board",createdAt:Date.now(),desc:"Enter description here",members:[{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl}],groups:[{id:_(),name:"group 1",createdAt:Date.now(),color:"#22f24",lastUpdated:Date.now(),isTagsShown:!1,tags:[],columns:[{type:"date",name:"due date"}],tasks:[{id:_(),name:"sneeze",createdAt:Date.now(),members:[],status:"Stuck",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]},{id:_(),name:"sneeze",createdAt:Date.now(),members:[],status:"Working on it",priority:"Low",dueDate:Date.now(),updates:[],lastUpdated:"yesterday",isSelected:!1,posts:[],tags:[]}]}],activityLog:[]},e.next=3,N("board",a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,a){if(!e)return R(a);var n={id:_(),changedAt:Date.now(),isRead:!1,desc:e,byUser:{_id:t._id,fullName:t.fullName,imgUrl:t.imgUrl}};return R(Object(v.a)(Object(v.a)({},a),{},{activityLog:[n].concat(Object(b.a)(a.activityLog))}))}function R(e){return A.emit("updateBoard",e),w("board/".concat(e._id),e),e}function _(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function L(){return function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.loadBoards();case 3:a=e.sent,t({type:"SET_BOARDS",boards:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("boardActions: Couldn't load boards"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function I(e,t,a){return function(){var n=Object(h.a)(g.a.mark((function n(r){var o;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,o=M.handleBoardChanges(t,a,e),r({type:"SET_BOARD",board:o}),n.next=9;break;case 5:throw n.prev=5,n.t0=n.catch(0),console.log("boardActions: Couldn't update board"),n.t0;case 9:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(e){return n.apply(this,arguments)}}()}function F(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.addBoard(e);case 3:n=t.sent,a({type:"ADD_BOARD",board:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("boardActions: Couldn't add board"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}var P=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.video=r.a.createRef(),this.props.loadBoards()}},{key:"render",value:function(){var e=this;return this.props.boards&&0!==this.props.boards.length?r.a.createElement("section",{className:"home flex column"},r.a.createElement("main",{className:"home-main flex align-center  "},r.a.createElement("div",{className:"home-login-sign-cta absolute"},r.a.createElement(i.b,{to:"/login"},r.a.createElement("button",null,"Login")),r.a.createElement(i.b,{to:"/signup"},r.a.createElement("button",null,"Sign-up"))),r.a.createElement("div",{className:"col-left flex align-center justify-center"},r.a.createElement("video",{onClick:function(){return e.video.current.play()},ref:this.video,autoPlay:!0,muted:!0,src:"taskus-home-video.mp4"})),r.a.createElement("div",{className:"col-right flex align-center justify-center padding-x-30  column"},r.a.createElement("h1",null,"Working in a large scale company?"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("h2",null,"Do you need to keep track of hundreds of tasks?")),r.a.createElement("li",null,"  ",r.a.createElement("h2",null,"Need an efficient way to manage your co-workers / employees?")),r.a.createElement("li",null," ",r.a.createElement("h2",null,"Then this is the app for you."))),r.a.createElement(i.b,{to:"/board/".concat(this.props.boards[0]._id)},r.a.createElement("button",{className:"guest-button "},"Try As a Guest!"))))):r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif"}))}}]),a}(n.Component),G={loadBoards:L},W=Object(c.b)((function(e){return{boards:e.boardReducer.boards}}),G)(P),Y=a(63),V=a(367),H=a(368),K=a(73),J=a(44),q={loadUsers:z,getUserById:function(e){return Q.apply(this,arguments)},login:function(e){return $.apply(this,arguments)},signup:function(e){return ee.apply(this,arguments)},guestLogin:function(){return te.apply(this,arguments)},markAsRead:function(e){return Z.apply(this,arguments)},updateUser:ae,logout:function(){return re.apply(this,arguments)},notifyUsers:function(e,t,a){return oe.apply(this,arguments)}};function z(){return X.apply(this,arguments)}function X(){return(X=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k("user");case 3:return t=e.sent,e.abrupt("return",t);case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userService: Coulnd't get users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Z(){return(Z=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.notifications.forEach((function(e){e.isRead=!0})),ae(t),e.prev=2,e.abrupt("return",t);case 6:throw e.prev=6,e.t0=e.catch(2),console.log("userService: Something went wrong"),e.t0;case 10:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function Q(){return(Q=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("got to user service",t),e.prev=1,e.next=4,k("user/".concat(t));case 4:return a=e.sent,console.log("got from service:",a),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(1),console.log("userService: Coulnd't get user"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function $(){return($=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N("auth/login",t);case 3:if(a=e.sent){e.next=6;break}throw"Wrong username or password";case 6:return e.abrupt("return",se(a));case 9:throw e.prev=9,e.t0=e.catch(0),console.log("userService: Wrong username or password"),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ee(){return(ee=Object(h.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(v.a)({imgUrl:"https://via.placeholder.com/100",isAdmin:!0,boards:[],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},t),e.prev=1,e.next=4,N("auth/signup",a);case 4:return n=e.sent,e.abrupt("return",se(n));case 8:throw e.prev=8,e.t0=e.catch(1),console.log("userService: Couldn't sign up"),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function te(){return(te=Object(h.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={_id:ce(),username:"guest",fullName:"guest",password:"none",imgUrl:"https://via.placeholder.com/100",isAdmin:!0,boards:[{id:"212",name:"board1"}],notifications:[],birthDay:"2nd August 1997",company:"adidas",phoneNumber:"0224132124"},e.prev=1,e.abrupt("return",t);case 5:throw e.prev=5,e.t0=e.catch(1),console.log("userService: Couldn't login as guest"),e.t0;case 9:case"end":return e.stop()}}),e,null,[[1,5]])})))).apply(this,arguments)}function ae(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(h.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w("user/".concat(t._id),t),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return(re=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=Object(h.a)(g.a.mark((function e(t,a,n){var r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("got user in service:",n),e.next=3,z();case 3:r=e.sent,"add"===a&&(a=Object(b.a)(r)),o={byUser:{fullName:n.fullName,imgUrl:n.imgUrl},content:t,createdAt:Date.now()},a.forEach((function(e){if(e._id!==n._id){var t=r.find((function(t){return t._id===e._id}));t?(t.notifications.unshift(o),q.updateUser(t),A.emit("send-notif",{userId:e._id,notification:o})):console.log("can't updated user:",t)}}));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function ce(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function ie(){return function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.loadUsers();case 3:a=e.sent,t({type:"SET_USERS",users:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't load users"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function le(){return function(){var e=Object(h.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.guestLogin();case 3:a=e.sent,t({type:"SET_USER",user:a}),e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(0),console.log("userActions: Couldn't login as a guest"),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}function ue(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,q.updateUser(e),a({type:"SET_USER",user:e}),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),console.log("userActions: Couldn't update user"),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()}function de(e){return function(t){t({type:"SHOW_SNACKBAR",msg:e})}}function me(){return function(e){e({type:"HIDE_SNACKBAR"})}}var pe=a(34),fe=a(183),ge=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.ref=r.a.createRef(),fe.a(this.ref.current).append("p").text("I'm here!"),console.log(this.ref)}},{key:"render",value:function(){return r.a.createElement("div",{ref:this.ref})}}]),a}(n.Component),he=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null,selectedBoardId:"",isSnackbarOpen:!1,isShown:"",searchVal:""},e.handleMenuOpen=function(t,a){e.setState({anchorEl:t.currentTarget,selectedBoardId:a})},e.handleMenuClose=function(){e.setState({anchorEl:null})},e.onAddBoard=Object(h.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.loggedUser,t.next=3,e.props.addBoard(e.props.loggedUser);case 3:n="".concat(a.fullName," added a new board"),q.notifyUsers(n,"add",a),A.emit("add-delete-board");case 6:case"end":return t.stop()}}),t)}))),e.onBoardRemove=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,i,l,u,d,m;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.boards,o=n.match,s=n.history,c=n.removeBoard,i=n.loggedUser,l=r.find((function(e){return e._id===a})),u="".concat(i.fullName," deleted ").concat(l.name),q.notifyUsers(u,l.members,i),d=o.params.id,e.handleMenuClose(),1!==r.length){t.next=9;break}return console.log("you need at least one board!"),t.abrupt("return");case 9:return t.next=11,c(a);case 11:A.emit("add-delete-board"),e.displayPopup("Removed board."),d===a&&(m=r.findIndex((function(e){return e._id!==a})),s.push("/board/".concat(r[m]._id)));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onToggleShown=function(){e.props.toggleBoardbar(),e.setState({isShown:!e.state.isShown})},e.handleSearchChange=function(t){e.setState({searchVal:t.target.value})},e.handleSearch=function(){return e.props.boards.filter((function(t){return t.name.toLowerCase().includes(e.state.searchVal.toLowerCase())}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;A.on("updatedBoard",(function(t){e.props.recieveUpdate(t)})),A.on("reloadBoards",(function(){console.log("reloading..."),e.props.loadBoards()})),A.on("accept-notif",(function(t){e.props.updateUser(Object(v.a)(Object(v.a)({},e.props.loggedUser),{},{notifications:[t].concat(Object(b.a)(e.props.loggedUser.notifications))}))})),A.emit("user",this.props.loggedUser._id),this.setState({isShown:this.props.isBoardbarShown})}},{key:"componentWillUnmount",value:function(){A.off("updatedBoard"),A.off("reloadBoards"),A.off("accept-notif")}},{key:"displayPopup",value:function(e){this.props.showSnackbar(e),setTimeout(this.props.hideSnackbar,3e3)}},{key:"onMoveToBoard",value:function(e){this.props.history.push("/board/".concat(e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.anchorEl,n=t.selectedBoardId,o=t.isShown,s=this.handleSearch();return r.a.createElement("section",{className:"boardbar fixed column ".concat(o&&"board-bar-shown")},r.a.createElement("div",{onClick:this.onToggleShown,className:"board-bar-toggle-container"},r.a.createElement(pe.d,{style:{color:this.props.location.pathname.includes("/myweek")&&"#151515",transform:o&&"rotate(180deg)"},className:"board-bar-toggle"})),o&&r.a.createElement("div",{className:"boardbar-header"},r.a.createElement("h1",null,"Boards"),r.a.createElement(J.d,{onClick:this.onAddBoard})),o&&r.a.createElement("input",{onChange:this.handleSearchChange,type:"text",placeholder:"Search Board"}),r.a.createElement("ul",null,o&&s.map((function(t,a){return r.a.createElement("li",{className:"flex align-center",key:a},r.a.createElement(K.a,{onClick:function(a){return e.handleMenuOpen(a,t._id)}}),r.a.createElement("h4",{onClick:function(){return e.onMoveToBoard(t._id)}},t.name))}))),r.a.createElement(ge,null),r.a.createElement(V.a,{role:"menuContainer",anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:this.handleMenuClose},r.a.createElement(H.a,{onClick:function(){return e.onBoardRemove(n)}},"Delete"),r.a.createElement(H.a,{onClick:this.handleMenuClose},"Edit")))}}]),a}(n.Component),be={updateBoard:I,removeBoard:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.removeBoard(e);case 3:a({type:"REMOVE_BOARD",boardId:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),console.log("boardActions: Couldn't remove board"),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()},addBoard:F,showSnackbar:de,hideSnackbar:me,toggleBoardbar:function(){return function(e){e({type:"TOGGLE_BOARDBAR"})}},recieveUpdate:function(e){return function(t){try{t({type:"SET_BOARD",board:e})}catch(a){throw console.log("boardActions: Couldn't update board"),a}}},loadBoards:L,updateUser:ue},ve=Object(c.b)((function(e){return{boards:e.boardReducer.boards,isBoardbarShown:e.boardReducer.isBoardbarShown,loggedUser:e.userReducer.loggedUser}}),be)(Object(l.f)(he)),Ee=a(174),ye=a(51),ke=a(66),Ne=a.n(ke),we=a(107),Oe=a(22),xe=a(17),Ce=a.n(xe),Se=a(365),je=a(61),Ue=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOrderReversed:!1,isFilterOpen:!1,filterBy:{},searchVal:"",isActivitiesShown:!0,isActivitiesNotReadShown:!0},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e.toggleFilter=function(){e.setState({isFilterOpen:!e.state.isFilterOpen})},e.toggleActivities=function(){e.setState({isActivitiesShown:!e.state.isActivitiesShown})},e.toggleActivitiesNotRead=function(){e.setState({isActivitiesNotReadShown:!e.state.isActivitiesNotReadShown})},e}return Object(d.a)(a,[{key:"onSetFilter",value:function(e,t){var a=Object(v.a)({},this.state.filterBy);a[e]===t&&(t=""),this.setState({filterBy:Object(v.a)(Object(v.a)({},a),{},Object(Oe.a)({},e,t))})}},{key:"getActivityDates",value:function(){var e=this.props.activityLog.reduce((function(e,t){return e[Ce()(t.createdAt).format("DD MMM")]="",e}),{});return Object.keys(e)}},{key:"getActivityMembers",value:function(){var e=this.props.activityLog.reduce((function(e,t){return e[t.byUser.fullName]="",e}),{});return Object.keys(e)}},{key:"applyFilter",value:function(e){var t=Object(b.a)(e),a=this.state,n=a.filterBy,r=a.searchVal;return n.date&&(t=t.filter((function(e){return Ce()(e.createdAt).format("DD MMM")===n.date}))),n.member&&(t=t.filter((function(e){return e.byUser.fullName===n.member}))),r&&(t=t.filter((function(e){return e.desc.toLowerCase().includes(r)||e.byUser.fullName.toLowerCase().includes(r)}))),t}},{key:"render",value:function(){var e=this;if(!this.props.activityLog)return r.a.createElement("h1",null,"Loading...");var t=this.state,a=t.isFilterOpen,o=t.filterBy,s=t.searchVal,c=Object(we.a)(this.activities,2),i=c[0],l=c[1],u=this.getActivityDates(),d=this.getActivityMembers();return i=this.applyFilter(i),l=this.applyFilter(l),r.a.createElement("section",{className:"activities flex column"},r.a.createElement("header",{className:"padding-x-15 padding-y-15"},r.a.createElement(pe.a,{onClick:this.props.onToggleActivities}),r.a.createElement("h1",null,r.a.createElement("span",null,this.props.boardName)," Log"),r.a.createElement("div",{className:"filters-container space-between flex align-center"},r.a.createElement("input",{value:s,onChange:this.handleChange,type:"text",placeholder:"Search"}),r.a.createElement("div",{className:"filter-outer-container flex relative"},r.a.createElement("button",{className:"flex align-center",onClick:this.toggleFilter},r.a.createElement(ye.c,null)," Filter"),a&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleFilter}),r.a.createElement(Se.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"activity-member-filter"},r.a.createElement("h3",null,"Member"),d.map((function(t,a){return r.a.createElement("button",{className:o.member===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("member",t)}},t)}))),r.a.createElement("section",{className:"activity-date-filter"},r.a.createElement("h3",null,"Date"),r.a.createElement("div",{className:"filter-list flex justify-center align-center column"},u.map((function(t,a){return r.a.createElement("button",{className:o.date===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("date",t)}},t)}))))))),r.a.createElement("button",{onClick:this.props.onClearLog},"Clear Log")))),r.a.createElement("div",{className:"all-activities-container"},r.a.createElement("div",{className:"activity-list-not-read column flex  padding-y-15"},r.a.createElement("h1",{className:"flex space-between"},"New Activities (",l.length,")",r.a.createElement(je.a,{className:this.state.isActivitiesNotReadShown?" toggle-btn rotate0":" toggle-btn rotate90",onClick:this.toggleActivitiesNotRead})),this.state.isActivitiesNotReadShown&&0!==l.length&&l.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Ce()(e.createdAt).format("DD MMM"))),r.a.createElement("img",{src:e.byUser.imgUrl,alt:""}),r.a.createElement("h2",null,e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))})),0===l.length&&r.a.createElement("h3",{className:"padding-x-15"},"No new board activities!")),r.a.createElement("div",{className:"activity-list column flex  padding-y-15"},r.a.createElement("h1",{className:"flex space-between"},"Activities Read (",i.length,")",r.a.createElement(je.a,{onClick:this.toggleActivities,className:this.state.isActivitiesShown?"toggle-btn rotate0":"toggle-btn rotate90"})),this.state.isActivitiesShown&&0!==i.length&&i.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity  space-between flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Ce()(e.createdAt).format("DD MMM"))),r.a.createElement("img",{src:e.byUser.imgUrl,alt:""}),r.a.createElement("h2",null,e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))})),0===i.length&&r.a.createElement("h3",{className:"padding-x-15"},"No read board activities!"))))}},{key:"activities",get:function(){var e=this.props.activityLog;return[e.filter((function(e){return e.isRead})),e.filter((function(e){return!e.isRead}))]}}]),a}(n.Component);var Ae={setFilter:function(e){return function(t){t({type:"SET_FILTER",filter:e})}}},Me=Object(c.b)((function(e){return{filterBy:e.boardReducer.filterBy}}),Ae)(Object(l.f)((function(e){var t=e.board,a=e.filterBy,n=e.setFilter;function o(e,t){a[e]===t&&(t=""),n(Object(v.a)(Object(v.a)({},a),{},Object(Oe.a)({},e,t)))}if(!t)return r.a.createElement("h1",null,"Loading...");var s=t.groups,c=t.members,i=function(){var e={};t.groups.forEach((function(t){t.tasks.forEach((function(t){var a=Ce()(t.dueDate).format("DD.MM.YY");e[a]=t.dueDate}))}));var a=[];for(var n in e)a.push({formatted:n,value:e[n]});return a}();return r.a.createElement(Se.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"group-name-filter flex column align-center"},r.a.createElement("h3",null,"Groups"),r.a.createElement("div",{className:"filter-list"},s.map((function(e,t){return r.a.createElement("button",{className:a.groupId===e.id?"remove-filter-btn":"",key:t,onClick:function(){return o("groupId",e.id)}},e.name)})))),r.a.createElement("section",{className:"task-member-filter flex column align-center"},r.a.createElement("h3",null,"Member"),r.a.createElement("div",{className:"filter-list"},c.map((function(e,t){return r.a.createElement("button",{className:a.memberId===e._id?"remove-filter-btn":"",key:t,onClick:function(){return o("memberId",e._id)}},e.fullName)})))),r.a.createElement("section",{className:"task-priority-filter flex column align-center"},r.a.createElement("h3",null,"Priority"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"low"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","low")}},"Low"),r.a.createElement("button",{className:"medium"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","medium")}},"Medium"),r.a.createElement("button",{className:"high"===a.taskPriority?"remove-filter-btn":"",onClick:function(){return o("taskPriority","high")}},"High"))),r.a.createElement("section",{className:"task-status-filter flex column align-center"},r.a.createElement("h3",null,"Status"),r.a.createElement("div",{className:"filter-list"},r.a.createElement("button",{className:"done"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","done")}},"Done"),r.a.createElement("button",{className:"working on it"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","working on it")}},"Working on it "),r.a.createElement("button",{className:"stuck"===a.taskStatus?"remove-filter-btn":"",onClick:function(){return o("taskStatus","stuck")}},"Stuck"))),r.a.createElement("section",{className:"task-date-filter flex column align-center"},r.a.createElement("h3",null,"Due-Date"),r.a.createElement("div",{className:"filter-list"},i.map((function(e,t){return r.a.createElement("button",{className:a.dueDate===e.value?"remove-filter-btn":"",key:t,onClick:function(){return o("dueDate",e.value)}},e.formatted)}))))))}))),Te=a(46),De=a(65),Be=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={_id:"",isActivitiesOpen:!1,isFiltersOpen:!1,isUsersOpen:!1,elSetting:null},e.handleChangeName=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{name:t.target.value})})},e.handleChangeDesc=function(t){e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{desc:t.target.value})})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onToggleActivities=function(){e.setState({isActivitiesOpen:!e.state.isActivitiesOpen});var t=e.props.board;e.state.isActivitiesOpen&&(t=Object(v.a)(Object(v.a)({},t),{},{activityLog:t.activityLog.map((function(e){return e.isRead=!0,e}))})),e.props.onEditBoard(e.state.board,e.props.board)},e.onToggleFilters=function(){e.setState({isFiltersOpen:!e.state.isFiltersOpen})},e.handleMenuOpen=function(t,a){e.setState({elSetting:t.currentTarget})},e.handleMenuClose=function(){e.setState({elSetting:null})},e.onToggleUsers=function(){e.setState({isUsersOpen:!e.state.isUsersOpen})},e.onRemoveMemberFromBoard=function(t){var a=e.state.board.members.find((function(e){return e._id===t}));e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{members:e.state.board.members.filter((function(e){return e._id!==t}))})},(function(){e.props.onEditBoard(e.state.board,e.props.board,"".concat(e.props.loggedUser.fullName," removed ").concat(a.fullName," from ").concat(e.state.board.name))}))},e.onAddUserToBoard=function(t){var a=e.props.users.find((function(e){return e._id===t}));e.setState({board:Object(v.a)(Object(v.a)({},e.state.board),{},{members:[].concat(Object(b.a)(e.state.board.members),[a])})},(function(){e.props.onEditBoard(e.state.board,e.props.board,"".concat(e.props.loggedUser.fullName," invited ").concat(a.fullName," to ").concat(e.state.board.name))}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t))},e.onClearLog=function(){var t=Object(v.a)(Object(v.a)({},e.state.board),{},{activityLog:[]});e.setState({board:t},(function(){e.props.onEditBoard(t,e.props.board,"clearLog")}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.editableName=r.a.createRef(),this.editableDescription=r.a.createRef(),this.searchInput=r.a.createRef(),A.on("updatedBoard",(function(){e.setState({board:e.props.board})})),this.setState({board:this.props.board,_id:this.props.board._id})}},{key:"componentDidUpdate",value:function(e,t){e.board._id!==this.props.board._id&&this.setState({board:this.props.board})}},{key:"componentWillUnmount",value:function(){A.off("updatedBoard")}},{key:"render",value:function(){var e=this;if(!this.state._id)return r.a.createElement("h1",null,"Loading...");var t=this.state.board.members,a=this.props,n=a.users,o=a.loggedUser,s=n.filter((function(e){return!t.some((function(t){return t._id===e._id}))})),c=this.props.board.activityLog.filter((function(e){return!e.isRead})),i=this.props.board.activityLog.filter((function(e){return e.isRead}));return console.log("board creator",this.state.board.boardCreator),console.log("loggedf user",o),console.log("true?","5f68936cf878123b2cd354436ce96d"===o._id),r.a.createElement("section",{className:"board-header flex column padding-x-30"},r.a.createElement("div",{className:"board-header-header flex space-between grow align-center"},r.a.createElement("h1",{className:"flex align-center"},r.a.createElement(Ne.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableName,html:this.state.board.name,disabled:!1,onChange:this.handleChangeName,onBlur:function(){e.props.onEditBoard(e.state.board,e.props.board,"".concat(o.fullName," Changed the board title from ").concat(e.props.board.name," to ").concat(e.state.board.name))},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),r.a.createElement("div",{className:"board-header-right relative flex align-center"},r.a.createElement("div",{className:"board-users flex justify-center",onClick:this.onToggleUsers},0===t.length&&r.a.createElement("div",{className:"user-img-container"}," ",r.a.createElement(De.b,null)),0!==t.length&&t.map((function(e,t){return r.a.createElement("div",{key:t,className:"user-img-container"},r.a.createElement("img",{src:e.imgUrl}))}))),this.state.isUsersOpen&&r.a.createElement("div",{className:"users-modal absolute"},r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),t.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),("5f68936cf878123b2cd354436ce96d"===o._id||e.state.board.boardCreator._id===o._id)&&r.a.createElement(Te.a,{onClick:function(){return e.onRemoveMemberFromBoard(t._id)}}))}))),r.a.createElement("div",{className:"site-users-box"},r.a.createElement("h3",null,"Site Users"),s.map((function(t){return r.a.createElement("section",{key:t._id,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex  align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),("5f68936cf878123b2cd354436ce96d"===o._id||e.state.board.boardCreator._id===o._id)&&r.a.createElement(Te.b,{onClick:function(){return e.onAddUserToBoard(t._id)}}))})))),r.a.createElement("div",{onClick:this.onToggleActivities,className:"activities-outer-container flex align-center  cursor-pointer"},r.a.createElement("h2",null,"Activities "," ",r.a.createElement("span",{style:{color:0!==c.length?"#0085ff":""}},c.length),"/ ",i.length+c.length)))),r.a.createElement("div",{className:"board-header-footer flex align-center space-between"},r.a.createElement("h5",null,r.a.createElement(Ne.a,{onFocus:this.focusText,className:"content-editable cursor-initial",innerRef:this.editableDescription,html:this.state.board.desc,disabled:!1,onChange:this.handleChangeDesc,onBlur:function(){e.props.onEditBoard(e.state.board,e.props.board,"".concat(o.fullName," Changed ").concat(e.state.board.name," description to ").concat(e.state.board.desc))},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),r.a.createElement("div",{className:"header-options flex"},r.a.createElement("button",{className:"new-group-btn",onClick:this.props.onAddGroup},"New Group"),r.a.createElement("div",{onClick:function(){return e.searchInput.focus()},className:"search-outer-container flex align-center"},r.a.createElement("input",{ref:function(t){e.searchInput=t},placeholder:"Search",type:"text",onChange:this.props.handleSearch}),r.a.createElement(Ee.a,null)),r.a.createElement("div",{onClick:this.state.isFiltersOpen?function(){}:this.onToggleFilters,className:"filters-outer-container relative flex align-center cursor-pointer"},r.a.createElement(ye.c,null),r.a.createElement("h2",null,"Filter"),this.state.isFiltersOpen&&r.a.createElement(Me,{board:this.props.board}))),r.a.createElement("div",{className:"".concat(this.state.isActivitiesOpen&&"animate-side-modal"," side-modal")},r.a.createElement(Ue,{onClearLog:this.onClearLog,onToggleActivities:this.onToggleActivities,boardName:this.state.board.name,activityLog:this.props.board.activityLog})),this.state.isFiltersOpen&&r.a.createElement("div",{onClick:this.onToggleFilters,className:"modal-screen-wrapper"}),this.state.isActivitiesOpen&&r.a.createElement("div",{onClick:this.onToggleActivities,className:"modal-screen-wrapper"}),this.state.isUsersOpen&&r.a.createElement("div",{onClick:this.onToggleUsers,className:"modal-screen-wrapper"})))}}]),a}(r.a.Component),Re=Object(l.f)(Be),_e=a(62),Le=a(97),Ie=a(120),Fe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:null},e.onRemoveNotifications=function(){e.props.removeNotifications(e.props.loggedUser),e.setState({isModalOpen:!0})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({isModalOpen:!0})}},{key:"render",value:function(){var e=this.props.loggedUser;return r.a.createElement(Se.a,{in:this.state.isModalOpen},r.a.createElement("section",{className:"notifications padding-x-15 padding-y-15"},r.a.createElement("header",{className:"flex space-between align-center"},0!==e.notifications.length?r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Notifications"),",",r.a.createElement(pe.b,{onClick:this.onRemoveNotifications})):r.a.createElement("h1",null,"You have no notifications.")),r.a.createElement("div",{className:"notifications-container"},e.notifications&&e.notifications.map((function(e,t){return r.a.createElement("div",{key:t,className:"notification flex "},r.a.createElement("div",{className:"user-img-container"},r.a.createElement("img",{src:e.byUser.imgUrl,alt:"profile"})),r.a.createElement("div",{className:"notification-msg flex column"},r.a.createElement("h2",null,e.byUser.fullName),r.a.createElement("p",null,e.content),r.a.createElement("div",null,r.a.createElement("p",null,Ce()(e.createdAt).fromNow()))))})))))}}]),a}(n.Component),Pe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isNotificationShown:!1},e.toggleNotifications=function(){e.onMarkAsRead(),e.setState({isNotificationShown:!e.state.isNotificationShown})},e.onMarkAsRead=function(){e.props.markAsRead(e.props.loggedUser)},e.onLogout=function(){e.props.logout(),e.props.history.push("/login")},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state.isNotificationShown,t=this.props,a=t.loggedUser,n=t.removeNotifications;return r.a.createElement("section",{className:"navbar flex column space-between align-center padding-y-15"},r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(i.b,{to:"/"},r.a.createElement("img",{className:"logo-navbar",src:"taskus-nav.png",alt:""})),e&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleNotifications}),r.a.createElement("li",{className:"icon-container cursor-pointer",onClick:this.state.isNotificationShown?function(){}:this.toggleNotifications},0===a.notifications.filter((function(e){return!e.isRead})).length?"":r.a.createElement("p",{className:"notifications-counter"},a.notifications.filter((function(e){return!e.isRead})).length),e&&r.a.createElement(Fe,{removeNotifications:n,loggedUser:a}),a.notifications.some((function(e){return!e.isRead}))?r.a.createElement(ye.b,null):r.a.createElement(ye.a,null))),r.a.createElement("ul",{className:"navbar-links flex column space-around"},r.a.createElement(i.b,{to:"/myweek"},r.a.createElement("li",{className:"icon-container"},r.a.createElement(J.b,null))),r.a.createElement(i.b,{to:a?"/user/".concat(a._id):"/login"},r.a.createElement("li",{className:"icon-container"},r.a.createElement(_e.b,null))),r.a.createElement("li",{className:"icon-container"},r.a.createElement(Le.b,{onClick:this.onLogout}))))}}]),a}(n.Component),Ge={markAsRead:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.markAsRead(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login as a guest"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},removeNotifications:function(e){var t=e;return t.notifications=[],function(){var a=Object(h.a)(g.a.mark((function a(n){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:try{q.updateUser(e),n({type:"UPDATE_PROFILE",user:t})}catch(r){console.log("ERROR, couldnt remove notifications",r)}case 1:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},logout:function(){return function(e){try{q.logout(),e({type:"SET_USER",user:null})}catch(t){throw console.log("userActions: Couldn't logout"),t}}}},We=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}),Ge)(Object(l.f)(Pe)),Ye=a(102);a(273);function Ve(e){var t=e.users.filter((function(t){return!e.members.some((function(e){return e._id===t._id}))}));return r.a.createElement("div",{className:"user-img-container relative flex justify-center align-center",onClick:function(){return e.openModal("users")}},e.members.length?e.members[0].imgUrl?r.a.createElement("div",{className:"member-img-container relative"},e.members.map((function(e){return r.a.createElement("img",{key:e._id,className:"member-img",src:e.imgUrl,alt:""})})),r.a.createElement(Te.b,{className:"no-members-icon-plus absolute"})):r.a.createElement("div",{className:"member-letter"},e.members[0].fullName.charAt(0).toUpperCase()):r.a.createElement("div",{className:"no-members-container"}," ",r.a.createElement(De.b,{className:"no-members-icon"})," ",r.a.createElement(Te.b,{className:"no-members-icon-plus"})),e.isUsersShown&&r.a.createElement("div",{className:"users-modal absolute"},r.a.createElement("div",{className:"task-users-box"},r.a.createElement("h3",null,"Task Members"),e.members.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(Te.a,{onClick:function(){return e.onRemoveMemberFromTask(t._id)}}))}))),r.a.createElement("div",{className:"board-users-box"},r.a.createElement("h3",null,"Board Members"),t.map((function(t,a){return r.a.createElement("section",{key:a,className:"user-box flex space-between align-center"},r.a.createElement("div",{className:"user-box-info flex  align-center",onClick:function(){return e.goToUserProfile(t._id)}},t.imgUrl?r.a.createElement("img",{src:t.imgUrl,alt:"profile"}):r.a.createElement("div",{className:"member-letter"},t.fullName.charAt(0).toUpperCase()),r.a.createElement("p",{className:"member-name"},t.fullName)),r.a.createElement(Te.b,{onClick:function(){return e.onAddUserToTask(t._id)}}))})))))}function He(e){return r.a.createElement("div",{className:"label-container relative flex align-center"},r.a.createElement("div",{className:"label-box ".concat(e.status.split(" ")[0].toLowerCase()),onClick:function(){return e.openModal("status")}},r.a.createElement("div",{className:"task-label-name flex align-center justify-center"},r.a.createElement("p",null,e.status)),e.isStatusShown&&r.a.createElement("div",{className:"label-list absolute flex column align-center"},r.a.createElement("section",{className:"label-selector flex align-center justify-center stuck",onClick:function(){return e.handleChange("Stuck")}},r.a.createElement("p",null,"Stuck")),r.a.createElement("section",{className:"label-selector flex align-center justify-center working",onClick:function(){return e.handleChange("Working on it")}},r.a.createElement("p",null,"Working on it")),r.a.createElement("section",{className:"label-selector flex align-center justify-center done",onClick:function(){return e.handleChange("Done")}},r.a.createElement("p",null,"Done")))))}var Ke=a(175),Je=a.n(Ke);function qe(e){return r.a.createElement("label",{className:"date-picker"},r.a.createElement(Je.a,{selected:e.dueDate,onChange:e.handleDateChange,dateFormat:"dd/MM/yyyy"}))}function ze(e){return r.a.createElement("div",{className:"label-container relative flex align-center"},r.a.createElement("div",{className:"label-box ".concat(e.priority.toLowerCase()),onClick:function(){return e.openModal("priority")}},r.a.createElement("div",{className:"task-label-name flex align-center justify-center"},r.a.createElement("p",null,e.priority)),e.isPriorityShown&&r.a.createElement("div",{className:"label-list absolute flex column align-center"},r.a.createElement("section",{className:"label-selector flex align-center justify-center low",onClick:function(){return e.handleChange("Low")}},r.a.createElement("p",null,"Low")),r.a.createElement("section",{className:"label-selector flex align-center justify-center medium",onClick:function(){return e.handleChange("Medium")}},r.a.createElement("p",null,"Medium")),r.a.createElement("section",{className:"label-selector flex align-center justify-center high",onClick:function(){return e.handleChange("High")}},r.a.createElement("p",null,"High")))))}var Xe={uploadImg:function(e){return Ze.apply(this,arguments)}};function Ze(){return(Ze=Object(h.a)(g.a.mark((function e(t){var a,n,r,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("IMAGE?",t),"dtg7n0zye",a="https://api.cloudinary.com/v1_1/".concat("dtg7n0zye","/image/upload"),(n=new FormData).append("file",t),n.append("upload_preset","Task-Us"),e.prev=6,e.next=9,fetch(a,{method:"POST",body:n});case 9:return r=e.sent,e.next=12,r.json();case 12:return o=e.sent,e.abrupt("return",o);case 16:e.prev=16,e.t0=e.catch(6),console.log(e.t0);case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))).apply(this,arguments)}var Qe=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1,isOptionsModal:!1},e.handleChange=function(t){var a=t.target;e.setState(Object(Oe.a)({},a.name,a.value))},e.toggleEditMode=function(t){e.setState({isEditMode:!e.state.isEditMode,txt:t})},e.updateReply=function(t){if(t.txt===e.state.txt)return e.setState({isEditMode:!1});t.txt=e.state.txt;var a=e.props.update.replies.map((function(e){return e.id===t.id?t:e})),n=Object(v.a)(Object(v.a)({},e.props.update),{},{replies:a});e.props.updateNote(n),e.setState({isEditMode:!1,txt:""})},e.removeReply=function(t){var a=e.props.update.replies.findIndex((function(e){return e.id===t})),n=Object(v.a)({},e.props.update).replies.splice(a,1);e.props.updateNote(n)},e.toggleOptionsModal=function(){e.setState({isOptionsModal:!e.state.isOptionsModal})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.reply,o=t.idx;return r.a.createElement("div",{key:o,className:"reply-box flex column relative"},r.a.createElement(K.b,{className:"options-reply-btn cursor-pointer",onClick:this.toggleOptionsModal}),r.a.createElement("div",{className:"reply-content flex align-center"},r.a.createElement("img",{src:a.member.imgUrl,alt:""}),r.a.createElement("p",{className:"reply-name"},a.member.fullName),this.state.isEditMode?r.a.createElement("div",{className:"edit-box flex"},r.a.createElement("textarea",{name:"txt",onChange:this.handleChange,value:this.state.txt}),r.a.createElement(pe.e,{className:"update-reply-btn",onClick:function(){return e.updateReply(a)}})):r.a.createElement("p",{className:"reply-text"},a.txt)),this.state.isOptionsModal&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(){e.toggleOptionsModal()},className:"modal-screen-wrapper"}),r.a.createElement("div",{className:"update-options-modal"},r.a.createElement("p",{className:"remove-reply-btn  cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.removeReply(a.id)}},"Delete Post"),r.a.createElement("p",{className:"edit-reply-btn cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.toggleEditMode(a.txt)}},"Edit Post"))))}}]),a}(r.a.Component),$e=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={txt:"",isEditMode:!1,isOptionsModal:!1},e.onReply=function(t){if(e.state.txt&&!e.state.txt.split("").every((function(e){return" "===e}))){var a={txt:e.state.txt,createdAt:Date.now(),id:e.props.makeid(),member:{fullName:e.props.loggedUser.fullName,username:e.props.loggedUser.userName,_id:e.props.loggedUser.userName,imgUrl:e.props.loggedUser.imgUrl}},n=e.props.updates.find((function(e){return e.id===t.id}));n.replies=[].concat(Object(b.a)(n.replies),[a]),e.props.updateNote(n),e.setState({txt:""})}},e.removeUpdate=function(t){var a=e.props.updates.filter((function(e){return e.id!==t}));e.props.sendNote(a)},e.onToggleEditUpdate=function(){e.setState({isEditMode:!e.state.isEditMode})},e.editUpdate=function(t){if(t.txt===e.state.txt)return e.setState({isEditMode:!1});t.txt=e.state.txt;var a=e.props.updates.map((function(e){return e.id===t.id?t:e}));e.props.sendNote(a),e.setState({isEditMode:!1,txt:""})},e.handleChange=function(t){var a=t.target;e.setState(Object(Oe.a)({},a.name,a.value))},e.toggleOptionsModal=function(){e.setState({isOptionsModal:!e.state.isOptionsModal})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.update,o=t.idx;return r.a.createElement("div",{key:o,className:"update-box flex wrap column relative"},r.a.createElement(K.b,{className:"options-reply-btn cursor-pointer",onClick:this.toggleOptionsModal}),this.state.isOptionsModal&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(){e.toggleOptionsModal()},className:"modal-screen-wrapper"}),r.a.createElement("div",{className:"update-options-modal"},r.a.createElement("p",{className:"remove-reply-btn  cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.removeUpdate(a.id)}},"Delete Post"),r.a.createElement("p",{className:"edit-reply-btn cursor-pointer",onClick:function(){e.toggleOptionsModal(),e.onToggleEditUpdate()}},"Edit Post"))),r.a.createElement("div",{className:"update-box-header flex align-center"},r.a.createElement("img",{src:a.member.imgUrl,alt:""}),r.a.createElement("p",{className:"member-name"},a.member.fullName)),this.state.isEditMode?r.a.createElement("div",{className:"update-box-edit flex column relative"},r.a.createElement("textarea",{value:this.state.txt,name:"txt",onChange:this.handleChange}),r.a.createElement(pe.e,{className:"submit-edit-btn absolute",onClick:function(){return e.editUpdate(a)}}),a.imgUrl&&r.a.createElement("img",{src:a.imgUrl,alt:""})):r.a.createElement("div",{className:"update-box-main flex column"},a.txt&&r.a.createElement("p",{className:"update-text"},a.txt),a.imgUrl&&r.a.createElement("img",{src:a.imgUrl,alt:""})),r.a.createElement("div",{className:"update-box-footer flex column"},a.replies&&r.a.createElement("div",{className:"replies-box flex column",style:{borderTop:"".concat(a.replies.length&&"1px solid rgba(109, 109, 109, 0.35)")}},a.replies.map((function(t,a){return r.a.createElement(Qe,{key:a,reply:t,idx:a,update:e.props.update,updateNote:e.props.updateNote})}))),!this.state.isEditMode&&r.a.createElement("div",{className:"reply-footer flex space-between align-center"},r.a.createElement("textarea",{value:this.state.txt,name:"txt",onChange:this.handleChange}),r.a.createElement("button",{className:"reply-button",onClick:function(){return e.onReply(a)}},"Reply"))))}}]),a}(r.a.Component);function et(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}var tt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={reply:{txt:""},update:{id:"",txt:"",imgUrl:"",replies:[]},isLoading:!1,imageUploaded:!1},e.handleChange=function(t){"file-img"===t.target.name?e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{img:t.target.files[0]})},(function(){e.uploadImg()})):"txt"===t.target.name?e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{txt:t.target.value})}):e.setState({reply:Object(v.a)(Object(v.a)({},e.state.reply),{},{txt:t.target.value})})},e.uploadImg=Object(h.a)(g.a.mark((function t(){var a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isLoading:!0}),t.next=3,Xe.uploadImg(e.state.update.img,e.state);case 3:a=t.sent,e.setState({update:Object(v.a)(Object(v.a)({},e.state.update),{},{imgUrl:a.url}),isLoading:!1,imageUploaded:!0});case 5:case"end":return t.stop()}}),t)}))),e.sendNote=function(t){if(t.preventDefault(),e.state.update.txt&&!e.state.update.txt.split("").every((function(e){return" "===e}))||e.state.update.imgUrl){var a=[{id:et(),createdAt:Date.now(),txt:e.state.update.txt,imgUrl:e.state.update.imgUrl,replies:[],member:{fullName:e.props.loggedUser.fullName,username:e.props.loggedUser.userName,_id:e.props.loggedUser.userName,imgUrl:e.props.loggedUser.imgUrl}}].concat(Object(b.a)(e.props.updates));e.setState({update:{txt:"",imgUrl:""},imageUploaded:!1}),e.props.sendNote(a)}},e.updateNote=function(t){var a=Object(b.a)(e.props.updates).map((function(e){return e.id===t.id?t:e}));e.props.sendNote(a)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState({imageUploaded:!1})}},{key:"render",value:function(){var e=this;if(!this.props.updates)return r.a.createElement("h1",null,"Loading...");var t=this.props.updates;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"updates-header flex column"},r.a.createElement(pe.a,{onClick:this.props.closeModal}),r.a.createElement("h1",null,this.props.task.name),r.a.createElement("div",{className:"updates-header-options flex column"},r.a.createElement("form",{onSubmit:this.sendNote,className:"notes-form flex align-center"},r.a.createElement("textarea",{name:"txt",value:this.state.update.txt,onChange:this.handleChange})),r.a.createElement("div",{className:"updates-btns flex align-center space-between"},r.a.createElement("div",{className:"image-uploader flex"},r.a.createElement("label",{"data-title":"Upload Image",htmlFor:this.props.task.id},this.state.isLoading?r.a.createElement("div",{class:"loadingio-spinner-spinner-gvjl1rpqs7q"},r.a.createElement("div",{class:"ldio-subadnemdcd"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))):r.a.createElement(Le.a,null)),r.a.createElement("input",{name:"file-img",type:"file",id:this.props.task.id,onChange:this.handleChange,hidden:!0}),this.state.imageUploaded&&r.a.createElement("div",{className:"image-uploaded flex align-center"},r.a.createElement(Ye.b,null),r.a.createElement("p",null," Image Ready!"))),this.state.isLoading?r.a.createElement("p",null,"Image is uploading.."):r.a.createElement("button",{onClick:this.sendNote},"Send")))),r.a.createElement("div",{className:"updates-container"},t.map((function(a,n){return r.a.createElement($e,{update:a,key:n,idx:n,updates:t,loggedUser:e.props.loggedUser,sendNote:e.props.sendNote,updateNote:e.updateNote,makeid:et})}))))}}]),a}(r.a.Component),at=a(127),nt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.handleChange=function(t,a){var n=e.state.tags.map((function(e){return e.id===a&&(e.txt=t.target.value),e}));e.setState({tags:n})},e.onAddTag=function(){var t=Object(b.a)(e.state.tags),a=e.elTagInput.current.value?e.elTagInput.current.value:"New Tag";t.push({id:e._makeid(),txt:a,color:rt()}),e.setState({tags:t}),e.props.onEditTags(t,a,"addTag")},e.onRemoveTag=function(t){var a=e.state.tags.find((function(e){return e.id===t})),n=e.state.tags.filter((function(e){return e.id!==t}));e.setState({tags:n}),e.props.onEditTags(n,a.txt,"removeTag")},e.onEditTag=function(t,a,n){e.props.task.tags[t].txt!==e.state.tags[t].txt&&e.props.onEditTags(e.state.tags,a,n)},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.elTagInput=r.a.createRef(),this.elTag=r.a.createRef(),this.setState({tags:JSON.parse(JSON.stringify(this.props.task.tags))})}},{key:"_makeid",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:7,t="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}},{key:"render",value:function(){var e=this;return this.state.tags&&0!==this.state.tags?r.a.createElement("div",{onClick:function(){return e.props.openModal("tags")},className:"label-container tags relative"},r.a.createElement("div",{className:"task-label-name flex justify-center align-center "},this.state.tags.map((function(t,a){if(!(a>2))return a>1?r.a.createElement("div",{key:t.id,className:"task-number-of-tags"},r.a.createElement("span",null,e.state.tags.length>9?"+9":"+".concat(e.state.tags.length-2))):r.a.createElement("p",Object(Oe.a)({key:a,style:{color:t.color}},"key",a),r.a.createElement(Ie.a,{lines:1,ellipsis:"...",width:75},a===e.state.tags.length-1||1===a?t.txt:t.txt+","))}))),this.props.isTagsShown&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"label-list tags-modal absolute flex column align-center"},r.a.createElement("div",{className:"tag-add-container  flex justify-center align-center"},r.a.createElement(J.a,{onClick:this.onAddTag}),r.a.createElement("input",{onKeyDown:function(t){"Enter"===t.key&&(e.onAddTag(),t.target.blur(),t.target.value="")},placeholder:"New tag",ref:this.elTagInput,type:"text"})),r.a.createElement("section",null,this.state.tags.map((function(t,a){return r.a.createElement("div",{className:"tag-container flex justify-center align-center",key:a},r.a.createElement(at.a,{className:"tag-remove-icon",onClick:function(){return e.onRemoveTag(t.id)}}),r.a.createElement("input",{style:{color:t.color},onBlur:function(t){t.target.blur(),e.onEditTag(a)},onKeyDown:function(t){"Enter"===t.key&&(t.target.blur(),e.onEditTag(a))},onChange:function(a){return e.handleChange(a,t.id)},value:t.txt,type:"text"}))})))))):r.a.createElement("h1",null,"no tags")}}]),a}(n.Component);function rt(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}var ot=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1,imgUrl:"",isImageModalShown:!1},e.reloadProps=function(){e.setState({task:e.props.task})},e.handleNameChange=function(t){e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{name:t.target.value})})},e.handleDateChange=function(t){Ce()(e.state.task.dueDate).format("DD/MMM/YYYY")!==Ce()(t).format("DD/MMM/YYYY")&&e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{dueDate:Ce()(t).valueOf()})},(function(){var t="".concat(e.props.loggedUser.fullName," changed task ").concat(e.state.task.name," date from ").concat(Ce()(e.props.task.dueDate).format("DD/MMM/YYYY")," to ").concat(Ce()(e.state.task.dueDate).format("DD/MMM/YYYY")," at group -").concat(e.props.group.name);e.props.onEditTask(e.state.task,e.props.task,t)}))},e.handleChange=function(t,a){var n="";"Stuck"===t||"Working on it"===t||"Done"===t?e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{status:t})},(function(){n="".concat(e.props.loggedUser.fullName," changed task: ").concat(e.state.task.name," status from ").concat(e.props.task.status," to ").concat(e.state.task.status," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,n),e.state.isUpdatesShown||e.closeModal()})):e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{priority:t})},(function(){n="".concat(e.props.loggedUser.fullName," changed task: ").concat(e.state.task.name," priority from ").concat(e.props.task.priority," to ").concat(e.state.task.priority," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,n),e.closeModal()}))},e.sendNote=function(t){var a="";e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{updates:Object(b.a)(t)})},(function(){a="".concat(e.props.loggedUser.fullName," sent an update at task: ").concat(e.props.task.name," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,a)}))},e.openModal=function(t){switch(t){case"status":e.setState({isStatusShown:!0});break;case"users":e.setState({isUsersShown:!0});break;case"updates":e.setState({isUpdatesShown:!0});break;case"priority":e.setState({isPriorityShown:!0});break;case"tags":e.setState({isTagsShown:!0})}},e.closeModal=function(){e.setState({isImageModalShown:!1,isStatusShown:!1,isUsersShown:!1,isPriorityShown:!1,isUpdatesShown:!1,isTagsShown:!1})},e.onRemoveMemberFromTask=function(t){var a="",n=e.state.task.members.find((function(e){return e._id===t}));e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{members:e.state.task.members.filter((function(e){return e._id!==t}))})},(function(){a="".concat(e.props.loggedUser.fullName," removed ").concat(n.fullName," from ").concat(e.state.task.name," at group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,a)}))},e.onAddUserToTask=function(t){var a="",n=e.props.users.find((function(e){return e._id===t}));e.setState({task:Object(v.a)(Object(v.a)({},e.state.task),{},{members:[].concat(Object(b.a)(e.state.task.members),[n])})},(function(){a="".concat(e.props.loggedUser.fullName," tasked ").concat(n.fullName," to ").concat(e.state.task.name," on group - ").concat(e.props.group.name),e.props.onEditTask(e.state.task,e.props.task,a)}))},e.goToUserProfile=function(t){e.props.history.push("/user/".concat(t)),e.closeModal()},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.onEditTags=function(t,a,n){var r="";console.log("type:",n),e.setState(Object(v.a)(Object(v.a)({},e.state),{},{task:Object(v.a)(Object(v.a)({},e.state.task),{},{tags:JSON.parse(JSON.stringify(t))})}),(function(){"addTag"===n?r="".concat(e.props.loggedUser.fullName," added tag named ").concat(a," to ").concat(e.state.task.name," on group - ").concat(e.props.group.name):"removeTag"===n&&(r="".concat(e.props.loggedUser.fullName," removed tag named ").concat(a," from ").concat(e.state.task.name," on group - ").concat(e.props.group.name)),e.props.onEditTask(e.state.task,e.props.task,r)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.contentEditable=r.a.createRef(),A.on("updatedBoard",this.reloadProps),this.setState(Object(v.a)(Object(v.a)({},this.state),{},{task:this.props.task,isStatusShown:!1,isPriorityShown:!1,isUsersShown:!1,isUpdatesShown:!1,isTagsShown:!1}))}},{key:"componentWillUnmount",value:function(){A.off("updatedBoard",this.reloadProps)}},{key:"render",value:function(){var e=this;if(!this.state.task)return r.a.createElement("h1",null,"Loading...");var t=this.state.task,a=t.name,n=t.members,o=t.status,s=t.priority,c=t.dueDate,i=t.updates,l=t.id,u=this.state,d=u.isUsersShown,m=u.isStatusShown,p=u.isPriorityShown,f=u.isUpdatesShown,g=u.isTagsShown;return r.a.createElement(r.a.Fragment,null,f&&r.a.createElement("div",{className:"".concat(f&&"animate-side-modal"," side-modal")},r.a.createElement(tt,{task:this.state.task,updates:i,members:n,priority:s,status:o,dueDate:c,loggedUser:this.props.loggedUser,users:this.props.users,sendNote:this.sendNote,handleChange:this.handleChange,handleDateChange:this.handleDateChange,onEditTags:this.onEditTags,onEditTask:this.props.onEditTask,closeModal:this.closeModal})),(d||m||p||f||g)&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.closeModal}),r.a.createElement(Y.b,{draggableId:l,index:this.props.index},(function(t,u){return r.a.createElement("section",Object.assign({key:l,className:"task flex space-between align-center ".concat(u.isDragging?"drag":"")},t.draggableProps,t.dragHandleProps,{ref:t.innerRef}),r.a.createElement("div",{className:"task-left flex align-center"},r.a.createElement("div",{className:"task-color-remove"},r.a.createElement("div",{style:{backgroundColor:e.props.group.color},className:"task-color"}),r.a.createElement("div",{className:"icon-container"},r.a.createElement(Ye.a,{className:"task-remove-icon",onClick:function(){e.props.onRemoveTask(l,e.props.group)}}))),r.a.createElement("div",{className:"task-title-updates flex align-center space-between grow"},r.a.createElement("h2",null,r.a.createElement(Ne.a,{onFocus:e.focusText,className:"cursor-initial content-editable",innerRef:e.contentEditable,html:a,disabled:!1,onChange:e.handleNameChange,onBlur:function(){var t="".concat(e.props.loggedUser.fullName," changed task name from ").concat(e.state.task.name," to ").concat(a," at group - ").concat(e.props.group.name);e.props.onEditTask(e.state.task,e.props.task,t)},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}})),r.a.createElement("div",{onClick:function(){return e.openModal("updates")},className:"notes-container relative grow"},r.a.createElement(J.c,null),0!==i.length&&r.a.createElement("div",{className:"task-number-of-imgs flex justify-center align-center"},r.a.createElement("span",null,i.length))))),r.a.createElement("div",{className:"task-right flex align-center"},window.innerWidth>380&&r.a.createElement(Ve,{members:n,users:e.props.users,isUsersShown:d,openModal:e.openModal,goToUserProfile:e.goToUserProfile,onAddUserToTask:e.onAddUserToTask,onRemoveMemberFromTask:e.onRemoveMemberFromTask}),r.a.createElement(He,{status:o,isStatusShown:m,handleChange:e.handleChange,openModal:e.openModal}),window.innerWidth>450&&r.a.createElement(qe,{dueDate:c,handleDateChange:e.handleDateChange}),window.innerWidth>450&&r.a.createElement(ze,{priority:s,isPriorityShown:p,openModal:e.openModal,handleChange:e.handleChange}),window.innerWidth>450&&r.a.createElement(nt,Object(Oe.a)({handleChange:e.handleChange,onEditTags:e.onEditTags,task:e.state.task,isTagsShown:g,openModal:e.openModal},"handleChange",e.handleChange))))})),this.state.isImageModalShown&&r.a.createElement("div",{onClick:this.onToggleImageModal,className:"updates-image-modal"},r.a.createElement("img",{src:this.state.imgUrl})))}}]),a}(n.Component),st=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser}}))(Object(l.f)(ot)),ct=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={id:"",ElGroupSettings:null,elGroupColors:!1},e.reloadProps=function(){e.setState(Object(v.a)(Object(v.a)({},e.state),{},{name:e.props.group.name}))},e.handleChange=function(t){e.setState({name:t.target.value})},e.focusText=function(){setTimeout((function(){document.execCommand("selectAll",!1,null)}),0)},e.handleMenuOpen=function(t){e.setState({ElGroupSettings:t.currentTarget})},e.handleMenuClose=function(){e.setState({ElGroupSettings:null,elGroupColors:!1})},e.handleColorsOpen=function(t){e.setState({elGroupColors:t.currentTarget})},e.handleColorsToggle=function(){e.setState({elGroupColors:!e.state.elGroupColors})},e.onChangeGroupColor=function(t){try{e.props.onEditGroup(e.props.group.id,t,"color")}catch(a){console.log("Error",a)}e.setState({ElGroupSettings:null,elGroupColors:!1})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.elInputAdd=r.a.createRef(),this.contentEditable=r.a.createRef(),A.on("updatedBoard",this.reloadProps),this.setState(Object(v.a)(Object(v.a)({},this.state),{},{name:this.props.group.name,id:this.props.group.id}))}},{key:"componentWillUnmount",value:function(){A.off("updatedBoard",this.reloadProps)}},{key:"convertToData",value:function(e){var t=this.props.group.tasks,a=t.length,n=t.length/100,o=t.reduce((function(t,a){var n=a[e];return t[n]||(t[n]=0),t[n]++,t}),{}),s=[];for(var c in o)o[c]/=n,s.push(r.a.createElement("div",{key:c,style:{width:o[c]?"".concat(o[c],"%"):"0"},"data-title":o[c]?" ".concat(c," ").concat(a*o[c]/100,"/").concat(a," ").concat(o[c].toFixed(1),"%"):"",className:"precent-bar ".concat(c.toLowerCase())}));return s}},{key:"render",value:function(){var e=this;if(!this.state.id)return r.a.createElement("h1",null,"Loading...");var t=this.convertToData("priority"),a=this.convertToData("status"),n=this.state,o=n.name,s=n.ElGroupSettings,c=n.elGroupColors,i=this.props,l=i.group,u=i.index;return r.a.createElement(Y.b,{draggableId:l.id,index:u},(function(n,i){return r.a.createElement("section",Object.assign({key:l.id,className:"group ".concat(window.innerWidth>450?"padding-y-45 padding-x-30":"padding-y-15")},n.draggableProps,{ref:n.innerRef}),r.a.createElement("div",{className:"group-header-container flex space-between align-center"},r.a.createElement("div",{className:"group-header-left align-center flex relative"},r.a.createElement(je.b,{style:{color:l.color},className:"drop-down-menu-icon",onClick:e.handleMenuOpen}),r.a.createElement(V.a,{role:"menuContainer",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:e.handleMenuClose},r.a.createElement(H.a,{onClick:function(){e.props.onRemoveGroup(l.id)}},r.a.createElement(pe.b,{className:"delete-group-icon"})," Delete Group"),r.a.createElement(H.a,{onClick:e.handleColorsToggle},r.a.createElement(De.a,{className:"color-group-icon"})," Change Color")),c&&r.a.createElement("div",{className:"color-picker absolute flex wrap justify-center align-center"},r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#ffcbcb")},className:"color-pick",style:{backgroundColor:"#ffcbcb"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#f0a500")},className:"color-pick",style:{backgroundColor:"#f0a500"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#70adb5")},className:"color-pick",style:{backgroundColor:"#70adb5"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1a1c20")},className:"color-pick",style:{backgroundColor:"#1a1c20"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#9d65c9")},className:"color-pick",style:{backgroundColor:"#9d65c9"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#931a25")},className:"color-pick",style:{backgroundColor:"#931a25"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#7ea04d")},className:"color-pick",style:{backgroundColor:"#7ea04d"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#838383")},className:"color-pick",style:{backgroundColor:"#838383"}}),r.a.createElement("div",{onClick:function(){return e.onChangeGroupColor("#1d2d50")},className:"color-pick",style:{backgroundColor:"#1d2d50"}})),r.a.createElement("div",Object.assign({className:"drag-icon"},n.dragHandleProps),r.a.createElement(pe.c,null)),r.a.createElement("h1",{style:{color:l.color},className:"group-title"},r.a.createElement(Ne.a,{onFocus:e.focusText,className:"content-editable cursor-initial",innerRef:e.contentEditable,html:o,disabled:!1,onChange:e.handleChange,onBlur:function(){e.props.onEditGroup(l.id,e.state.name,"name")},onKeyDown:function(e){"Enter"===e.key&&e.target.blur()}}))),r.a.createElement("div",Object.assign({className:"group-header-right flex"},n.dragHandleProps),r.a.createElement("h3",{style:{color:e.props.group.color}},"Members"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Status"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Due-Date"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Priority"),r.a.createElement("h3",{style:{color:e.props.group.color}},"Tags"))),r.a.createElement(Y.c,{droppableId:l.id,type:"task"},(function(t,a){return r.a.createElement("div",Object.assign({className:"task-list ".concat(a.isDraggingOver?"drag-over":""),ref:t.innerRef},t.droppableProps),l.tasks.map((function(t,a){return r.a.createElement(st,{onToggleUpdates:e.props.onToggleUpdates,onEditTask:e.props.onEditTask,index:a,onRemoveTask:e.props.onRemoveTask,key:t.id,group:l,task:t,users:e.props.users})})),t.placeholder)})),r.a.createElement("div",{className:"task task-add"},r.a.createElement("div",{className:"task-color",style:{backgroundColor:l.color}}),r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.props.onAddTask(l.id,e.elInputAdd.current.value),e.elInputAdd.current.value=""},action:""},r.a.createElement("input",{ref:e.elInputAdd,className:"padding-x-30",placeholder:"+ Add Task",type:"text"}))),window.innerWidth>450&&r.a.createElement("section",{className:"group-precent-container flex"},r.a.createElement("div",{className:"group-precent flex"},a),r.a.createElement("div",{className:"group-precent flex"},t)))}))}}]),a}(n.Component),it=a(369),lt=a(366);var ut={hideSnackbar:me},dt=Object(c.b)((function(e){return{isSnackbarShown:e.systemReducer.isSnackbarShown,snackbarShown:e.systemReducer.snackbarTxt}}),ut)((function(e){var t=e.isSnackbarShown,a=e.snackbarShown;return r.a.createElement(it.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:t,autoHideDuration:3e3,message:a,action:r.a.createElement(lt.a,{style:{color:"#f2f1dfb0"},onClick:e.hideSnackbar},"Close")})})),mt=a(178),pt=a.n(mt);var ft=a(179),gt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isMenuShown:!1},e.toggleMenuModal=function(){e.setState({isMenuShown:!e.state.isMenuShown})},e.closeMenuModal=function(){e.setState({isMenuShown:!1})},e}return Object(d.a)(a,[{key:"render",value:function(){console.log("props id:",this.props);var e=this.props,t=e.loggedUser,a=e.onAddGroup,n=e.params;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:" flex align-center space-between"},r.a.createElement(ft.a,{onClick:this.toggleMenuModal}),r.a.createElement("h1",null,this.props.boardName),r.a.createElement("button",{onClick:a},"New Group")),r.a.createElement("section",{className:"".concat(this.state.isMenuShown&&"animate-menu-modal"," menu-modal flex column align-center")},r.a.createElement(i.b,{to:"/"},r.a.createElement("h3",null,"Home")),r.a.createElement(i.b,{to:"/boards"},r.a.createElement("h3",null,"Boards List")),n&&r.a.createElement(i.b,{to:"/mob-activities/".concat(n.id)},r.a.createElement("h3",null,"Activities")),r.a.createElement(i.b,{to:"/myweek"},r.a.createElement("h3",null,"My Week")),r.a.createElement(i.b,{to:"/user/".concat(t._id)},r.a.createElement("h3",null,"My Profile")),r.a.createElement(i.b,{to:"/login"},r.a.createElement("h3",null,"Logout"))),this.state.isMenuShown&&r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.closeMenuModal}))}}]),a}(r.a.Component),ht=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={boardId:"",txt:""},e.onEditBoard=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.props.loggedUser,e.props.updateBoard(a,r,o),q.notifyUsers("".concat(a.name,": ").concat(r),a.members,o),e.displayPopup("Updated board.");case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.applyFilter=function(t,a){var n=JSON.parse(JSON.stringify(t));function r(e){n.groups=n.groups.map((function(t){return t.tasks=t.tasks.filter(e),t}))}return a.groupId&&(n.groups=n.groups.filter((function(e){return e.id===a.groupId}))),a.memberId&&r((function(e){return e.members.some((function(e){return e._id===a.memberId}))})),a.taskPriority&&r((function(e){return e.priority.toLowerCase()===a.taskPriority.toLowerCase()})),a.taskStatus&&r((function(e){return e.status.toLowerCase()===a.taskStatus.toLowerCase()})),a.dueDate&&r((function(e){return e.dueDate===a.dueDate})),e.state.txt&&r((function(t){return t.name.toLowerCase().includes(e.state.txt.toLowerCase())||t.tags.some((function(t){return t.txt.toLowerCase().includes(e.state.txt.toLowerCase())}))})),n},e.onAddGroup=Object(h.a)(g.a.mark((function t(){var a,n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("ADDING GROUP"),a=e.props.loggedUser,n=e._getCurrBoard();try{e.props.addGroup(n,e.props.loggedUser),q.notifyUsers("".concat(n.name,": ").concat(a.fullName," added a group."),n.members,a),e.props.clearFilter(),e.displayPopup("Added group.")}catch(r){console.log("Error",r)}e.props.history.push("/board/".concat(e.state.boardId));case 5:case"end":return t.stop()}}),t)}))),e.onRemoveGroup=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.loggedUser,r=e._getCurrBoard(),o=r.groups.find((function(e){return e.id===a})),s="".concat(r.name,": ").concat(n.fullName," removed group ").concat(o.name);try{e.props.removeGroup(a,r,e.props.loggedUser),q.notifyUsers(s,r.members,n),e.displayPopup("Removed group.")}catch(c){console.log("Error",c)}case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onEditGroup=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s,c,i,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=e.props.loggedUser,s=e._getCurrBoard(),(c=s.groups.find((function(e){return e.id===a})))[r]!==n){t.next=5;break}return t.abrupt("return");case 5:i=c[r],c[r]=n;try{l="".concat(c.name,": ").concat(o.fullName," Changed ").concat(r," from ").concat(i," to ").concat(n),e.props.editGroup(c,s,l,o),q.notifyUsers(l,s.members,o),e.displayPopup("Updated group.")}catch(u){console.log("Error",u)}case 8:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.onRemoveTask=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.loggedUser,o=e._getCurrBoard();try{s=n.tasks.find((function(e){return e.id===a})),c="".concat(r.fullName," Removed the task ").concat(s.name," from ").concat(n.name),e.props.removeTask(a,o,n,r),q.notifyUsers(c,o.members,r),e.displayPopup("Removed task.")}catch(i){console.log("Error",i)}case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onAddTask=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n||(n="New task"),r=e.props.loggedUser,console.log("user:",r),o=e._getCurrBoard(),s=o.groups.find((function(e){return e.id===a})),c=" ".concat(o.name,": ").concat(r.fullName," Added a task to ").concat(s.name);try{e.props.addTask(a,n,o,r),q.notifyUsers(c,o.members,r),e.props.clearFilter(),e.displayPopup("Added task.")}catch(i){console.log("Error",i)}case 7:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onEditTask=function(){var t=Object(h.a)(g.a.mark((function t(a,n,r){var o,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!pt.a.isEqual(a,n)){t.next=2;break}return t.abrupt("return",console.log("same"));case 2:o=e._getCurrBoard(),s=e.props.loggedUser,e.props.editTask(a,o,r,e.props.loggedUser),q.notifyUsers("".concat(o.name,": ").concat(r),o.members,s),e.displayPopup("Updated task.");case 7:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),e.onDragEnd=function(){var t=Object(h.a)(g.a.mark((function t(a){var n,r,o,s,c,i,l,u,d,m,p,f,h,b,E,y,k,N,w,O,x,C;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=a.destination,r=a.source,o=a.draggableId,s=a.type,n){t.next=3;break}return t.abrupt("return");case 3:if(n.droppableId!==r.droppableId||n.index!==r.index){t.next=5;break}return t.abrupt("return");case 5:if(c=e._getCurrBoard(),"group"===s){i=Array.from(c.groups),l=i.find((function(e){return e.id===o})),i.splice(r.index,1),i.splice(n.index,0,l),c.groups=i;try{e.props.updateBoard(c)}catch(g){console.log("Error",g)}}else if(u=c.groups.find((function(e){return e.id===r.droppableId})),d=c.groups.find((function(e){return e.id===n.droppableId})),u.id===d.id){m=Array.from(u.tasks),p=u.tasks.find((function(e){return e.id===o})),m.splice(r.index,1),m.splice(n.index,0,p),f=Object(v.a)(Object(v.a)({},u),{},{tasks:m}),h=c.groups.findIndex((function(e){return e.id===f.id})),c.groups.splice(h,1,f);try{e.props.updateBoard(c)}catch(g){console.log("Error",g)}}else{(b=Array.from(u.tasks)).splice(r.index,1),E=Object(v.a)(Object(v.a)({},u),{},{tasks:b}),y=Array.from(d.tasks),k=u.tasks.find((function(e){return e.id===o})),y.splice(n.index,0,k),N=Object(v.a)(Object(v.a)({},d),{},{tasks:y}),w=c.groups.findIndex((function(e){return e.id===E.id})),O=c.groups.findIndex((function(e){return e.id===N.id})),c.groups.splice(w,1,E),c.groups.splice(O,1,N);try{x=e.props.loggedUser,C="".concat(x.fullName," Moved ").concat(k.name," from ").concat(E.name," to ").concat(N.name),e.props.updateBoard(e._getCurrBoard(),C,x),q.notifyUsers("".concat(c.name,": ").concat(C),c.members,x)}catch(g){console.log("Error",g)}}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleSearch=function(t){e.setState({txt:t.target.value})},e.handleBoardBarSearch=function(t){e.setState({boardBarSearch:t})},e._getCurrBoard=function(){return e.props.boards.find((function(t){return t._id===e.state.boardId}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{setTimeout(Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.props.boards&&t.props.boards.length){e.next=12;break}return e.next=3,t.props.loadBoards();case 3:if(e.prev=3,t.props.users&&t.props.users.length){e.next=7;break}return e.next=7,t.props.loadUsers();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.log("Error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])}))),2e3)}catch(a){console.log("Error",a)}this.setState({boardId:this.props.match.params.id});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"displayPopup",value:function(e){console.log("showing popup:",e),this.props.showSnackbar(e),setTimeout(this.props.hideSnackbar,3e3)}},{key:"componentDidUpdate",value:function(e,t){e.match.params.id!==this.props.match.params.id&&(this.props.clearFilter(),this.setState({boardId:this.props.match.params.id}))}},{key:"render",value:function(){var e=this,t=this._getCurrBoard(),a=this.props,n=a.users,o=a.filterBy;if(!t)return r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif"}));console.log("SHOW ME PARAMS FROM BOARD",this.props.match.params);var s=this.applyFilter(t,o);return r.a.createElement("section",{className:"board ".concat(window.innerWidth>450?"flex":"flex column")},window.innerWidth>450?r.a.createElement(r.a.Fragment,null,r.a.createElement(We,null),r.a.createElement(ve,{handleBoardBarSearch:this.handleBoardBarSearch})):r.a.createElement(gt,{boardName:t.name,onAddGroup:this.onAddGroup,params:this.props.match.params,loggedUser:this.props.loggedUser}),r.a.createElement("div",{className:"board-container"},window.innerWidth>450&&r.a.createElement(Re,{loggedUser:this.props.loggedUser,board:t,onAddGroup:this.onAddGroup,onEditBoard:this.onEditBoard,handleSearch:this.handleSearch,users:n}),r.a.createElement("div",{className:"groups-container ".concat(window.innerwidth>450&&"padding-x-30"),style:{height:"".concat(window.innerWidth<450&&"94vh")}},r.a.createElement(Y.a,{onDragEnd:this.onDragEnd},r.a.createElement(Y.c,{droppableId:t._id,type:"group"},(function(a,n){return r.a.createElement("div",Object.assign({className:"group-list",ref:a.innerRef},a.droppableProps),s.groups.map((function(a,n){return r.a.createElement(ct,{key:a.id,index:n,onEditTask:e.onEditTask,onAddTask:e.onAddTask,onRemoveTask:e.onRemoveTask,onRemoveGroup:e.onRemoveGroup,onEditGroup:e.onEditGroup,onChangeGroupColor:e.onChangeGroupColor,group:a,users:t.members})})))}))))),r.a.createElement(dt,null))}}]),a}(n.Component),bt={loadBoards:L,addGroup:function(e,t){return function(a){try{a({type:"SET_BOARD",board:M.addGroup(e,t)})}catch(n){throw console.log("boardActions: Couldn't add group"),n}}},removeGroup:function(e,t,a){return function(n){try{n({type:"SET_BOARD",board:M.removeGroup(e,t,a)})}catch(r){throw console.log("boardActions: Couldn't remove group"),r}}},addTask:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.addTask(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't add task"),o}}},removeTask:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.removeTask(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't add task"),o}}},editTask:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.updateTask(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't edit task"),o}}},editGroup:function(e,t,a,n){return function(r){try{r({type:"SET_BOARD",board:M.updateGroup(e,t,a,n)})}catch(o){throw console.log("boardActions: Coulnd't edit group"),o}}},updateBoard:I,showSnackbar:de,hideSnackbar:me,loadUsers:ie,clearFilter:function(){return function(e){e({type:"SET_FILTER",filter:{}})}},groupChanges:function(e,t,a){return function(){var n=Object(h.a)(g.a.mark((function n(r){var o,s,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,o=M.handleBoardChanges(e,t,a),r({type:"SET_BOARD",board:o}),n.next=5,q.loadUsers();case 5:s=n.sent,c={byUser:{fullName:t.fullName,imgUrl:t.imgUrl},content:"".concat(a.name,": ").concat(e),createdAt:Date.now()},a.members.forEach((function(e){if(e._id!==t._id){var a=s.find((function(t){return t._id===e._id}));a.notifications.unshift(c),q.updateUser(a),A.emit("send-notif",{memberId:e._id,notification:c})}})),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(0),console.log("boardActions: Couldn't send activities/notif"),n.t0;case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()}},vt=Object(c.b)((function(e){return{boards:e.boardReducer.boards,users:e.userReducer.users,loggedUser:e.userReducer.loggedUser,filterBy:e.boardReducer.filterBy}}),bt)(ht),Et=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).goToBoard=function(t){e.props.history.push("/board/".concat(t))},e.onAddBoard=function(){e.props.addBoard(e.props.loggedUser)},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.props.boards&&this.props.boards.length){e.next=13;break}return e.next=4,this.props.loadBoards();case 4:if(e.prev=4,this.props.users&&this.props.users.length){e.next=8;break}return e.next=8,this.props.loadUsers();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),console.log("Error",e.t0);case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(0),console.log("Error",e.t1);case 18:case"end":return e.stop()}}),e,this,[[0,15],[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return 0===this.props.boards.length?r.a.createElement("h1",null,"Loading..."):r.a.createElement(r.a.Fragment,null,r.a.createElement(gt,{loggedUser:this.props.loggedUser}),r.a.createElement("div",{className:"boards-list flex column align-center relative"},this.props.boards.map((function(t){return r.a.createElement("div",{key:t._id,className:"board-details flex column",onClick:function(){return e.goToBoard(t._id)}},r.a.createElement("div",{className:"board-details-header flex  space-between"},r.a.createElement("h2",null,t.name),r.a.createElement("div",{className:"board-members-imgs"},t.members.map((function(e){return r.a.createElement("img",{className:"member-img",key:e._id,src:e.imgUrl,alt:""})})))),r.a.createElement("div",{className:"board-details-main flex column wrap"},t.groups.map((function(e){return r.a.createElement("p",{style:{color:e.color},key:e.id},e.name)}))))})),r.a.createElement(J.d,{onClick:this.onAddBoard})))}}]),a}(n.Component),yt={loadBoards:L,addBoard:F,loadUsers:ie},kt=Object(c.b)((function(e){return{boards:e.boardReducer.boards,users:e.userReducer.users,loggedUser:e.userReducer.loggedUser}}),yt)(Et),Nt=a(30),wt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onLogin=function(){var t=Object(h.a)(g.a.mark((function t(a,n){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),t.next=4,e.props.login(a);case 4:e.props.loggedUser&&e.props.history.push("/board/".concat(e.props.boards[0]._id));case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"sign-login"},r.a.createElement(Nt.d,{initialValues:{username:"",password:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),t},onSubmit:this.onLogin},r.a.createElement(Nt.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(_e.c,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(Nt.b,{className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(Nt.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(Nt.b,{className:"sign-login-input",type:"text",name:"password"})),r.a.createElement(Nt.a,{name:"password",component:"span"}),r.a.createElement("button",{type:"submit"},"Login"),r.a.createElement("a",{href:"/#/signup"},"Don't have an account? sign up here."),r.a.createElement("button",{className:"guest-button",onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement("div",{"data-title":"Back to home",className:"go-back"},r.a.createElement(i.b,{to:"/"},r.a.createElement(_e.a,null))))}}]),a}(n.Component),Ot={login:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.login(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't login"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:le,loadBoards:L},xt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),Ot)(Object(l.f)(wt)),Ct=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onSignup=function(){var t=Object(h.a)(g.a.mark((function t(a,n){var r,o,s,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(0,n.resetForm)(),r=a.username,o=a.password,s=a.email,c=a.fullName,t.prev=3,t.next=6,e.props.signup({username:r,password:o,email:s,fullName:c});case 6:e.props.history.push("/board/".concat(e.props.boards[0]._id)),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(3),console.log("Signup: Couldn't sign up"),t.t0;case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,a){return t.apply(this,arguments)}}(),e.onGuestLogin=Object(h.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.guestLogin();case 2:e.props.history.push("/board/".concat(e.props.boards[0]._id));case 3:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.loadBoards()}},{key:"render",value:function(){return r.a.createElement("div",{className:"sign-login"},r.a.createElement(Nt.d,{initialValues:{username:"",password:"",confirm:"",email:"",fullName:""},validate:function(e){var t={};return e.username||(t.username="Required"),e.fullName||(t.fullName="Required"),e.password||(t.password="Required"),e.confirm!==e.password&&(t.confirm="Doesn't match password"),/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.email.toLowerCase())||(t.email="Invalid email address"),t},onSubmit:this.onSignup},r.a.createElement(Nt.c,{className:"sign-login-form flex column align-center space-around"},r.a.createElement(_e.c,null),r.a.createElement("section",null,r.a.createElement("legend",null,"Username *"),r.a.createElement(Nt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"username"})),r.a.createElement(Nt.a,{name:"username",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Full name *"),r.a.createElement(Nt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"fullName"})),r.a.createElement(Nt.a,{name:"fullName",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Email *"),r.a.createElement(Nt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"email"})),r.a.createElement(Nt.a,{name:"email",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Password *"),r.a.createElement(Nt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"password"})),r.a.createElement(Nt.a,{name:"password",component:"span"}),r.a.createElement("section",null,r.a.createElement("legend",null,"Confirm password *"),r.a.createElement(Nt.b,{autoComplete:"something",className:"sign-login-input",type:"text",name:"confirm"})),r.a.createElement(Nt.a,{name:"confirm",component:"span"}),r.a.createElement("button",{type:"submit"},"Signup"),r.a.createElement("a",{href:"/#/login"},"Already have an account? Login here!"),r.a.createElement("button",{className:"guest-button",onClick:this.onGuestLogin},"Or try as a guest!"))),r.a.createElement("div",{"data-title":"Back to home",className:"go-back"},r.a.createElement(i.b,{to:"/"},r.a.createElement(_e.a,null))))}}]),a}(n.Component),St={signup:function(e){return function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,q.signup(e);case 3:n=t.sent,a({type:"SET_USER",user:n}),t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(0),console.log("userActions: Couldn't signup"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},guestLogin:le,loadBoards:L},jt=Object(c.b)((function(e){return{loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),St)(Object(l.f)(Ct)),Ut=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isModalOpen:!1,user:{_id:"",email:"",username:"",passowrd:"",fullName:"",imgUrl:""}},e.toggleModal=function(){e.setState({isModalOpen:!e.state.isModalOpen})},e.handleChange=function(t){var a=t.target;e.setState({user:Object(v.a)(Object(v.a)({},e.state.user),{},Object(Oe.a)({},a.name,a.value))})},e.updateProfile=function(t){t.preventDefault(),e.props.updateUser(e.state.user),e.toggleModal()},e.uploadImg=function(){var t=Object(h.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe.uploadImg(a.target.files[0]);case 2:n=t.sent,e.setState({user:Object(v.a)(Object(v.a)({},e.state.user),{},{imgUrl:n.url})});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(g.a.mark((function e(){var t=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.props.loadBoards(),setTimeout(Object(h.a)(g.a.mark((function e(){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.getUserById(t.props.match.params.id);case 2:a=e.sent,t.setState({user:Object(v.a)({},a)});case 4:case"end":return e.stop()}}),e)}))),2e3);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.user,t=e.email,a=e.fullName,n=e.username,o=e.imgUrl,s=e._id;if(!s)return r.a.createElement("div",{className:"loader-container flex justify-center align-center"},r.a.createElement("img",{src:"loading.gif"}));var c=this.props.loggedUser;return r.a.createElement("section",{className:"user-profile"},r.a.createElement(We,null),r.a.createElement(ve,null),r.a.createElement("div",{className:"user-container"},r.a.createElement("header",{className:"header-container padding-x-15 padding-y-15 flex justify-center  align-center"},r.a.createElement("img",{className:"user-profile-big",src:o,alt:""})),r.a.createElement("div",{className:"user-details-container padding-x-30 padding-y-45 align-center  flex column"},c._id===s?r.a.createElement("h2",{onClick:this.toggleModal,className:"clickable-header"},"Edit Profile"):"",r.a.createElement("div",{className:"user-details-inner-container"},r.a.createElement("h3",null,"Email: ",r.a.createElement("span",{className:"span-user-details"},t)),r.a.createElement("h3",null,"Full Name: ",r.a.createElement("span",{className:"span-user-details"},a)),r.a.createElement("h3",null,"Username: ",r.a.createElement("span",{className:"span-user-details"},n)," "))),r.a.createElement(Se.a,{in:this.state.isModalOpen},r.a.createElement("div",{className:"modal-screen flex justify-center align-center"},r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"user-modal-header padding-x-15 padding-y-15 flex justify-center align-center"},r.a.createElement("label",null," ",this.state.user.imgUrl?r.a.createElement("img",{className:"user-profile-big",src:this.state.user.imgUrl,alt:"profile-img"}):r.a.createElement("div",null,this.props.loggedUser.fullName),r.a.createElement("input",{type:"file",onChange:this.uploadImg,hidden:!0}))),r.a.createElement("div",{className:"user-modal-main"},r.a.createElement("form",{className:"form-container flex justify-center column  align-center",onSubmit:this.updateProfile},r.a.createElement("input",{value:this.state.user.email,onChange:this.handleChange,name:"email",placeholder:"Email",type:"email"}),r.a.createElement("input",{value:this.state.user.username,onChange:this.handleChange,name:"username",placeholder:"Username",type:"text"}),r.a.createElement("input",{value:this.state.user.password,onChange:this.handleChange,name:"password",placeholder:"Password",type:"password"}),r.a.createElement("input",{value:this.state.user.fullName,onChange:this.handleChange,name:"fullName",placeholder:"Full Name",type:"text"}),r.a.createElement("button",{onClick:this.updateProfile},"Save Changes"),r.a.createElement("button",{type:"button",className:"secondary-btn",onClick:this.toggleModal},"Cancel"))))))))}}]),a}(n.Component),At={loadBoards:L,updateUser:ue},Mt=Object(c.b)((function(e){return{modal:e.systemReducer.modal,loggedUser:e.userReducer.loggedUser,boards:e.boardReducer.boards}}),At)(Ut);var Tt=Object(l.f)((function(e){function t(t){e.history.push("/user/".concat(t))}var a=e.tasks,n=e.header;return r.a.createElement("div",{className:"upcoming-tasks"},r.a.createElement("h2",{className:"tasks-header"},"".concat(n,": (").concat(a.length,")")),a.map((function(a){return r.a.createElement("div",{key:a.id,className:"task-preview space-between align-center"},r.a.createElement("div",{className:"left-column"},r.a.createElement("p",{className:"task-preview-name"},a.name),r.a.createElement("p",{className:"task-location"},"At: ",r.a.createElement("span",{onClick:function(){return e.history.push("/board/".concat(a.boardId))}},"".concat(a.boardName," > ").concat(a.groupName)))),r.a.createElement("section",{className:"right-column flex align-center space-between"},r.a.createElement("div",{className:"user-img-container flex justify-center align-center"},0!==a.members.length&&(a.members[0].imgUrl?r.a.createElement("img",{onClick:function(){return t(a.members[0]._id)},alt:"profile",src:a.members[0].imgUrl}):r.a.createElement("div",{onClick:function(){return t(a.members[0]._id)},className:"member-letter"},a.members[0].fullName.charAt(0).toUpperCase()))),r.a.createElement("div",{className:"deadline-container flex align-center",onClick:function(){return e.history.push("/board/".concat(a.boardId))}},r.a.createElement("h2",null,(n=a.dueDate,Ce()(n).isAfter(Ce()().add(1,"day").endOf("day"))?Ce()(n).format("MMM DD"):Ce()(n).isBefore(Ce()().endOf("day"))?"Today":"Tomorrow")))));var n})))})),Dt=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={searchVal:""},e.handleChange=function(t){var a=t.target;e.setState({searchVal:a.value})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.props.boards&&this.props.boards.length||this.props.loadBoards()}},{key:"getUpcomingTasks",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=this.props,r=n.boards,o=n.loggedUser;return r.forEach((function(n){n.groups.forEach((function(r){a.push.apply(a,Object(b.a)(r.tasks.filter((function(a){a.boardId=n._id,a.boardName=n.name,a.groupName=r.name;var s=a.members.some((function(e){return e._id===o._id})),c=!t||Ce()(a.dueDate).isAfter(Ce()().add(t,"days").endOf("day"));return Ce()(a.dueDate).isBefore(Ce()().add(e,"days").startOf("day"))&&c&&s}))))}))})),a}},{key:"applySearch",value:function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))}},{key:"render",value:function(){var e=this.getUpcomingTasks(1),t=this.getUpcomingTasks(7,1),a=this.state.searchVal,o=this.props.loggedUser.fullName.split(" ")[0],s=e.length+t.length;return a&&(e=this.applySearch(e,a),t=this.applySearch(t,a)),r.a.createElement("section",{className:"my-week flex"},r.a.createElement(We,null),r.a.createElement(ve,null),r.a.createElement("div",{className:"my-week-container flex column space around"},r.a.createElement("div",{className:"my-week-header flex column space-around"},r.a.createElement("div",{className:"flex align-center space-around"},r.a.createElement("img",{src:"my-week-calendar.png",alt:""}),r.a.createElement("section",{className:"greeting-container"},r.a.createElement("h1",null,"Hey ".concat(o,",")),r.a.createElement("h1",null,s?"You have ".concat(s," assignments this week."):"You have no assignments this week")))),r.a.createElement("input",{className:"task-search",onChange:this.handleChange,value:a,type:"text",placeholder:"search"}),s?r.a.createElement(n.Fragment,null,r.a.createElement(Tt,{header:"Today",tasks:e}),r.a.createElement(Tt,{header:"Upcoming",tasks:t})):r.a.createElement("h1",{className:"no-tasks"},"No tasks left for this week")))}}]),a}(n.Component),Bt={loadBoards:L},Rt=Object(c.b)((function(e){return{boards:e.boardReducer.boards,loggedUser:e.userReducer.loggedUser}}),Bt)(Dt),_t=function(e){Object(m.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOrderReversed:!1,isFilterOpen:!1,filterBy:{},searchVal:"",isActivitiesShown:!0,isActivitiesNotReadShown:!0},e.getBoardById=function(t){var a=e.props.boards.find((function(e){return e._id===t}));e.setState(Object(v.a)(Object(v.a)({},e.state),{},{board:a}))},e.handleChange=function(t){var a=t.target;console.log("Handling change"),e.setState({searchVal:a.value})},e.toggleFilter=function(){e.setState({isFilterOpen:!e.state.isFilterOpen})},e.toggleActivities=function(){e.setState({isActivitiesShown:!e.state.isActivitiesShown})},e.toggleActivitiesNotRead=function(){e.setState({isActivitiesNotReadShown:!e.state.isActivitiesNotReadShown})},e.onClearLog=function(){var t=Object(v.a)(Object(v.a)({},e.state.board),{},{activityLog:[]});e.setState({board:t},(function(){e.props.updateBoard(t)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=Object(h.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,this.props.boards&&this.props.boards.length){e.next=4;break}return e.next=4,this.props.loadBoards();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("Error",e.t0);case 9:this.getBoardById(this.props.match.params.id);case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"onSetFilter",value:function(e,t){var a=Object(v.a)({},this.state.filterBy);a[e]===t&&(t=""),this.setState({filterBy:Object(v.a)(Object(v.a)({},a),{},Object(Oe.a)({},e,t))})}},{key:"getActivityDates",value:function(){var e=this.state.board.activityLog.reduce((function(e,t){return e[Ce()(t.createdAt).format("DD MMM")]="",e}),{});return Object.keys(e)}},{key:"getActivityMembers",value:function(){var e=this.state.board.activityLog.reduce((function(e,t){return e[t.byUser.fullName]="",e}),{});return Object.keys(e)}},{key:"applyFilter",value:function(e){var t=Object(b.a)(e),a=this.state,n=a.filterBy,r=a.searchVal;return n.date&&(t=t.filter((function(e){return Ce()(e.createdAt).format("DD MMM")===n.date}))),n.member&&(t=t.filter((function(e){return e.byUser.fullName===n.member}))),r&&(t=t.filter((function(e){return e.desc.toLowerCase().includes(r)||e.byUser.fullName.toLowerCase().includes(r)}))),t}},{key:"render",value:function(){var e=this;if(!this.state.board)return r.a.createElement("h1",null,"Loading...");var t=this.state,a=t.isFilterOpen,o=t.filterBy,s=t.searchVal,c=Object(we.a)(this.activities,2),l=c[0],u=c[1],d=this.getActivityDates(),m=this.getActivityMembers();return l=this.applyFilter(l),u=this.applyFilter(u),r.a.createElement("section",{className:"activities flex column"},r.a.createElement("header",{className:"padding-x-15 padding-y-15"},r.a.createElement(i.b,{to:"/board/".concat(this.props.match.params.id)},r.a.createElement(pe.a,null)),r.a.createElement("h1",null,r.a.createElement("span",null,this.props.boardName)," Log"),r.a.createElement("div",{className:"filters-container space-between flex align-center"},r.a.createElement("input",{value:s,onChange:this.handleChange,type:"text",placeholder:"Search"}),r.a.createElement("div",{className:"filter-outer-container flex relative"},r.a.createElement("button",{className:"flex align-center",onClick:this.toggleFilter},r.a.createElement(ye.c,null)," Filter"),a&&r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"modal-screen-wrapper",onClick:this.toggleFilter}),r.a.createElement(Se.a,{in:!0},r.a.createElement("div",{className:"filter-modal flex absolute"},r.a.createElement("section",{className:"activity-member-filter"},r.a.createElement("h3",null,"Member"),m.map((function(t,a){return r.a.createElement("button",{className:o.member===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("member",t)}},t)}))),r.a.createElement("section",{className:"activity-date-filter"},r.a.createElement("h3",null,"Date"),r.a.createElement("div",{className:"filter-list flex justify-center align-center column"},d.map((function(t,a){return r.a.createElement("button",{className:o.date===t?"remove-filter-btn":"",key:a,onClick:function(){return e.onSetFilter("date",t)}},t)}))))))),r.a.createElement("button",{onClick:this.onClearLog},"Clear Log")))),r.a.createElement("div",{className:"all-activities-container"},r.a.createElement("div",{className:"activity-list-not-read column flex  padding-y-15"},r.a.createElement("h1",{className:"flex space-between"},"New Activities (",u.length,")",r.a.createElement(je.a,{className:this.state.isActivitiesNotReadShown?" toggle-btn rotate0":" toggle-btn rotate90",onClick:this.toggleActivitiesNotRead})),this.state.isActivitiesNotReadShown&&0!==u.length&&u.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Ce()(e.createdAt).format("DD MMM"))),r.a.createElement("img",{src:e.byUser.imgUrl,alt:""}),r.a.createElement("h2",null,e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))})),0===u.length&&r.a.createElement("h3",{className:"padding-x-15"},"No new board activities!")),r.a.createElement("div",{className:"activity-list column flex  padding-y-15"},r.a.createElement("h1",{className:"flex space-between"},"Activities Read (",l.length,")",r.a.createElement(je.a,{onClick:this.toggleActivities,className:this.state.isActivitiesShown?"toggle-btn rotate0":"toggle-btn rotate90"})),this.state.isActivitiesShown&&0!==l.length&&l.map((function(e,t){return r.a.createElement("div",{key:t,className:"activity  space-between flex align-center padding-y-15 "},r.a.createElement("div",{className:"user-img-container flex align-center"},r.a.createElement("div",{className:"date-container"},r.a.createElement("p",{className:"date-created"},Ce()(e.createdAt).format("DD MMM"))),r.a.createElement("img",{src:e.byUser.imgUrl,alt:""}),r.a.createElement("h2",null,e.byUser.fullName)),r.a.createElement("div",{className:"activity-desc-container flex align-center"},r.a.createElement("p",null,e.desc)))})),0===l.length&&r.a.createElement("h3",{className:"padding-x-15"},"No read board activities!"))))}},{key:"activities",get:function(){var e=this.state.board.activityLog;return[e.filter((function(e){return e.isRead})),e.filter((function(e){return!e.isRead}))]}}]),a}(n.Component),Lt={loadBoards:L,updateBoard:I},It=[{path:"/",component:W},{path:"/boards",component:kt},{path:"/board/:id",component:vt},{path:"/login",component:xt},{path:"/signup",component:jt},{path:"/user/:id",component:Mt},{path:"/myweek",component:Rt},{path:"/mob-activities/:id",component:Object(c.b)((function(e){return{boards:e.boardReducer.boards}}),Lt)(_t)}];function Ft(){return A.setup(),r.a.createElement(i.a,null,r.a.createElement("main",{className:"app"},r.a.createElement(l.c,null,It.map((function(e){return r.a.createElement(l.a,{key:e.path,exact:!0,component:e.component,path:e.path})})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pt=a(40),Gt=a(182),Wt={boards:[],filterBy:{},isBoardbarShown:!0};var Yt={users:[],loggedUser:{_id:"5f68936cf878123b2cd354436ce96d",username:"guest",fullName:"guest",password:"",email:"guest@gmail.com",notifications:[]},userProfile:null};var Vt={isLoading:!1,isSnackbarShown:!1,snackbarTxt:""};var Ht=Object(Pt.c)({userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS":return Object(v.a)(Object(v.a)({},e),{},{users:t.users});case"SHOW_PROFILE":return Object(v.a)(Object(v.a)({},e),{},{userProfile:t.user});case"SET_USER":return Object(v.a)(Object(v.a)({},e),{},{loggedUser:t.user});default:return e}},boardReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(v.a)(Object(v.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});case"ADD_BOARD":return Object(v.a)(Object(v.a)({},e),{},{boards:[].concat(Object(b.a)(e.boards),[t.board])});case"SET_FILTER":return Object(v.a)(Object(v.a)({},e),{},{filterBy:t.filter});case"TOGGLE_BOARDBAR":return Object(v.a)(Object(v.a)({},e),{},{isBoardbarShown:!e.isBoardbarShown});default:return e}},systemReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"LOADING_START":return Object(v.a)(Object(v.a)({},e),{},{isLoading:!0});case"LOADING_DONE":return Object(v.a)(Object(v.a)({},e),{},{isLoading:!1});case"SHOW_SNACKBAR":return Object(v.a)(Object(v.a)({},e),{},{isSnackbarShown:!0,snackbarTxt:t.msg});case"HIDE_SNACKBAR":return Object(v.a)(Object(v.a)({},e),{},{isSnackbarShown:!1,snackbarTxt:""});default:return e}}}),Kt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Pt.d,Jt=Object(Pt.e)(Ht,Kt(Object(Pt.a)(Gt.a)));a(334);s.a.render(r.a.createElement(c.a,{store:Jt},r.a.createElement(Ft,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[214,1,2]]]);
//# sourceMappingURL=main.265725f9.chunk.js.map